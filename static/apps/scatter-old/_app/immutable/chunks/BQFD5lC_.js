const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CXQwCLcl.js","./DQ3-AlZS.js","./C2GHuDhf.js"])))=>i.map(i=>d[i]);
var Zv=Object.defineProperty;var Qv=(n,t,e)=>t in n?Zv(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var S=(n,t,e)=>Qv(n,typeof t!="symbol"?t+"":t,e);import{p as Jv}from"./8pmuhdS_.js";import{i as tS,d as eS,f as jh,g as iS,n as sS,j as nS,k as rS,p as aS,w as oS,t as Kh,e as lS,a as wh}from"./BJQIRh4O.js";import{n as hS,E as Qp,o as cS,aJ as Dn,aC as uS,l as Kn,v as fS,aM as dS,Q as pS,X as md,aN as mS,aO as gS,O as gd,aP as xS,aQ as yS,w as bS,g as _S,aR as wS,a7 as vS,y as SS,a8 as xd,a9 as yd,aa as AS,aS as CS,aT as TS,aH as MS,aG as PS,p as Zh,d as bd,aF as IS,i as Yn,G as vh,a as Qh,A as vr,F as kS,f as ES,c as Un,r as Wn,s as Nn,t as Sh}from"./CXdbV3RU.js";import{a as zs,i as RS,r as FS,_ as Jp}from"./DP_IGs4f.js";function Ah(n,t,...e){var i=n,s=Dn,r;hS(()=>{s!==(s=t())&&(r&&(uS(r),r=null),r=cS(()=>s(i,...e)))},Qp),Kn&&(i=fS)}function tm(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(t=0;t<s;t++)n[t]&&(e=tm(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function BS(){for(var n,t,e=0,i="",s=arguments.length;e<s;e++)(n=arguments[e])&&(t=tm(n))&&(i&&(i+=" "),i+=t);return i}function LS(n){return typeof n=="object"?BS(n):n??""}const _d=[...` 	
\r\fÂ \v\uFEFF`];function OS(n,t,e){var i=n==null?"":""+n;if(t&&(i=i?i+" "+t:t),e){for(var s in e)if(e[s])i=i?i+" "+s:s;else if(i.length)for(var r=s.length,o=0;(o=i.indexOf(s,o))>=0;){var l=o+r;(o===0||_d.includes(i[o-1]))&&(l===i.length||_d.includes(i[l]))?i=(o===0?"":i.substring(0,o))+i.substring(l+1):o=l}}return i===""?null:i}function Ka(n,t,e,i,s,r){var o=n.__className;if(Kn||o!==e){var l=OS(e,i,r);(!Kn||l!==n.getAttribute("class"))&&(l==null?n.removeAttribute("class"):t?n.className=l:n.setAttribute("class",l)),n.__className=e}else if(r)for(var u in r){var c=!!r[u];(s==null||c!==!!s[u])&&n.classList.toggle(u,c)}return r}const Pa=Symbol("class");function DS(n){if(Kn){var t=!1,e=()=>{if(!t){if(t=!0,n.hasAttribute("value")){var i=n.value;Ds(n,"value",null),n.value=i}if(n.hasAttribute("checked")){var s=n.checked;Ds(n,"checked",null),n.checked=s}}};n.__on_r=e,mS(e),nS()}}function YS(n,t){var e=n.__attributes??(n.__attributes={});e.checked!==(e.checked=t??void 0)&&(n.checked=t)}function NS(n,t){t?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function Ds(n,t,e,i){var s=n.__attributes??(n.__attributes={});Kn&&(s[t]=n.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&n.nodeName==="LINK")||s[t]!==(s[t]=e)&&(t==="style"&&"__styles"in n&&(n.__styles={}),t==="loading"&&(n[dS]=e),e==null?n.removeAttribute(t):typeof e!="string"&&em(n).includes(t)?n[t]=e:n.setAttribute(t,e))}function lI(n,t,e,i,s=!1,r=!1,o=!1){let l=Kn&&r;l&&md(!1);var u=t||{},c=n.tagName==="OPTION";for(var f in t)f in e||(e[f]=null);e.class?e.class=LS(e.class):e.class=null;var d=em(n),g=n.__attributes??(n.__attributes={});for(const _ in e){let v=e[_];if(c&&_==="value"&&v==null){n.value=n.__value="",u[_]=v;continue}if(_==="class"){var p=n.namespaceURI==="http://www.w3.org/1999/xhtml";Ka(n,p,v,i,t==null?void 0:t[Pa],e[Pa]),u[_]=v,u[Pa]=e[Pa];continue}var x=u[_];if(v!==x){u[_]=v;var y=_[0]+_[1];if(y!=="$$"){if(y==="on"){const M={},T="$$"+_;let P=_.slice(2);var b=rS(P);if(tS(P)&&(P=P.slice(0,-7),M.capture=!0),!b&&x){if(v!=null)continue;n.removeEventListener(P,u[T],M),u[T]=null}if(v!=null)if(b)n[`__${P}`]=v,jh([P]);else{let B=function(O){u[_].call(this,O)};u[T]=eS(P,n,B,M)}else b&&(n[`__${P}`]=void 0)}else if(_==="style"&&v!=null)n.style.cssText=v+"";else if(_==="autofocus")iS(n,!!v);else if(!r&&(_==="__value"||_==="value"&&v!=null))n.value=n.__value=v;else if(_==="selected"&&c)NS(n,v);else{var A=_;s||(A=sS(A));var C=A==="defaultValue"||A==="defaultChecked";if(v==null&&!r&&!C)if(g[_]=null,A==="value"||A==="checked"){let M=n;const T=t===void 0;if(A==="value"){let P=M.defaultValue;M.removeAttribute(A),M.defaultValue=P,M.value=M.__value=T?P:null}else{let P=M.defaultChecked;M.removeAttribute(A),M.defaultChecked=P,M.checked=T?P:!1}}else n.removeAttribute(_);else C||d.includes(A)&&(r||typeof v!="string")?n[A]=v:typeof v!="function"&&Ds(n,A,v)}_==="style"&&"__styles"in n&&(n.__styles={})}}}return l&&md(!0),u}var wd=new Map;function em(n){var t=wd.get(n.nodeName);if(t)return t;wd.set(n.nodeName,t=[]);for(var e,i=n,s=Element.prototype;s!==i;){e=gS(i);for(var r in e)e[r].set&&t.push(r);i=pS(i)}return t}const XS=()=>performance.now(),ys={tick:n=>requestAnimationFrame(n),now:()=>XS(),tasks:new Set};function im(){const n=ys.now();ys.tasks.forEach(t=>{t.c(n)||(ys.tasks.delete(t),t.f())}),ys.tasks.size!==0&&ys.tick(im)}function US(n){let t;return ys.tasks.size===0&&ys.tick(im),{promise:new Promise(e=>{ys.tasks.add(t={c:n,f:e})}),abort(){ys.tasks.delete(t)}}}function Ia(n,t){oS(()=>{n.dispatchEvent(new CustomEvent(t))})}function WS(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const t=n.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join("")}function vd(n){const t={},e=n.split(";");for(const i of e){const[s,r]=i.split(":");if(!s||r===void 0)break;const o=WS(s.trim());t[o]=r.trim()}return t}const zS=n=>n;function GS(n,t,e,i){var s=(n&CS)!==0,r=(n&TS)!==0,o=s&&r,l=(n&wS)!==0,u=o?"both":s?"in":"out",c,f=t.inert,d=t.style.overflow,g,p;function x(){var _=AS,v=gd;xd(null),yd(null);try{return c??(c=e()(t,(i==null?void 0:i())??{},{direction:u}))}finally{xd(_),yd(v)}}var y={is_global:l,in(){var _;if(t.inert=f,!s){p==null||p.abort(),(_=p==null?void 0:p.reset)==null||_.call(p);return}r||g==null||g.abort(),Ia(t,"introstart"),g=Ch(t,x(),p,1,()=>{Ia(t,"introend"),g==null||g.abort(),g=c=void 0,t.style.overflow=d})},out(_){if(!r){_==null||_(),c=void 0;return}t.inert=!0,Ia(t,"outrostart"),p=Ch(t,x(),g,0,()=>{Ia(t,"outroend"),_==null||_()})},stop:()=>{g==null||g.abort(),p==null||p.abort()}},b=gd;if((b.transitions??(b.transitions=[])).push(y),s&&aS){var A=l;if(!A){for(var C=b.parent;C&&(C.f&Qp)!==0;)for(;(C=C.parent)&&(C.f&xS)===0;);A=!C||(C.f&yS)!==0}A&&bS(()=>{_S(()=>y.in())})}}function Ch(n,t,e,i,s){var r=i===1;if(vS(t)){var o,l=!1;return SS(()=>{if(!l){var b=t({direction:r?"in":"out"});o=Ch(n,b,e,i,s)}}),{abort:()=>{l=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(e==null||e.deactivate(),!(t!=null&&t.duration))return s(),{abort:Dn,deactivate:Dn,reset:Dn,t:()=>i};const{delay:u=0,css:c,tick:f,easing:d=zS}=t;var g=[];if(r&&e===void 0&&(f&&f(0,1),c)){var p=vd(c(0,1));g.push(p,p)}var x=()=>1-i,y=n.animate(g,{duration:u});return y.onfinish=()=>{var b=(e==null?void 0:e.t())??1-i;e==null||e.abort();var A=i-b,C=t.duration*Math.abs(A),_=[];if(C>0){var v=!1;if(c)for(var M=Math.ceil(C/16.666666666666668),T=0;T<=M;T+=1){var P=b+A*d(T/M),B=vd(c(P,1-P));_.push(B),v||(v=B.overflow==="hidden")}v&&(n.style.overflow="hidden"),x=()=>{var O=y.currentTime;return b+A*d(O/C)},f&&US(()=>{if(y.playState!=="running")return!1;var O=x();return f(O,1-O),!0})}y=n.animate(_,{duration:C,fill:"forwards"}),y.onfinish=()=>{x=()=>i,f==null||f(i,1-i),s()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=Dn)},deactivate:()=>{s=Dn},reset:()=>{i===0&&(f==null||f(1,0))},t:()=>x()}}const VS=n=>n;function $S(n){const t=n-1;return t*t*t+1}function HS(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function qS(n){const t=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[n,"px"]}function jS(n,{delay:t=0,duration:e=400,easing:i=HS,amount:s=5,opacity:r=0}={}){const o=getComputedStyle(n),l=+o.opacity,u=o.filter==="none"?"":o.filter,c=l*(1-r),[f,d]=qS(s);return{delay:t,duration:e,easing:i,css:(g,p)=>`opacity: ${l-c*p}; filter: ${u} blur(${p*f}${d});`}}function hI(n,{delay:t=0,duration:e=400,easing:i=VS}={}){const s=+getComputedStyle(n).opacity;return{delay:t,duration:e,easing:i,css:r=>`opacity: ${r*s}`}}function cI(n,{delay:t=0,duration:e=400,easing:i=$S,axis:s="y"}={}){const r=getComputedStyle(n),o=+r.opacity,l=s==="y"?"height":"width",u=parseFloat(r[l]),c=s==="y"?["top","bottom"]:["left","right"],f=c.map(A=>`${A[0].toUpperCase()}${A.slice(1)}`),d=parseFloat(r[`padding${f[0]}`]),g=parseFloat(r[`padding${f[1]}`]),p=parseFloat(r[`margin${f[0]}`]),x=parseFloat(r[`margin${f[1]}`]),y=parseFloat(r[`border${f[0]}Width`]),b=parseFloat(r[`border${f[1]}Width`]);return{delay:t,duration:e,easing:i,css:A=>`overflow: hidden;opacity: ${Math.min(A*20,1)*o};${l}: ${A*u}px;padding-${c[0]}: ${A*d}px;padding-${c[1]}: ${A*g}px;margin-${c[0]}: ${A*p}px;margin-${c[1]}: ${A*x}px;border-${c[0]}-width: ${A*y}px;border-${c[1]}-width: ${A*b}px;min-${l}: 0`}}const uI=n=>new Promise(t=>n(t)),sm=n=>new Promise(t=>{const e=setTimeout(()=>{clearTimeout(e),t()},n)}),nm="@@eventEmitter";function fI(n){PS(nm,n)}function KS(){return MS(nm)}const ZS=()=>{let n=[];return{add:r=>new Promise(async o=>{n.push(o),await r(),o({interrupted:!1})}),clear:()=>n=[],getLength:()=>n.length,interrupt:()=>n.forEach(r=>r({interrupted:!0}))}};function QS(n,t){Zh(t,!0);const e=KS(),i=ZS(),s=400;let r=vh(!1),o=vh(!1);const l=async()=>{var g;vr(o,!0);const{interrupted:d}=await i.add(()=>sm(s));d||(vr(r,!0),(g=t.onhold)==null||g.call(t))},u=()=>{vr(o,!1),i.interrupt(),i.clear()},c=()=>{var d;Yn(o)||l(),Yn(r)||(d=t.onpress)==null||d.call(t)},f=()=>{var d,g;Yn(o)&&u(),Yn(r)?(d=t.onholdend)==null||d.call(t):(g=t.onpressend)==null||g.call(t),vr(r,!1)};e.eventEmitter.subscribeOnMount({hotKey:d=>{if(!t.disabled&&d.key===t.hotkey){if(d.action==="keyUp")return f();if(d.action==="keyDown")return c()}}}),bd(()=>{t.disabled&&f()}),IS(()=>f()),bd(()=>{var d;Yn(r)&&((d=t.onhold)==null||d.call(t))}),Qh()}const fn=n=>Jv.url.searchParams.get(n),JS=()=>fn("lang")==="br"?"pt":fn("lang")||"en",tA=()=>fn("gameID")||"",eA=()=>fn("sessionID")||"",iA=()=>fn("rgs_url")||"",sA=()=>fn("socialCasino")==="true",nA=()=>fn("force")==="true",dI={lang:JS,gameID:tA,sessionID:eA,rgsUrl:iA,socialCasino:sA,force:nA},rA={BASE:{mode:"BASE",costMultiplier:1,type:"default",parent:"",children:"",assets:{icon:"",dialogImage:"",dialogVolatility:"",volatility:"",button:""},text:{title:"",dialog:"",button:"",betAmountLabel:"",tickerIdle:"",tickerSpin:"",bannerText:""},maxWin:8888},ANTE:{mode:"ANTE",costMultiplier:1.2,type:"activate",parent:"",children:"",assets:{icon:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/icon_doubleboost.webp",dialogImage:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/doubleboost_image.webp",dialogVolatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_01.webp",volatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_white_01.webp",button:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/button_activate.webp",bannerText:"example banner text"},text:{title:"DOUBLE BOOST",dialog:"Double the chance to trigger the FREE SPINS round when activated for 1.2x the player bet amount. DOUBLE BOOST remains active until disabled by the player.",description:"Greatly increase your chance of landing a bonus symbol each spin.",button:"ACTIVATE",betAmountLabel:"DOUBLE BOOST",tickerIdle:"DOUBLE BOOST IS ACTIVE",tickerSpin:"GOOD LUCK",bannerText:"example banner text"}},SUPERANTE:{mode:"SUPERANTE",costMultiplier:5,type:"activate",parent:"",children:"",assets:{icon:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/icon_superboost.webp",dialogImage:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/superboost_image.webp",dialogVolatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_02.webp",volatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_white_02.webp",button:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/button_activate.webp"},text:{title:"SUPER BOOST",dialog:"1 in 20 chance to trigger the FREE SPINS round when activated for 5x the player bet amount. Guarantees 1 or more Scatter symbols every spin. SUPER BOOST remains active until disabled by the player.",description:"Guaranteed to land at least 1+ bonus symbol each spin.",button:"ACTIVATE",betAmountLabel:"SUPER BOOST",tickerIdle:"SUPER BOOST IS ACTIVE",tickerSpin:"GOOD LUCK",bannerText:"example banner text"}},SUPERSPIN:{mode:"SUPERSPIN",costMultiplier:25,type:"activate",parent:"",children:"",assets:{icon:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/icon_superspin.webp",dialogImage:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/superspin_image.webp",dialogVolatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_03.webp",volatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_white_03.webp",button:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/button_activate.webp"},text:{title:"SAMURAI SPIN",dialog:"All game features are boosted when activated for 25x the player bet amount. SAMURAI SPIN remains active until disabled by the player.",description:"SAMURAI SPIN is AWESOME! ",button:"ACTIVATE",betAmountLabel:"SAMURAI SPIN",tickerIdle:"SAMURAI SPIN IS ACTIVE",tickerSpin:"GOOD LUCK",bannerText:"example banner text"}},BONUS:{mode:"BONUS",costMultiplier:100,type:"buy",parent:"",children:"",assets:{icon:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/icon_bonusbuy.webp",dialogImage:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/bonus_image.webp",dialogVolatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_04.webp",volatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_white_04.webp",button:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_8_97/betModes/button_buy.webp"},text:{title:"BONUS",dialog:"Triggers FREE SPINS feature when activated for 100x the player bet amount. The Global Multiplier can reach up to 64x and remains active for the duration of FREE SPINS.",description:"Each spin may have a random multiplier applied to winning lines.",button:"BUY",tickerIdle:"PLACE YOUR BET",tickerSpin:"BONUS BUY ACTIVATED",bannerText:"example banner text"}},SUPER:{mode:"SUPER",costMultiplier:200,type:"buy",parent:"",children:"",assets:{icon:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/icon_superbonusbuy.webp",dialogImage:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/superbonus_image.webp",dialogVolatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_05.webp",volatility:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_9_97/betModes/volatility/volatility_white_05.webp",button:"https://test-fart-cdn-bucket.s3.ap-southeast-2.amazonaws.com/1_8_97/betModes/button_buy.webp"},text:{title:"SUPER BONUS",dialog:"Triggers FREE SPINS feature when activated for 200x the player bet amount. The Global Multiplier can reach up to 256x and remains active for the duration of FREE SPINS.",description:"Enter the mothership! Land values and multiply them with action symbols.",button:"BUY",tickerIdle:"PLACE YOUR BET",tickerSpin:"SUPER BONUS BUY ACTIVATED",bannerText:"example banner text"}}},aA={payTable:[{containers:[{title:"WILD SYMBOL",text:"The Wild symbol substitutes all other symbols except Scatter.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:0,column:0},{title:"FREE SPINS",text:"Scatter Symbols are on all reels. If at least 3 Scatters land in a spin sequence, FREE SPINS is triggered. 3 Scatters award 8 FREE SPINS. 4 Scatters award 12 FREE SPINS. 5 Scatters award 16 FREE SPINS. ",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:1,column:0},{title:"FREE SPINS RETRIGGER",text:"During FREE SPINS, Scatter Symbols are on all reels. If at least 3 Scatters land in a spin sequence, additional FREE SPINS rounds are triggered. 3 Scatters award 4 additional FREE SPINS. 4 Scatters award 6 additional FREE SPINS. 5 Scatters award 8 additional FREE SPINS. ",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:2,column:0}],rows:3,columns:1,title:"PAYTABLE"},{containers:[{title:"",text:`5	|	10x
4	|	5x
3	|	2x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:0,column:0},{title:"",text:`5	|	5x
4	|	2x
3	|	1x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:0,column:1},{title:"",text:`5	|	5x
4	|	2x
3	|	1x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:0,column:2},{title:"",text:`5	|	3x
4	|	1x
3	|	0.5x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:1,column:0},{title:"",text:`5	|	3x
4	|	1x
3	|	0.5x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:1,column:1},{title:"",text:`5	|	2x
4	|	0.8x
3	|	0.4x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:3,column:0},{title:"",text:`5	|	2x
4	|	0.8x
3	|	0.4x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:3,column:1},{title:"",text:`5	|	1.5x
4	|	0.5x
3	|	0.2x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:3,column:2},{title:"",text:`5	|	1.5x
4	|	0.5x
3	|	0.2x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:4,column:0},{title:"",text:`5	|	1x
4	|	0.3x
3	|	0.1x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:4,column:1},{title:"",text:`5	|	1x
4	|	0.3x
3	|	0.1x
`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/wild.ac78fbf6.png",imagePosition:"left",row:4,column:2}],rows:5,columns:3,title:"SYMBOLS"},{containers:[{title:"",text:"All symbols pay from left to right. Starting from the left most reel. Only symbols on adjacent reels will be a valid win way. This does not apply to Scatter. ",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/winWays.be45a8a4.png",imagePosition:"top",row:0,column:0}],rows:1,columns:1,title:"WIN WAYS"}],gameRules:[{containers:[{title:"",text:`The normal mode of this game has a theoretical expected return of 97.0%.

The player also has the option to select an ANTE BET mode. This costs 1.25x the underlying bet. The ANTE BET mode has a theoretical expected return of 97.0%. The ANTE BET doubles the chance of FREE SPINS.

The player also has the option to buy FREE SPINS. This costs 100x the underlying bet. The FREE SPINS buy mode has a theoretical expected return of 97.0%. 

The player has the option to buy a SUPER SPIN. This costs 25x the underlying bet. The SUPER SPIN buy mode has a theoretical expected return of 97.0%. In SUPER SPIN one spin is initially awarded. On each spin stacked Wild Symbols are on Reel Strips

 The maximum win in each Bet Mode is 5000x the underlining bet.`,image:"https://staging-1-0.twist-game.app/_app/immutable/assets/rtp97.d2febd7d.svg",imagePosition:"top",row:0,column:0}],rows:1,columns:1,title:"BET MODES"},{containers:[{title:"",text:"Malfunction voids all pays and plays. A consistent internet connection is required. In the event of a disconnection, reload the game to finish any uncompleted bets. The theoretical expected return is calculated over many spins. Movement of reels are not representative of any physical device, and is for illustrative purposes only. TM and Â© 2023 Twist Gaming.",image:"",row:0,column:0}],rows:1,columns:1,title:"LEGAL NOTICE"},{containers:[{title:"",text:"SPIN BUTTON | Initiates the Betting Round.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleSpin.daacc43a.webp",imagePosition:"left",row:0,column:0},{title:"",text:"STOP BUTTON | Stops the current Spin.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleStop.30db74c5.webp",imagePosition:"left",row:1,column:0},{title:"",text:"INFORMATION | Provides Game Information.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:2,column:0},{title:"",text:"SETTINGS | Adjust Game Settings.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:4,column:0},{title:"",text:"PAY TABLE | View the Paytable to see Symbol Values.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:6,column:0},{title:"",text:"AUTO SPIN | Open the Auto Spin pop-up menu.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleAutoSpin.d542a3b0.webp",imagePosition:"left",row:7,column:0},{title:"",text:"TURBO | Activate Turbo Mode.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleTurbo.a0fcfd04.webp",imagePosition:"left",row:9,column:0},{title:"",text:"MENU | Expands the Sidebar Menu for more Options.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:10,column:0},{title:"",text:"CLOSE | Exit the pop-up menu.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:11,column:0},{title:"",text:"SOUND | Mute or Unmute Game Audio.",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:12,column:0},{title:"",text:"INCREASE | Increase your Bet Amount",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:13,column:0},{title:"",text:"DECREASE | Decrease your Bet Amount",image:"https://staging-1-0.twist-game.app/_app/immutable/assets/gameRuleDown.716ec429.webp",imagePosition:"left",row:14,column:0}],rows:16,columns:1,title:"USER INTERFACE GUIDE"}],splashScreen:[]},Jh=zs({betModeMeta:rA,gameRuleMeta:aA}),pI={betModeMetaList:()=>Object.values(Jh.betModeMeta)},Mi=zs({currency:"USD",balanceAmount:0,betAmount:1,wageredBetAmount:1,lastBet:null,activeBetModeKey:"BASE",winBookEventAmount:0,autoSpinsLoss:0,autoSpinsCounter:0,autoSpinsLossLimitAmount:1/0,autoSpinsSingleWinLimitAmount:1/0,isSpaceHold:!1,isTurbo:!1}),rm=n=>{if(n<=0)return 0;const t=am();if(t===0)return 0;const e=Mi.balanceAmount/t;return n>=e?e:n},oA=n=>{Mi.betAmount=rm(n)},lA=n=>{Mi.betAmount=rm(n(Mi.betAmount))};let Sd=!1;const hA=(n,t)=>{const{persistent:e}=t;!e&&Sd||(e&&(Sd=n),Mi.isTurbo=n)},cA=()=>{var n;return((n=Jh.betModeMeta)==null?void 0:n[Mi.activeBetModeKey])||null},uA=()=>Mi.autoSpinsCounter>1||Mi.isSpaceHold,fA=()=>Mi.isTurbo?2:1,am=()=>Ad.activeBetMode().type==="activate"?Ad.activeBetMode().costMultiplier:1,Th=()=>Mi.betAmount*am(),dA=()=>Th()>0&&Th()<=Mi.balanceAmount,pA=()=>Mi.autoSpinsCounter!==0,Ad={setBetAmount:oA,updateBetAmount:lA,updateIsTurbo:hA,activeBetMode:cA,isContinuousBet:uA,timeScale:fA,betCost:Th,isBetCostAvailable:dA,hasAutoBetCounter:pA},mI=zs({jurisdiction:"",betAmountOptions:[1,5,25,50,75,100,200,500,800,1e3],betMenuOptions:[1,5,25,50,75,100,200,500,800,1e3]}),Cd=zs({selectedPastBetIndex:0,pastBets:[],force:!1,forceType:"api",forceBetModeKey:"BASE",forceSearch:{bookID:void 0,kind:"Any",symbol:"Any",hasWild:"Any",wildMult:"Any",gameType:"Any"},forceJson:""}),gI={selectedPastBet:()=>{var n;return(n=Cd.pastBets)==null?void 0:n[Cd.selectedPastBetIndex]}},xI=zs({modal:null}),Yl=75,Nl=zs({volumeValueMaster:Yl,volumeValueMusic:Yl,volumeValueSoundEffect:Yl}),Td={volumeMaster:()=>Nl.volumeValueMaster/100,volumeMusic:()=>Nl.volumeValueMusic/100*Td.volumeMaster(),volumeSoundEffect:()=>Nl.volumeValueSoundEffect/100*Td.volumeMaster()},Us="â",yI=["10","25","50","75","100","250","500","1000",Us],bI={10:10,25:25,50:50,75:75,100:100,250:250,500:500,1e3:1e3,[Us]:1/0},_I=["5Ã","10Ã","25Ã","50Ã","100Ã",Us],wI={"5Ã":5,"10Ã":10,"25Ã":25,"50Ã":50,"100Ã":100,[Us]:1/0},vI=["5Ã","10Ã","25Ã","50Ã","100Ã",Us],SI={"5Ã":5,"10Ã":10,"25Ã":25,"50Ã":50,"100Ã":100,[Us]:1/0},AI=zs({autoSpinsText:"10",autoSpinsLossLimitText:Us,autoSpinsSingleWinLimitText:Us,freeSpinCounterShow:!1,freeSpinCounterCurrent:0,freeSpinCounterTotal:0,menuOpen:!1,drawerFold:!1,drawerButtonShow:!1}),mA=1e6,CI=100,TI=[0,2,5,7,10,13,15,16,20,23,25,26,28,29,30,32,36,37,38],Md=n=>{const{method:t,endpoint:e,variables:i}=n;return(n.fetch??fetch)(e,{method:t,headers:{"Content-Type":"application/json"},...t==="GET"?{}:{body:JSON.stringify(i)}})},Or={post:async function(t){const e=await Md({method:"POST",variables:t.variables,endpoint:`https://${t.rgsUrl}${t.url}`});return e.status!==200&&console.error("error",e),await e.json()},get:async function(t){const e=await Md({method:"GET",endpoint:`https://${t.rgsUrl}${t.url}`});return e.status!==200&&console.error("error",e),await e.json()}},MI=async n=>await Or.post({rgsUrl:n.rgsUrl,url:"/wallet/authenticate",variables:{gameID:n.gameID,sessionID:n.sessionID,language:n.language}}),PI=async n=>await Or.post({rgsUrl:n.rgsUrl,url:"/wallet/end-round",variables:{gameID:n.gameID,sessionID:n.sessionID}}),II=async n=>await Or.post({rgsUrl:n.rgsUrl,url:"/bet/event",variables:{gameID:n.gameID,sessionID:n.sessionID,event:`${n.eventIndex}`}}),kI=async n=>await Or.post({rgsUrl:n.rgsUrl,url:"/game/search",variables:{gameID:n.gameID,mode:n.mode,search:n.search}}),EI=async n=>await Or.post({rgsUrl:n.rgsUrl,url:"/wallet/play",variables:{gameID:n.gameID,mode:n.mode,currency:n.currency,sessionID:n.sessionID,amount:n.amount*mA}});var ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gA=Kh('<div class="close-button-wrap svelte-zvizg7"><button class="close-button svelte-zvizg7" data-test="close-button">Ã</button></div>'),xA=Kh('<div><!></div> <!> <div><div class="blur-layer svelte-zvizg7"></div> <div class="top-layer svelte-zvizg7"><div class="click-to-close-layer svelte-zvizg7" role="button"></div> <!> <!></div></div>',1);function RI(n,t){Zh(t,!0);const e={topLayer:2,clickToCloseLayer:2,closeButton:101},i=()=>t.persistent?void 0:t.onclose();let s=vh(!0);kS(async()=>{await sm(300),vr(s,!1)});var r=xA(),o=ES(r),l=Un(o);Ah(l,()=>t.children),Wn(o);var u=Nn(o,2);QS(u,{hotkey:"Escape",onpress:i});var c=Nn(u,2);let f;var d=Nn(Un(c),2),g=Un(d);Ds(g,"tabindex",0),g.__click=i;var p=Nn(g,2);{var x=b=>{var A=gA(),C=Un(A);C.__click=i,Wn(A),Sh(()=>Ds(A,"style",`--zIndex: ${e.closeButton}`)),wh(b,A)};RS(p,b=>{t.persistent||b(x)})}var y=Nn(p,2);Ah(y,()=>t.children),Wn(d),Wn(c),Sh(()=>{f=Ka(c,1,"pop-up-wrap svelte-zvizg7",null,f,{disabled:Yn(s)}),Ds(c,"style",`z-index: ${t.zIndex};`),Ds(d,"style",`--zIndex: ${e.topLayer}`),Ds(g,"style",`--zIndex: ${e.clickToCloseLayer}`)}),lS("keypress",g,i),GS(1,d,()=>jS,()=>({duration:300,opacity:0})),wh(n,r),Qh()}jh(["click"]);var yA=(n,t,e)=>e.onchange(!e.open),bA=Kh('<label><span data-test="drop-down"><!></span> <input class="checkbox svelte-febqom" type="checkbox"></label>');function FI(n,t){Zh(t,!0);const e=FS(t,["$$slots","$$events","$$legacy"]);var i=bA();let s;var r=Un(i);let o;var l=Un(r);Ah(l,()=>t.children),Wn(r);var u=Nn(r,2);DS(u),u.__change=[yA,e,t],Wn(i),Sh(()=>{s=Ka(i,1,"toggle svelte-febqom",null,s,{disabled:t.disabled}),o=Ka(r,1,"content svelte-febqom",null,o,{toggled:t.open}),u.disabled=t.disabled,YS(u,t.open)}),wh(n,i),Qh()}jh(["change"]);const _A=zs({selectedBetModeKey:"BASE"}),BI={selectedBetModeData:()=>Jh.betModeMeta[_A.selectedBetModeKey]};var yr={},Ea={},Ra={},Pd;function om(){if(Pd)return Ra;Pd=1,Object.defineProperty(Ra,"__esModule",{value:!0});var n=function(t){if("getBBox"in t){var e=t.getBBox();return Object.freeze({height:e.height,left:0,top:0,width:e.width})}else{var i=window.getComputedStyle(t);return Object.freeze({height:parseFloat(i.height||"0"),left:parseFloat(i.paddingLeft||"0"),top:parseFloat(i.paddingTop||"0"),width:parseFloat(i.width||"0")})}};return Ra.ContentRect=n,Ra}var Id;function wA(){if(Id)return Ea;Id=1,Object.defineProperty(Ea,"__esModule",{value:!0});var n=om(),t=function(){function e(i){this.target=i,this.$$broadcastWidth=this.$$broadcastHeight=0}return Object.defineProperty(e.prototype,"broadcastWidth",{get:function(){return this.$$broadcastWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"broadcastHeight",{get:function(){return this.$$broadcastHeight},enumerable:!0,configurable:!0}),e.prototype.isActive=function(){var i=n.ContentRect(this.target);return!!i&&(i.width!==this.broadcastWidth||i.height!==this.broadcastHeight)},e}();return Ea.ResizeObservation=t,Ea}var Fa={},kd;function vA(){if(kd)return Fa;kd=1,Object.defineProperty(Fa,"__esModule",{value:!0});var n=om(),t=function(){function e(i){this.target=i,this.contentRect=n.ContentRect(i)}return e}();return Fa.ResizeObserverEntry=t,Fa}var Ed;function SA(){if(Ed)return yr;Ed=1,Object.defineProperty(yr,"__esModule",{value:!0});var n=wA(),t=vA(),e=[],i=function(){function M(T){this.$$observationTargets=[],this.$$activeTargets=[],this.$$skippedTargets=[];var P=o(T);if(P)throw TypeError(P);this.$$callback=T}return M.prototype.observe=function(T){var P=l("observe",T);if(P)throw TypeError(P);var B=u(this.$$observationTargets,T);B>=0||(this.$$observationTargets.push(new n.ResizeObservation(T)),s(this))},M.prototype.unobserve=function(T){var P=l("unobserve",T);if(P)throw TypeError(P);var B=u(this.$$observationTargets,T);B<0||(this.$$observationTargets.splice(B,1),this.$$observationTargets.length===0&&r(this))},M.prototype.disconnect=function(){this.$$observationTargets=[],this.$$activeTargets=[],r(this)},M}();yr.ResizeObserver=i;function s(M){var T=e.indexOf(M);T<0&&(e.push(M),A())}function r(M){var T=e.indexOf(M);T>=0&&(e.splice(T,1),_())}function o(M){if(typeof M>"u")return"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.";if(typeof M!="function")return"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function."}function l(M,T){if(typeof T>"u")return"Failed to execute '"+M+"' on 'ResizeObserver': 1 argument required, but only 0 present.";if(!(T&&T.nodeType===window.Node.ELEMENT_NODE))return"Failed to execute '"+M+"' on 'ResizeObserver': parameter 1 is not of type 'Element'."}function u(M,T){for(var P=0;P<M.length;P+=1)if(M[P].target===T)return P;return-1}var c=function(M){e.forEach(function(T){T.$$activeTargets=[],T.$$skippedTargets=[],T.$$observationTargets.forEach(function(P){if(P.isActive()){var B=x(P.target);B>M?T.$$activeTargets.push(P):T.$$skippedTargets.push(P)}})})},f=function(){return e.some(function(M){return!!M.$$activeTargets.length})},d=function(){return e.some(function(M){return!!M.$$skippedTargets.length})},g=function(){var M=1/0;return e.forEach(function(T){if(T.$$activeTargets.length){var P=[];T.$$activeTargets.forEach(function(B){var O=new t.ResizeObserverEntry(B.target);P.push(O),B.$$broadcastWidth=O.contentRect.width,B.$$broadcastHeight=O.contentRect.height;var X=x(B.target);X<M&&(M=X)}),T.$$callback(P,T),T.$$activeTargets=[]}}),M},p=function(){var M=new window.ErrorEvent("ResizeLoopError",{message:"ResizeObserver loop completed with undelivered notifications."});window.dispatchEvent(M)},x=function(M){for(var T=0;M.parentNode;)M=M.parentNode,T+=1;return T},y=function(){var M=0;for(c(M);f();)M=g(),c(M);d()&&p()},b,A=function(){b||C()},C=function(){b=window.requestAnimationFrame(function(){y(),C()})},_=function(){b&&!e.some(function(M){return!!M.$$observationTargets.length})&&(window.cancelAnimationFrame(b),b=void 0)},v=function(){return window.ResizeObserver=i};return yr.install=v,yr}var LI=SA(),Sr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var AA=Sr.exports,Rd;function CA(){return Rd||(Rd=1,function(n,t){(function(){var e,i="4.17.21",s=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",d=1,g=2,p=4,x=1,y=2,b=1,A=2,C=4,_=8,v=16,M=32,T=64,P=128,B=256,O=512,X=30,N="...",et=800,K=16,V=1,J=2,E=3,L=1/0,Y=9007199254740991,W=17976931348623157e292,q=NaN,j=4294967295,tt=j-1,Z=j>>>1,ct=[["ary",P],["bind",b],["bindKey",A],["curry",_],["curryRight",v],["flip",O],["partial",M],["partialRight",T],["rearg",B]],lt="[object Arguments]",Pt="[object Array]",Ct="[object AsyncFunction]",gt="[object Boolean]",It="[object Date]",wt="[object DOMException]",ee="[object Error]",ie="[object Function]",Pe="[object GeneratorFunction]",Kt="[object Map]",St="[object Number]",Dt="[object Null]",Le="[object Object]",Ii="[object Promise]",As="[object Proxy]",Vi="[object RegExp]",be="[object Set]",ii="[object String]",rs="[object Symbol]",Cs="[object Undefined]",Gs="[object WeakMap]",Nr="[object WeakSet]",Vs="[object ArrayBuffer]",as="[object DataView]",xn="[object Float32Array]",pi="[object Float64Array]",yn="[object Int8Array]",F="[object Int16Array]",z="[object Int32Array]",ot="[object Uint8Array]",st="[object Uint8ClampedArray]",ut="[object Uint16Array]",xt="[object Uint32Array]",vt=/\b__p \+= '';/g,$t=/\b(__p \+=) '' \+/g,Ht=/(__e\(.*?\)|\b__t\)) \+\n'';/g,re=/&(?:amp|lt|gt|quot|#39);/g,ae=/[&<>"']/g,Oe=RegExp(re.source),si=RegExp(ae.source),Ts=/<%-([\s\S]+?)%>/g,Co=/<%([\s\S]+?)%>/g,Uc=/<%=([\s\S]+?)%>/g,C0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,T0=/^\w*$/,M0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,To=/[\\^$.*+?()[\]{}|]/g,P0=RegExp(To.source),Mo=/^\s+/,I0=/\s/,k0=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,E0=/\{\n\/\* \[wrapped with (.+)\] \*/,R0=/,? & /,F0=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,B0=/[()=,{}\[\]\/\s]/,L0=/\\(\\)?/g,O0=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wc=/\w*$/,D0=/^[-+]0x[0-9a-f]+$/i,Y0=/^0b[01]+$/i,N0=/^\[object .+?Constructor\]$/,X0=/^0o[0-7]+$/i,U0=/^(?:0|[1-9]\d*)$/,W0=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xr=/($^)/,z0=/['\n\r\u2028\u2029\\]/g,Ur="\\ud800-\\udfff",G0="\\u0300-\\u036f",V0="\\ufe20-\\ufe2f",$0="\\u20d0-\\u20ff",zc=G0+V0+$0,Gc="\\u2700-\\u27bf",Vc="a-z\\xdf-\\xf6\\xf8-\\xff",H0="\\xac\\xb1\\xd7\\xf7",q0="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",j0="\\u2000-\\u206f",K0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$c="A-Z\\xc0-\\xd6\\xd8-\\xde",Hc="\\ufe0e\\ufe0f",qc=H0+q0+j0+K0,Po="['â]",Z0="["+Ur+"]",jc="["+qc+"]",Wr="["+zc+"]",Kc="\\d+",Q0="["+Gc+"]",Zc="["+Vc+"]",Qc="[^"+Ur+qc+Kc+Gc+Vc+$c+"]",Io="\\ud83c[\\udffb-\\udfff]",J0="(?:"+Wr+"|"+Io+")",Jc="[^"+Ur+"]",ko="(?:\\ud83c[\\udde6-\\uddff]){2}",Eo="[\\ud800-\\udbff][\\udc00-\\udfff]",bn="["+$c+"]",tu="\\u200d",eu="(?:"+Zc+"|"+Qc+")",tx="(?:"+bn+"|"+Qc+")",iu="(?:"+Po+"(?:d|ll|m|re|s|t|ve))?",su="(?:"+Po+"(?:D|LL|M|RE|S|T|VE))?",nu=J0+"?",ru="["+Hc+"]?",ex="(?:"+tu+"(?:"+[Jc,ko,Eo].join("|")+")"+ru+nu+")*",ix="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sx="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",au=ru+nu+ex,nx="(?:"+[Q0,ko,Eo].join("|")+")"+au,rx="(?:"+[Jc+Wr+"?",Wr,ko,Eo,Z0].join("|")+")",ax=RegExp(Po,"g"),ox=RegExp(Wr,"g"),Ro=RegExp(Io+"(?="+Io+")|"+rx+au,"g"),lx=RegExp([bn+"?"+Zc+"+"+iu+"(?="+[jc,bn,"$"].join("|")+")",tx+"+"+su+"(?="+[jc,bn+eu,"$"].join("|")+")",bn+"?"+eu+"+"+iu,bn+"+"+su,sx,ix,Kc,nx].join("|"),"g"),hx=RegExp("["+tu+Ur+zc+Hc+"]"),cx=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ux=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],fx=-1,oe={};oe[xn]=oe[pi]=oe[yn]=oe[F]=oe[z]=oe[ot]=oe[st]=oe[ut]=oe[xt]=!0,oe[lt]=oe[Pt]=oe[Vs]=oe[gt]=oe[as]=oe[It]=oe[ee]=oe[ie]=oe[Kt]=oe[St]=oe[Le]=oe[Vi]=oe[be]=oe[ii]=oe[Gs]=!1;var se={};se[lt]=se[Pt]=se[Vs]=se[as]=se[gt]=se[It]=se[xn]=se[pi]=se[yn]=se[F]=se[z]=se[Kt]=se[St]=se[Le]=se[Vi]=se[be]=se[ii]=se[rs]=se[ot]=se[st]=se[ut]=se[xt]=!0,se[ee]=se[ie]=se[Gs]=!1;var dx={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},px={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mx={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},gx={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xx=parseFloat,yx=parseInt,ou=typeof ka=="object"&&ka&&ka.Object===Object&&ka,bx=typeof self=="object"&&self&&self.Object===Object&&self,De=ou||bx||Function("return this")(),Fo=t&&!t.nodeType&&t,$s=Fo&&!0&&n&&!n.nodeType&&n,lu=$s&&$s.exports===Fo,Bo=lu&&ou.process,mi=function(){try{var $=$s&&$s.require&&$s.require("util").types;return $||Bo&&Bo.binding&&Bo.binding("util")}catch{}}(),hu=mi&&mi.isArrayBuffer,cu=mi&&mi.isDate,uu=mi&&mi.isMap,fu=mi&&mi.isRegExp,du=mi&&mi.isSet,pu=mi&&mi.isTypedArray;function ni($,it,Q){switch(Q.length){case 0:return $.call(it);case 1:return $.call(it,Q[0]);case 2:return $.call(it,Q[0],Q[1]);case 3:return $.call(it,Q[0],Q[1],Q[2])}return $.apply(it,Q)}function _x($,it,Q,mt){for(var Et=-1,qt=$==null?0:$.length;++Et<qt;){var Ae=$[Et];it(mt,Ae,Q(Ae),$)}return mt}function gi($,it){for(var Q=-1,mt=$==null?0:$.length;++Q<mt&&it($[Q],Q,$)!==!1;);return $}function wx($,it){for(var Q=$==null?0:$.length;Q--&&it($[Q],Q,$)!==!1;);return $}function mu($,it){for(var Q=-1,mt=$==null?0:$.length;++Q<mt;)if(!it($[Q],Q,$))return!1;return!0}function Ms($,it){for(var Q=-1,mt=$==null?0:$.length,Et=0,qt=[];++Q<mt;){var Ae=$[Q];it(Ae,Q,$)&&(qt[Et++]=Ae)}return qt}function zr($,it){var Q=$==null?0:$.length;return!!Q&&_n($,it,0)>-1}function Lo($,it,Q){for(var mt=-1,Et=$==null?0:$.length;++mt<Et;)if(Q(it,$[mt]))return!0;return!1}function ue($,it){for(var Q=-1,mt=$==null?0:$.length,Et=Array(mt);++Q<mt;)Et[Q]=it($[Q],Q,$);return Et}function Ps($,it){for(var Q=-1,mt=it.length,Et=$.length;++Q<mt;)$[Et+Q]=it[Q];return $}function Oo($,it,Q,mt){var Et=-1,qt=$==null?0:$.length;for(mt&&qt&&(Q=$[++Et]);++Et<qt;)Q=it(Q,$[Et],Et,$);return Q}function vx($,it,Q,mt){var Et=$==null?0:$.length;for(mt&&Et&&(Q=$[--Et]);Et--;)Q=it(Q,$[Et],Et,$);return Q}function Do($,it){for(var Q=-1,mt=$==null?0:$.length;++Q<mt;)if(it($[Q],Q,$))return!0;return!1}var Sx=Yo("length");function Ax($){return $.split("")}function Cx($){return $.match(F0)||[]}function gu($,it,Q){var mt;return Q($,function(Et,qt,Ae){if(it(Et,qt,Ae))return mt=qt,!1}),mt}function Gr($,it,Q,mt){for(var Et=$.length,qt=Q+(mt?1:-1);mt?qt--:++qt<Et;)if(it($[qt],qt,$))return qt;return-1}function _n($,it,Q){return it===it?Dx($,it,Q):Gr($,xu,Q)}function Tx($,it,Q,mt){for(var Et=Q-1,qt=$.length;++Et<qt;)if(mt($[Et],it))return Et;return-1}function xu($){return $!==$}function yu($,it){var Q=$==null?0:$.length;return Q?Xo($,it)/Q:q}function Yo($){return function(it){return it==null?e:it[$]}}function No($){return function(it){return $==null?e:$[it]}}function bu($,it,Q,mt,Et){return Et($,function(qt,Ae,te){Q=mt?(mt=!1,qt):it(Q,qt,Ae,te)}),Q}function Mx($,it){var Q=$.length;for($.sort(it);Q--;)$[Q]=$[Q].value;return $}function Xo($,it){for(var Q,mt=-1,Et=$.length;++mt<Et;){var qt=it($[mt]);qt!==e&&(Q=Q===e?qt:Q+qt)}return Q}function Uo($,it){for(var Q=-1,mt=Array($);++Q<$;)mt[Q]=it(Q);return mt}function Px($,it){return ue(it,function(Q){return[Q,$[Q]]})}function _u($){return $&&$.slice(0,Au($)+1).replace(Mo,"")}function ri($){return function(it){return $(it)}}function Wo($,it){return ue(it,function(Q){return $[Q]})}function sr($,it){return $.has(it)}function wu($,it){for(var Q=-1,mt=$.length;++Q<mt&&_n(it,$[Q],0)>-1;);return Q}function vu($,it){for(var Q=$.length;Q--&&_n(it,$[Q],0)>-1;);return Q}function Ix($,it){for(var Q=$.length,mt=0;Q--;)$[Q]===it&&++mt;return mt}var kx=No(dx),Ex=No(px);function Rx($){return"\\"+gx[$]}function Fx($,it){return $==null?e:$[it]}function wn($){return hx.test($)}function Bx($){return cx.test($)}function Lx($){for(var it,Q=[];!(it=$.next()).done;)Q.push(it.value);return Q}function zo($){var it=-1,Q=Array($.size);return $.forEach(function(mt,Et){Q[++it]=[Et,mt]}),Q}function Su($,it){return function(Q){return $(it(Q))}}function Is($,it){for(var Q=-1,mt=$.length,Et=0,qt=[];++Q<mt;){var Ae=$[Q];(Ae===it||Ae===f)&&($[Q]=f,qt[Et++]=Q)}return qt}function Vr($){var it=-1,Q=Array($.size);return $.forEach(function(mt){Q[++it]=mt}),Q}function Ox($){var it=-1,Q=Array($.size);return $.forEach(function(mt){Q[++it]=[mt,mt]}),Q}function Dx($,it,Q){for(var mt=Q-1,Et=$.length;++mt<Et;)if($[mt]===it)return mt;return-1}function Yx($,it,Q){for(var mt=Q+1;mt--;)if($[mt]===it)return mt;return mt}function vn($){return wn($)?Xx($):Sx($)}function ki($){return wn($)?Ux($):Ax($)}function Au($){for(var it=$.length;it--&&I0.test($.charAt(it)););return it}var Nx=No(mx);function Xx($){for(var it=Ro.lastIndex=0;Ro.test($);)++it;return it}function Ux($){return $.match(Ro)||[]}function Wx($){return $.match(lx)||[]}var zx=function $(it){it=it==null?De:Sn.defaults(De.Object(),it,Sn.pick(De,ux));var Q=it.Array,mt=it.Date,Et=it.Error,qt=it.Function,Ae=it.Math,te=it.Object,Go=it.RegExp,Gx=it.String,xi=it.TypeError,$r=Q.prototype,Vx=qt.prototype,An=te.prototype,Hr=it["__core-js_shared__"],qr=Vx.toString,Qt=An.hasOwnProperty,$x=0,Cu=function(){var a=/[^.]+$/.exec(Hr&&Hr.keys&&Hr.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),jr=An.toString,Hx=qr.call(te),qx=De._,jx=Go("^"+qr.call(Qt).replace(To,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kr=lu?it.Buffer:e,ks=it.Symbol,Zr=it.Uint8Array,Tu=Kr?Kr.allocUnsafe:e,Qr=Su(te.getPrototypeOf,te),Mu=te.create,Pu=An.propertyIsEnumerable,Jr=$r.splice,Iu=ks?ks.isConcatSpreadable:e,nr=ks?ks.iterator:e,Hs=ks?ks.toStringTag:e,ta=function(){try{var a=Qs(te,"defineProperty");return a({},"",{}),a}catch{}}(),Kx=it.clearTimeout!==De.clearTimeout&&it.clearTimeout,Zx=mt&&mt.now!==De.Date.now&&mt.now,Qx=it.setTimeout!==De.setTimeout&&it.setTimeout,ea=Ae.ceil,ia=Ae.floor,Vo=te.getOwnPropertySymbols,Jx=Kr?Kr.isBuffer:e,ku=it.isFinite,ty=$r.join,ey=Su(te.keys,te),Ce=Ae.max,Ue=Ae.min,iy=mt.now,sy=it.parseInt,Eu=Ae.random,ny=$r.reverse,$o=Qs(it,"DataView"),rr=Qs(it,"Map"),Ho=Qs(it,"Promise"),Cn=Qs(it,"Set"),ar=Qs(it,"WeakMap"),or=Qs(te,"create"),sa=ar&&new ar,Tn={},ry=Js($o),ay=Js(rr),oy=Js(Ho),ly=Js(Cn),hy=Js(ar),na=ks?ks.prototype:e,lr=na?na.valueOf:e,Ru=na?na.toString:e;function k(a){if(xe(a)&&!Rt(a)&&!(a instanceof Xt)){if(a instanceof yi)return a;if(Qt.call(a,"__wrapped__"))return Bf(a)}return new yi(a)}var Mn=function(){function a(){}return function(h){if(!de(h))return{};if(Mu)return Mu(h);a.prototype=h;var m=new a;return a.prototype=e,m}}();function ra(){}function yi(a,h){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=e}k.templateSettings={escape:Ts,evaluate:Co,interpolate:Uc,variable:"",imports:{_:k}},k.prototype=ra.prototype,k.prototype.constructor=k,yi.prototype=Mn(ra.prototype),yi.prototype.constructor=yi;function Xt(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function cy(){var a=new Xt(this.__wrapped__);return a.__actions__=Ke(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Ke(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Ke(this.__views__),a}function uy(){if(this.__filtered__){var a=new Xt(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function fy(){var a=this.__wrapped__.value(),h=this.__dir__,m=Rt(a),w=h<0,I=m?a.length:0,R=Ab(0,I,this.__views__),D=R.start,U=R.end,H=U-D,nt=w?U:D-1,rt=this.__iteratees__,ht=rt.length,pt=0,yt=Ue(H,this.__takeCount__);if(!m||!w&&I==H&&yt==H)return sf(a,this.__actions__);var Tt=[];t:for(;H--&&pt<yt;){nt+=h;for(var Lt=-1,Mt=a[nt];++Lt<ht;){var Nt=rt[Lt],Wt=Nt.iteratee,li=Nt.type,qe=Wt(Mt);if(li==J)Mt=qe;else if(!qe){if(li==V)continue t;break t}}Tt[pt++]=Mt}return Tt}Xt.prototype=Mn(ra.prototype),Xt.prototype.constructor=Xt;function qs(a){var h=-1,m=a==null?0:a.length;for(this.clear();++h<m;){var w=a[h];this.set(w[0],w[1])}}function dy(){this.__data__=or?or(null):{},this.size=0}function py(a){var h=this.has(a)&&delete this.__data__[a];return this.size-=h?1:0,h}function my(a){var h=this.__data__;if(or){var m=h[a];return m===u?e:m}return Qt.call(h,a)?h[a]:e}function gy(a){var h=this.__data__;return or?h[a]!==e:Qt.call(h,a)}function xy(a,h){var m=this.__data__;return this.size+=this.has(a)?0:1,m[a]=or&&h===e?u:h,this}qs.prototype.clear=dy,qs.prototype.delete=py,qs.prototype.get=my,qs.prototype.has=gy,qs.prototype.set=xy;function os(a){var h=-1,m=a==null?0:a.length;for(this.clear();++h<m;){var w=a[h];this.set(w[0],w[1])}}function yy(){this.__data__=[],this.size=0}function by(a){var h=this.__data__,m=aa(h,a);if(m<0)return!1;var w=h.length-1;return m==w?h.pop():Jr.call(h,m,1),--this.size,!0}function _y(a){var h=this.__data__,m=aa(h,a);return m<0?e:h[m][1]}function wy(a){return aa(this.__data__,a)>-1}function vy(a,h){var m=this.__data__,w=aa(m,a);return w<0?(++this.size,m.push([a,h])):m[w][1]=h,this}os.prototype.clear=yy,os.prototype.delete=by,os.prototype.get=_y,os.prototype.has=wy,os.prototype.set=vy;function ls(a){var h=-1,m=a==null?0:a.length;for(this.clear();++h<m;){var w=a[h];this.set(w[0],w[1])}}function Sy(){this.size=0,this.__data__={hash:new qs,map:new(rr||os),string:new qs}}function Ay(a){var h=ya(this,a).delete(a);return this.size-=h?1:0,h}function Cy(a){return ya(this,a).get(a)}function Ty(a){return ya(this,a).has(a)}function My(a,h){var m=ya(this,a),w=m.size;return m.set(a,h),this.size+=m.size==w?0:1,this}ls.prototype.clear=Sy,ls.prototype.delete=Ay,ls.prototype.get=Cy,ls.prototype.has=Ty,ls.prototype.set=My;function js(a){var h=-1,m=a==null?0:a.length;for(this.__data__=new ls;++h<m;)this.add(a[h])}function Py(a){return this.__data__.set(a,u),this}function Iy(a){return this.__data__.has(a)}js.prototype.add=js.prototype.push=Py,js.prototype.has=Iy;function Ei(a){var h=this.__data__=new os(a);this.size=h.size}function ky(){this.__data__=new os,this.size=0}function Ey(a){var h=this.__data__,m=h.delete(a);return this.size=h.size,m}function Ry(a){return this.__data__.get(a)}function Fy(a){return this.__data__.has(a)}function By(a,h){var m=this.__data__;if(m instanceof os){var w=m.__data__;if(!rr||w.length<s-1)return w.push([a,h]),this.size=++m.size,this;m=this.__data__=new ls(w)}return m.set(a,h),this.size=m.size,this}Ei.prototype.clear=ky,Ei.prototype.delete=Ey,Ei.prototype.get=Ry,Ei.prototype.has=Fy,Ei.prototype.set=By;function Fu(a,h){var m=Rt(a),w=!m&&tn(a),I=!m&&!w&&Ls(a),R=!m&&!w&&!I&&En(a),D=m||w||I||R,U=D?Uo(a.length,Gx):[],H=U.length;for(var nt in a)(h||Qt.call(a,nt))&&!(D&&(nt=="length"||I&&(nt=="offset"||nt=="parent")||R&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||fs(nt,H)))&&U.push(nt);return U}function Bu(a){var h=a.length;return h?a[nl(0,h-1)]:e}function Ly(a,h){return ba(Ke(a),Ks(h,0,a.length))}function Oy(a){return ba(Ke(a))}function qo(a,h,m){(m!==e&&!Ri(a[h],m)||m===e&&!(h in a))&&hs(a,h,m)}function hr(a,h,m){var w=a[h];(!(Qt.call(a,h)&&Ri(w,m))||m===e&&!(h in a))&&hs(a,h,m)}function aa(a,h){for(var m=a.length;m--;)if(Ri(a[m][0],h))return m;return-1}function Dy(a,h,m,w){return Es(a,function(I,R,D){h(w,I,m(I),D)}),w}function Lu(a,h){return a&&Hi(h,Ie(h),a)}function Yy(a,h){return a&&Hi(h,Qe(h),a)}function hs(a,h,m){h=="__proto__"&&ta?ta(a,h,{configurable:!0,enumerable:!0,value:m,writable:!0}):a[h]=m}function jo(a,h){for(var m=-1,w=h.length,I=Q(w),R=a==null;++m<w;)I[m]=R?e:Il(a,h[m]);return I}function Ks(a,h,m){return a===a&&(m!==e&&(a=a<=m?a:m),h!==e&&(a=a>=h?a:h)),a}function bi(a,h,m,w,I,R){var D,U=h&d,H=h&g,nt=h&p;if(m&&(D=I?m(a,w,I,R):m(a)),D!==e)return D;if(!de(a))return a;var rt=Rt(a);if(rt){if(D=Tb(a),!U)return Ke(a,D)}else{var ht=We(a),pt=ht==ie||ht==Pe;if(Ls(a))return af(a,U);if(ht==Le||ht==lt||pt&&!I){if(D=H||pt?{}:Cf(a),!U)return H?mb(a,Yy(D,a)):pb(a,Lu(D,a))}else{if(!se[ht])return I?a:{};D=Mb(a,ht,U)}}R||(R=new Ei);var yt=R.get(a);if(yt)return yt;R.set(a,D),td(a)?a.forEach(function(Mt){D.add(bi(Mt,h,m,Mt,a,R))}):Qf(a)&&a.forEach(function(Mt,Nt){D.set(Nt,bi(Mt,h,m,Nt,a,R))});var Tt=nt?H?ml:pl:H?Qe:Ie,Lt=rt?e:Tt(a);return gi(Lt||a,function(Mt,Nt){Lt&&(Nt=Mt,Mt=a[Nt]),hr(D,Nt,bi(Mt,h,m,Nt,a,R))}),D}function Ny(a){var h=Ie(a);return function(m){return Ou(m,a,h)}}function Ou(a,h,m){var w=m.length;if(a==null)return!w;for(a=te(a);w--;){var I=m[w],R=h[I],D=a[I];if(D===e&&!(I in a)||!R(D))return!1}return!0}function Du(a,h,m){if(typeof a!="function")throw new xi(o);return gr(function(){a.apply(e,m)},h)}function cr(a,h,m,w){var I=-1,R=zr,D=!0,U=a.length,H=[],nt=h.length;if(!U)return H;m&&(h=ue(h,ri(m))),w?(R=Lo,D=!1):h.length>=s&&(R=sr,D=!1,h=new js(h));t:for(;++I<U;){var rt=a[I],ht=m==null?rt:m(rt);if(rt=w||rt!==0?rt:0,D&&ht===ht){for(var pt=nt;pt--;)if(h[pt]===ht)continue t;H.push(rt)}else R(h,ht,w)||H.push(rt)}return H}var Es=uf($i),Yu=uf(Zo,!0);function Xy(a,h){var m=!0;return Es(a,function(w,I,R){return m=!!h(w,I,R),m}),m}function oa(a,h,m){for(var w=-1,I=a.length;++w<I;){var R=a[w],D=h(R);if(D!=null&&(U===e?D===D&&!oi(D):m(D,U)))var U=D,H=R}return H}function Uy(a,h,m,w){var I=a.length;for(m=Ft(m),m<0&&(m=-m>I?0:I+m),w=w===e||w>I?I:Ft(w),w<0&&(w+=I),w=m>w?0:id(w);m<w;)a[m++]=h;return a}function Nu(a,h){var m=[];return Es(a,function(w,I,R){h(w,I,R)&&m.push(w)}),m}function Ye(a,h,m,w,I){var R=-1,D=a.length;for(m||(m=Ib),I||(I=[]);++R<D;){var U=a[R];h>0&&m(U)?h>1?Ye(U,h-1,m,w,I):Ps(I,U):w||(I[I.length]=U)}return I}var Ko=ff(),Xu=ff(!0);function $i(a,h){return a&&Ko(a,h,Ie)}function Zo(a,h){return a&&Xu(a,h,Ie)}function la(a,h){return Ms(h,function(m){return ds(a[m])})}function Zs(a,h){h=Fs(h,a);for(var m=0,w=h.length;a!=null&&m<w;)a=a[qi(h[m++])];return m&&m==w?a:e}function Uu(a,h,m){var w=h(a);return Rt(a)?w:Ps(w,m(a))}function $e(a){return a==null?a===e?Cs:Dt:Hs&&Hs in te(a)?Sb(a):Ob(a)}function Qo(a,h){return a>h}function Wy(a,h){return a!=null&&Qt.call(a,h)}function zy(a,h){return a!=null&&h in te(a)}function Gy(a,h,m){return a>=Ue(h,m)&&a<Ce(h,m)}function Jo(a,h,m){for(var w=m?Lo:zr,I=a[0].length,R=a.length,D=R,U=Q(R),H=1/0,nt=[];D--;){var rt=a[D];D&&h&&(rt=ue(rt,ri(h))),H=Ue(rt.length,H),U[D]=!m&&(h||I>=120&&rt.length>=120)?new js(D&&rt):e}rt=a[0];var ht=-1,pt=U[0];t:for(;++ht<I&&nt.length<H;){var yt=rt[ht],Tt=h?h(yt):yt;if(yt=m||yt!==0?yt:0,!(pt?sr(pt,Tt):w(nt,Tt,m))){for(D=R;--D;){var Lt=U[D];if(!(Lt?sr(Lt,Tt):w(a[D],Tt,m)))continue t}pt&&pt.push(Tt),nt.push(yt)}}return nt}function Vy(a,h,m,w){return $i(a,function(I,R,D){h(w,m(I),R,D)}),w}function ur(a,h,m){h=Fs(h,a),a=If(a,h);var w=a==null?a:a[qi(wi(h))];return w==null?e:ni(w,a,m)}function Wu(a){return xe(a)&&$e(a)==lt}function $y(a){return xe(a)&&$e(a)==Vs}function Hy(a){return xe(a)&&$e(a)==It}function fr(a,h,m,w,I){return a===h?!0:a==null||h==null||!xe(a)&&!xe(h)?a!==a&&h!==h:qy(a,h,m,w,fr,I)}function qy(a,h,m,w,I,R){var D=Rt(a),U=Rt(h),H=D?Pt:We(a),nt=U?Pt:We(h);H=H==lt?Le:H,nt=nt==lt?Le:nt;var rt=H==Le,ht=nt==Le,pt=H==nt;if(pt&&Ls(a)){if(!Ls(h))return!1;D=!0,rt=!1}if(pt&&!rt)return R||(R=new Ei),D||En(a)?vf(a,h,m,w,I,R):wb(a,h,H,m,w,I,R);if(!(m&x)){var yt=rt&&Qt.call(a,"__wrapped__"),Tt=ht&&Qt.call(h,"__wrapped__");if(yt||Tt){var Lt=yt?a.value():a,Mt=Tt?h.value():h;return R||(R=new Ei),I(Lt,Mt,m,w,R)}}return pt?(R||(R=new Ei),vb(a,h,m,w,I,R)):!1}function jy(a){return xe(a)&&We(a)==Kt}function tl(a,h,m,w){var I=m.length,R=I,D=!w;if(a==null)return!R;for(a=te(a);I--;){var U=m[I];if(D&&U[2]?U[1]!==a[U[0]]:!(U[0]in a))return!1}for(;++I<R;){U=m[I];var H=U[0],nt=a[H],rt=U[1];if(D&&U[2]){if(nt===e&&!(H in a))return!1}else{var ht=new Ei;if(w)var pt=w(nt,rt,H,a,h,ht);if(!(pt===e?fr(rt,nt,x|y,w,ht):pt))return!1}}return!0}function zu(a){if(!de(a)||Eb(a))return!1;var h=ds(a)?jx:N0;return h.test(Js(a))}function Ky(a){return xe(a)&&$e(a)==Vi}function Zy(a){return xe(a)&&We(a)==be}function Qy(a){return xe(a)&&Ca(a.length)&&!!oe[$e(a)]}function Gu(a){return typeof a=="function"?a:a==null?Je:typeof a=="object"?Rt(a)?Hu(a[0],a[1]):$u(a):dd(a)}function el(a){if(!mr(a))return ey(a);var h=[];for(var m in te(a))Qt.call(a,m)&&m!="constructor"&&h.push(m);return h}function Jy(a){if(!de(a))return Lb(a);var h=mr(a),m=[];for(var w in a)w=="constructor"&&(h||!Qt.call(a,w))||m.push(w);return m}function il(a,h){return a<h}function Vu(a,h){var m=-1,w=Ze(a)?Q(a.length):[];return Es(a,function(I,R,D){w[++m]=h(I,R,D)}),w}function $u(a){var h=xl(a);return h.length==1&&h[0][2]?Mf(h[0][0],h[0][1]):function(m){return m===a||tl(m,a,h)}}function Hu(a,h){return bl(a)&&Tf(h)?Mf(qi(a),h):function(m){var w=Il(m,a);return w===e&&w===h?kl(m,a):fr(h,w,x|y)}}function ha(a,h,m,w,I){a!==h&&Ko(h,function(R,D){if(I||(I=new Ei),de(R))tb(a,h,D,m,ha,w,I);else{var U=w?w(wl(a,D),R,D+"",a,h,I):e;U===e&&(U=R),qo(a,D,U)}},Qe)}function tb(a,h,m,w,I,R,D){var U=wl(a,m),H=wl(h,m),nt=D.get(H);if(nt){qo(a,m,nt);return}var rt=R?R(U,H,m+"",a,h,D):e,ht=rt===e;if(ht){var pt=Rt(H),yt=!pt&&Ls(H),Tt=!pt&&!yt&&En(H);rt=H,pt||yt||Tt?Rt(U)?rt=U:_e(U)?rt=Ke(U):yt?(ht=!1,rt=af(H,!0)):Tt?(ht=!1,rt=of(H,!0)):rt=[]:xr(H)||tn(H)?(rt=U,tn(U)?rt=sd(U):(!de(U)||ds(U))&&(rt=Cf(H))):ht=!1}ht&&(D.set(H,rt),I(rt,H,w,R,D),D.delete(H)),qo(a,m,rt)}function qu(a,h){var m=a.length;if(m)return h+=h<0?m:0,fs(h,m)?a[h]:e}function ju(a,h,m){h.length?h=ue(h,function(R){return Rt(R)?function(D){return Zs(D,R.length===1?R[0]:R)}:R}):h=[Je];var w=-1;h=ue(h,ri(At()));var I=Vu(a,function(R,D,U){var H=ue(h,function(nt){return nt(R)});return{criteria:H,index:++w,value:R}});return Mx(I,function(R,D){return db(R,D,m)})}function eb(a,h){return Ku(a,h,function(m,w){return kl(a,w)})}function Ku(a,h,m){for(var w=-1,I=h.length,R={};++w<I;){var D=h[w],U=Zs(a,D);m(U,D)&&dr(R,Fs(D,a),U)}return R}function ib(a){return function(h){return Zs(h,a)}}function sl(a,h,m,w){var I=w?Tx:_n,R=-1,D=h.length,U=a;for(a===h&&(h=Ke(h)),m&&(U=ue(a,ri(m)));++R<D;)for(var H=0,nt=h[R],rt=m?m(nt):nt;(H=I(U,rt,H,w))>-1;)U!==a&&Jr.call(U,H,1),Jr.call(a,H,1);return a}function Zu(a,h){for(var m=a?h.length:0,w=m-1;m--;){var I=h[m];if(m==w||I!==R){var R=I;fs(I)?Jr.call(a,I,1):ol(a,I)}}return a}function nl(a,h){return a+ia(Eu()*(h-a+1))}function sb(a,h,m,w){for(var I=-1,R=Ce(ea((h-a)/(m||1)),0),D=Q(R);R--;)D[w?R:++I]=a,a+=m;return D}function rl(a,h){var m="";if(!a||h<1||h>Y)return m;do h%2&&(m+=a),h=ia(h/2),h&&(a+=a);while(h);return m}function Yt(a,h){return vl(Pf(a,h,Je),a+"")}function nb(a){return Bu(Rn(a))}function rb(a,h){var m=Rn(a);return ba(m,Ks(h,0,m.length))}function dr(a,h,m,w){if(!de(a))return a;h=Fs(h,a);for(var I=-1,R=h.length,D=R-1,U=a;U!=null&&++I<R;){var H=qi(h[I]),nt=m;if(H==="__proto__"||H==="constructor"||H==="prototype")return a;if(I!=D){var rt=U[H];nt=w?w(rt,H,U):e,nt===e&&(nt=de(rt)?rt:fs(h[I+1])?[]:{})}hr(U,H,nt),U=U[H]}return a}var Qu=sa?function(a,h){return sa.set(a,h),a}:Je,ab=ta?function(a,h){return ta(a,"toString",{configurable:!0,enumerable:!1,value:Rl(h),writable:!0})}:Je;function ob(a){return ba(Rn(a))}function _i(a,h,m){var w=-1,I=a.length;h<0&&(h=-h>I?0:I+h),m=m>I?I:m,m<0&&(m+=I),I=h>m?0:m-h>>>0,h>>>=0;for(var R=Q(I);++w<I;)R[w]=a[w+h];return R}function lb(a,h){var m;return Es(a,function(w,I,R){return m=h(w,I,R),!m}),!!m}function ca(a,h,m){var w=0,I=a==null?w:a.length;if(typeof h=="number"&&h===h&&I<=Z){for(;w<I;){var R=w+I>>>1,D=a[R];D!==null&&!oi(D)&&(m?D<=h:D<h)?w=R+1:I=R}return I}return al(a,h,Je,m)}function al(a,h,m,w){var I=0,R=a==null?0:a.length;if(R===0)return 0;h=m(h);for(var D=h!==h,U=h===null,H=oi(h),nt=h===e;I<R;){var rt=ia((I+R)/2),ht=m(a[rt]),pt=ht!==e,yt=ht===null,Tt=ht===ht,Lt=oi(ht);if(D)var Mt=w||Tt;else nt?Mt=Tt&&(w||pt):U?Mt=Tt&&pt&&(w||!yt):H?Mt=Tt&&pt&&!yt&&(w||!Lt):yt||Lt?Mt=!1:Mt=w?ht<=h:ht<h;Mt?I=rt+1:R=rt}return Ue(R,tt)}function Ju(a,h){for(var m=-1,w=a.length,I=0,R=[];++m<w;){var D=a[m],U=h?h(D):D;if(!m||!Ri(U,H)){var H=U;R[I++]=D===0?0:D}}return R}function tf(a){return typeof a=="number"?a:oi(a)?q:+a}function ai(a){if(typeof a=="string")return a;if(Rt(a))return ue(a,ai)+"";if(oi(a))return Ru?Ru.call(a):"";var h=a+"";return h=="0"&&1/a==-1/0?"-0":h}function Rs(a,h,m){var w=-1,I=zr,R=a.length,D=!0,U=[],H=U;if(m)D=!1,I=Lo;else if(R>=s){var nt=h?null:bb(a);if(nt)return Vr(nt);D=!1,I=sr,H=new js}else H=h?[]:U;t:for(;++w<R;){var rt=a[w],ht=h?h(rt):rt;if(rt=m||rt!==0?rt:0,D&&ht===ht){for(var pt=H.length;pt--;)if(H[pt]===ht)continue t;h&&H.push(ht),U.push(rt)}else I(H,ht,m)||(H!==U&&H.push(ht),U.push(rt))}return U}function ol(a,h){return h=Fs(h,a),a=If(a,h),a==null||delete a[qi(wi(h))]}function ef(a,h,m,w){return dr(a,h,m(Zs(a,h)),w)}function ua(a,h,m,w){for(var I=a.length,R=w?I:-1;(w?R--:++R<I)&&h(a[R],R,a););return m?_i(a,w?0:R,w?R+1:I):_i(a,w?R+1:0,w?I:R)}function sf(a,h){var m=a;return m instanceof Xt&&(m=m.value()),Oo(h,function(w,I){return I.func.apply(I.thisArg,Ps([w],I.args))},m)}function ll(a,h,m){var w=a.length;if(w<2)return w?Rs(a[0]):[];for(var I=-1,R=Q(w);++I<w;)for(var D=a[I],U=-1;++U<w;)U!=I&&(R[I]=cr(R[I]||D,a[U],h,m));return Rs(Ye(R,1),h,m)}function nf(a,h,m){for(var w=-1,I=a.length,R=h.length,D={};++w<I;){var U=w<R?h[w]:e;m(D,a[w],U)}return D}function hl(a){return _e(a)?a:[]}function cl(a){return typeof a=="function"?a:Je}function Fs(a,h){return Rt(a)?a:bl(a,h)?[a]:Ff(Zt(a))}var hb=Yt;function Bs(a,h,m){var w=a.length;return m=m===e?w:m,!h&&m>=w?a:_i(a,h,m)}var rf=Kx||function(a){return De.clearTimeout(a)};function af(a,h){if(h)return a.slice();var m=a.length,w=Tu?Tu(m):new a.constructor(m);return a.copy(w),w}function ul(a){var h=new a.constructor(a.byteLength);return new Zr(h).set(new Zr(a)),h}function cb(a,h){var m=h?ul(a.buffer):a.buffer;return new a.constructor(m,a.byteOffset,a.byteLength)}function ub(a){var h=new a.constructor(a.source,Wc.exec(a));return h.lastIndex=a.lastIndex,h}function fb(a){return lr?te(lr.call(a)):{}}function of(a,h){var m=h?ul(a.buffer):a.buffer;return new a.constructor(m,a.byteOffset,a.length)}function lf(a,h){if(a!==h){var m=a!==e,w=a===null,I=a===a,R=oi(a),D=h!==e,U=h===null,H=h===h,nt=oi(h);if(!U&&!nt&&!R&&a>h||R&&D&&H&&!U&&!nt||w&&D&&H||!m&&H||!I)return 1;if(!w&&!R&&!nt&&a<h||nt&&m&&I&&!w&&!R||U&&m&&I||!D&&I||!H)return-1}return 0}function db(a,h,m){for(var w=-1,I=a.criteria,R=h.criteria,D=I.length,U=m.length;++w<D;){var H=lf(I[w],R[w]);if(H){if(w>=U)return H;var nt=m[w];return H*(nt=="desc"?-1:1)}}return a.index-h.index}function hf(a,h,m,w){for(var I=-1,R=a.length,D=m.length,U=-1,H=h.length,nt=Ce(R-D,0),rt=Q(H+nt),ht=!w;++U<H;)rt[U]=h[U];for(;++I<D;)(ht||I<R)&&(rt[m[I]]=a[I]);for(;nt--;)rt[U++]=a[I++];return rt}function cf(a,h,m,w){for(var I=-1,R=a.length,D=-1,U=m.length,H=-1,nt=h.length,rt=Ce(R-U,0),ht=Q(rt+nt),pt=!w;++I<rt;)ht[I]=a[I];for(var yt=I;++H<nt;)ht[yt+H]=h[H];for(;++D<U;)(pt||I<R)&&(ht[yt+m[D]]=a[I++]);return ht}function Ke(a,h){var m=-1,w=a.length;for(h||(h=Q(w));++m<w;)h[m]=a[m];return h}function Hi(a,h,m,w){var I=!m;m||(m={});for(var R=-1,D=h.length;++R<D;){var U=h[R],H=w?w(m[U],a[U],U,m,a):e;H===e&&(H=a[U]),I?hs(m,U,H):hr(m,U,H)}return m}function pb(a,h){return Hi(a,yl(a),h)}function mb(a,h){return Hi(a,Sf(a),h)}function fa(a,h){return function(m,w){var I=Rt(m)?_x:Dy,R=h?h():{};return I(m,a,At(w,2),R)}}function Pn(a){return Yt(function(h,m){var w=-1,I=m.length,R=I>1?m[I-1]:e,D=I>2?m[2]:e;for(R=a.length>3&&typeof R=="function"?(I--,R):e,D&&He(m[0],m[1],D)&&(R=I<3?e:R,I=1),h=te(h);++w<I;){var U=m[w];U&&a(h,U,w,R)}return h})}function uf(a,h){return function(m,w){if(m==null)return m;if(!Ze(m))return a(m,w);for(var I=m.length,R=h?I:-1,D=te(m);(h?R--:++R<I)&&w(D[R],R,D)!==!1;);return m}}function ff(a){return function(h,m,w){for(var I=-1,R=te(h),D=w(h),U=D.length;U--;){var H=D[a?U:++I];if(m(R[H],H,R)===!1)break}return h}}function gb(a,h,m){var w=h&b,I=pr(a);function R(){var D=this&&this!==De&&this instanceof R?I:a;return D.apply(w?m:this,arguments)}return R}function df(a){return function(h){h=Zt(h);var m=wn(h)?ki(h):e,w=m?m[0]:h.charAt(0),I=m?Bs(m,1).join(""):h.slice(1);return w[a]()+I}}function In(a){return function(h){return Oo(ud(cd(h).replace(ax,"")),a,"")}}function pr(a){return function(){var h=arguments;switch(h.length){case 0:return new a;case 1:return new a(h[0]);case 2:return new a(h[0],h[1]);case 3:return new a(h[0],h[1],h[2]);case 4:return new a(h[0],h[1],h[2],h[3]);case 5:return new a(h[0],h[1],h[2],h[3],h[4]);case 6:return new a(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new a(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var m=Mn(a.prototype),w=a.apply(m,h);return de(w)?w:m}}function xb(a,h,m){var w=pr(a);function I(){for(var R=arguments.length,D=Q(R),U=R,H=kn(I);U--;)D[U]=arguments[U];var nt=R<3&&D[0]!==H&&D[R-1]!==H?[]:Is(D,H);if(R-=nt.length,R<m)return yf(a,h,da,I.placeholder,e,D,nt,e,e,m-R);var rt=this&&this!==De&&this instanceof I?w:a;return ni(rt,this,D)}return I}function pf(a){return function(h,m,w){var I=te(h);if(!Ze(h)){var R=At(m,3);h=Ie(h),m=function(U){return R(I[U],U,I)}}var D=a(h,m,w);return D>-1?I[R?h[D]:D]:e}}function mf(a){return us(function(h){var m=h.length,w=m,I=yi.prototype.thru;for(a&&h.reverse();w--;){var R=h[w];if(typeof R!="function")throw new xi(o);if(I&&!D&&xa(R)=="wrapper")var D=new yi([],!0)}for(w=D?w:m;++w<m;){R=h[w];var U=xa(R),H=U=="wrapper"?gl(R):e;H&&_l(H[0])&&H[1]==(P|_|M|B)&&!H[4].length&&H[9]==1?D=D[xa(H[0])].apply(D,H[3]):D=R.length==1&&_l(R)?D[U]():D.thru(R)}return function(){var nt=arguments,rt=nt[0];if(D&&nt.length==1&&Rt(rt))return D.plant(rt).value();for(var ht=0,pt=m?h[ht].apply(this,nt):rt;++ht<m;)pt=h[ht].call(this,pt);return pt}})}function da(a,h,m,w,I,R,D,U,H,nt){var rt=h&P,ht=h&b,pt=h&A,yt=h&(_|v),Tt=h&O,Lt=pt?e:pr(a);function Mt(){for(var Nt=arguments.length,Wt=Q(Nt),li=Nt;li--;)Wt[li]=arguments[li];if(yt)var qe=kn(Mt),hi=Ix(Wt,qe);if(w&&(Wt=hf(Wt,w,I,yt)),R&&(Wt=cf(Wt,R,D,yt)),Nt-=hi,yt&&Nt<nt){var we=Is(Wt,qe);return yf(a,h,da,Mt.placeholder,m,Wt,we,U,H,nt-Nt)}var Fi=ht?m:this,ms=pt?Fi[a]:a;return Nt=Wt.length,U?Wt=Db(Wt,U):Tt&&Nt>1&&Wt.reverse(),rt&&H<Nt&&(Wt.length=H),this&&this!==De&&this instanceof Mt&&(ms=Lt||pr(ms)),ms.apply(Fi,Wt)}return Mt}function gf(a,h){return function(m,w){return Vy(m,a,h(w),{})}}function pa(a,h){return function(m,w){var I;if(m===e&&w===e)return h;if(m!==e&&(I=m),w!==e){if(I===e)return w;typeof m=="string"||typeof w=="string"?(m=ai(m),w=ai(w)):(m=tf(m),w=tf(w)),I=a(m,w)}return I}}function fl(a){return us(function(h){return h=ue(h,ri(At())),Yt(function(m){var w=this;return a(h,function(I){return ni(I,w,m)})})})}function ma(a,h){h=h===e?" ":ai(h);var m=h.length;if(m<2)return m?rl(h,a):h;var w=rl(h,ea(a/vn(h)));return wn(h)?Bs(ki(w),0,a).join(""):w.slice(0,a)}function yb(a,h,m,w){var I=h&b,R=pr(a);function D(){for(var U=-1,H=arguments.length,nt=-1,rt=w.length,ht=Q(rt+H),pt=this&&this!==De&&this instanceof D?R:a;++nt<rt;)ht[nt]=w[nt];for(;H--;)ht[nt++]=arguments[++U];return ni(pt,I?m:this,ht)}return D}function xf(a){return function(h,m,w){return w&&typeof w!="number"&&He(h,m,w)&&(m=w=e),h=ps(h),m===e?(m=h,h=0):m=ps(m),w=w===e?h<m?1:-1:ps(w),sb(h,m,w,a)}}function ga(a){return function(h,m){return typeof h=="string"&&typeof m=="string"||(h=vi(h),m=vi(m)),a(h,m)}}function yf(a,h,m,w,I,R,D,U,H,nt){var rt=h&_,ht=rt?D:e,pt=rt?e:D,yt=rt?R:e,Tt=rt?e:R;h|=rt?M:T,h&=~(rt?T:M),h&C||(h&=-4);var Lt=[a,h,I,yt,ht,Tt,pt,U,H,nt],Mt=m.apply(e,Lt);return _l(a)&&kf(Mt,Lt),Mt.placeholder=w,Ef(Mt,a,h)}function dl(a){var h=Ae[a];return function(m,w){if(m=vi(m),w=w==null?0:Ue(Ft(w),292),w&&ku(m)){var I=(Zt(m)+"e").split("e"),R=h(I[0]+"e"+(+I[1]+w));return I=(Zt(R)+"e").split("e"),+(I[0]+"e"+(+I[1]-w))}return h(m)}}var bb=Cn&&1/Vr(new Cn([,-0]))[1]==L?function(a){return new Cn(a)}:Ll;function bf(a){return function(h){var m=We(h);return m==Kt?zo(h):m==be?Ox(h):Px(h,a(h))}}function cs(a,h,m,w,I,R,D,U){var H=h&A;if(!H&&typeof a!="function")throw new xi(o);var nt=w?w.length:0;if(nt||(h&=-97,w=I=e),D=D===e?D:Ce(Ft(D),0),U=U===e?U:Ft(U),nt-=I?I.length:0,h&T){var rt=w,ht=I;w=I=e}var pt=H?e:gl(a),yt=[a,h,m,w,I,rt,ht,R,D,U];if(pt&&Bb(yt,pt),a=yt[0],h=yt[1],m=yt[2],w=yt[3],I=yt[4],U=yt[9]=yt[9]===e?H?0:a.length:Ce(yt[9]-nt,0),!U&&h&(_|v)&&(h&=-25),!h||h==b)var Tt=gb(a,h,m);else h==_||h==v?Tt=xb(a,h,U):(h==M||h==(b|M))&&!I.length?Tt=yb(a,h,m,w):Tt=da.apply(e,yt);var Lt=pt?Qu:kf;return Ef(Lt(Tt,yt),a,h)}function _f(a,h,m,w){return a===e||Ri(a,An[m])&&!Qt.call(w,m)?h:a}function wf(a,h,m,w,I,R){return de(a)&&de(h)&&(R.set(h,a),ha(a,h,e,wf,R),R.delete(h)),a}function _b(a){return xr(a)?e:a}function vf(a,h,m,w,I,R){var D=m&x,U=a.length,H=h.length;if(U!=H&&!(D&&H>U))return!1;var nt=R.get(a),rt=R.get(h);if(nt&&rt)return nt==h&&rt==a;var ht=-1,pt=!0,yt=m&y?new js:e;for(R.set(a,h),R.set(h,a);++ht<U;){var Tt=a[ht],Lt=h[ht];if(w)var Mt=D?w(Lt,Tt,ht,h,a,R):w(Tt,Lt,ht,a,h,R);if(Mt!==e){if(Mt)continue;pt=!1;break}if(yt){if(!Do(h,function(Nt,Wt){if(!sr(yt,Wt)&&(Tt===Nt||I(Tt,Nt,m,w,R)))return yt.push(Wt)})){pt=!1;break}}else if(!(Tt===Lt||I(Tt,Lt,m,w,R))){pt=!1;break}}return R.delete(a),R.delete(h),pt}function wb(a,h,m,w,I,R,D){switch(m){case as:if(a.byteLength!=h.byteLength||a.byteOffset!=h.byteOffset)return!1;a=a.buffer,h=h.buffer;case Vs:return!(a.byteLength!=h.byteLength||!R(new Zr(a),new Zr(h)));case gt:case It:case St:return Ri(+a,+h);case ee:return a.name==h.name&&a.message==h.message;case Vi:case ii:return a==h+"";case Kt:var U=zo;case be:var H=w&x;if(U||(U=Vr),a.size!=h.size&&!H)return!1;var nt=D.get(a);if(nt)return nt==h;w|=y,D.set(a,h);var rt=vf(U(a),U(h),w,I,R,D);return D.delete(a),rt;case rs:if(lr)return lr.call(a)==lr.call(h)}return!1}function vb(a,h,m,w,I,R){var D=m&x,U=pl(a),H=U.length,nt=pl(h),rt=nt.length;if(H!=rt&&!D)return!1;for(var ht=H;ht--;){var pt=U[ht];if(!(D?pt in h:Qt.call(h,pt)))return!1}var yt=R.get(a),Tt=R.get(h);if(yt&&Tt)return yt==h&&Tt==a;var Lt=!0;R.set(a,h),R.set(h,a);for(var Mt=D;++ht<H;){pt=U[ht];var Nt=a[pt],Wt=h[pt];if(w)var li=D?w(Wt,Nt,pt,h,a,R):w(Nt,Wt,pt,a,h,R);if(!(li===e?Nt===Wt||I(Nt,Wt,m,w,R):li)){Lt=!1;break}Mt||(Mt=pt=="constructor")}if(Lt&&!Mt){var qe=a.constructor,hi=h.constructor;qe!=hi&&"constructor"in a&&"constructor"in h&&!(typeof qe=="function"&&qe instanceof qe&&typeof hi=="function"&&hi instanceof hi)&&(Lt=!1)}return R.delete(a),R.delete(h),Lt}function us(a){return vl(Pf(a,e,Df),a+"")}function pl(a){return Uu(a,Ie,yl)}function ml(a){return Uu(a,Qe,Sf)}var gl=sa?function(a){return sa.get(a)}:Ll;function xa(a){for(var h=a.name+"",m=Tn[h],w=Qt.call(Tn,h)?m.length:0;w--;){var I=m[w],R=I.func;if(R==null||R==a)return I.name}return h}function kn(a){var h=Qt.call(k,"placeholder")?k:a;return h.placeholder}function At(){var a=k.iteratee||Fl;return a=a===Fl?Gu:a,arguments.length?a(arguments[0],arguments[1]):a}function ya(a,h){var m=a.__data__;return kb(h)?m[typeof h=="string"?"string":"hash"]:m.map}function xl(a){for(var h=Ie(a),m=h.length;m--;){var w=h[m],I=a[w];h[m]=[w,I,Tf(I)]}return h}function Qs(a,h){var m=Fx(a,h);return zu(m)?m:e}function Sb(a){var h=Qt.call(a,Hs),m=a[Hs];try{a[Hs]=e;var w=!0}catch{}var I=jr.call(a);return w&&(h?a[Hs]=m:delete a[Hs]),I}var yl=Vo?function(a){return a==null?[]:(a=te(a),Ms(Vo(a),function(h){return Pu.call(a,h)}))}:Ol,Sf=Vo?function(a){for(var h=[];a;)Ps(h,yl(a)),a=Qr(a);return h}:Ol,We=$e;($o&&We(new $o(new ArrayBuffer(1)))!=as||rr&&We(new rr)!=Kt||Ho&&We(Ho.resolve())!=Ii||Cn&&We(new Cn)!=be||ar&&We(new ar)!=Gs)&&(We=function(a){var h=$e(a),m=h==Le?a.constructor:e,w=m?Js(m):"";if(w)switch(w){case ry:return as;case ay:return Kt;case oy:return Ii;case ly:return be;case hy:return Gs}return h});function Ab(a,h,m){for(var w=-1,I=m.length;++w<I;){var R=m[w],D=R.size;switch(R.type){case"drop":a+=D;break;case"dropRight":h-=D;break;case"take":h=Ue(h,a+D);break;case"takeRight":a=Ce(a,h-D);break}}return{start:a,end:h}}function Cb(a){var h=a.match(E0);return h?h[1].split(R0):[]}function Af(a,h,m){h=Fs(h,a);for(var w=-1,I=h.length,R=!1;++w<I;){var D=qi(h[w]);if(!(R=a!=null&&m(a,D)))break;a=a[D]}return R||++w!=I?R:(I=a==null?0:a.length,!!I&&Ca(I)&&fs(D,I)&&(Rt(a)||tn(a)))}function Tb(a){var h=a.length,m=new a.constructor(h);return h&&typeof a[0]=="string"&&Qt.call(a,"index")&&(m.index=a.index,m.input=a.input),m}function Cf(a){return typeof a.constructor=="function"&&!mr(a)?Mn(Qr(a)):{}}function Mb(a,h,m){var w=a.constructor;switch(h){case Vs:return ul(a);case gt:case It:return new w(+a);case as:return cb(a,m);case xn:case pi:case yn:case F:case z:case ot:case st:case ut:case xt:return of(a,m);case Kt:return new w;case St:case ii:return new w(a);case Vi:return ub(a);case be:return new w;case rs:return fb(a)}}function Pb(a,h){var m=h.length;if(!m)return a;var w=m-1;return h[w]=(m>1?"& ":"")+h[w],h=h.join(m>2?", ":" "),a.replace(k0,`{
/* [wrapped with `+h+`] */
`)}function Ib(a){return Rt(a)||tn(a)||!!(Iu&&a&&a[Iu])}function fs(a,h){var m=typeof a;return h=h??Y,!!h&&(m=="number"||m!="symbol"&&U0.test(a))&&a>-1&&a%1==0&&a<h}function He(a,h,m){if(!de(m))return!1;var w=typeof h;return(w=="number"?Ze(m)&&fs(h,m.length):w=="string"&&h in m)?Ri(m[h],a):!1}function bl(a,h){if(Rt(a))return!1;var m=typeof a;return m=="number"||m=="symbol"||m=="boolean"||a==null||oi(a)?!0:T0.test(a)||!C0.test(a)||h!=null&&a in te(h)}function kb(a){var h=typeof a;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?a!=="__proto__":a===null}function _l(a){var h=xa(a),m=k[h];if(typeof m!="function"||!(h in Xt.prototype))return!1;if(a===m)return!0;var w=gl(m);return!!w&&a===w[0]}function Eb(a){return!!Cu&&Cu in a}var Rb=Hr?ds:Dl;function mr(a){var h=a&&a.constructor,m=typeof h=="function"&&h.prototype||An;return a===m}function Tf(a){return a===a&&!de(a)}function Mf(a,h){return function(m){return m==null?!1:m[a]===h&&(h!==e||a in te(m))}}function Fb(a){var h=Sa(a,function(w){return m.size===c&&m.clear(),w}),m=h.cache;return h}function Bb(a,h){var m=a[1],w=h[1],I=m|w,R=I<(b|A|P),D=w==P&&m==_||w==P&&m==B&&a[7].length<=h[8]||w==(P|B)&&h[7].length<=h[8]&&m==_;if(!(R||D))return a;w&b&&(a[2]=h[2],I|=m&b?0:C);var U=h[3];if(U){var H=a[3];a[3]=H?hf(H,U,h[4]):U,a[4]=H?Is(a[3],f):h[4]}return U=h[5],U&&(H=a[5],a[5]=H?cf(H,U,h[6]):U,a[6]=H?Is(a[5],f):h[6]),U=h[7],U&&(a[7]=U),w&P&&(a[8]=a[8]==null?h[8]:Ue(a[8],h[8])),a[9]==null&&(a[9]=h[9]),a[0]=h[0],a[1]=I,a}function Lb(a){var h=[];if(a!=null)for(var m in te(a))h.push(m);return h}function Ob(a){return jr.call(a)}function Pf(a,h,m){return h=Ce(h===e?a.length-1:h,0),function(){for(var w=arguments,I=-1,R=Ce(w.length-h,0),D=Q(R);++I<R;)D[I]=w[h+I];I=-1;for(var U=Q(h+1);++I<h;)U[I]=w[I];return U[h]=m(D),ni(a,this,U)}}function If(a,h){return h.length<2?a:Zs(a,_i(h,0,-1))}function Db(a,h){for(var m=a.length,w=Ue(h.length,m),I=Ke(a);w--;){var R=h[w];a[w]=fs(R,m)?I[R]:e}return a}function wl(a,h){if(!(h==="constructor"&&typeof a[h]=="function")&&h!="__proto__")return a[h]}var kf=Rf(Qu),gr=Qx||function(a,h){return De.setTimeout(a,h)},vl=Rf(ab);function Ef(a,h,m){var w=h+"";return vl(a,Pb(w,Yb(Cb(w),m)))}function Rf(a){var h=0,m=0;return function(){var w=iy(),I=K-(w-m);if(m=w,I>0){if(++h>=et)return arguments[0]}else h=0;return a.apply(e,arguments)}}function ba(a,h){var m=-1,w=a.length,I=w-1;for(h=h===e?w:h;++m<h;){var R=nl(m,I),D=a[R];a[R]=a[m],a[m]=D}return a.length=h,a}var Ff=Fb(function(a){var h=[];return a.charCodeAt(0)===46&&h.push(""),a.replace(M0,function(m,w,I,R){h.push(I?R.replace(L0,"$1"):w||m)}),h});function qi(a){if(typeof a=="string"||oi(a))return a;var h=a+"";return h=="0"&&1/a==-1/0?"-0":h}function Js(a){if(a!=null){try{return qr.call(a)}catch{}try{return a+""}catch{}}return""}function Yb(a,h){return gi(ct,function(m){var w="_."+m[0];h&m[1]&&!zr(a,w)&&a.push(w)}),a.sort()}function Bf(a){if(a instanceof Xt)return a.clone();var h=new yi(a.__wrapped__,a.__chain__);return h.__actions__=Ke(a.__actions__),h.__index__=a.__index__,h.__values__=a.__values__,h}function Nb(a,h,m){(m?He(a,h,m):h===e)?h=1:h=Ce(Ft(h),0);var w=a==null?0:a.length;if(!w||h<1)return[];for(var I=0,R=0,D=Q(ea(w/h));I<w;)D[R++]=_i(a,I,I+=h);return D}function Xb(a){for(var h=-1,m=a==null?0:a.length,w=0,I=[];++h<m;){var R=a[h];R&&(I[w++]=R)}return I}function Ub(){var a=arguments.length;if(!a)return[];for(var h=Q(a-1),m=arguments[0],w=a;w--;)h[w-1]=arguments[w];return Ps(Rt(m)?Ke(m):[m],Ye(h,1))}var Wb=Yt(function(a,h){return _e(a)?cr(a,Ye(h,1,_e,!0)):[]}),zb=Yt(function(a,h){var m=wi(h);return _e(m)&&(m=e),_e(a)?cr(a,Ye(h,1,_e,!0),At(m,2)):[]}),Gb=Yt(function(a,h){var m=wi(h);return _e(m)&&(m=e),_e(a)?cr(a,Ye(h,1,_e,!0),e,m):[]});function Vb(a,h,m){var w=a==null?0:a.length;return w?(h=m||h===e?1:Ft(h),_i(a,h<0?0:h,w)):[]}function $b(a,h,m){var w=a==null?0:a.length;return w?(h=m||h===e?1:Ft(h),h=w-h,_i(a,0,h<0?0:h)):[]}function Hb(a,h){return a&&a.length?ua(a,At(h,3),!0,!0):[]}function qb(a,h){return a&&a.length?ua(a,At(h,3),!0):[]}function jb(a,h,m,w){var I=a==null?0:a.length;return I?(m&&typeof m!="number"&&He(a,h,m)&&(m=0,w=I),Uy(a,h,m,w)):[]}function Lf(a,h,m){var w=a==null?0:a.length;if(!w)return-1;var I=m==null?0:Ft(m);return I<0&&(I=Ce(w+I,0)),Gr(a,At(h,3),I)}function Of(a,h,m){var w=a==null?0:a.length;if(!w)return-1;var I=w-1;return m!==e&&(I=Ft(m),I=m<0?Ce(w+I,0):Ue(I,w-1)),Gr(a,At(h,3),I,!0)}function Df(a){var h=a==null?0:a.length;return h?Ye(a,1):[]}function Kb(a){var h=a==null?0:a.length;return h?Ye(a,L):[]}function Zb(a,h){var m=a==null?0:a.length;return m?(h=h===e?1:Ft(h),Ye(a,h)):[]}function Qb(a){for(var h=-1,m=a==null?0:a.length,w={};++h<m;){var I=a[h];w[I[0]]=I[1]}return w}function Yf(a){return a&&a.length?a[0]:e}function Jb(a,h,m){var w=a==null?0:a.length;if(!w)return-1;var I=m==null?0:Ft(m);return I<0&&(I=Ce(w+I,0)),_n(a,h,I)}function t1(a){var h=a==null?0:a.length;return h?_i(a,0,-1):[]}var e1=Yt(function(a){var h=ue(a,hl);return h.length&&h[0]===a[0]?Jo(h):[]}),i1=Yt(function(a){var h=wi(a),m=ue(a,hl);return h===wi(m)?h=e:m.pop(),m.length&&m[0]===a[0]?Jo(m,At(h,2)):[]}),s1=Yt(function(a){var h=wi(a),m=ue(a,hl);return h=typeof h=="function"?h:e,h&&m.pop(),m.length&&m[0]===a[0]?Jo(m,e,h):[]});function n1(a,h){return a==null?"":ty.call(a,h)}function wi(a){var h=a==null?0:a.length;return h?a[h-1]:e}function r1(a,h,m){var w=a==null?0:a.length;if(!w)return-1;var I=w;return m!==e&&(I=Ft(m),I=I<0?Ce(w+I,0):Ue(I,w-1)),h===h?Yx(a,h,I):Gr(a,xu,I,!0)}function a1(a,h){return a&&a.length?qu(a,Ft(h)):e}var o1=Yt(Nf);function Nf(a,h){return a&&a.length&&h&&h.length?sl(a,h):a}function l1(a,h,m){return a&&a.length&&h&&h.length?sl(a,h,At(m,2)):a}function h1(a,h,m){return a&&a.length&&h&&h.length?sl(a,h,e,m):a}var c1=us(function(a,h){var m=a==null?0:a.length,w=jo(a,h);return Zu(a,ue(h,function(I){return fs(I,m)?+I:I}).sort(lf)),w});function u1(a,h){var m=[];if(!(a&&a.length))return m;var w=-1,I=[],R=a.length;for(h=At(h,3);++w<R;){var D=a[w];h(D,w,a)&&(m.push(D),I.push(w))}return Zu(a,I),m}function Sl(a){return a==null?a:ny.call(a)}function f1(a,h,m){var w=a==null?0:a.length;return w?(m&&typeof m!="number"&&He(a,h,m)?(h=0,m=w):(h=h==null?0:Ft(h),m=m===e?w:Ft(m)),_i(a,h,m)):[]}function d1(a,h){return ca(a,h)}function p1(a,h,m){return al(a,h,At(m,2))}function m1(a,h){var m=a==null?0:a.length;if(m){var w=ca(a,h);if(w<m&&Ri(a[w],h))return w}return-1}function g1(a,h){return ca(a,h,!0)}function x1(a,h,m){return al(a,h,At(m,2),!0)}function y1(a,h){var m=a==null?0:a.length;if(m){var w=ca(a,h,!0)-1;if(Ri(a[w],h))return w}return-1}function b1(a){return a&&a.length?Ju(a):[]}function _1(a,h){return a&&a.length?Ju(a,At(h,2)):[]}function w1(a){var h=a==null?0:a.length;return h?_i(a,1,h):[]}function v1(a,h,m){return a&&a.length?(h=m||h===e?1:Ft(h),_i(a,0,h<0?0:h)):[]}function S1(a,h,m){var w=a==null?0:a.length;return w?(h=m||h===e?1:Ft(h),h=w-h,_i(a,h<0?0:h,w)):[]}function A1(a,h){return a&&a.length?ua(a,At(h,3),!1,!0):[]}function C1(a,h){return a&&a.length?ua(a,At(h,3)):[]}var T1=Yt(function(a){return Rs(Ye(a,1,_e,!0))}),M1=Yt(function(a){var h=wi(a);return _e(h)&&(h=e),Rs(Ye(a,1,_e,!0),At(h,2))}),P1=Yt(function(a){var h=wi(a);return h=typeof h=="function"?h:e,Rs(Ye(a,1,_e,!0),e,h)});function I1(a){return a&&a.length?Rs(a):[]}function k1(a,h){return a&&a.length?Rs(a,At(h,2)):[]}function E1(a,h){return h=typeof h=="function"?h:e,a&&a.length?Rs(a,e,h):[]}function Al(a){if(!(a&&a.length))return[];var h=0;return a=Ms(a,function(m){if(_e(m))return h=Ce(m.length,h),!0}),Uo(h,function(m){return ue(a,Yo(m))})}function Xf(a,h){if(!(a&&a.length))return[];var m=Al(a);return h==null?m:ue(m,function(w){return ni(h,e,w)})}var R1=Yt(function(a,h){return _e(a)?cr(a,h):[]}),F1=Yt(function(a){return ll(Ms(a,_e))}),B1=Yt(function(a){var h=wi(a);return _e(h)&&(h=e),ll(Ms(a,_e),At(h,2))}),L1=Yt(function(a){var h=wi(a);return h=typeof h=="function"?h:e,ll(Ms(a,_e),e,h)}),O1=Yt(Al);function D1(a,h){return nf(a||[],h||[],hr)}function Y1(a,h){return nf(a||[],h||[],dr)}var N1=Yt(function(a){var h=a.length,m=h>1?a[h-1]:e;return m=typeof m=="function"?(a.pop(),m):e,Xf(a,m)});function Uf(a){var h=k(a);return h.__chain__=!0,h}function X1(a,h){return h(a),a}function _a(a,h){return h(a)}var U1=us(function(a){var h=a.length,m=h?a[0]:0,w=this.__wrapped__,I=function(R){return jo(R,a)};return h>1||this.__actions__.length||!(w instanceof Xt)||!fs(m)?this.thru(I):(w=w.slice(m,+m+(h?1:0)),w.__actions__.push({func:_a,args:[I],thisArg:e}),new yi(w,this.__chain__).thru(function(R){return h&&!R.length&&R.push(e),R}))});function W1(){return Uf(this)}function z1(){return new yi(this.value(),this.__chain__)}function G1(){this.__values__===e&&(this.__values__=ed(this.value()));var a=this.__index__>=this.__values__.length,h=a?e:this.__values__[this.__index__++];return{done:a,value:h}}function V1(){return this}function $1(a){for(var h,m=this;m instanceof ra;){var w=Bf(m);w.__index__=0,w.__values__=e,h?I.__wrapped__=w:h=w;var I=w;m=m.__wrapped__}return I.__wrapped__=a,h}function H1(){var a=this.__wrapped__;if(a instanceof Xt){var h=a;return this.__actions__.length&&(h=new Xt(this)),h=h.reverse(),h.__actions__.push({func:_a,args:[Sl],thisArg:e}),new yi(h,this.__chain__)}return this.thru(Sl)}function q1(){return sf(this.__wrapped__,this.__actions__)}var j1=fa(function(a,h,m){Qt.call(a,m)?++a[m]:hs(a,m,1)});function K1(a,h,m){var w=Rt(a)?mu:Xy;return m&&He(a,h,m)&&(h=e),w(a,At(h,3))}function Z1(a,h){var m=Rt(a)?Ms:Nu;return m(a,At(h,3))}var Q1=pf(Lf),J1=pf(Of);function t_(a,h){return Ye(wa(a,h),1)}function e_(a,h){return Ye(wa(a,h),L)}function i_(a,h,m){return m=m===e?1:Ft(m),Ye(wa(a,h),m)}function Wf(a,h){var m=Rt(a)?gi:Es;return m(a,At(h,3))}function zf(a,h){var m=Rt(a)?wx:Yu;return m(a,At(h,3))}var s_=fa(function(a,h,m){Qt.call(a,m)?a[m].push(h):hs(a,m,[h])});function n_(a,h,m,w){a=Ze(a)?a:Rn(a),m=m&&!w?Ft(m):0;var I=a.length;return m<0&&(m=Ce(I+m,0)),Ta(a)?m<=I&&a.indexOf(h,m)>-1:!!I&&_n(a,h,m)>-1}var r_=Yt(function(a,h,m){var w=-1,I=typeof h=="function",R=Ze(a)?Q(a.length):[];return Es(a,function(D){R[++w]=I?ni(h,D,m):ur(D,h,m)}),R}),a_=fa(function(a,h,m){hs(a,m,h)});function wa(a,h){var m=Rt(a)?ue:Vu;return m(a,At(h,3))}function o_(a,h,m,w){return a==null?[]:(Rt(h)||(h=h==null?[]:[h]),m=w?e:m,Rt(m)||(m=m==null?[]:[m]),ju(a,h,m))}var l_=fa(function(a,h,m){a[m?0:1].push(h)},function(){return[[],[]]});function h_(a,h,m){var w=Rt(a)?Oo:bu,I=arguments.length<3;return w(a,At(h,4),m,I,Es)}function c_(a,h,m){var w=Rt(a)?vx:bu,I=arguments.length<3;return w(a,At(h,4),m,I,Yu)}function u_(a,h){var m=Rt(a)?Ms:Nu;return m(a,Aa(At(h,3)))}function f_(a){var h=Rt(a)?Bu:nb;return h(a)}function d_(a,h,m){(m?He(a,h,m):h===e)?h=1:h=Ft(h);var w=Rt(a)?Ly:rb;return w(a,h)}function p_(a){var h=Rt(a)?Oy:ob;return h(a)}function m_(a){if(a==null)return 0;if(Ze(a))return Ta(a)?vn(a):a.length;var h=We(a);return h==Kt||h==be?a.size:el(a).length}function g_(a,h,m){var w=Rt(a)?Do:lb;return m&&He(a,h,m)&&(h=e),w(a,At(h,3))}var x_=Yt(function(a,h){if(a==null)return[];var m=h.length;return m>1&&He(a,h[0],h[1])?h=[]:m>2&&He(h[0],h[1],h[2])&&(h=[h[0]]),ju(a,Ye(h,1),[])}),va=Zx||function(){return De.Date.now()};function y_(a,h){if(typeof h!="function")throw new xi(o);return a=Ft(a),function(){if(--a<1)return h.apply(this,arguments)}}function Gf(a,h,m){return h=m?e:h,h=a&&h==null?a.length:h,cs(a,P,e,e,e,e,h)}function Vf(a,h){var m;if(typeof h!="function")throw new xi(o);return a=Ft(a),function(){return--a>0&&(m=h.apply(this,arguments)),a<=1&&(h=e),m}}var Cl=Yt(function(a,h,m){var w=b;if(m.length){var I=Is(m,kn(Cl));w|=M}return cs(a,w,h,m,I)}),$f=Yt(function(a,h,m){var w=b|A;if(m.length){var I=Is(m,kn($f));w|=M}return cs(h,w,a,m,I)});function Hf(a,h,m){h=m?e:h;var w=cs(a,_,e,e,e,e,e,h);return w.placeholder=Hf.placeholder,w}function qf(a,h,m){h=m?e:h;var w=cs(a,v,e,e,e,e,e,h);return w.placeholder=qf.placeholder,w}function jf(a,h,m){var w,I,R,D,U,H,nt=0,rt=!1,ht=!1,pt=!0;if(typeof a!="function")throw new xi(o);h=vi(h)||0,de(m)&&(rt=!!m.leading,ht="maxWait"in m,R=ht?Ce(vi(m.maxWait)||0,h):R,pt="trailing"in m?!!m.trailing:pt);function yt(we){var Fi=w,ms=I;return w=I=e,nt=we,D=a.apply(ms,Fi),D}function Tt(we){return nt=we,U=gr(Nt,h),rt?yt(we):D}function Lt(we){var Fi=we-H,ms=we-nt,pd=h-Fi;return ht?Ue(pd,R-ms):pd}function Mt(we){var Fi=we-H,ms=we-nt;return H===e||Fi>=h||Fi<0||ht&&ms>=R}function Nt(){var we=va();if(Mt(we))return Wt(we);U=gr(Nt,Lt(we))}function Wt(we){return U=e,pt&&w?yt(we):(w=I=e,D)}function li(){U!==e&&rf(U),nt=0,w=H=I=U=e}function qe(){return U===e?D:Wt(va())}function hi(){var we=va(),Fi=Mt(we);if(w=arguments,I=this,H=we,Fi){if(U===e)return Tt(H);if(ht)return rf(U),U=gr(Nt,h),yt(H)}return U===e&&(U=gr(Nt,h)),D}return hi.cancel=li,hi.flush=qe,hi}var b_=Yt(function(a,h){return Du(a,1,h)}),__=Yt(function(a,h,m){return Du(a,vi(h)||0,m)});function w_(a){return cs(a,O)}function Sa(a,h){if(typeof a!="function"||h!=null&&typeof h!="function")throw new xi(o);var m=function(){var w=arguments,I=h?h.apply(this,w):w[0],R=m.cache;if(R.has(I))return R.get(I);var D=a.apply(this,w);return m.cache=R.set(I,D)||R,D};return m.cache=new(Sa.Cache||ls),m}Sa.Cache=ls;function Aa(a){if(typeof a!="function")throw new xi(o);return function(){var h=arguments;switch(h.length){case 0:return!a.call(this);case 1:return!a.call(this,h[0]);case 2:return!a.call(this,h[0],h[1]);case 3:return!a.call(this,h[0],h[1],h[2])}return!a.apply(this,h)}}function v_(a){return Vf(2,a)}var S_=hb(function(a,h){h=h.length==1&&Rt(h[0])?ue(h[0],ri(At())):ue(Ye(h,1),ri(At()));var m=h.length;return Yt(function(w){for(var I=-1,R=Ue(w.length,m);++I<R;)w[I]=h[I].call(this,w[I]);return ni(a,this,w)})}),Tl=Yt(function(a,h){var m=Is(h,kn(Tl));return cs(a,M,e,h,m)}),Kf=Yt(function(a,h){var m=Is(h,kn(Kf));return cs(a,T,e,h,m)}),A_=us(function(a,h){return cs(a,B,e,e,e,h)});function C_(a,h){if(typeof a!="function")throw new xi(o);return h=h===e?h:Ft(h),Yt(a,h)}function T_(a,h){if(typeof a!="function")throw new xi(o);return h=h==null?0:Ce(Ft(h),0),Yt(function(m){var w=m[h],I=Bs(m,0,h);return w&&Ps(I,w),ni(a,this,I)})}function M_(a,h,m){var w=!0,I=!0;if(typeof a!="function")throw new xi(o);return de(m)&&(w="leading"in m?!!m.leading:w,I="trailing"in m?!!m.trailing:I),jf(a,h,{leading:w,maxWait:h,trailing:I})}function P_(a){return Gf(a,1)}function I_(a,h){return Tl(cl(h),a)}function k_(){if(!arguments.length)return[];var a=arguments[0];return Rt(a)?a:[a]}function E_(a){return bi(a,p)}function R_(a,h){return h=typeof h=="function"?h:e,bi(a,p,h)}function F_(a){return bi(a,d|p)}function B_(a,h){return h=typeof h=="function"?h:e,bi(a,d|p,h)}function L_(a,h){return h==null||Ou(a,h,Ie(h))}function Ri(a,h){return a===h||a!==a&&h!==h}var O_=ga(Qo),D_=ga(function(a,h){return a>=h}),tn=Wu(function(){return arguments}())?Wu:function(a){return xe(a)&&Qt.call(a,"callee")&&!Pu.call(a,"callee")},Rt=Q.isArray,Y_=hu?ri(hu):$y;function Ze(a){return a!=null&&Ca(a.length)&&!ds(a)}function _e(a){return xe(a)&&Ze(a)}function N_(a){return a===!0||a===!1||xe(a)&&$e(a)==gt}var Ls=Jx||Dl,X_=cu?ri(cu):Hy;function U_(a){return xe(a)&&a.nodeType===1&&!xr(a)}function W_(a){if(a==null)return!0;if(Ze(a)&&(Rt(a)||typeof a=="string"||typeof a.splice=="function"||Ls(a)||En(a)||tn(a)))return!a.length;var h=We(a);if(h==Kt||h==be)return!a.size;if(mr(a))return!el(a).length;for(var m in a)if(Qt.call(a,m))return!1;return!0}function z_(a,h){return fr(a,h)}function G_(a,h,m){m=typeof m=="function"?m:e;var w=m?m(a,h):e;return w===e?fr(a,h,e,m):!!w}function Ml(a){if(!xe(a))return!1;var h=$e(a);return h==ee||h==wt||typeof a.message=="string"&&typeof a.name=="string"&&!xr(a)}function V_(a){return typeof a=="number"&&ku(a)}function ds(a){if(!de(a))return!1;var h=$e(a);return h==ie||h==Pe||h==Ct||h==As}function Zf(a){return typeof a=="number"&&a==Ft(a)}function Ca(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Y}function de(a){var h=typeof a;return a!=null&&(h=="object"||h=="function")}function xe(a){return a!=null&&typeof a=="object"}var Qf=uu?ri(uu):jy;function $_(a,h){return a===h||tl(a,h,xl(h))}function H_(a,h,m){return m=typeof m=="function"?m:e,tl(a,h,xl(h),m)}function q_(a){return Jf(a)&&a!=+a}function j_(a){if(Rb(a))throw new Et(r);return zu(a)}function K_(a){return a===null}function Z_(a){return a==null}function Jf(a){return typeof a=="number"||xe(a)&&$e(a)==St}function xr(a){if(!xe(a)||$e(a)!=Le)return!1;var h=Qr(a);if(h===null)return!0;var m=Qt.call(h,"constructor")&&h.constructor;return typeof m=="function"&&m instanceof m&&qr.call(m)==Hx}var Pl=fu?ri(fu):Ky;function Q_(a){return Zf(a)&&a>=-9007199254740991&&a<=Y}var td=du?ri(du):Zy;function Ta(a){return typeof a=="string"||!Rt(a)&&xe(a)&&$e(a)==ii}function oi(a){return typeof a=="symbol"||xe(a)&&$e(a)==rs}var En=pu?ri(pu):Qy;function J_(a){return a===e}function tw(a){return xe(a)&&We(a)==Gs}function ew(a){return xe(a)&&$e(a)==Nr}var iw=ga(il),sw=ga(function(a,h){return a<=h});function ed(a){if(!a)return[];if(Ze(a))return Ta(a)?ki(a):Ke(a);if(nr&&a[nr])return Lx(a[nr]());var h=We(a),m=h==Kt?zo:h==be?Vr:Rn;return m(a)}function ps(a){if(!a)return a===0?a:0;if(a=vi(a),a===L||a===-1/0){var h=a<0?-1:1;return h*W}return a===a?a:0}function Ft(a){var h=ps(a),m=h%1;return h===h?m?h-m:h:0}function id(a){return a?Ks(Ft(a),0,j):0}function vi(a){if(typeof a=="number")return a;if(oi(a))return q;if(de(a)){var h=typeof a.valueOf=="function"?a.valueOf():a;a=de(h)?h+"":h}if(typeof a!="string")return a===0?a:+a;a=_u(a);var m=Y0.test(a);return m||X0.test(a)?yx(a.slice(2),m?2:8):D0.test(a)?q:+a}function sd(a){return Hi(a,Qe(a))}function nw(a){return a?Ks(Ft(a),-9007199254740991,Y):a===0?a:0}function Zt(a){return a==null?"":ai(a)}var rw=Pn(function(a,h){if(mr(h)||Ze(h)){Hi(h,Ie(h),a);return}for(var m in h)Qt.call(h,m)&&hr(a,m,h[m])}),nd=Pn(function(a,h){Hi(h,Qe(h),a)}),Ma=Pn(function(a,h,m,w){Hi(h,Qe(h),a,w)}),aw=Pn(function(a,h,m,w){Hi(h,Ie(h),a,w)}),ow=us(jo);function lw(a,h){var m=Mn(a);return h==null?m:Lu(m,h)}var hw=Yt(function(a,h){a=te(a);var m=-1,w=h.length,I=w>2?h[2]:e;for(I&&He(h[0],h[1],I)&&(w=1);++m<w;)for(var R=h[m],D=Qe(R),U=-1,H=D.length;++U<H;){var nt=D[U],rt=a[nt];(rt===e||Ri(rt,An[nt])&&!Qt.call(a,nt))&&(a[nt]=R[nt])}return a}),cw=Yt(function(a){return a.push(e,wf),ni(rd,e,a)});function uw(a,h){return gu(a,At(h,3),$i)}function fw(a,h){return gu(a,At(h,3),Zo)}function dw(a,h){return a==null?a:Ko(a,At(h,3),Qe)}function pw(a,h){return a==null?a:Xu(a,At(h,3),Qe)}function mw(a,h){return a&&$i(a,At(h,3))}function gw(a,h){return a&&Zo(a,At(h,3))}function xw(a){return a==null?[]:la(a,Ie(a))}function yw(a){return a==null?[]:la(a,Qe(a))}function Il(a,h,m){var w=a==null?e:Zs(a,h);return w===e?m:w}function bw(a,h){return a!=null&&Af(a,h,Wy)}function kl(a,h){return a!=null&&Af(a,h,zy)}var _w=gf(function(a,h,m){h!=null&&typeof h.toString!="function"&&(h=jr.call(h)),a[h]=m},Rl(Je)),ww=gf(function(a,h,m){h!=null&&typeof h.toString!="function"&&(h=jr.call(h)),Qt.call(a,h)?a[h].push(m):a[h]=[m]},At),vw=Yt(ur);function Ie(a){return Ze(a)?Fu(a):el(a)}function Qe(a){return Ze(a)?Fu(a,!0):Jy(a)}function Sw(a,h){var m={};return h=At(h,3),$i(a,function(w,I,R){hs(m,h(w,I,R),w)}),m}function Aw(a,h){var m={};return h=At(h,3),$i(a,function(w,I,R){hs(m,I,h(w,I,R))}),m}var Cw=Pn(function(a,h,m){ha(a,h,m)}),rd=Pn(function(a,h,m,w){ha(a,h,m,w)}),Tw=us(function(a,h){var m={};if(a==null)return m;var w=!1;h=ue(h,function(R){return R=Fs(R,a),w||(w=R.length>1),R}),Hi(a,ml(a),m),w&&(m=bi(m,d|g|p,_b));for(var I=h.length;I--;)ol(m,h[I]);return m});function Mw(a,h){return ad(a,Aa(At(h)))}var Pw=us(function(a,h){return a==null?{}:eb(a,h)});function ad(a,h){if(a==null)return{};var m=ue(ml(a),function(w){return[w]});return h=At(h),Ku(a,m,function(w,I){return h(w,I[0])})}function Iw(a,h,m){h=Fs(h,a);var w=-1,I=h.length;for(I||(I=1,a=e);++w<I;){var R=a==null?e:a[qi(h[w])];R===e&&(w=I,R=m),a=ds(R)?R.call(a):R}return a}function kw(a,h,m){return a==null?a:dr(a,h,m)}function Ew(a,h,m,w){return w=typeof w=="function"?w:e,a==null?a:dr(a,h,m,w)}var od=bf(Ie),ld=bf(Qe);function Rw(a,h,m){var w=Rt(a),I=w||Ls(a)||En(a);if(h=At(h,4),m==null){var R=a&&a.constructor;I?m=w?new R:[]:de(a)?m=ds(R)?Mn(Qr(a)):{}:m={}}return(I?gi:$i)(a,function(D,U,H){return h(m,D,U,H)}),m}function Fw(a,h){return a==null?!0:ol(a,h)}function Bw(a,h,m){return a==null?a:ef(a,h,cl(m))}function Lw(a,h,m,w){return w=typeof w=="function"?w:e,a==null?a:ef(a,h,cl(m),w)}function Rn(a){return a==null?[]:Wo(a,Ie(a))}function Ow(a){return a==null?[]:Wo(a,Qe(a))}function Dw(a,h,m){return m===e&&(m=h,h=e),m!==e&&(m=vi(m),m=m===m?m:0),h!==e&&(h=vi(h),h=h===h?h:0),Ks(vi(a),h,m)}function Yw(a,h,m){return h=ps(h),m===e?(m=h,h=0):m=ps(m),a=vi(a),Gy(a,h,m)}function Nw(a,h,m){if(m&&typeof m!="boolean"&&He(a,h,m)&&(h=m=e),m===e&&(typeof h=="boolean"?(m=h,h=e):typeof a=="boolean"&&(m=a,a=e)),a===e&&h===e?(a=0,h=1):(a=ps(a),h===e?(h=a,a=0):h=ps(h)),a>h){var w=a;a=h,h=w}if(m||a%1||h%1){var I=Eu();return Ue(a+I*(h-a+xx("1e-"+((I+"").length-1))),h)}return nl(a,h)}var Xw=In(function(a,h,m){return h=h.toLowerCase(),a+(m?hd(h):h)});function hd(a){return El(Zt(a).toLowerCase())}function cd(a){return a=Zt(a),a&&a.replace(W0,kx).replace(ox,"")}function Uw(a,h,m){a=Zt(a),h=ai(h);var w=a.length;m=m===e?w:Ks(Ft(m),0,w);var I=m;return m-=h.length,m>=0&&a.slice(m,I)==h}function Ww(a){return a=Zt(a),a&&si.test(a)?a.replace(ae,Ex):a}function zw(a){return a=Zt(a),a&&P0.test(a)?a.replace(To,"\\$&"):a}var Gw=In(function(a,h,m){return a+(m?"-":"")+h.toLowerCase()}),Vw=In(function(a,h,m){return a+(m?" ":"")+h.toLowerCase()}),$w=df("toLowerCase");function Hw(a,h,m){a=Zt(a),h=Ft(h);var w=h?vn(a):0;if(!h||w>=h)return a;var I=(h-w)/2;return ma(ia(I),m)+a+ma(ea(I),m)}function qw(a,h,m){a=Zt(a),h=Ft(h);var w=h?vn(a):0;return h&&w<h?a+ma(h-w,m):a}function jw(a,h,m){a=Zt(a),h=Ft(h);var w=h?vn(a):0;return h&&w<h?ma(h-w,m)+a:a}function Kw(a,h,m){return m||h==null?h=0:h&&(h=+h),sy(Zt(a).replace(Mo,""),h||0)}function Zw(a,h,m){return(m?He(a,h,m):h===e)?h=1:h=Ft(h),rl(Zt(a),h)}function Qw(){var a=arguments,h=Zt(a[0]);return a.length<3?h:h.replace(a[1],a[2])}var Jw=In(function(a,h,m){return a+(m?"_":"")+h.toLowerCase()});function tv(a,h,m){return m&&typeof m!="number"&&He(a,h,m)&&(h=m=e),m=m===e?j:m>>>0,m?(a=Zt(a),a&&(typeof h=="string"||h!=null&&!Pl(h))&&(h=ai(h),!h&&wn(a))?Bs(ki(a),0,m):a.split(h,m)):[]}var ev=In(function(a,h,m){return a+(m?" ":"")+El(h)});function iv(a,h,m){return a=Zt(a),m=m==null?0:Ks(Ft(m),0,a.length),h=ai(h),a.slice(m,m+h.length)==h}function sv(a,h,m){var w=k.templateSettings;m&&He(a,h,m)&&(h=e),a=Zt(a),h=Ma({},h,w,_f);var I=Ma({},h.imports,w.imports,_f),R=Ie(I),D=Wo(I,R),U,H,nt=0,rt=h.interpolate||Xr,ht="__p += '",pt=Go((h.escape||Xr).source+"|"+rt.source+"|"+(rt===Uc?O0:Xr).source+"|"+(h.evaluate||Xr).source+"|$","g"),yt="//# sourceURL="+(Qt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++fx+"]")+`
`;a.replace(pt,function(Mt,Nt,Wt,li,qe,hi){return Wt||(Wt=li),ht+=a.slice(nt,hi).replace(z0,Rx),Nt&&(U=!0,ht+=`' +
__e(`+Nt+`) +
'`),qe&&(H=!0,ht+=`';
`+qe+`;
__p += '`),Wt&&(ht+=`' +
((__t = (`+Wt+`)) == null ? '' : __t) +
'`),nt=hi+Mt.length,Mt}),ht+=`';
`;var Tt=Qt.call(h,"variable")&&h.variable;if(!Tt)ht=`with (obj) {
`+ht+`
}
`;else if(B0.test(Tt))throw new Et(l);ht=(H?ht.replace(vt,""):ht).replace($t,"$1").replace(Ht,"$1;"),ht="function("+(Tt||"obj")+`) {
`+(Tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(U?", __e = _.escape":"")+(H?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ht+`return __p
}`;var Lt=fd(function(){return qt(R,yt+"return "+ht).apply(e,D)});if(Lt.source=ht,Ml(Lt))throw Lt;return Lt}function nv(a){return Zt(a).toLowerCase()}function rv(a){return Zt(a).toUpperCase()}function av(a,h,m){if(a=Zt(a),a&&(m||h===e))return _u(a);if(!a||!(h=ai(h)))return a;var w=ki(a),I=ki(h),R=wu(w,I),D=vu(w,I)+1;return Bs(w,R,D).join("")}function ov(a,h,m){if(a=Zt(a),a&&(m||h===e))return a.slice(0,Au(a)+1);if(!a||!(h=ai(h)))return a;var w=ki(a),I=vu(w,ki(h))+1;return Bs(w,0,I).join("")}function lv(a,h,m){if(a=Zt(a),a&&(m||h===e))return a.replace(Mo,"");if(!a||!(h=ai(h)))return a;var w=ki(a),I=wu(w,ki(h));return Bs(w,I).join("")}function hv(a,h){var m=X,w=N;if(de(h)){var I="separator"in h?h.separator:I;m="length"in h?Ft(h.length):m,w="omission"in h?ai(h.omission):w}a=Zt(a);var R=a.length;if(wn(a)){var D=ki(a);R=D.length}if(m>=R)return a;var U=m-vn(w);if(U<1)return w;var H=D?Bs(D,0,U).join(""):a.slice(0,U);if(I===e)return H+w;if(D&&(U+=H.length-U),Pl(I)){if(a.slice(U).search(I)){var nt,rt=H;for(I.global||(I=Go(I.source,Zt(Wc.exec(I))+"g")),I.lastIndex=0;nt=I.exec(rt);)var ht=nt.index;H=H.slice(0,ht===e?U:ht)}}else if(a.indexOf(ai(I),U)!=U){var pt=H.lastIndexOf(I);pt>-1&&(H=H.slice(0,pt))}return H+w}function cv(a){return a=Zt(a),a&&Oe.test(a)?a.replace(re,Nx):a}var uv=In(function(a,h,m){return a+(m?" ":"")+h.toUpperCase()}),El=df("toUpperCase");function ud(a,h,m){return a=Zt(a),h=m?e:h,h===e?Bx(a)?Wx(a):Cx(a):a.match(h)||[]}var fd=Yt(function(a,h){try{return ni(a,e,h)}catch(m){return Ml(m)?m:new Et(m)}}),fv=us(function(a,h){return gi(h,function(m){m=qi(m),hs(a,m,Cl(a[m],a))}),a});function dv(a){var h=a==null?0:a.length,m=At();return a=h?ue(a,function(w){if(typeof w[1]!="function")throw new xi(o);return[m(w[0]),w[1]]}):[],Yt(function(w){for(var I=-1;++I<h;){var R=a[I];if(ni(R[0],this,w))return ni(R[1],this,w)}})}function pv(a){return Ny(bi(a,d))}function Rl(a){return function(){return a}}function mv(a,h){return a==null||a!==a?h:a}var gv=mf(),xv=mf(!0);function Je(a){return a}function Fl(a){return Gu(typeof a=="function"?a:bi(a,d))}function yv(a){return $u(bi(a,d))}function bv(a,h){return Hu(a,bi(h,d))}var _v=Yt(function(a,h){return function(m){return ur(m,a,h)}}),wv=Yt(function(a,h){return function(m){return ur(a,m,h)}});function Bl(a,h,m){var w=Ie(h),I=la(h,w);m==null&&!(de(h)&&(I.length||!w.length))&&(m=h,h=a,a=this,I=la(h,Ie(h)));var R=!(de(m)&&"chain"in m)||!!m.chain,D=ds(a);return gi(I,function(U){var H=h[U];a[U]=H,D&&(a.prototype[U]=function(){var nt=this.__chain__;if(R||nt){var rt=a(this.__wrapped__),ht=rt.__actions__=Ke(this.__actions__);return ht.push({func:H,args:arguments,thisArg:a}),rt.__chain__=nt,rt}return H.apply(a,Ps([this.value()],arguments))})}),a}function vv(){return De._===this&&(De._=qx),this}function Ll(){}function Sv(a){return a=Ft(a),Yt(function(h){return qu(h,a)})}var Av=fl(ue),Cv=fl(mu),Tv=fl(Do);function dd(a){return bl(a)?Yo(qi(a)):ib(a)}function Mv(a){return function(h){return a==null?e:Zs(a,h)}}var Pv=xf(),Iv=xf(!0);function Ol(){return[]}function Dl(){return!1}function kv(){return{}}function Ev(){return""}function Rv(){return!0}function Fv(a,h){if(a=Ft(a),a<1||a>Y)return[];var m=j,w=Ue(a,j);h=At(h),a-=j;for(var I=Uo(w,h);++m<a;)h(m);return I}function Bv(a){return Rt(a)?ue(a,qi):oi(a)?[a]:Ke(Ff(Zt(a)))}function Lv(a){var h=++$x;return Zt(a)+h}var Ov=pa(function(a,h){return a+h},0),Dv=dl("ceil"),Yv=pa(function(a,h){return a/h},1),Nv=dl("floor");function Xv(a){return a&&a.length?oa(a,Je,Qo):e}function Uv(a,h){return a&&a.length?oa(a,At(h,2),Qo):e}function Wv(a){return yu(a,Je)}function zv(a,h){return yu(a,At(h,2))}function Gv(a){return a&&a.length?oa(a,Je,il):e}function Vv(a,h){return a&&a.length?oa(a,At(h,2),il):e}var $v=pa(function(a,h){return a*h},1),Hv=dl("round"),qv=pa(function(a,h){return a-h},0);function jv(a){return a&&a.length?Xo(a,Je):0}function Kv(a,h){return a&&a.length?Xo(a,At(h,2)):0}return k.after=y_,k.ary=Gf,k.assign=rw,k.assignIn=nd,k.assignInWith=Ma,k.assignWith=aw,k.at=ow,k.before=Vf,k.bind=Cl,k.bindAll=fv,k.bindKey=$f,k.castArray=k_,k.chain=Uf,k.chunk=Nb,k.compact=Xb,k.concat=Ub,k.cond=dv,k.conforms=pv,k.constant=Rl,k.countBy=j1,k.create=lw,k.curry=Hf,k.curryRight=qf,k.debounce=jf,k.defaults=hw,k.defaultsDeep=cw,k.defer=b_,k.delay=__,k.difference=Wb,k.differenceBy=zb,k.differenceWith=Gb,k.drop=Vb,k.dropRight=$b,k.dropRightWhile=Hb,k.dropWhile=qb,k.fill=jb,k.filter=Z1,k.flatMap=t_,k.flatMapDeep=e_,k.flatMapDepth=i_,k.flatten=Df,k.flattenDeep=Kb,k.flattenDepth=Zb,k.flip=w_,k.flow=gv,k.flowRight=xv,k.fromPairs=Qb,k.functions=xw,k.functionsIn=yw,k.groupBy=s_,k.initial=t1,k.intersection=e1,k.intersectionBy=i1,k.intersectionWith=s1,k.invert=_w,k.invertBy=ww,k.invokeMap=r_,k.iteratee=Fl,k.keyBy=a_,k.keys=Ie,k.keysIn=Qe,k.map=wa,k.mapKeys=Sw,k.mapValues=Aw,k.matches=yv,k.matchesProperty=bv,k.memoize=Sa,k.merge=Cw,k.mergeWith=rd,k.method=_v,k.methodOf=wv,k.mixin=Bl,k.negate=Aa,k.nthArg=Sv,k.omit=Tw,k.omitBy=Mw,k.once=v_,k.orderBy=o_,k.over=Av,k.overArgs=S_,k.overEvery=Cv,k.overSome=Tv,k.partial=Tl,k.partialRight=Kf,k.partition=l_,k.pick=Pw,k.pickBy=ad,k.property=dd,k.propertyOf=Mv,k.pull=o1,k.pullAll=Nf,k.pullAllBy=l1,k.pullAllWith=h1,k.pullAt=c1,k.range=Pv,k.rangeRight=Iv,k.rearg=A_,k.reject=u_,k.remove=u1,k.rest=C_,k.reverse=Sl,k.sampleSize=d_,k.set=kw,k.setWith=Ew,k.shuffle=p_,k.slice=f1,k.sortBy=x_,k.sortedUniq=b1,k.sortedUniqBy=_1,k.split=tv,k.spread=T_,k.tail=w1,k.take=v1,k.takeRight=S1,k.takeRightWhile=A1,k.takeWhile=C1,k.tap=X1,k.throttle=M_,k.thru=_a,k.toArray=ed,k.toPairs=od,k.toPairsIn=ld,k.toPath=Bv,k.toPlainObject=sd,k.transform=Rw,k.unary=P_,k.union=T1,k.unionBy=M1,k.unionWith=P1,k.uniq=I1,k.uniqBy=k1,k.uniqWith=E1,k.unset=Fw,k.unzip=Al,k.unzipWith=Xf,k.update=Bw,k.updateWith=Lw,k.values=Rn,k.valuesIn=Ow,k.without=R1,k.words=ud,k.wrap=I_,k.xor=F1,k.xorBy=B1,k.xorWith=L1,k.zip=O1,k.zipObject=D1,k.zipObjectDeep=Y1,k.zipWith=N1,k.entries=od,k.entriesIn=ld,k.extend=nd,k.extendWith=Ma,Bl(k,k),k.add=Ov,k.attempt=fd,k.camelCase=Xw,k.capitalize=hd,k.ceil=Dv,k.clamp=Dw,k.clone=E_,k.cloneDeep=F_,k.cloneDeepWith=B_,k.cloneWith=R_,k.conformsTo=L_,k.deburr=cd,k.defaultTo=mv,k.divide=Yv,k.endsWith=Uw,k.eq=Ri,k.escape=Ww,k.escapeRegExp=zw,k.every=K1,k.find=Q1,k.findIndex=Lf,k.findKey=uw,k.findLast=J1,k.findLastIndex=Of,k.findLastKey=fw,k.floor=Nv,k.forEach=Wf,k.forEachRight=zf,k.forIn=dw,k.forInRight=pw,k.forOwn=mw,k.forOwnRight=gw,k.get=Il,k.gt=O_,k.gte=D_,k.has=bw,k.hasIn=kl,k.head=Yf,k.identity=Je,k.includes=n_,k.indexOf=Jb,k.inRange=Yw,k.invoke=vw,k.isArguments=tn,k.isArray=Rt,k.isArrayBuffer=Y_,k.isArrayLike=Ze,k.isArrayLikeObject=_e,k.isBoolean=N_,k.isBuffer=Ls,k.isDate=X_,k.isElement=U_,k.isEmpty=W_,k.isEqual=z_,k.isEqualWith=G_,k.isError=Ml,k.isFinite=V_,k.isFunction=ds,k.isInteger=Zf,k.isLength=Ca,k.isMap=Qf,k.isMatch=$_,k.isMatchWith=H_,k.isNaN=q_,k.isNative=j_,k.isNil=Z_,k.isNull=K_,k.isNumber=Jf,k.isObject=de,k.isObjectLike=xe,k.isPlainObject=xr,k.isRegExp=Pl,k.isSafeInteger=Q_,k.isSet=td,k.isString=Ta,k.isSymbol=oi,k.isTypedArray=En,k.isUndefined=J_,k.isWeakMap=tw,k.isWeakSet=ew,k.join=n1,k.kebabCase=Gw,k.last=wi,k.lastIndexOf=r1,k.lowerCase=Vw,k.lowerFirst=$w,k.lt=iw,k.lte=sw,k.max=Xv,k.maxBy=Uv,k.mean=Wv,k.meanBy=zv,k.min=Gv,k.minBy=Vv,k.stubArray=Ol,k.stubFalse=Dl,k.stubObject=kv,k.stubString=Ev,k.stubTrue=Rv,k.multiply=$v,k.nth=a1,k.noConflict=vv,k.noop=Ll,k.now=va,k.pad=Hw,k.padEnd=qw,k.padStart=jw,k.parseInt=Kw,k.random=Nw,k.reduce=h_,k.reduceRight=c_,k.repeat=Zw,k.replace=Qw,k.result=Iw,k.round=Hv,k.runInContext=$,k.sample=f_,k.size=m_,k.snakeCase=Jw,k.some=g_,k.sortedIndex=d1,k.sortedIndexBy=p1,k.sortedIndexOf=m1,k.sortedLastIndex=g1,k.sortedLastIndexBy=x1,k.sortedLastIndexOf=y1,k.startCase=ev,k.startsWith=iv,k.subtract=qv,k.sum=jv,k.sumBy=Kv,k.template=sv,k.times=Fv,k.toFinite=ps,k.toInteger=Ft,k.toLength=id,k.toLower=nv,k.toNumber=vi,k.toSafeInteger=nw,k.toString=Zt,k.toUpper=rv,k.trim=av,k.trimEnd=ov,k.trimStart=lv,k.truncate=hv,k.unescape=cv,k.uniqueId=Lv,k.upperCase=uv,k.upperFirst=El,k.each=Wf,k.eachRight=zf,k.first=Yf,Bl(k,function(){var a={};return $i(k,function(h,m){Qt.call(k.prototype,m)||(a[m]=h)}),a}(),{chain:!1}),k.VERSION=i,gi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){k[a].placeholder=k}),gi(["drop","take"],function(a,h){Xt.prototype[a]=function(m){m=m===e?1:Ce(Ft(m),0);var w=this.__filtered__&&!h?new Xt(this):this.clone();return w.__filtered__?w.__takeCount__=Ue(m,w.__takeCount__):w.__views__.push({size:Ue(m,j),type:a+(w.__dir__<0?"Right":"")}),w},Xt.prototype[a+"Right"]=function(m){return this.reverse()[a](m).reverse()}}),gi(["filter","map","takeWhile"],function(a,h){var m=h+1,w=m==V||m==E;Xt.prototype[a]=function(I){var R=this.clone();return R.__iteratees__.push({iteratee:At(I,3),type:m}),R.__filtered__=R.__filtered__||w,R}}),gi(["head","last"],function(a,h){var m="take"+(h?"Right":"");Xt.prototype[a]=function(){return this[m](1).value()[0]}}),gi(["initial","tail"],function(a,h){var m="drop"+(h?"":"Right");Xt.prototype[a]=function(){return this.__filtered__?new Xt(this):this[m](1)}}),Xt.prototype.compact=function(){return this.filter(Je)},Xt.prototype.find=function(a){return this.filter(a).head()},Xt.prototype.findLast=function(a){return this.reverse().find(a)},Xt.prototype.invokeMap=Yt(function(a,h){return typeof a=="function"?new Xt(this):this.map(function(m){return ur(m,a,h)})}),Xt.prototype.reject=function(a){return this.filter(Aa(At(a)))},Xt.prototype.slice=function(a,h){a=Ft(a);var m=this;return m.__filtered__&&(a>0||h<0)?new Xt(m):(a<0?m=m.takeRight(-a):a&&(m=m.drop(a)),h!==e&&(h=Ft(h),m=h<0?m.dropRight(-h):m.take(h-a)),m)},Xt.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Xt.prototype.toArray=function(){return this.take(j)},$i(Xt.prototype,function(a,h){var m=/^(?:filter|find|map|reject)|While$/.test(h),w=/^(?:head|last)$/.test(h),I=k[w?"take"+(h=="last"?"Right":""):h],R=w||/^find/.test(h);I&&(k.prototype[h]=function(){var D=this.__wrapped__,U=w?[1]:arguments,H=D instanceof Xt,nt=U[0],rt=H||Rt(D),ht=function(Nt){var Wt=I.apply(k,Ps([Nt],U));return w&&pt?Wt[0]:Wt};rt&&m&&typeof nt=="function"&&nt.length!=1&&(H=rt=!1);var pt=this.__chain__,yt=!!this.__actions__.length,Tt=R&&!pt,Lt=H&&!yt;if(!R&&rt){D=Lt?D:new Xt(this);var Mt=a.apply(D,U);return Mt.__actions__.push({func:_a,args:[ht],thisArg:e}),new yi(Mt,pt)}return Tt&&Lt?a.apply(this,U):(Mt=this.thru(ht),Tt?w?Mt.value()[0]:Mt.value():Mt)})}),gi(["pop","push","shift","sort","splice","unshift"],function(a){var h=$r[a],m=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",w=/^(?:pop|shift)$/.test(a);k.prototype[a]=function(){var I=arguments;if(w&&!this.__chain__){var R=this.value();return h.apply(Rt(R)?R:[],I)}return this[m](function(D){return h.apply(Rt(D)?D:[],I)})}}),$i(Xt.prototype,function(a,h){var m=k[h];if(m){var w=m.name+"";Qt.call(Tn,w)||(Tn[w]=[]),Tn[w].push({name:h,func:m})}}),Tn[da(e,A).name]=[{name:"wrapper",func:e}],Xt.prototype.clone=cy,Xt.prototype.reverse=uy,Xt.prototype.value=fy,k.prototype.at=U1,k.prototype.chain=W1,k.prototype.commit=z1,k.prototype.next=G1,k.prototype.plant=$1,k.prototype.reverse=H1,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=q1,k.prototype.first=k.prototype.head,nr&&(k.prototype[nr]=V1),k},Sn=zx();$s?(($s.exports=Sn)._=Sn,Fo._=Sn):De._=Sn}).call(AA)}(Sr,Sr.exports)),Sr.exports}var TA=CA();const OI=Dr(TA);if(typeof window<"u"&&window.PIXI){const n=window.require;window.require=t=>{if(n)return n(t);if(t.startsWith("@pixi/")||t.startsWith("pixi.js"))return window.PIXI}}var _t=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(_t||{});const Mh=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},Ba=(n,t)=>Mh(n).priority??t,Fe={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(Mh).forEach(t=>{t.type.forEach(e=>{var i,s;return(s=(i=this._removeHandlers)[e])==null?void 0:s.call(i,t)})}),this},add(...n){return n.map(Mh).forEach(t=>{t.type.forEach(e=>{var r,o;const i=this._addHandlers,s=this._queue;i[e]?(o=i[e])==null||o.call(i,t):(s[e]=s[e]||[],(r=s[e])==null||r.push(t))})}),this},handle(n,t,e){var o;const i=this._addHandlers,s=this._removeHandlers;if(i[n]||s[n])throw new Error(`Extension type ${n} already has a handler`);i[n]=t,s[n]=e;const r=this._queue;return r[n]&&((o=r[n])==null||o.forEach(l=>t(l)),delete r[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(n,t,e=-1){return this.handle(n,i=>{t.findIndex(r=>r.name===i.name)>=0||(t.push({name:i.name,value:i.ref}),t.sort((r,o)=>Ba(o.value,e)-Ba(r.value,e)))},i=>{const s=t.findIndex(r=>r.name===i.name);s!==-1&&t.splice(s,1)})},handleByList(n,t,e=-1){return this.handle(n,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((s,r)=>Ba(r,e)-Ba(s,e)))},i=>{const s=t.indexOf(i.ref);s!==-1&&t.splice(s,1)})},mixin(n,...t){for(const e of t)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(e))}},MA={extension:{type:_t.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Jp(()=>import("./CXQwCLcl.js"),__vite__mapDeps([0,1,2]),import.meta.url)}},PA={extension:{type:_t.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Jp(()=>import("./DQ3-AlZS.js"),__vite__mapDeps([1,2]),import.meta.url)}};class di{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new di(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var Xl={exports:{}},Fd;function IA(){return Fd||(Fd=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function s(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function r(u,c,f,d,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new s(f,d||u,g),x=e?e+c:c;return u._events[x]?u._events[x].fn?u._events[x]=[u._events[x],p]:u._events[x].push(p):(u._events[x]=p,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new i:delete u._events[c]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],f,d;if(this._eventsCount===0)return c;for(d in f=this._events)t.call(f,d)&&c.push(e?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},l.prototype.listeners=function(c){var f=e?e+c:c,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var g=0,p=d.length,x=new Array(p);g<p;g++)x[g]=d[g].fn;return x},l.prototype.listenerCount=function(c){var f=e?e+c:c,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(c,f,d,g,p,x){var y=e?e+c:c;if(!this._events[y])return!1;var b=this._events[y],A=arguments.length,C,_;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),A){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,d),!0;case 4:return b.fn.call(b.context,f,d,g),!0;case 5:return b.fn.call(b.context,f,d,g,p),!0;case 6:return b.fn.call(b.context,f,d,g,p,x),!0}for(_=1,C=new Array(A-1);_<A;_++)C[_-1]=arguments[_];b.fn.apply(b.context,C)}else{var v=b.length,M;for(_=0;_<v;_++)switch(b[_].once&&this.removeListener(c,b[_].fn,void 0,!0),A){case 1:b[_].fn.call(b[_].context);break;case 2:b[_].fn.call(b[_].context,f);break;case 3:b[_].fn.call(b[_].context,f,d);break;case 4:b[_].fn.call(b[_].context,f,d,g);break;default:if(!C)for(M=1,C=new Array(A-1);M<A;M++)C[M-1]=arguments[M];b[_].fn.apply(b[_].context,C)}}return!0},l.prototype.on=function(c,f,d){return r(this,c,f,d,!1)},l.prototype.once=function(c,f,d){return r(this,c,f,d,!0)},l.prototype.removeListener=function(c,f,d,g){var p=e?e+c:c;if(!this._events[p])return this;if(!f)return o(this,p),this;var x=this._events[p];if(x.fn)x.fn===f&&(!g||x.once)&&(!d||x.context===d)&&o(this,p);else{for(var y=0,b=[],A=x.length;y<A;y++)(x[y].fn!==f||g&&!x[y].once||d&&x[y].context!==d)&&b.push(x[y]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(c){var f;return c?(f=e?e+c:c,this._events[f]&&o(this,f)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,n.exports=l}(Xl)),Xl.exports}var kA=IA();const is=Dr(kA),EA=Math.PI*2,RA=180/Math.PI,lm=Math.PI/180;class fe{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new fe(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Ul.x=0,Ul.y=0,Ul}}const Ul=new fe;class Vt{constructor(t=1,e=0,i=0,s=1,r=0,o=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=s,this.tx=r,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,s,r,o){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=r,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new fe;const i=t.x,s=t.y;return e.x=this.a*i+this.c*s+this.tx,e.y=this.b*i+this.d*s+this.ty,e}applyInverse(t,e){e=e||new fe;const i=this.a,s=this.b,r=this.c,o=this.d,l=this.tx,u=this.ty,c=1/(i*o+r*-s),f=t.x,d=t.y;return e.x=o*c*f+-r*c*d+(u*r-l*o)*c,e.y=i*c*d+-s*c*f+(-u*i+l*s)*c,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.a,r=this.c,o=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this}append(t){const e=this.a,i=this.b,s=this.c,r=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this}appendFrom(t,e){const i=t.a,s=t.b,r=t.c,o=t.d,l=t.tx,u=t.ty,c=e.a,f=e.b,d=e.c,g=e.d;return this.a=i*c+s*d,this.b=i*f+s*g,this.c=r*c+o*d,this.d=r*f+o*g,this.tx=l*c+u*d+e.tx,this.ty=l*f+u*g+e.ty,this}setTransform(t,e,i,s,r,o,l,u,c){return this.a=Math.cos(l+c)*r,this.b=Math.sin(l+c)*r,this.c=-Math.sin(l-u)*o,this.d=Math.cos(l-u)*o,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,s=this.c,r=this.d,o=t.pivot,l=-Math.atan2(-s,r),u=Math.atan2(i,e),c=Math.abs(l+u);return c<1e-5||Math.abs(EA-c)<1e-5?(t.rotation=u,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=l,t.skew.y=u),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(s*s+r*r),t.position.x=this.tx+(o.x*e+o.y*s),t.position.y=this.ty+(o.x*i+o.y*r),t}invert(){const t=this.a,e=this.b,i=this.c,s=this.d,r=this.tx,o=t*s-e*i;return this.a=s/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-s*r)/o,this.ty=-(t*this.ty-e*r)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Vt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return BA.identity()}static get shared(){return FA.identity()}}const FA=new Vt,BA=new Vt,nn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],rn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],an=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],on=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ph=[],hm=[],La=Math.sign;function LA(){for(let n=0;n<16;n++){const t=[];Ph.push(t);for(let e=0;e<16;e++){const i=La(nn[n]*nn[e]+an[n]*rn[e]),s=La(rn[n]*nn[e]+on[n]*rn[e]),r=La(nn[n]*an[e]+an[n]*on[e]),o=La(rn[n]*an[e]+on[n]*on[e]);for(let l=0;l<16;l++)if(nn[l]===i&&rn[l]===s&&an[l]===r&&on[l]===o){t.push(l);break}}}for(let n=0;n<16;n++){const t=new Vt;t.set(nn[n],rn[n],an[n],on[n],0,0),hm.push(t)}}LA();const pe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>nn[n],uY:n=>rn[n],vX:n=>an[n],vY:n=>on[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>Ph[n][t],sub:(n,t)=>Ph[n][pe.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?pe.S:pe.N:Math.abs(t)*2<=Math.abs(n)?n>0?pe.E:pe.W:t>0?n>0?pe.SE:pe.SW:n>0?pe.NE:pe.NW,matrixAppendRotationInv:(n,t,e=0,i=0)=>{const s=hm[pe.inv(t)];s.tx=e,s.ty=i,n.append(s)}},Oa=[new fe,new fe,new fe,new fe];let Ve=class Va{constructor(t=0,e=0,i=0,s=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Va(0,0,0,0)}clone(){return new Va(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i,s=.5){const{width:r,height:o}=this;if(r<=0||o<=0)return!1;const l=this.x,u=this.y,c=i*(1-s),f=i-c,d=l-c,g=l+r+c,p=u-c,x=u+o+c,y=l+f,b=l+r-f,A=u+f,C=u+o-f;return t>=d&&t<=g&&e>=p&&e<=x&&!(t>y&&t<b&&e>A&&e<C)}intersects(t,e){if(!e){const B=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=B)return!1;const X=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>X}const i=this.left,s=this.right,r=this.top,o=this.bottom;if(s<=i||o<=r)return!1;const l=Oa[0].set(t.left,t.top),u=Oa[1].set(t.left,t.bottom),c=Oa[2].set(t.right,t.top),f=Oa[3].set(t.right,t.bottom);if(c.x<=l.x||u.y<=l.y)return!1;const d=Math.sign(e.a*e.d-e.b*e.c);if(d===0||(e.apply(l,l),e.apply(u,u),e.apply(c,c),e.apply(f,f),Math.max(l.x,u.x,c.x,f.x)<=i||Math.min(l.x,u.x,c.x,f.x)>=s||Math.max(l.y,u.y,c.y,f.y)<=r||Math.min(l.y,u.y,c.y,f.y)>=o))return!1;const g=d*(u.y-l.y),p=d*(l.x-u.x),x=g*i+p*r,y=g*s+p*r,b=g*i+p*o,A=g*s+p*o;if(Math.max(x,y,b,A)<=g*l.x+p*l.y||Math.min(x,y,b,A)>=g*f.x+p*f.y)return!1;const C=d*(l.y-c.y),_=d*(c.x-l.x),v=C*i+_*r,M=C*s+_*r,T=C*i+_*o,P=C*s+_*o;return!(Math.max(v,M,T,P)<=C*l.x+_*l.y||Math.min(v,M,T,P)>=C*f.x+_*f.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=s,this.height=Math.max(r-s,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,s=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=s-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=s,this.height=r-s,this}getBounds(t){return t||(t=new Va),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const e=t.x,i=t.y,s=t.x+t.width,r=t.y+t.height;return e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height&&s>=this.x&&s<this.x+this.width&&r>=this.y&&r<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}};const Wl={default:-1};function Se(n="default"){return Wl[n]===void 0&&(Wl[n]=-1),++Wl[n]}const Bd={},le="8.0.0",OA="8.3.4";function jt(n,t,e=3){if(Bd[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${n}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`),console.warn(i))),Bd[t]=!0}const cm=()=>{};function Za(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function Ld(n){return!(n&n-1)&&!!n}function um(n){const t={};for(const e in n)n[e]!==void 0&&(t[e]=n[e]);return t}const Od=Object.create(null);function DA(n){const t=Od[n];return t===void 0&&(Od[n]=Se("resource")),t}const fm=class dm extends is{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...dm.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){jt(le,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=DA(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};fm.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let YA=fm;const pm=class mm extends is{constructor(t={}){super(),this.options=t,this.uid=Se("textureSource"),this._resourceType="textureSource",this._resourceId=Se("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...mm.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new YA(um(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,i;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Se("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i||(i=this._resolution),t||(t=this.width),e||(e=this.height);const s=Math.round(t*i),r=Math.round(e*i);return this.width=s/i,this.height=r/i,this._resolution=i,this.pixelWidth===s&&this.pixelHeight===r?!1:(this._refreshPOT(),this.pixelWidth=s,this.pixelHeight=r,this.emit("resize",this),this._resourceId=Se("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Ld(this.pixelWidth)&&Ld(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};pm.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Pi=pm;class tc extends Pi{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":(e instanceof Int8Array,i="bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}tc.extension=_t.TextureSource;const Dd=new Vt;class NA{constructor(t,e){this.mapCoord=new Vt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let s=0;s<t.length;s+=2){const r=t[s],o=t[s+1];e[s]=r*i.a+o*i.c+i.tx,e[s+1]=r*i.b+o*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,s=t.trim;s&&(Dd.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Dd));const r=t.source,o=this.uClampFrame,l=this.clampMargin/r._resolution,u=this.clampOffset/r._resolution;return o[0]=(t.frame.x+l+u)/r.width,o[1]=(t.frame.y+l+u)/r.height,o[2]=(t.frame.x+t.frame.width-l+u)/r.width,o[3]=(t.frame.y+t.frame.height-l+u)/r.height,this.uClampOffset[0]=this.clampOffset/r.pixelWidth,this.uClampOffset[1]=this.clampOffset/r.pixelHeight,this.isSimple=t.frame.width===r.width&&t.frame.height===r.height&&t.rotate===0,!0}}let Ot=class extends is{constructor({source:t,label:e,frame:i,orig:s,trim:r,defaultAnchor:o,defaultBorders:l,rotate:u,dynamic:c}={}){if(super(),this.uid=Se("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Ve,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new Pi,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:f,height:d}=this._source;this.frame.width=f,this.frame.height=d}this.orig=s||this.frame,this.trim=r,this.rotate=u??0,this.defaultAnchor=o,this.defaultBorders=l,this.destroyed=!1,this.dynamic=c||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new NA(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:s}=this._source,r=e.x/i,o=e.y/s,l=e.width/i,u=e.height/s;let c=this.rotate;if(c){const f=l/2,d=u/2,g=r+f,p=o+d;c=pe.add(c,pe.NW),t.x0=g+f*pe.uX(c),t.y0=p+d*pe.uY(c),c=pe.add(c,2),t.x1=g+f*pe.uX(c),t.y1=p+d*pe.uY(c),c=pe.add(c,2),t.x2=g+f*pe.uX(c),t.y2=p+d*pe.uY(c),c=pe.add(c,2),t.x3=g+f*pe.uX(c),t.y3=p+d*pe.uY(c)}else t.x0=r,t.y0=o,t.x1=r+l,t.y1=o,t.x2=r+l,t.y2=o+u,t.x3=r,t.y3=o+u}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return jt(le,"Texture.baseTexture is now Texture.source"),this._source}};Ot.EMPTY=new Ot({label:"EMPTY",source:new Pi({label:"EMPTY"})});Ot.EMPTY.destroy=cm;Ot.WHITE=new Ot({source:new tc({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Ot.WHITE.destroy=cm;function XA(n,t,e){const{width:i,height:s}=e.orig,r=e.trim;if(r){const o=r.width,l=r.height;n.minX=r.x-t._x*i,n.maxX=n.minX+o,n.minY=r.y-t._y*s,n.maxY=n.minY+l}else n.minX=-t._x*i,n.maxX=n.minX+i,n.minY=-t._y*s,n.maxY=n.minY+s}const Yd=new Vt;class Xi{constructor(t=1/0,e=1/0,i=-1/0,s=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Yd,this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Ve);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Yd,this}set(t,e,i,s){this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}addFrame(t,e,i,s,r){r||(r=this.matrix);const o=r.a,l=r.b,u=r.c,c=r.d,f=r.tx,d=r.ty;let g=this.minX,p=this.minY,x=this.maxX,y=this.maxY,b=o*t+u*e+f,A=l*t+c*e+d;b<g&&(g=b),A<p&&(p=A),b>x&&(x=b),A>y&&(y=A),b=o*i+u*e+f,A=l*i+c*e+d,b<g&&(g=b),A<p&&(p=A),b>x&&(x=b),A>y&&(y=A),b=o*t+u*s+f,A=l*t+c*s+d,b<g&&(g=b),A<p&&(p=A),b>x&&(x=b),A>y&&(y=A),b=o*i+u*s+f,A=l*i+c*s+d,b<g&&(g=b),A<p&&(p=A),b>x&&(x=b),A>y&&(y=A),this.minX=g,this.minY=p,this.maxX=x,this.maxY=y}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,s=this.maxX,r=this.maxY,{a:o,b:l,c:u,d:c,tx:f,ty:d}=t;let g=o*e+u*i+f,p=l*e+c*i+d;this.minX=g,this.minY=p,this.maxX=g,this.maxY=p,g=o*s+u*i+f,p=l*s+c*i+d,this.minX=g<this.minX?g:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=p>this.maxY?p:this.maxY,g=o*e+u*r+f,p=l*e+c*r+d,this.minX=g<this.minX?g:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=p>this.maxY?p:this.maxY,g=o*s+u*r+f,p=l*s+c*r+d,this.minX=g<this.minX?g:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=p>this.maxY?p:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,s){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>s&&(this.maxY=s),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Xi(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,s){let r=this.minX,o=this.minY,l=this.maxX,u=this.maxY;s||(s=this.matrix);const c=s.a,f=s.b,d=s.c,g=s.d,p=s.tx,x=s.ty;for(let y=e;y<i;y+=2){const b=t[y],A=t[y+1],C=c*b+d*A+p,_=f*b+g*A+x;r=C<r?C:r,o=_<o?_:o,l=C>l?C:l,u=_>u?_:u}this.minX=r,this.minY=o,this.maxX=l,this.maxY=u}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var UA={grad:.9,turn:360,rad:360/(2*Math.PI)},gs=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Ee=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},Ci=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},gm=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Nd=function(n){return{r:Ci(n.r,0,255),g:Ci(n.g,0,255),b:Ci(n.b,0,255),a:Ci(n.a)}},zl=function(n){return{r:Ee(n.r),g:Ee(n.g),b:Ee(n.b),a:Ee(n.a,3)}},WA=/^#([0-9a-f]{3,8})$/i,Da=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},xm=function(n){var t=n.r,e=n.g,i=n.b,s=n.a,r=Math.max(t,e,i),o=r-Math.min(t,e,i),l=o?r===t?(e-i)/o:r===e?2+(i-t)/o:4+(t-e)/o:0;return{h:60*(l<0?l+6:l),s:r?o/r*100:0,v:r/255*100,a:s}},ym=function(n){var t=n.h,e=n.s,i=n.v,s=n.a;t=t/360*6,e/=100,i/=100;var r=Math.floor(t),o=i*(1-e),l=i*(1-(t-r)*e),u=i*(1-(1-t+r)*e),c=r%6;return{r:255*[i,l,o,o,u,i][c],g:255*[u,i,i,l,o,o][c],b:255*[o,o,u,i,i,l][c],a:s}},Xd=function(n){return{h:gm(n.h),s:Ci(n.s,0,100),l:Ci(n.l,0,100),a:Ci(n.a)}},Ud=function(n){return{h:Ee(n.h),s:Ee(n.s),l:Ee(n.l),a:Ee(n.a,3)}},Wd=function(n){return ym((e=(t=n).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},Mr=function(n){return{h:(t=xm(n)).h,s:(s=(200-(e=t.s))*(i=t.v)/100)>0&&s<200?e*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,e,i,s},zA=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,GA=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,VA=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$A=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ih={string:[[function(n){var t=WA.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Ee(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Ee(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=VA.exec(n)||$A.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:Nd({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=zA.exec(n)||GA.exec(n);if(!t)return null;var e,i,s=Xd({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(UA[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Wd(s)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,i=n.b,s=n.a,r=s===void 0?1:s;return gs(t)&&gs(e)&&gs(i)?Nd({r:Number(t),g:Number(e),b:Number(i),a:Number(r)}):null},"rgb"],[function(n){var t=n.h,e=n.s,i=n.l,s=n.a,r=s===void 0?1:s;if(!gs(t)||!gs(e)||!gs(i))return null;var o=Xd({h:Number(t),s:Number(e),l:Number(i),a:Number(r)});return Wd(o)},"hsl"],[function(n){var t=n.h,e=n.s,i=n.v,s=n.a,r=s===void 0?1:s;if(!gs(t)||!gs(e)||!gs(i))return null;var o=function(l){return{h:gm(l.h),s:Ci(l.s,0,100),v:Ci(l.v,0,100),a:Ci(l.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(r)});return ym(o)},"hsv"]]},zd=function(n,t){for(var e=0;e<t.length;e++){var i=t[e][0](n);if(i)return[i,t[e][1]]}return[null,void 0]},HA=function(n){return typeof n=="string"?zd(n.trim(),Ih.string):typeof n=="object"&&n!==null?zd(n,Ih.object):[null,void 0]},Gl=function(n,t){var e=Mr(n);return{h:e.h,s:Ci(e.s+100*t,0,100),l:e.l,a:e.a}},Vl=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Gd=function(n,t){var e=Mr(n);return{h:e.h,s:e.s,l:Ci(e.l+100*t,0,100),a:e.a}},kh=function(){function n(t){this.parsed=HA(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Ee(Vl(this.rgba),2)},n.prototype.isDark=function(){return Vl(this.rgba)<.5},n.prototype.isLight=function(){return Vl(this.rgba)>=.5},n.prototype.toHex=function(){return t=zl(this.rgba),e=t.r,i=t.g,s=t.b,o=(r=t.a)<1?Da(Ee(255*r)):"","#"+Da(e)+Da(i)+Da(s)+o;var t,e,i,s,r,o},n.prototype.toRgb=function(){return zl(this.rgba)},n.prototype.toRgbString=function(){return t=zl(this.rgba),e=t.r,i=t.g,s=t.b,(r=t.a)<1?"rgba("+e+", "+i+", "+s+", "+r+")":"rgb("+e+", "+i+", "+s+")";var t,e,i,s,r},n.prototype.toHsl=function(){return Ud(Mr(this.rgba))},n.prototype.toHslString=function(){return t=Ud(Mr(this.rgba)),e=t.h,i=t.s,s=t.l,(r=t.a)<1?"hsla("+e+", "+i+"%, "+s+"%, "+r+")":"hsl("+e+", "+i+"%, "+s+"%)";var t,e,i,s,r},n.prototype.toHsv=function(){return t=xm(this.rgba),{h:Ee(t.h),s:Ee(t.s),v:Ee(t.v),a:Ee(t.a,3)};var t},n.prototype.invert=function(){return ji({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),ji(Gl(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),ji(Gl(this.rgba,-t))},n.prototype.grayscale=function(){return ji(Gl(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),ji(Gd(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),ji(Gd(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?ji({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Ee(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=Mr(this.rgba);return typeof t=="number"?ji({h:t,s:e.s,l:e.l,a:e.a}):Ee(e.h)},n.prototype.isEqual=function(t){return this.toHex()===ji(t).toHex()},n}(),ji=function(n){return n instanceof kh?n:new kh(n)},Vd=[],qA=function(n){n.forEach(function(t){Vd.indexOf(t)<0&&(t(kh,Ih),Vd.push(t))})};function jA(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in e)i[e[s]]=s;var r={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,u,c=i[this.toHex()];if(c)return c;if(o!=null&&o.closest){var f=this.toRgb(),d=1/0,g="black";if(!r.length)for(var p in e)r[p]=new n(e[p]).toRgb();for(var x in e){var y=(l=f,u=r[x],Math.pow(l.r-u.r,2)+Math.pow(l.g-u.g,2)+Math.pow(l.b-u.b,2));y<d&&(d=y,g=x)}return g}},t.string.push([function(o){var l=o.toLowerCase(),u=l==="transparent"?"#0000":e[l];return u?new n(u).toRgb():null},"name"])}qA([jA]);const Zn=class Ar{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Ar)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((r,o)=>r===e[o]);if(t!==null&&e!==null){const r=Object.keys(t),o=Object.keys(e);return r.length!==o.length?!1:r.every(l=>t[l]===e[l])}return t===e}toRgba(){const[t,e,i,s]=this._components;return{r:t,g:e,b:i,a:s}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(s*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,i,s,r]=this._components;return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,i,s]=this._components;return t[0]=e,t[1]=i,t[2]=s,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,s,r]=Ar._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=s,this._components[3]*=r,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,r=this._int&255;return e&&(i=i*t+.5|0,s=s*t+.5|0,r=r*t+.5|0),(t*255<<24)+(i<<16)+(s<<8)+r}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,i,s,r;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,i=(o>>8&255)/255,s=(o&255)/255,r=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,s,r=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,s,r=255]=t,e/=255,i/=255,s/=255,r/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const l=Ar.HEX_PATTERN.exec(t);l&&(t=`#${l[2]}`)}const o=ji(t);o.isValid()&&({r:e,g:i,b:s,a:r}=o.rgba,e/=255,i/=255,s/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=s,this._components[3]=r,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((s,r)=>{t[r]=Math.min(Math.max(s,e),i)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof Ar||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};Zn.shared=new Zn;Zn._temp=new Zn;Zn.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Be=Zn;const KA={cullArea:null,cullable:!1,cullableChildren:!0};let ec=class{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var i;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(i=e.init)==null||i.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}};class ZA{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new ec(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const _s=new ZA,QA={get isCachedAsTexture(){var n;return!!((n=this.renderGroup)!=null&&n.isCachedAsTexture)},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){var n;(n=this.renderGroup)==null||n.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){jt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function JA(n,t,e){const i=n.length;let s;if(t>=i||e===0)return;e=t+e>i?i-t:e;const r=i-e;for(s=t;s<r;++s)n[s]=n[s+e];n.length=r}const t2={allowChildren:!0,removeChildren(n=0,t){const e=t??this.children.length,i=e-n,s=[];if(i>0&&i<=e){for(let o=e-1;o>=n;o--){const l=this.children[o];l&&(s.push(l),l.parent=null)}JA(this.children,n,e);const r=this.renderGroup||this.parentRenderGroup;r&&r.removeChildren(s);for(let o=0;o<s.length;++o)this.emit("childRemoved",s[o],this,o),s[o].emit("removed",this);return s.length>0&&this._didViewChangeTick++,s}else if(i===0&&this.children.length===0)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const t=this.getChildAt(n);return this.removeChild(t)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,t)},getChildIndex(n){const t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(n,t){this.allowChildren||jt(le,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${n}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(n.parent){const s=n.parent.children.indexOf(n);if(n.parent===this&&s===t)return n;s!==-1&&n.parent.children.splice(s,1)}t===e.length?e.push(n):e.splice(t,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,t),n.emit("added",this),n},swapChildren(n,t){if(n===t)return;const e=this.getChildIndex(n),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=n;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var n;(n=this.parent)==null||n.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(t=>this.reparentChildAt(t,this.children.length)),n[0])},reparentChildAt(n,t){if(n.parent===this)return this.setChildIndex(n,t),n;const e=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,t);const i=this.worldTransform.clone();return i.invert(),e.prepend(i),n.setFromMatrix(e),n}},e2={collectRenderables(n,t,e){this.parentRenderLayer&&this.parentRenderLayer!==e||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,t,e):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,t,e))},collectRenderablesSimple(n,t,e){const i=this.children,s=i.length;for(let r=0;r<s;r++)i[r].collectRenderables(n,t,e)},collectRenderablesWithEffects(n,t,e){const{renderPipes:i}=t;for(let s=0;s<this.effects.length;s++){const r=this.effects[s];i[r.pipe].push(r,this,n)}this.collectRenderablesSimple(n,t,e);for(let s=this.effects.length-1;s>=0;s--){const r=this.effects[s];i[r.pipe].pop(r,this,n)}}};class $d{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class i2{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return _s.get(i.maskClass,t)}return t}returnMaskEffect(t){_s.return(t)}}const Eh=new i2;Fe.handleByList(_t.MaskEffect,Eh._effectClasses);const s2={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((e,i)=>e.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const t=this.effects.indexOf(n);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const t=this._maskEffect;(t==null?void 0:t.mask)!==n&&(t&&(this.removeEffect(t),Eh.returnMaskEffect(t),this._maskEffect=null),n!=null&&(this._maskEffect=Eh.getMaskEffect(n),this.addEffect(this._maskEffect)))},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},get mask(){var n;return(n=this._maskEffect)==null?void 0:n.mask},set filters(n){var r;!Array.isArray(n)&&n&&(n=[n]);const t=this._filterEffect||(this._filterEffect=new $d);n=n;const e=(n==null?void 0:n.length)>0,i=((r=t.filters)==null?void 0:r.length)>0,s=e!==i;n=Array.isArray(n)?n.slice(0):n,t.filters=Object.freeze(n),s&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=n??null))},get filters(){var n;return(n=this._filterEffect)==null?void 0:n.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new $d),this._filterEffect.filterArea=n},get filterArea(){var n;return(n=this._filterEffect)==null?void 0:n.filterArea}},n2={label:null,get name(){return jt(le,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){jt(le,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,t=!1){return this.getChildByLabel(n,t)},getChildByLabel(n,t=!1){const e=this.children;for(let i=0;i<e.length;i++){const s=e[i];if(s.label===n||n instanceof RegExp&&n.test(s.label))return s}if(t)for(let i=0;i<e.length;i++){const r=e[i].getChildByLabel(n,!0);if(r)return r}return null},getChildrenByLabel(n,t=!1,e=[]){const i=this.children;for(let s=0;s<i.length;s++){const r=i[s];(r.label===n||n instanceof RegExp&&n.test(r.label))&&e.push(r)}if(t)for(let s=0;s<i.length;s++)i[s].getChildrenByLabel(n,!0,e);return e}},je=new ec(Vt),ws=new ec(Xi),r2=new Vt,a2={getFastGlobalBounds(n,t){t||(t=new Xi),t.clear(),this._getGlobalBoundsRecursive(!!n,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const e=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(e.worldTransform),t},_getGlobalBoundsRecursive(n,t,e){let i=t;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==e||this.localDisplayStatus!==7||!this.measurable)return;const s=!!this.effects.length;if((this.renderGroup||s)&&(i=ws.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const o=this.bounds;i.addFrame(o.minX,o.minY,o.maxX,o.maxY,this.groupTransform)}const r=this.children;for(let o=0;o<r.length;o++)r[o]._getGlobalBoundsRecursive(n,i,e)}if(s){let r=!1;const o=this.renderGroup||this.parentRenderGroup;for(let l=0;l<this.effects.length;l++)this.effects[l].addBounds&&(r||(r=!0,i.applyMatrix(o.worldTransform)),this.effects[l].addBounds(i,!0));r&&(i.applyMatrix(o.worldTransform.copyTo(r2).invert()),t.addBounds(i,this.relativeGroupTransform)),t.addBounds(i),ws.return(i)}else this.renderGroup&&(t.addBounds(i,this.relativeGroupTransform),ws.return(i))}};function bm(n,t,e){e.clear();let i,s;return n.parent?t?i=n.parent.worldTransform:(s=je.get().identity(),i=ic(n,s)):i=Vt.IDENTITY,_m(n,e,i,t),s&&je.return(s),e.isValid||e.set(0,0,0,0),e}function _m(n,t,e,i){var l,u;if(!n.visible||!n.measurable)return;let s;i?s=n.worldTransform:(n.updateLocalTransform(),s=je.get(),s.appendFrom(n.localTransform,e));const r=t,o=!!n.effects.length;if(o&&(t=ws.get().clear()),n.boundsArea)t.addRect(n.boundsArea,s);else{n.bounds&&(t.matrix=s,t.addBounds(n.bounds));for(let c=0;c<n.children.length;c++)_m(n.children[c],t,s,i)}if(o){for(let c=0;c<n.effects.length;c++)(u=(l=n.effects[c]).addBounds)==null||u.call(l,t);r.addBounds(t,Vt.IDENTITY),ws.return(t)}i||je.return(s)}function ic(n,t){const e=n.parent;return e&&(ic(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}function wm(n,t){if(n===16777215||!t)return t;if(t===16777215||!n)return n;const e=n>>16&255,i=n>>8&255,s=n&255,r=t>>16&255,o=t>>8&255,l=t&255,u=e*r/255|0,c=i*o/255|0,f=s*l/255|0;return(u<<16)+(c<<8)+f}const Hd=16777215;function qd(n,t){return n===Hd?t:t===Hd?n:wm(n,t)}function $a(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const o2={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,e=this.parent;for(;e;)t*=e.alpha,e=e.parent;return t},getGlobalTransform(n,t){if(t)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const e=ic(this,je.get().identity());return n.appendFrom(this.localTransform,e),je.return(e),n},getGlobalTint(n){if(n)return this.renderGroup?$a(this.renderGroup.worldColor):this.parentRenderGroup?$a(qd(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,e=this.parent;for(;e;)t=qd(t,e.localColor),e=e.parent;return $a(t)}};let $l=0;const jd=500;function ge(...n){$l!==jd&&($l++,$l===jd?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}function vm(n,t,e){return t.clear(),e||(e=Vt.IDENTITY),Sm(n,t,e,n,!0),t.isValid||t.set(0,0,0,0),t}function Sm(n,t,e,i,s){var u,c;let r;if(s)r=je.get(),r=e.copyTo(r);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const f=n.localTransform;r=je.get(),r.appendFrom(f,e)}const o=t,l=!!n.effects.length;if(l&&(t=ws.get().clear()),n.boundsArea)t.addRect(n.boundsArea,r);else{n.renderPipeId&&(t.matrix=r,t.addBounds(n.bounds));const f=n.children;for(let d=0;d<f.length;d++)Sm(f[d],t,r,i,!1)}if(l){for(let f=0;f<n.effects.length;f++)(c=(u=n.effects[f]).addLocalBounds)==null||c.call(u,t,i);o.addBounds(t,Vt.IDENTITY),ws.return(t)}je.return(r)}function Am(n,t){const e=n.children;for(let i=0;i<e.length;i++){const s=e[i],r=s.uid,o=(s._didViewChangeTick&65535)<<16|s._didContainerChangeTick&65535,l=t.index;(t.data[l]!==r||t.data[l+1]!==o)&&(t.data[t.index]=r,t.data[t.index+1]=o,t.didChange=!0),t.index=l+2,s.children.length&&Am(s,t)}return t.didChange}const l2=new Vt,h2={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=n/t*e:this.scale.x=e},_setHeight(n,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=n/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Xi});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),Am(this,n),n.didChange&&vm(this,n.localBounds,l2),n.localBounds},getBounds(n,t){return bm(this,n,t||new Xi)}},c2={_onRender:null,set onRender(n){const t=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},u2={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(f2))}};function f2(n,t){return n._zIndex-t._zIndex}const d2={getGlobalPosition(n=new fe,t=!1){return this.parent?this.parent.toGlobal(this._position,n,t):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,t,e=!1){const i=this.getGlobalTransform(je.get(),e);return t=i.apply(n,t),je.return(i),t},toLocal(n,t,e,i){t&&(n=t.toGlobal(n,e,i));const s=this.getGlobalTransform(je.get(),i);return e=s.applyInverse(n,e),je.return(s),e}};class Cm{constructor(){this.uid=Se("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let p2=0;class m2{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,e,i){const s=new Pi({...this.textureOptions,width:t,height:e,resolution:1,antialias:i,autoGarbageCollect:!1});return new Ot({source:s,label:`texturePool_${p2++}`})}getOptimalTexture(t,e,i=1,s){let r=Math.ceil(t*i-1e-6),o=Math.ceil(e*i-1e-6);r=Za(r),o=Za(o);const l=(r<<17)+(o<<1)+(s?1:0);this._texturePool[l]||(this._texturePool[l]=[]);let u=this._texturePool[l].pop();return u||(u=this.createTexture(r,o,s)),u.source._resolution=i,u.source.width=r/i,u.source.height=o/i,u.source.pixelWidth=r,u.source.pixelHeight=o,u.frame.x=0,u.frame.y=0,u.frame.width=t,u.frame.height=e,u.updateUvs(),this._poolKeyHash[u.uid]=l,u}getSameSizeTexture(t,e=!1){const i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,e)}returnTexture(t){const e=this._poolKeyHash[t.uid];this._texturePool[e].push(t)}clear(t){if(t=t!==!1,t)for(const e in this._texturePool){const i=this._texturePool[e];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this._texturePool={}}}const g2=new m2;class x2{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Vt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Cm,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let i=0;i<e.length;i++){const s=e[i];s._updateFlags=15,this.addChild(s)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(g2.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const i=t.children;for(let s=0;s<i.length;s++)this._getChildren(i[s],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Vt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Vt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Vt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function y2(n,t,e={}){for(const i in t)!e[i]&&t[i]!==void 0&&(n[i]=t[i])}const Hl=new di(null),ql=new di(null),jl=new di(null,1,1),Kd=1,b2=2,Kl=4;class er extends is{constructor(t={}){var e,i;super(),this.uid=Se("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Vt,this.relativeGroupTransform=new Vt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new di(this,0,0),this._scale=jl,this._pivot=ql,this._skew=Hl,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],y2(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(s=>this.addChild(s)),(i=t.parent)==null||i.addChild(this)}static mixin(t){jt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Fe.mixin(er,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||jt(le,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let s=0;s<t.length;s++)this.addChild(t[s]);return t[0]}const e=t[0],i=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),i&&(i.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,i&&i.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let s=0;s<t.length;s++)this.removeChild(t[s]);return t[0]}const e=t[0],i=this.children.indexOf(e);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,i),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=_s.get(x2,this),this.groupTransform=Vt.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),_s.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Vt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*RA}set angle(t){this.rotation=t*lm}get pivot(){return this._pivot===ql&&(this._pivot=new di(this,0,0)),this._pivot}set pivot(t){this._pivot===ql&&(this._pivot=new di(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===Hl&&(this._skew=new di(this,0,0)),this._skew}set skew(t){this._skew===Hl&&(this._skew=new di(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===jl&&(this._scale=new di(this,1,1)),this._scale}set scale(t){this._scale===jl&&(this._scale=new di(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,i.width),e!==void 0&&this._setHeight(e,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,i=this._scale,s=this._pivot,r=this._position,o=i._x,l=i._y,u=s._x,c=s._y;e.a=this._cx*o,e.b=this._sx*o,e.c=this._cy*l,e.d=this._sy*l,e.tx=r._x-(u*e.a+c*e.c),e.ty=r._y-(u*e.b+c*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Kd,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const i=Be.shared.setValue(t??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=Kd,this._onUpdate())}get tint(){return $a(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=b2,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Kl,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Kl,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=Kl,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var s;if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&e)for(let r=0;r<e.length;++r)e[r].destroy(t);(s=this.renderGroup)==null||s.destroy(),this.renderGroup=null}}Fe.mixin(er,t2,a2,d2,c2,h2,s2,n2,u2,KA,QA,o2,e2);class sc extends er{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new Xi(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:i,y:s}=t;return i>=e.minX&&i<=e.maxX&&s>=e.minY&&s<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,e,i){const{renderPipes:s,renderableGC:r}=e;s.blendMode.setBlendMode(this,this.groupBlendMode,t),s[this.renderPipeId].addRenderable(this,t),r.addRenderable(this),this.didViewUpdate=!1;const l=this.children,u=l.length;for(let c=0;c<u;c++)l[c].collectRenderables(t,e,i)}}class Qn extends sc{constructor(t=Ot.EMPTY){t instanceof Ot&&(t={texture:t});const{texture:e=Ot.EMPTY,anchor:i,roundPixels:s,width:r,height:o,...l}=t;super({label:"Sprite",...l}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new di({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=s??!1,r!==void 0&&(this.width=r),o!==void 0&&(this.height=o)}static from(t,e=!1){return t instanceof Ot?new Qn(t):new Qn(Ot.from(t,e))}set texture(t){t||(t=Ot.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return XA(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return jt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,i=this._bounds,{width:s,height:r}=e.orig;i.minX=-t._x*s,i.maxX=i.minX+s,i.minY=-t._y*r,i.maxY=i.minY+r}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}const _2=new Xi;function Tm(n,t,e){const i=_2;n.measurable=!0,bm(n,e,i),t.addBoundsMask(i),n.measurable=!1}function Mm(n,t,e){const i=ws.get();n.measurable=!0;const s=je.get().identity(),r=Pm(n,e,s);vm(n,i,r),n.measurable=!1,t.addBoundsMask(i),je.return(s),ws.return(i)}function Pm(n,t,e){return n?(n!==t&&(Pm(n.parent,t,e),n.updateLocalTransform(),e.append(n.localTransform)),e):(ge("Mask bounds, renderable is not inside the root container"),e)}class Im{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Qn),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||Tm(this.mask,t,e)}addLocalBounds(t,e){Mm(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Qn}}Im.extension=_t.MaskEffect;class km{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}km.extension=_t.MaskEffect;class Em{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){Tm(this.mask,t,e)}addLocalBounds(t,e){Mm(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof er}}Em.extension=_t.MaskEffect;const w2={createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let Zd=w2;const ve={get(){return Zd},set(n){Zd=n}};class Rm extends Pi{constructor(t){t.resource||(t.resource=ve.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){const s=super.resize(t,e,i);return s&&this.resizeCanvas(),s}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Rm.extension=_t.TextureSource;class dn extends Pi{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=ve.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,ge("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}dn.extension=_t.TextureSource;var Rh=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Rh||{});class Zl{constructor(t,e=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=s}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Fm=class ci{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Zl(null,null,1/0),this.deltaMS=1/ci.targetFPMS,this.elapsedMS=1/ci.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=Rh.NORMAL){return this._addListener(new Zl(t,e,i))}addOnce(t,e,i=Rh.NORMAL){return this._addListener(new Zl(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*ci.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,ci.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!ci._shared){const t=ci._shared=new ci;t.autoStart=!0,t._protected=!0}return ci._shared}static get system(){if(!ci._system){const t=ci._system=new ci;t.autoStart=!0,t._protected=!0}return ci._system}};Fm.targetFPMS=.06;let bs=Fm,Ql;async function Bm(){return Ql??(Ql=(async()=>{var o;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(l=>{const u=document.createElement("video");u.onloadeddata=()=>l(u),u.onerror=()=>l(null),u.autoplay=!1,u.crossOrigin="anonymous",u.preload="auto",u.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",u.load()});if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const r=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,r),t.deleteFramebuffer(s),t.deleteTexture(i),(o=t.getExtension("WEBGL_lose_context"))==null||o.loseContext(),r[0]<=r[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Ql}const go=class Lm extends Pi{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...Lm.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=bs.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await Bm(),this._load=new Promise((i,s)=>{this.isValid?i(this):(this._resolve=i,this._reject=s,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(bs.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(bs.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(bs.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};go.extension=_t.TextureSource;go.defaultOptions={...Pi.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};go.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ha=go;const Di=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(i=>typeof i=="string"||e?t(i):i):n);class v2{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||ge(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=Di(t);let s;for(let u=0;u<this.parsers.length;u++){const c=this.parsers[u];if(c.test(e)){s=c.getCacheableAssets(i,e);break}}const r=new Map(Object.entries(s||{}));s||i.forEach(u=>{r.set(u,e)});const o=[...r.keys()],l={cacheKeys:o,keys:i};i.forEach(u=>{this._cacheMap.set(u,l)}),o.forEach(u=>{const c=s?s[u]:e;this._cache.has(u)&&this._cache.get(u)!==c&&ge("[Cache] already has key:",u),this._cache.set(u,r.get(u))})}remove(t){if(!this._cacheMap.has(t)){ge(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(s=>{this._cache.delete(s)}),e.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}}const he=new v2,Fh=[];Fe.handleByList(_t.TextureSource,Fh);function Om(n={}){const t=n&&n.resource,e=t?n.resource:n,i=t?n:{resource:n};for(let s=0;s<Fh.length;s++){const r=Fh[s];if(r.test(e))return new r(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function S2(n={},t=!1){const e=n&&n.resource,i=e?n.resource:n,s=e?n:{resource:n};if(!t&&he.has(i))return he.get(i);const r=new Ot({source:Om(s)});return r.on("destroy",()=>{he.has(i)&&he.remove(i)}),t||he.set(i,r),r}function A2(n,t=!1){return typeof n=="string"?he.get(n):n instanceof Pi?new Ot({source:n}):S2(n,t)}Ot.from=A2;Pi.from=Om;Fe.add(Im,km,Em,Ha,dn,Rm,tc);var ss=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(ss||{});function Bi(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function br(n){return n.split("?")[0].split("#")[0]}function C2(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T2(n,t,e){return n.replace(new RegExp(C2(t),"g"),e)}function M2(n,t){let e="",i=0,s=-1,r=0,o=-1;for(let l=0;l<=n.length;++l){if(l<n.length)o=n.charCodeAt(l);else{if(o===47)break;o=47}if(o===47){if(!(s===l-1||r===1))if(s!==l-1&&r===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const u=e.lastIndexOf("/");if(u!==e.length-1){u===-1?(e="",i=0):(e=e.slice(0,u),i=e.length-1-e.lastIndexOf("/")),s=l,r=0;continue}}else if(e.length===2||e.length===1){e="",i=0,s=l,r=0;continue}}}else e.length>0?e+=`/${n.slice(s+1,l)}`:e=n.slice(s+1,l),i=l-s-1;s=l,r=0}else o===46&&r!==-1?++r:r=-1}return e}const Xe={toPosix(n){return T2(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){Bi(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(Bi(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const i=br(this.toPosix(t??ve.get().getBaseUrl())),s=br(this.toPosix(e??this.rootname(i)));return n=this.toPosix(n),n.startsWith("/")?Xe.join(s,n.slice(1)):this.isAbsolute(n)?n:this.join(i,n)},normalize(n){if(Bi(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const i=n.endsWith("/");return n=M2(n),n.length>0&&i&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return Bi(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const i=n[e];if(Bi(i),i.length>0)if(t===void 0)t=i;else{const s=n[e-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(Bi(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let i=-1,s=!0;const r=this.getProtocol(n),o=n;n=n.slice(r.length);for(let l=n.length-1;l>=1;--l)if(t=n.charCodeAt(l),t===47){if(!s){i=l;break}}else s=!1;return i===-1?e?"/":this.isUrl(o)?r+n:r:e&&i===1?"//":r+n.slice(0,i)},rootname(n){Bi(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){Bi(n),t&&Bi(t),n=br(this.toPosix(n));let e=0,i=-1,s=!0,r;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let o=t.length-1,l=-1;for(r=n.length-1;r>=0;--r){const u=n.charCodeAt(r);if(u===47){if(!s){e=r+1;break}}else l===-1&&(s=!1,l=r+1),o>=0&&(u===t.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=l))}return e===i?i=l:i===-1&&(i=n.length),n.slice(e,i)}for(r=n.length-1;r>=0;--r)if(n.charCodeAt(r)===47){if(!s){e=r+1;break}}else i===-1&&(s=!1,i=r+1);return i===-1?"":n.slice(e,i)},extname(n){Bi(n),n=br(this.toPosix(n));let t=-1,e=0,i=-1,s=!0,r=0;for(let o=n.length-1;o>=0;--o){const l=n.charCodeAt(o);if(l===47){if(!s){e=o+1;break}continue}i===-1&&(s=!1,i=o+1),l===46?t===-1?t=o:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||i===-1||r===0||r===1&&t===i-1&&t===e+1?"":n.slice(t,i)},parse(n){Bi(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=br(this.toPosix(n));let e=n.charCodeAt(0);const i=this.isAbsolute(n);let s;t.root=this.rootname(n),i||this.hasProtocol(n)?s=1:s=0;let r=-1,o=0,l=-1,u=!0,c=n.length-1,f=0;for(;c>=s;--c){if(e=n.charCodeAt(c),e===47){if(!u){o=c+1;break}continue}l===-1&&(u=!1,l=c+1),e===46?r===-1?r=c:f!==1&&(f=1):r!==-1&&(f=-1)}return r===-1||l===-1||f===0||f===1&&r===l-1&&r===o+1?l!==-1&&(o===0&&i?t.base=t.name=n.slice(1,l):t.base=t.name=n.slice(o,l)):(o===0&&i?(t.name=n.slice(1,r),t.base=n.slice(1,l)):(t.name=n.slice(o,r),t.base=n.slice(o,l)),t.ext=n.slice(r,l)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function Dm(n,t,e,i,s){const r=t[e];for(let o=0;o<r.length;o++){const l=r[o];e<t.length-1?Dm(n.replace(i[e],l),t,e+1,i,s):s.push(n.replace(i[e],l))}}function P2(n){const t=/\{(.*?)\}/g,e=n.match(t),i=[];if(e){const s=[];e.forEach(r=>{const o=r.substring(1,r.length-1).split(",");s.push(o)}),Dm(n,s,0,e,i)}else i.push(n);return i}const Qa=n=>!Array.isArray(n);class mn{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,src:i}=t;return Di(e||i,r=>typeof r=="string"?r:Array.isArray(r)?r.map(o=>(o==null?void 0:o.src)??o):r!=null&&r.src?r.src:r,!0)}addManifest(t){this._manifest&&ge("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];let s=e;Array.isArray(e)||(s=Object.entries(e).map(([r,o])=>typeof o=="string"||Array.isArray(o)?{alias:r,src:o}:{alias:r,...o})),s.forEach(r=>{const o=r.src,l=r.alias;let u;if(typeof l=="string"){const c=this._createBundleAssetId(t,l);i.push(c),u=[l,c]}else{const c=l.map(f=>this._createBundleAssetId(t,f));i.push(...c),u=[...l,...c]}this.add({...r,alias:u,src:o})}),this._bundles[t]=i}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=r=>{this.hasKey(r)&&ge(`[Resolver] already has key: ${r} overwriting`)},Di(e).forEach(r=>{const{src:o}=r;let{data:l,format:u,loadParser:c}=r;const f=Di(o).map(p=>typeof p=="string"?P2(p):Array.isArray(p)?p:[p]),d=this.getAlias(r);Array.isArray(d)?d.forEach(i):i(d);const g=[];f.forEach(p=>{p.forEach(x=>{let y={};if(typeof x!="object"){y.src=x;for(let b=0;b<this._parsers.length;b++){const A=this._parsers[b];if(A.test(x)){y=A.parse(x);break}}}else l=x.data??l,u=x.format??u,c=x.loadParser??c,y={...y,...x};if(!d)throw new Error(`[Resolver] alias is undefined for this asset: ${y.src}`);y=this._buildResolvedAsset(y,{aliases:d,data:l,format:u,loadParser:c}),g.push(y)})}),d.forEach(p=>{this._assetMap[p]=g})})}resolveBundle(t){const e=Qa(t);t=Di(t);const i={};return t.forEach(s=>{const r=this._bundles[s];if(r){const o=this.resolve(r),l={};for(const u in o){const c=o[u];l[this._extractAssetIdFromBundle(s,u)]=c}i[s]=l}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const s in e)i[s]=e[s].src;return i}return e.src}resolve(t){const e=Qa(t);t=Di(t);const i={};return t.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let r=this._assetMap[s];const o=this._getPreferredOrder(r);o==null||o.priority.forEach(l=>{o.params[l].forEach(u=>{const c=r.filter(f=>f[l]?f[l]===u:!1);c.length&&(r=c)})}),this._resolverHash[s]=r[0]}else this._resolverHash[s]=this._buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[e],s=this._preferredOrder.find(r=>r.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:i,data:s,loadParser:r,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=Xe.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...s||{},...t.data},t.loadParser=r??t.loadParser,t.format=o??t.format??I2(t.src),t}}mn.RETINA_PREFIX=/@([0-9\.]+)x/;function I2(n){return n.split(".").pop().split("?").shift().split("#").shift()}const Ja=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n},Ym=class Cr{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof Ot?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const i=parseFloat(e.meta.scale);i?(this.resolution=i,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Cr.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=Cr.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const s=this._frameKeys[e],r=this._frames[s],o=r.frame;if(o){let l=null,u=null;const c=r.trimmed!==!1&&r.sourceSize?r.sourceSize:r.frame,f=new Ve(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);r.rotated?l=new Ve(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):l=new Ve(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),r.trimmed!==!1&&r.spriteSourceSize&&(u=new Ve(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[s]=new Ot({source:this.textureSource,frame:l,orig:f,trim:u,rotate:r.rotated?2:0,defaultAnchor:r.anchor,defaultBorders:r.borders,label:s.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const s=t[e][i];this.animations[e].push(this.textures[s])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Cr.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Cr.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Ym.BATCH_SIZE=1e3;let Qd=Ym;const k2=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Nm(n,t,e){const i={};if(n.forEach(s=>{i[s]=t}),Object.keys(t.textures).forEach(s=>{i[s]=t.textures[s]}),!e){const s=Xe.dirname(n[0]);t.linkedSheets.forEach((r,o)=>{const l=Nm([`${s}/${t.data.meta.related_multi_packs[o]}`],r,!0);Object.assign(i,l)})}return i}const E2={extension:_t.Asset,cache:{test:n=>n instanceof Qd,getCacheableAssets:(n,t)=>Nm(n,t,!1)},resolver:{extension:{type:_t.ResolveParser,name:"resolveSpritesheet"},test:n=>{const e=n.split("?")[0].split("."),i=e.pop(),s=e.pop();return i==="json"&&k2.includes(s)},parse:n=>{var e;const t=n.split(".");return{resolution:parseFloat(((e=mn.RETINA_PREFIX.exec(n))==null?void 0:e[1])??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:_t.LoadParser,priority:ss.Normal,name:"spritesheetLoader"},async testParse(n,t){return Xe.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){var f,d;const{texture:i,imageFilename:s,textureOptions:r}=(t==null?void 0:t.data)??{};let o=Xe.dirname(t.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let l;if(i instanceof Ot)l=i;else{const g=Ja(o+(s??n.meta.image),t.src);l=(await e.load([{src:g,data:r}]))[g]}const u=new Qd(l.source,n);await u.parse();const c=(f=n==null?void 0:n.meta)==null?void 0:f.related_multi_packs;if(Array.isArray(c)){const g=[];for(const x of c){if(typeof x!="string")continue;let y=o+x;(d=t.data)!=null&&d.ignoreMultiPack||(y=Ja(y,t.src),g.push(e.load({src:y,data:{textureOptions:r,ignoreMultiPack:!0}})))}const p=await Promise.all(g);u.linkedSheets=p,p.forEach(x=>{x.linkedSheets=[u].concat(u.linkedSheets.filter(y=>y!==x))})}return u},async unload(n,t,e){await e.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};Fe.add(E2);const Jl=Object.create(null),Jd=Object.create(null);function nc(n,t){let e=Jd[n];return e===void 0&&(Jl[t]===void 0&&(Jl[t]=1),Jd[n]=e=Jl[t]++),e}let Fn;function Xm(){return(!Fn||Fn!=null&&Fn.isContextLost())&&(Fn=ve.get().createCanvas().getContext("webgl",{})),Fn}let Ya;function R2(){if(!Ya){Ya="mediump";const n=Xm();n&&n.getShaderPrecisionFormat&&(Ya=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return Ya}function F2(n,t,e){return t?n:e?(n=n.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function B2(n,t,e){const i=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let s=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return s==="highp"&&i!=="highp"&&(s="mediump"),`precision ${s} float;
${n}`}else if(i!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function L2(n,t){return t?`#version 300 es
${n}`:n}const O2={},D2={};function Y2(n,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const i=e?O2:D2;return i[t]?(i[t]++,t+=`-${i[t]}`):i[t]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${t}`}
${n}`}function N2(n,t){return t?n.replace("#version 300 es",""):n}const th={stripVersion:N2,ensurePrecision:B2,addProgramDefines:F2,setProgramName:Y2,insertVersion:L2},eh=Object.create(null),Um=class Bh{constructor(t){t={...Bh.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:R2()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let s=t.fragment,r=t.vertex;Object.keys(th).forEach(o=>{const l=i[o];s=th[o](s,l,!0),r=th[o](r,l,!1)}),this.fragment=s,this.vertex=r,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=nc(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return eh[e]||(eh[e]=new Bh(t)),eh[e]}};Um.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Wm=Um;const tp={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function X2(n){return tp[n]??tp.float32}const U2={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function W2({source:n,entryPoint:t}){const e={},i=n.indexOf(`fn ${t}`);if(i!==-1){const s=n.indexOf("->",i);if(s!==-1){const r=n.substring(i,s),o=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let l;for(;(l=o.exec(r))!==null;){const u=U2[l[3]]??"float32";e[l[2]]={location:parseInt(l[1],10),format:u,stride:X2(u).stride,offset:0,instance:!1,start:0}}}}return e}function ih(n){var d,g;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,s=/var(<[^>]+>)? (\w+)/,r=/:\s*(\w+)/,o=/struct\s+(\w+)\s*{([^}]+)}/g,l=/(\w+)\s*:\s*([\w\<\>]+)/g,u=/struct\s+(\w+)/,c=(d=n.match(t))==null?void 0:d.map(p=>({group:parseInt(p.match(e)[1],10),binding:parseInt(p.match(i)[1],10),name:p.match(s)[2],isUniform:p.match(s)[1]==="<uniform>",type:p.match(r)[1]}));if(!c)return{groups:[],structs:[]};const f=((g=n.match(o))==null?void 0:g.map(p=>{const x=p.match(u)[1],y=p.match(l).reduce((b,A)=>{const[C,_]=A.split(":");return b[C.trim()]=_.trim(),b},{});return y?{name:x,members:y}:null}).filter(({name:p})=>c.some(x=>x.type===p)))??[];return{groups:c,structs:f}}var Tr=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(Tr||{});function z2({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]=[]),i.isUniform?t[i.group].push({binding:i.binding,visibility:Tr.VERTEX|Tr.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?t[i.group].push({binding:i.binding,visibility:Tr.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&t[i.group].push({binding:i.binding,visibility:Tr.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function G2({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]={}),t[i.group][i.name]=i.binding}return t}function V2(n,t){const e=new Set,i=new Set,s=[...n.structs,...t.structs].filter(o=>e.has(o.name)?!1:(e.add(o.name),!0)),r=[...n.groups,...t.groups].filter(o=>{const l=`${o.name}-${o.binding}`;return i.has(l)?!1:(i.add(l),!0)});return{structs:s,groups:r}}const sh=Object.create(null);class xo{constructor(t){var l,u;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:i,layout:s,gpuLayout:r,name:o}=t;if(this.name=o,this.fragment=e,this.vertex=i,e.source===i.source){const c=ih(e.source);this.structsAndGroups=c}else{const c=ih(i.source),f=ih(e.source);this.structsAndGroups=V2(c,f)}this.layout=s??G2(this.structsAndGroups),this.gpuLayout=r??z2(this.structsAndGroups),this.autoAssignGlobalUniforms=((l=this.layout[0])==null?void 0:l.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((u=this.layout[1])==null?void 0:u.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,i=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=nc(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=W2(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return sh[e]||(sh[e]=new xo(t)),sh[e]}}const zm=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],$2=zm.reduce((n,t)=>(n[t]=!0,n),{});function H2(n,t){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Gm=class Vm{constructor(t,e){this._touched=0,this.uid=Se("uniform"),this._resourceType="uniformGroup",this._resourceId=Se("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...Vm.defaultOptions,...e},this.uniformStructures=t;const i={};for(const s in t){const r=t[s];if(r.name=s,r.size=r.size??1,!$2[r.type])throw new Error(`Uniform type ${r.type} is not supported. Supported uniform types are: ${zm.join(", ")}`);r.value??(r.value=H2(r.type,r.size)),i[s]=r.value}this.uniforms=i,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=nc(Object.keys(i).map(s=>`${s}-${t[s].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};Gm.defaultOptions={ubo:!1,isStatic:!1};let $m=Gm;class qa{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const s=t[i];this.setResource(s,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){var s,r;const i=this.resources[e];t!==i&&(i&&((s=t.off)==null||s.call(t,"change",this.onResourceChange,this)),(r=t.on)==null||r.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){var e;const t=this.resources;for(const i in t){const s=t[i];(e=s.off)==null||e.call(s,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}var Lh=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(Lh||{});class yo extends is{constructor(t){super(),this.uid=Se("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:i,groups:s,resources:r,compatibleRenderers:o,groupMap:l}=t;this.gpuProgram=e,this.glProgram=i,o===void 0&&(o=0,e&&(o|=Lh.WEBGPU),i&&(o|=Lh.WEBGL)),this.compatibleRenderers=o;const u={};if(!r&&!s&&(r={}),r&&s)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&s&&!l)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&s&&l)for(const c in l)for(const f in l[c]){const d=l[c][f];u[d]={group:c,binding:f,name:d}}else if(e&&s&&!l){const c=e.structsAndGroups.groups;l={},c.forEach(f=>{l[f.group]=l[f.group]||{},l[f.group][f.binding]=f.name,u[f.name]=f})}else if(r){s={},l={},e&&e.structsAndGroups.groups.forEach(d=>{l[d.group]=l[d.group]||{},l[d.group][d.binding]=d.name,u[d.name]=d});let c=0;for(const f in r)u[f]||(s[99]||(s[99]=new qa,this._ownedBindGroups.push(s[99])),u[f]={group:99,binding:c,name:f},l[99]=l[99]||{},l[99][c]=f,c++);for(const f in r){const d=f;let g=r[f];!g.source&&!g._resourceType&&(g=new $m(g));const p=u[d];p&&(s[p.group]||(s[p.group]=new qa,this._ownedBindGroups.push(s[p.group])),s[p.group].setResource(g,p.binding))}}this.groups=s,this._uniformBindMap=l,this.resources=this._buildResourceAccessor(s,u)}addResource(t,e,i){var s,r;(s=this._uniformBindMap)[e]||(s[e]={}),(r=this._uniformBindMap[e])[i]||(r[i]=t),this.groups[e]||(this.groups[e]=new qa,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const i={};for(const s in e){const r=e[s];Object.defineProperty(i,r.name,{get(){return t[r.group].getResource(r.binding)},set(o){t[r.group].setResource(o,r.binding)}})}return i}destroy(t=!1){var e,i;this.emit("destroy",this),t&&((e=this.gpuProgram)==null||e.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(s=>{s.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:i,...s}=t;let r,o;return e&&(r=xo.from(e)),i&&(o=Wm.from(i)),new yo({gpuProgram:r,glProgram:o,...s})}}var Na={exports:{}},ep;function q2(){if(ep)return Na.exports;ep=1,Na.exports=n,Na.exports.default=n;function n(E,L,Y){Y=Y||2;var W=L&&L.length,q=W?L[0]*Y:E.length,j=t(E,0,q,Y,!0),tt=[];if(!j||j.next===j.prev)return tt;var Z,ct,lt,Pt,Ct,gt,It;if(W&&(j=u(E,L,j,Y)),E.length>80*Y){Z=lt=E[0],ct=Pt=E[1];for(var wt=Y;wt<q;wt+=Y)Ct=E[wt],gt=E[wt+1],Ct<Z&&(Z=Ct),gt<ct&&(ct=gt),Ct>lt&&(lt=Ct),gt>Pt&&(Pt=gt);It=Math.max(lt-Z,Pt-ct),It=It!==0?32767/It:0}return i(j,tt,Y,Z,ct,It,0),tt}function t(E,L,Y,W,q){var j,tt;if(q===J(E,L,Y,W)>0)for(j=L;j<Y;j+=W)tt=et(j,E[j],E[j+1],tt);else for(j=Y-W;j>=L;j-=W)tt=et(j,E[j],E[j+1],tt);return tt&&v(tt,tt.next)&&(K(tt),tt=tt.next),tt}function e(E,L){if(!E)return E;L||(L=E);var Y=E,W;do if(W=!1,!Y.steiner&&(v(Y,Y.next)||_(Y.prev,Y,Y.next)===0)){if(K(Y),Y=L=Y.prev,Y===Y.next)break;W=!0}else Y=Y.next;while(W||Y!==L);return L}function i(E,L,Y,W,q,j,tt){if(E){!tt&&j&&p(E,W,q,j);for(var Z=E,ct,lt;E.prev!==E.next;){if(ct=E.prev,lt=E.next,j?r(E,W,q,j):s(E)){L.push(ct.i/Y|0),L.push(E.i/Y|0),L.push(lt.i/Y|0),K(E),E=lt.next,Z=lt.next;continue}if(E=lt,E===Z){tt?tt===1?(E=o(e(E),L,Y),i(E,L,Y,W,q,j,2)):tt===2&&l(E,L,Y,W,q,j):i(e(E),L,Y,W,q,j,1);break}}}}function s(E){var L=E.prev,Y=E,W=E.next;if(_(L,Y,W)>=0)return!1;for(var q=L.x,j=Y.x,tt=W.x,Z=L.y,ct=Y.y,lt=W.y,Pt=q<j?q<tt?q:tt:j<tt?j:tt,Ct=Z<ct?Z<lt?Z:lt:ct<lt?ct:lt,gt=q>j?q>tt?q:tt:j>tt?j:tt,It=Z>ct?Z>lt?Z:lt:ct>lt?ct:lt,wt=W.next;wt!==L;){if(wt.x>=Pt&&wt.x<=gt&&wt.y>=Ct&&wt.y<=It&&A(q,Z,j,ct,tt,lt,wt.x,wt.y)&&_(wt.prev,wt,wt.next)>=0)return!1;wt=wt.next}return!0}function r(E,L,Y,W){var q=E.prev,j=E,tt=E.next;if(_(q,j,tt)>=0)return!1;for(var Z=q.x,ct=j.x,lt=tt.x,Pt=q.y,Ct=j.y,gt=tt.y,It=Z<ct?Z<lt?Z:lt:ct<lt?ct:lt,wt=Pt<Ct?Pt<gt?Pt:gt:Ct<gt?Ct:gt,ee=Z>ct?Z>lt?Z:lt:ct>lt?ct:lt,ie=Pt>Ct?Pt>gt?Pt:gt:Ct>gt?Ct:gt,Pe=y(It,wt,L,Y,W),Kt=y(ee,ie,L,Y,W),St=E.prevZ,Dt=E.nextZ;St&&St.z>=Pe&&Dt&&Dt.z<=Kt;){if(St.x>=It&&St.x<=ee&&St.y>=wt&&St.y<=ie&&St!==q&&St!==tt&&A(Z,Pt,ct,Ct,lt,gt,St.x,St.y)&&_(St.prev,St,St.next)>=0||(St=St.prevZ,Dt.x>=It&&Dt.x<=ee&&Dt.y>=wt&&Dt.y<=ie&&Dt!==q&&Dt!==tt&&A(Z,Pt,ct,Ct,lt,gt,Dt.x,Dt.y)&&_(Dt.prev,Dt,Dt.next)>=0))return!1;Dt=Dt.nextZ}for(;St&&St.z>=Pe;){if(St.x>=It&&St.x<=ee&&St.y>=wt&&St.y<=ie&&St!==q&&St!==tt&&A(Z,Pt,ct,Ct,lt,gt,St.x,St.y)&&_(St.prev,St,St.next)>=0)return!1;St=St.prevZ}for(;Dt&&Dt.z<=Kt;){if(Dt.x>=It&&Dt.x<=ee&&Dt.y>=wt&&Dt.y<=ie&&Dt!==q&&Dt!==tt&&A(Z,Pt,ct,Ct,lt,gt,Dt.x,Dt.y)&&_(Dt.prev,Dt,Dt.next)>=0)return!1;Dt=Dt.nextZ}return!0}function o(E,L,Y){var W=E;do{var q=W.prev,j=W.next.next;!v(q,j)&&M(q,W,W.next,j)&&O(q,j)&&O(j,q)&&(L.push(q.i/Y|0),L.push(W.i/Y|0),L.push(j.i/Y|0),K(W),K(W.next),W=E=j),W=W.next}while(W!==E);return e(W)}function l(E,L,Y,W,q,j){var tt=E;do{for(var Z=tt.next.next;Z!==tt.prev;){if(tt.i!==Z.i&&C(tt,Z)){var ct=N(tt,Z);tt=e(tt,tt.next),ct=e(ct,ct.next),i(tt,L,Y,W,q,j,0),i(ct,L,Y,W,q,j,0);return}Z=Z.next}tt=tt.next}while(tt!==E)}function u(E,L,Y,W){var q=[],j,tt,Z,ct,lt;for(j=0,tt=L.length;j<tt;j++)Z=L[j]*W,ct=j<tt-1?L[j+1]*W:E.length,lt=t(E,Z,ct,W,!1),lt===lt.next&&(lt.steiner=!0),q.push(b(lt));for(q.sort(c),j=0;j<q.length;j++)Y=f(q[j],Y);return Y}function c(E,L){return E.x-L.x}function f(E,L){var Y=d(E,L);if(!Y)return L;var W=N(Y,E);return e(W,W.next),e(Y,Y.next)}function d(E,L){var Y=L,W=E.x,q=E.y,j=-1/0,tt;do{if(q<=Y.y&&q>=Y.next.y&&Y.next.y!==Y.y){var Z=Y.x+(q-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(Z<=W&&Z>j&&(j=Z,tt=Y.x<Y.next.x?Y:Y.next,Z===W))return tt}Y=Y.next}while(Y!==L);if(!tt)return null;var ct=tt,lt=tt.x,Pt=tt.y,Ct=1/0,gt;Y=tt;do W>=Y.x&&Y.x>=lt&&W!==Y.x&&A(q<Pt?W:j,q,lt,Pt,q<Pt?j:W,q,Y.x,Y.y)&&(gt=Math.abs(q-Y.y)/(W-Y.x),O(Y,E)&&(gt<Ct||gt===Ct&&(Y.x>tt.x||Y.x===tt.x&&g(tt,Y)))&&(tt=Y,Ct=gt)),Y=Y.next;while(Y!==ct);return tt}function g(E,L){return _(E.prev,E,L.prev)<0&&_(L.next,E,E.next)<0}function p(E,L,Y,W){var q=E;do q.z===0&&(q.z=y(q.x,q.y,L,Y,W)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==E);q.prevZ.nextZ=null,q.prevZ=null,x(q)}function x(E){var L,Y,W,q,j,tt,Z,ct,lt=1;do{for(Y=E,E=null,j=null,tt=0;Y;){for(tt++,W=Y,Z=0,L=0;L<lt&&(Z++,W=W.nextZ,!!W);L++);for(ct=lt;Z>0||ct>0&&W;)Z!==0&&(ct===0||!W||Y.z<=W.z)?(q=Y,Y=Y.nextZ,Z--):(q=W,W=W.nextZ,ct--),j?j.nextZ=q:E=q,q.prevZ=j,j=q;Y=W}j.nextZ=null,lt*=2}while(tt>1);return E}function y(E,L,Y,W,q){return E=(E-Y)*q|0,L=(L-W)*q|0,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,E|L<<1}function b(E){var L=E,Y=E;do(L.x<Y.x||L.x===Y.x&&L.y<Y.y)&&(Y=L),L=L.next;while(L!==E);return Y}function A(E,L,Y,W,q,j,tt,Z){return(q-tt)*(L-Z)>=(E-tt)*(j-Z)&&(E-tt)*(W-Z)>=(Y-tt)*(L-Z)&&(Y-tt)*(j-Z)>=(q-tt)*(W-Z)}function C(E,L){return E.next.i!==L.i&&E.prev.i!==L.i&&!B(E,L)&&(O(E,L)&&O(L,E)&&X(E,L)&&(_(E.prev,E,L.prev)||_(E,L.prev,L))||v(E,L)&&_(E.prev,E,E.next)>0&&_(L.prev,L,L.next)>0)}function _(E,L,Y){return(L.y-E.y)*(Y.x-L.x)-(L.x-E.x)*(Y.y-L.y)}function v(E,L){return E.x===L.x&&E.y===L.y}function M(E,L,Y,W){var q=P(_(E,L,Y)),j=P(_(E,L,W)),tt=P(_(Y,W,E)),Z=P(_(Y,W,L));return!!(q!==j&&tt!==Z||q===0&&T(E,Y,L)||j===0&&T(E,W,L)||tt===0&&T(Y,E,W)||Z===0&&T(Y,L,W))}function T(E,L,Y){return L.x<=Math.max(E.x,Y.x)&&L.x>=Math.min(E.x,Y.x)&&L.y<=Math.max(E.y,Y.y)&&L.y>=Math.min(E.y,Y.y)}function P(E){return E>0?1:E<0?-1:0}function B(E,L){var Y=E;do{if(Y.i!==E.i&&Y.next.i!==E.i&&Y.i!==L.i&&Y.next.i!==L.i&&M(Y,Y.next,E,L))return!0;Y=Y.next}while(Y!==E);return!1}function O(E,L){return _(E.prev,E,E.next)<0?_(E,L,E.next)>=0&&_(E,E.prev,L)>=0:_(E,L,E.prev)<0||_(E,E.next,L)<0}function X(E,L){var Y=E,W=!1,q=(E.x+L.x)/2,j=(E.y+L.y)/2;do Y.y>j!=Y.next.y>j&&Y.next.y!==Y.y&&q<(Y.next.x-Y.x)*(j-Y.y)/(Y.next.y-Y.y)+Y.x&&(W=!W),Y=Y.next;while(Y!==E);return W}function N(E,L){var Y=new V(E.i,E.x,E.y),W=new V(L.i,L.x,L.y),q=E.next,j=L.prev;return E.next=L,L.prev=E,Y.next=q,q.prev=Y,W.next=Y,Y.prev=W,j.next=W,W.prev=j,W}function et(E,L,Y,W){var q=new V(E,L,Y);return W?(q.next=W.next,q.prev=W,W.next.prev=q,W.next=q):(q.prev=q,q.next=q),q}function K(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function V(E,L,Y){this.i=E,this.x=L,this.y=Y,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(E,L,Y,W){var q=L&&L.length,j=q?L[0]*Y:E.length,tt=Math.abs(J(E,0,j,Y));if(q)for(var Z=0,ct=L.length;Z<ct;Z++){var lt=L[Z]*Y,Pt=Z<ct-1?L[Z+1]*Y:E.length;tt-=Math.abs(J(E,lt,Pt,Y))}var Ct=0;for(Z=0;Z<W.length;Z+=3){var gt=W[Z]*Y,It=W[Z+1]*Y,wt=W[Z+2]*Y;Ct+=Math.abs((E[gt]-E[wt])*(E[It+1]-E[gt+1])-(E[gt]-E[It])*(E[wt+1]-E[gt+1]))}return tt===0&&Ct===0?0:Math.abs((Ct-tt)/tt)};function J(E,L,Y,W){for(var q=0,j=L,tt=Y-W;j<Y;j+=W)q+=(E[tt]-E[j])*(E[j+1]+E[tt+1]),tt=j;return q}return n.flatten=function(E){for(var L=E[0][0].length,Y={vertices:[],holes:[],dimensions:L},W=0,q=0;q<E.length;q++){for(var j=0;j<E[q].length;j++)for(var tt=0;tt<L;tt++)Y.vertices.push(E[q][j][tt]);q>0&&(W+=E[q-1].length,Y.holes.push(W))}return Y},Na.exports}var j2=q2();const K2=Dr(j2);class Hm extends is{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return jt(le,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return jt(le,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return jt(le,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return jt(le,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return jt(le,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){var e;this.emit("destroy",this),this.removeAllListeners();for(const i in this.chars)(e=this.chars[i].texture)==null||e.destroy();this.chars=null,t&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}}const ip=[{offset:0,color:"white"},{offset:1,color:"black"}],rc=class Oh{constructor(...t){this.uid=Se("fillGradient"),this.type="linear",this.colorStops=[];let e=Z2(t);e={...e.type==="radial"?Oh.defaultRadialOptions:Oh.defaultLinearOptions,...um(e)},this._textureSize=e.textureSize,e.type==="radial"?(this.center=e.center,this.outerCenter=e.outerCenter??this.center,this.innerRadius=e.innerRadius,this.outerRadius=e.outerRadius,this.scale=e.scale,this.rotation=e.rotation):(this.start=e.start,this.end=e.end),this.textureSpace=e.textureSpace,this.type=e.type,e.colorStops.forEach(s=>{this.addColorStop(s.offset,s.color)})}addColorStop(t,e){return this.colorStops.push({offset:t,color:Be.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:ip,e=this._textureSize,{canvas:i,context:s}=np(e,1),r=s.createLinearGradient(0,0,this._textureSize,0);sp(r,t),s.fillStyle=r,s.fillRect(0,0,e,1),this.texture=new Ot({source:new dn({resource:i})});const{x:o,y:l}=this.start,{x:u,y:c}=this.end,f=new Vt,d=u-o,g=c-l,p=Math.sqrt(d*d+g*g),x=Math.atan2(g,d);f.scale(p/e,1),f.rotate(x),f.translate(o,l),this.textureSpace==="local"&&f.scale(e,e),this.transform=f}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:ip,e=this._textureSize,{canvas:i,context:s}=np(e,e),{x:r,y:o}=this.center,{x:l,y:u}=this.outerCenter,c=this.innerRadius,f=this.outerRadius,d=l-f,g=u-f,p=e/(f*2),x=(r-d)*p,y=(o-g)*p,b=s.createRadialGradient(x,y,c*p,(l-d)*p,(u-g)*p,f*p);sp(b,t),s.fillStyle=t[t.length-1].color,s.fillRect(0,0,e,e),s.fillStyle=b,s.translate(x,y),s.rotate(this.rotation),s.scale(1,this.scale),s.translate(-x,-y),s.fillRect(0,0,e,e),this.texture=new Ot({source:new dn({resource:i,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"})});const A=new Vt;A.scale(1/p,1/p),A.translate(d,g),this.textureSpace==="local"&&A.scale(e,e),this.transform=A}get styleKey(){return this.uid}destroy(){var t;(t=this.texture)==null||t.destroy(!0),this.texture=null}};rc.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256};rc.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256};let Ws=rc;function sp(n,t){for(let e=0;e<t.length;e++){const i=t[e];n.addColorStop(i.offset,i.color)}}function np(n,t){const e=ve.get().createCanvas(n,t),i=e.getContext("2d");return{canvas:e,context:i}}function Z2(n){let t=n[0]??{};return(typeof t=="number"||n[1])&&(jt("8.5.2","use options object instead"),t={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??Ws.defaultLinearOptions.textureSize}),t}const rp={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class bo{constructor(t,e){this.uid=Se("fillPattern"),this.transform=new Vt,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=rp[e].addressModeU,t.source.style.addressModeV=rp[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var nh,ap;function Q2(){if(ap)return nh;ap=1,nh=e;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function e(r){var o=[];return r.replace(t,function(l,u,c){var f=u.toLowerCase();for(c=s(c),f=="m"&&c.length>2&&(o.push([u].concat(c.splice(0,2))),f="l",u=u=="m"?"l":"L");;){if(c.length==n[f])return c.unshift(u),o.push(c);if(c.length<n[f])throw new Error("malformed path data");o.push([u].concat(c.splice(0,n[f])))}}),o}var i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function s(r){var o=r.match(i);return o?o.map(Number):[]}return nh}var J2=Q2();const tC=Dr(J2);function eC(n,t){const e=tC(n),i=[];let s=null,r=0,o=0;for(let l=0;l<e.length;l++){const u=e[l],c=u[0],f=u;switch(c){case"M":r=f[1],o=f[2],t.moveTo(r,o);break;case"m":r+=f[1],o+=f[2],t.moveTo(r,o);break;case"H":r=f[1],t.lineTo(r,o);break;case"h":r+=f[1],t.lineTo(r,o);break;case"V":o=f[1],t.lineTo(r,o);break;case"v":o+=f[1],t.lineTo(r,o);break;case"L":r=f[1],o=f[2],t.lineTo(r,o);break;case"l":r+=f[1],o+=f[2],t.lineTo(r,o);break;case"C":r=f[5],o=f[6],t.bezierCurveTo(f[1],f[2],f[3],f[4],r,o);break;case"c":t.bezierCurveTo(r+f[1],o+f[2],r+f[3],o+f[4],r+f[5],o+f[6]),r+=f[5],o+=f[6];break;case"S":r=f[3],o=f[4],t.bezierCurveToShort(f[1],f[2],r,o);break;case"s":t.bezierCurveToShort(r+f[1],o+f[2],r+f[3],o+f[4]),r+=f[3],o+=f[4];break;case"Q":r=f[3],o=f[4],t.quadraticCurveTo(f[1],f[2],r,o);break;case"q":t.quadraticCurveTo(r+f[1],o+f[2],r+f[3],o+f[4]),r+=f[3],o+=f[4];break;case"T":r=f[1],o=f[2],t.quadraticCurveToShort(r,o);break;case"t":r+=f[1],o+=f[2],t.quadraticCurveToShort(r,o);break;case"A":r=f[6],o=f[7],t.arcToSvg(f[1],f[2],f[3],f[4],f[5],r,o);break;case"a":r+=f[6],o+=f[7],t.arcToSvg(f[1],f[2],f[3],f[4],f[5],r,o);break;case"Z":case"z":t.closePath(),i.length>0&&(s=i.pop(),s?(r=s.startX,o=s.startY):(r=0,o=0)),s=null;break;default:ge(`Unknown SVG path command: ${c}`)}c!=="Z"&&c!=="z"&&s===null&&(s={startX:r,startY:o},i.push(s))}return t}class ac{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new ac(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-t,r=this.y-e;return s*=s,r*=r,s+r<=i}strokeContains(t,e,i,s=.5){if(this.radius===0)return!1;const r=this.x-t,o=this.y-e,l=this.radius,u=(1-s)*i,c=Math.sqrt(r*r+o*o);return c<=l+u&&c>l-(i-u)}getBounds(t){return t||(t=new Ve),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class oc{constructor(t=0,e=0,i=0,s=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=s}clone(){return new oc(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,s=(e-this.y)/this.halfHeight;return i*=i,s*=s,i+s<=1}strokeContains(t,e,i,s=.5){const{halfWidth:r,halfHeight:o}=this;if(r<=0||o<=0)return!1;const l=i*(1-s),u=i-l,c=r-u,f=o-u,d=r+l,g=o+l,p=t-this.x,x=e-this.y,y=p*p/(c*c)+x*x/(f*f),b=p*p/(d*d)+x*x/(g*g);return y>1&&b<=1}getBounds(t){return t||(t=new Ve),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function iC(n,t,e,i,s,r){const o=n-e,l=t-i,u=s-e,c=r-i,f=o*u+l*c,d=u*u+c*c;let g=-1;d!==0&&(g=f/d);let p,x;g<0?(p=e,x=i):g>1?(p=s,x=r):(p=e+g*u,x=i+g*c);const y=n-p,b=t-x;return y*y+b*b}let sC,nC;class Pr{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let s=0,r=e.length;s<r;s++)i.push(e[s].x,e[s].y);e=i}this.points=e,this.closePath=!0}isClockwise(){let t=0;const e=this.points,i=e.length;for(let s=0;s<i;s+=2){const r=e[s],o=e[s+1],l=e[(s+2)%i],u=e[(s+3)%i];t+=(l-r)*(u+o)}return t<0}containsPolygon(t){const e=this.getBounds(sC),i=t.getBounds(nC);if(!e.containsRect(i))return!1;const s=t.points;for(let r=0;r<s.length;r+=2){const o=s[r],l=s[r+1];if(!this.contains(o,l))return!1}return!0}clone(){const t=this.points.slice(),e=new Pr(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const s=this.points.length/2;for(let r=0,o=s-1;r<s;o=r++){const l=this.points[r*2],u=this.points[r*2+1],c=this.points[o*2],f=this.points[o*2+1];u>e!=f>e&&t<(c-l)*((e-u)/(f-u))+l&&(i=!i)}return i}strokeContains(t,e,i,s=.5){const r=i*i,o=r*(1-s),l=r-o,{points:u}=this,c=u.length-(this.closePath?0:2);for(let f=0;f<c;f+=2){const d=u[f],g=u[f+1],p=u[(f+2)%u.length],x=u[(f+3)%u.length],y=iC(t,e,d,g,p,x),b=Math.sign((p-d)*(e-g)-(x-g)*(t-d));if(y<=(b<0?l:o))return!0}return!1}getBounds(t){t||(t=new Ve);const e=this.points;let i=1/0,s=-1/0,r=1/0,o=-1/0;for(let l=0,u=e.length;l<u;l+=2){const c=e[l],f=e[l+1];i=c<i?c:i,s=c>s?c:s,r=f<r?f:r,o=f>o?f:o}return t.x=i,t.width=s-i,t.y=r,t.height=o-r,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const Xa=(n,t,e,i,s,r,o)=>{const l=n-e,u=t-i,c=Math.sqrt(l*l+u*u);return c>=s-r&&c<=s+o};class lc{constructor(t=0,e=0,i=0,s=0,r=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=s,this.radius=r}getBounds(t){return t||(t=new Ve),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new lc(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let s=t-(this.x+i),r=e-(this.y+i);const o=i*i;if(s*s+r*r<=o||(s=t-(this.x+this.width-i),s*s+r*r<=o)||(r=e-(this.y+this.height-i),s*s+r*r<=o)||(s=t-(this.x+i),s*s+r*r<=o))return!0}return!1}strokeContains(t,e,i,s=.5){const{x:r,y:o,width:l,height:u,radius:c}=this,f=i*(1-s),d=i-f,g=r+c,p=o+c,x=l-c*2,y=u-c*2,b=r+l,A=o+u;return(t>=r-f&&t<=r+d||t>=b-d&&t<=b+f)&&e>=p&&e<=p+y||(e>=o-f&&e<=o+d||e>=A-d&&e<=A+f)&&t>=g&&t<=g+x?!0:t<g&&e<p&&Xa(t,e,g,p,c,d,f)||t>b-c&&e<p&&Xa(t,e,b-c,p,c,d,f)||t>b-c&&e>A-c&&Xa(t,e,b-c,A-c,c,d,f)||t<g&&e>A-c&&Xa(t,e,g,A-c,c,d,f)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const rC=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function aC(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function oC(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const i=rC.replace(/%forloop%/gi,aC(n));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}}finally{t.deleteShader(e)}return n}let Bn=null;function qm(){var t;if(Bn)return Bn;const n=Xm();return Bn=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),Bn=oC(Bn,n),(t=n.getExtension("WEBGL_lose_context"))==null||t.loseContext(),Bn}const jm={};function lC(n,t){let e=2166136261;for(let i=0;i<t;i++)e^=n[i].uid,e=Math.imul(e,16777619),e>>>=0;return jm[e]||hC(n,t,e)}let rh=0;function hC(n,t,e){const i={};let s=0;rh||(rh=qm());for(let o=0;o<rh;o++){const l=o<t?n[o]:Ot.EMPTY.source;i[s++]=l.source,i[s++]=l.style}const r=new qa(i);return jm[e]=r,r}class op{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function Dh(n,t){const e=n.byteLength/8|0,i=new Float64Array(n,0,e);new Float64Array(t,0,e).set(i);const r=n.byteLength-e*8;if(r>0){const o=new Uint8Array(n,e*8,r);new Uint8Array(t,e*8,r).set(o)}}const cC={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var uC=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(uC||{});function lp(n,t){return t.alphaMode==="no-premultiply-alpha"&&cC[n]||n}class fC{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class dC{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new fC,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Km=[];let Yh=0;function hp(){return Yh>0?Km[--Yh]:new dC}function cp(n){Km[Yh++]=n}let _r=0;const Zm=class ja{constructor(t={}){this.uid=Se("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],ja.defaultOptions.maxTextures=ja.defaultOptions.maxTextures??qm(),t={...ja.defaultOptions,...t};const{maxTextures:e,attributesInitialSize:i,indicesInitialSize:s}=t;this.attributeBuffer=new op(i*4),this.indexBuffer=new Uint16Array(s),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)cp(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const i=t._batch.textures.ids[e._source.uid];return!i&&i!==0?!1:(t._textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let i=hp(),s=i.textures;s.clear();const r=e[this.elementStart];let o=lp(r.blendMode,r.texture._source),l=r.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const u=this.attributeBuffer.float32View,c=this.attributeBuffer.uint32View,f=this.indexBuffer;let d=this._batchIndexSize,g=this._batchIndexStart,p="startBatch";const x=this.maxTextures;for(let y=this.elementStart;y<this.elementSize;++y){const b=e[y];e[y]=null;const C=b.texture._source,_=lp(b.blendMode,C),v=o!==_||l!==b.topology;if(C._batchTick===_r&&!v){b._textureId=C._textureBindLocation,d+=b.indexSize,b.packAsQuad?(this.packQuadAttributes(b,u,c,b._attributeStart,b._textureId),this.packQuadIndex(f,b._indexStart,b._attributeStart/this.vertexSize)):(this.packAttributes(b,u,c,b._attributeStart,b._textureId),this.packIndex(b,f,b._indexStart,b._attributeStart/this.vertexSize)),b._batch=i;continue}C._batchTick=_r,(s.count>=x||v)&&(this._finishBatch(i,g,d-g,s,o,l,t,p),p="renderBatch",g=d,o=_,l=b.topology,i=hp(),s=i.textures,s.clear(),++_r),b._textureId=C._textureBindLocation=s.count,s.ids[C.uid]=s.count,s.textures[s.count++]=C,b._batch=i,d+=b.indexSize,b.packAsQuad?(this.packQuadAttributes(b,u,c,b._attributeStart,b._textureId),this.packQuadIndex(f,b._indexStart,b._attributeStart/this.vertexSize)):(this.packAttributes(b,u,c,b._attributeStart,b._textureId),this.packIndex(b,f,b._indexStart,b._attributeStart/this.vertexSize))}s.count>0&&(this._finishBatch(i,g,d-g,s,o,l,t,p),g=d,++_r),this.elementStart=this.elementSize,this._batchIndexStart=g,this._batchIndexSize=d}_finishBatch(t,e,i,s,r,o,l,u){t.gpuBindGroup=null,t.bindGroup=null,t.action=u,t.batcher=this,t.textures=s,t.blendMode=r,t.topology=o,t.start=e,t.size=i,++_r,this.batches[this.batchIndex++]=t,l.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),i=new op(e);Dh(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,e.length*1.5);i+=i%2;const s=i>65535?new Uint32Array(i):new Uint16Array(i);if(s.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let r=0;r<e.length;r++)s[r]=e[r];else Dh(e.buffer,s.buffer);this.indexBuffer=s}packQuadIndex(t,e,i){t[e]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3}packIndex(t,e,i,s){const r=t.indices,o=t.indexSize,l=t.indexOffset,u=t.attributeOffset;for(let c=0;c<o;c++)e[i++]=s+r[c+l]-u}destroy(){for(let t=0;t<this.batches.length;t++)cp(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};Zm.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Qm=Zm;var Re=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(Re||{});class pn extends is{constructor(t){let{data:e,size:i}=t;const{usage:s,label:r,shrinkToFit:o}=t;super(),this.uid=Se("buffer"),this._resourceType="buffer",this._resourceId=Se("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i??(i=e==null?void 0:e.byteLength);const l=!!e;this.descriptor={size:i,usage:s,mappedAtCreation:l,label:r},this.shrinkToFit=o??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Re.STATIC)}set static(t){t?this.descriptor.usage|=Re.STATIC:this.descriptor.usage&=~Re.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}const s=this._data;if(this._data=t,this._dataInt32=null,!s||s.length!==t.length){!this.shrinkToFit&&s&&t.byteLength<s.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=Se("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function Jm(n,t){if(!(n instanceof pn)){let e=t?Re.INDEX:Re.VERTEX;n instanceof Array&&(t?(n=new Uint32Array(n),e=Re.INDEX|Re.COPY_DST):(n=new Float32Array(n),e=Re.VERTEX|Re.COPY_DST)),n=new pn({data:n,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return n}function pC(n,t,e){const i=n.getAttribute(t);if(!i)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const s=i.buffer.data;let r=1/0,o=1/0,l=-1/0,u=-1/0;const c=s.BYTES_PER_ELEMENT,f=(i.offset||0)/c,d=(i.stride||2*4)/c;for(let g=f;g<s.length;g+=d){const p=s[g],x=s[g+1];p>l&&(l=p),x>u&&(u=x),p<r&&(r=p),x<o&&(o=x)}return e.minX=r,e.minY=o,e.maxX=l,e.maxY=u,e}function mC(n){return(n instanceof pn||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=Jm(n.buffer,!1),n}class tg extends is{constructor(t={}){super(),this.uid=Se("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Xi,this._boundsDirty=!0;const{attributes:e,indexBuffer:i,topology:s}=t;if(this.buffers=[],this.attributes={},e)for(const r in e)this.addAttribute(r,e[r]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const i=mC(e);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=Jm(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,pC(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const gC=new Float32Array(1),xC=new Uint32Array(1);class yC extends tg{constructor(){const e=new pn({data:gC,label:"attribute-batch-buffer",usage:Re.VERTEX|Re.COPY_DST,shrinkToFit:!1}),i=new pn({data:xC,label:"index-batch-buffer",usage:Re.INDEX|Re.COPY_DST,shrinkToFit:!1}),s=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:s,offset:0},aUV:{buffer:e,format:"float32x2",stride:s,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:s,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:s,offset:5*4}},indexBuffer:i})}}function up(n,t,e){if(n)for(const i in n){const s=i.toLocaleLowerCase(),r=t[s];if(r){let o=n[i];i==="header"&&(o=o.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&r.push(`//----${e}----//`),r.push(o)}else ge(`${i} placement hook does not exist in shader`)}}const bC=/\{\{(.*?)\}\}/g;function fp(n){var i;const t={};return(((i=n.match(bC))==null?void 0:i.map(s=>s.replace(/[{()}]/g,"")))??[]).forEach(s=>{t[s]=[]}),t}function dp(n,t){let e;const i=/@in\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function pp(n,t,e=!1){const i=[];dp(t,i),n.forEach(l=>{l.header&&dp(l.header,i)});const s=i;e&&s.sort();const r=s.map((l,u)=>`       @location(${u}) ${l},`).join(`
`);let o=t.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`
${r}
`),o}function mp(n,t){let e;const i=/@out\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function _C(n){const e=/\b(\w+)\s*:/g.exec(n);return e?e[1]:""}function wC(n){const t=/@.*?\s+/g;return n.replace(t,"")}function vC(n,t){const e=[];mp(t,e),n.forEach(u=>{u.header&&mp(u.header,e)});let i=0;const s=e.sort().map(u=>u.indexOf("builtin")>-1?u:`@location(${i++}) ${u}`).join(`,
`),r=e.sort().map(u=>`       var ${wC(u)};`).join(`
`),o=`return VSOutput(
            ${e.sort().map(u=>` ${_C(u)}`).join(`,
`)});`;let l=t.replace(/@out\s+[^;]+;\s*/g,"");return l=l.replace("{{struct}}",`
${s}
`),l=l.replace("{{start}}",`
${r}
`),l=l.replace("{{return}}",`
${o}
`),l}function gp(n,t){let e=n;for(const i in t){const s=t[i];s.join(`
`).length?e=e.replace(`{{${i}}}`,`//-----${i} START-----//
${s.join(`
`)}
//----${i} FINISH----//`):e=e.replace(`{{${i}}}`,"")}return e}const Ns=Object.create(null),ah=new Map;let SC=0;function AC({template:n,bits:t}){const e=eg(n,t);if(Ns[e])return Ns[e];const{vertex:i,fragment:s}=TC(n,t);return Ns[e]=ig(i,s,t),Ns[e]}function CC({template:n,bits:t}){const e=eg(n,t);return Ns[e]||(Ns[e]=ig(n.vertex,n.fragment,t)),Ns[e]}function TC(n,t){const e=t.map(o=>o.vertex).filter(o=>!!o),i=t.map(o=>o.fragment).filter(o=>!!o);let s=pp(e,n.vertex,!0);s=vC(e,s);const r=pp(i,n.fragment,!0);return{vertex:s,fragment:r}}function eg(n,t){return t.map(e=>(ah.has(e)||ah.set(e,SC++),ah.get(e))).sort((e,i)=>e-i).join("-")+n.vertex+n.fragment}function ig(n,t,e){const i=fp(n),s=fp(t);return e.forEach(r=>{up(r.vertex,i,r.name),up(r.fragment,s,r.name)}),{vertex:gp(n,i),fragment:gp(t,s)}}const MC=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,PC=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,IC=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,kC=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,EC={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},RC={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function sg({bits:n,name:t}){const e=AC({template:{fragment:PC,vertex:MC},bits:[EC,...n]});return xo.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function ng({bits:n,name:t}){return new Wm({name:t,...CC({template:{vertex:IC,fragment:kC},bits:[RC,...n]})})}const rg={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},ag={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},oh={};function FC(n){const t=[];if(n===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let i=0;i<n;i++)t.push(`@group(1) @binding(${e++}) var textureSource${i+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${i+1}: sampler;`)}return t.join(`
`)}function BC(n){const t=[];if(n===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<n;e++)e===n-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function og(n){return oh[n]||(oh[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${FC(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${BC(n)}
            `}}),oh[n]}const lh={};function LC(n){const t=[];for(let e=0;e<n;e++)e>0&&t.push("else"),e<n-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function lg(n){return lh[n]||(lh[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${LC(n)}
            `}}),lh[n]}const hg={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},cg={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},xp={};function ug(n){let t=xp[n];if(t)return t;const e=new Int32Array(n);for(let i=0;i<n;i++)e[i]=i;return t=xp[n]=new $m({uTextures:{value:e,type:"i32",size:n}},{isStatic:!0}),t}class OC extends yo{constructor(t){const e=ng({name:"batch",bits:[ag,lg(t),cg]}),i=sg({name:"batch",bits:[rg,og(t),hg]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:ug(t)}})}}let yp=null;const fg=class dg extends Qm{constructor(){super(...arguments),this.geometry=new yC,this.shader=yp||(yp=new OC(this.maxTextures)),this.name=dg.extension.name,this.vertexSize=6}packAttributes(t,e,i,s,r){const o=r<<16|t.roundPixels&65535,l=t.transform,u=l.a,c=l.b,f=l.c,d=l.d,g=l.tx,p=l.ty,{positions:x,uvs:y}=t,b=t.color,A=t.attributeOffset,C=A+t.attributeSize;for(let _=A;_<C;_++){const v=_*2,M=x[v],T=x[v+1];e[s++]=u*M+f*T+g,e[s++]=d*T+c*M+p,e[s++]=y[v],e[s++]=y[v+1],i[s++]=b,i[s++]=o}}packQuadAttributes(t,e,i,s,r){const o=t.texture,l=t.transform,u=l.a,c=l.b,f=l.c,d=l.d,g=l.tx,p=l.ty,x=t.bounds,y=x.maxX,b=x.minX,A=x.maxY,C=x.minY,_=o.uvs,v=t.color,M=r<<16|t.roundPixels&65535;e[s+0]=u*b+f*C+g,e[s+1]=d*C+c*b+p,e[s+2]=_.x0,e[s+3]=_.y0,i[s+4]=v,i[s+5]=M,e[s+6]=u*y+f*C+g,e[s+7]=d*C+c*y+p,e[s+8]=_.x1,e[s+9]=_.y1,i[s+10]=v,i[s+11]=M,e[s+12]=u*y+f*A+g,e[s+13]=d*A+c*y+p,e[s+14]=_.x2,e[s+15]=_.y2,i[s+16]=v,i[s+17]=M,e[s+18]=u*b+f*A+g,e[s+19]=d*A+c*b+p,e[s+20]=_.x3,e[s+21]=_.y3,i[s+22]=v,i[s+23]=M}};fg.extension={type:[_t.Batcher],name:"default"};let DC=fg;function YC(n,t,e,i,s,r,o,l=null){let u=0;e*=t,s*=r;const c=l.a,f=l.b,d=l.c,g=l.d,p=l.tx,x=l.ty;for(;u<o;){const y=n[e],b=n[e+1];i[s]=c*y+d*b+p,i[s+1]=f*y+g*b+x,s+=r,e+=t,u++}}function NC(n,t,e,i){let s=0;for(t*=e;s<i;)n[t]=0,n[t+1]=0,t+=e,s++}function pg(n,t,e,i,s){const r=t.a,o=t.b,l=t.c,u=t.d,c=t.tx,f=t.ty;e||(e=0),i||(i=2),s||(s=n.length/i-e);let d=e*i;for(let g=0;g<s;g++){const p=n[d],x=n[d+1];n[d]=r*p+l*x+c,n[d+1]=o*p+u*x+f,d+=i}}const XC=new Vt;class mg{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?wm(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||XC}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const kr={extension:{type:_t.ShapeBuilder,name:"circle"},build(n,t){let e,i,s,r,o,l;if(n.type==="circle"){const v=n;e=v.x,i=v.y,o=l=v.radius,s=r=0}else if(n.type==="ellipse"){const v=n;e=v.x,i=v.y,o=v.halfWidth,l=v.halfHeight,s=r=0}else{const v=n,M=v.width/2,T=v.height/2;e=v.x+M,i=v.y+T,o=l=Math.max(0,Math.min(v.radius,Math.min(M,T))),s=M-o,r=T-l}if(!(o>=0&&l>=0&&s>=0&&r>=0))return t;const u=Math.ceil(2.3*Math.sqrt(o+l)),c=u*8+(s?4:0)+(r?4:0);if(c===0)return t;if(u===0)return t[0]=t[6]=e+s,t[1]=t[3]=i+r,t[2]=t[4]=e-s,t[5]=t[7]=i-r,t;let f=0,d=u*4+(s?2:0)+2,g=d,p=c,x=s+o,y=r,b=e+x,A=e-x,C=i+y;if(t[f++]=b,t[f++]=C,t[--d]=C,t[--d]=A,r){const v=i-y;t[g++]=A,t[g++]=v,t[--p]=v,t[--p]=b}for(let v=1;v<u;v++){const M=Math.PI/2*(v/u),T=s+Math.cos(M)*o,P=r+Math.sin(M)*l,B=e+T,O=e-T,X=i+P,N=i-P;t[f++]=B,t[f++]=X,t[--d]=X,t[--d]=O,t[g++]=O,t[g++]=N,t[--p]=N,t[--p]=B}x=s,y=r+l,b=e+x,A=e-x,C=i+y;const _=i-y;return t[f++]=b,t[f++]=C,t[--p]=_,t[--p]=b,s&&(t[f++]=A,t[f++]=C,t[--p]=_,t[--p]=A),t},triangulate(n,t,e,i,s,r){if(n.length===0)return;let o=0,l=0;for(let f=0;f<n.length;f+=2)o+=n[f],l+=n[f+1];o/=n.length/2,l/=n.length/2;let u=i;t[u*e]=o,t[u*e+1]=l;const c=u++;for(let f=0;f<n.length;f+=2)t[u*e]=n[f],t[u*e+1]=n[f+1],f>0&&(s[r++]=u,s[r++]=c,s[r++]=u-1),u++;s[r++]=c+1,s[r++]=c,s[r++]=u-1}},UC={...kr,extension:{...kr.extension,name:"ellipse"}},WC={...kr,extension:{...kr.extension,name:"roundedRectangle"}},gg=1e-4,bp=1e-4;function zC(n){const t=n.length;if(t<6)return 1;let e=0;for(let i=0,s=n[t-2],r=n[t-1];i<t;i+=2){const o=n[i],l=n[i+1];e+=(o-s)*(l+r),s=o,r=l}return e<0?-1:1}function _p(n,t,e,i,s,r,o,l){const u=n-e*s,c=t-i*s,f=n+e*r,d=t+i*r;let g,p;o?(g=i,p=-e):(g=-i,p=e);const x=u+g,y=c+p,b=f+g,A=d+p;return l.push(x,y),l.push(b,A),2}function en(n,t,e,i,s,r,o,l){const u=e-n,c=i-t;let f=Math.atan2(u,c),d=Math.atan2(s-n,r-t);l&&f<d?f+=Math.PI*2:!l&&f>d&&(d+=Math.PI*2);let g=f;const p=d-f,x=Math.abs(p),y=Math.sqrt(u*u+c*c),b=(15*x*Math.sqrt(y)/Math.PI>>0)+1,A=p/b;if(g+=A,l){o.push(n,t),o.push(e,i);for(let C=1,_=g;C<b;C++,_+=A)o.push(n,t),o.push(n+Math.sin(_)*y,t+Math.cos(_)*y);o.push(n,t),o.push(s,r)}else{o.push(e,i),o.push(n,t);for(let C=1,_=g;C<b;C++,_+=A)o.push(n+Math.sin(_)*y,t+Math.cos(_)*y),o.push(n,t);o.push(s,r),o.push(n,t)}return b*2}function GC(n,t,e,i,s,r){const o=gg;if(n.length===0)return;const l=t;let u=l.alignment;if(t.alignment!==.5){let W=zC(n);u=(u-.5)*W+.5}const c=new fe(n[0],n[1]),f=new fe(n[n.length-2],n[n.length-1]),d=i,g=Math.abs(c.x-f.x)<o&&Math.abs(c.y-f.y)<o;if(d){n=n.slice(),g&&(n.pop(),n.pop(),f.set(n[n.length-2],n[n.length-1]));const W=(c.x+f.x)*.5,q=(f.y+c.y)*.5;n.unshift(W,q),n.push(W,q)}const p=s,x=n.length/2;let y=n.length;const b=p.length/2,A=l.width/2,C=A*A,_=l.miterLimit*l.miterLimit;let v=n[0],M=n[1],T=n[2],P=n[3],B=0,O=0,X=-(M-P),N=v-T,et=0,K=0,V=Math.sqrt(X*X+N*N);X/=V,N/=V,X*=A,N*=A;const J=u,E=(1-J)*2,L=J*2;d||(l.cap==="round"?y+=en(v-X*(E-L)*.5,M-N*(E-L)*.5,v-X*E,M-N*E,v+X*L,M+N*L,p,!0)+2:l.cap==="square"&&(y+=_p(v,M,X,N,E,L,!0,p))),p.push(v-X*E,M-N*E),p.push(v+X*L,M+N*L);for(let W=1;W<x-1;++W){v=n[(W-1)*2],M=n[(W-1)*2+1],T=n[W*2],P=n[W*2+1],B=n[(W+1)*2],O=n[(W+1)*2+1],X=-(M-P),N=v-T,V=Math.sqrt(X*X+N*N),X/=V,N/=V,X*=A,N*=A,et=-(P-O),K=T-B,V=Math.sqrt(et*et+K*K),et/=V,K/=V,et*=A,K*=A;const q=T-v,j=M-P,tt=T-B,Z=O-P,ct=q*tt+j*Z,lt=j*tt-Z*q,Pt=lt<0;if(Math.abs(lt)<.001*Math.abs(ct)){p.push(T-X*E,P-N*E),p.push(T+X*L,P+N*L),ct>=0&&(l.join==="round"?y+=en(T,P,T-X*E,P-N*E,T-et*E,P-K*E,p,!1)+4:y+=2,p.push(T-et*L,P-K*L),p.push(T+et*E,P+K*E));continue}const Ct=(-X+v)*(-N+P)-(-X+T)*(-N+M),gt=(-et+B)*(-K+P)-(-et+T)*(-K+O),It=(q*gt-tt*Ct)/lt,wt=(Z*Ct-j*gt)/lt,ee=(It-T)*(It-T)+(wt-P)*(wt-P),ie=T+(It-T)*E,Pe=P+(wt-P)*E,Kt=T-(It-T)*L,St=P-(wt-P)*L,Dt=Math.min(q*q+j*j,tt*tt+Z*Z),Le=Pt?E:L,Ii=Dt+Le*Le*C;ee<=Ii?l.join==="bevel"||ee/C>_?(Pt?(p.push(ie,Pe),p.push(T+X*L,P+N*L),p.push(ie,Pe),p.push(T+et*L,P+K*L)):(p.push(T-X*E,P-N*E),p.push(Kt,St),p.push(T-et*E,P-K*E),p.push(Kt,St)),y+=2):l.join==="round"?Pt?(p.push(ie,Pe),p.push(T+X*L,P+N*L),y+=en(T,P,T+X*L,P+N*L,T+et*L,P+K*L,p,!0)+4,p.push(ie,Pe),p.push(T+et*L,P+K*L)):(p.push(T-X*E,P-N*E),p.push(Kt,St),y+=en(T,P,T-X*E,P-N*E,T-et*E,P-K*E,p,!1)+4,p.push(T-et*E,P-K*E),p.push(Kt,St)):(p.push(ie,Pe),p.push(Kt,St)):(p.push(T-X*E,P-N*E),p.push(T+X*L,P+N*L),l.join==="round"?Pt?y+=en(T,P,T+X*L,P+N*L,T+et*L,P+K*L,p,!0)+2:y+=en(T,P,T-X*E,P-N*E,T-et*E,P-K*E,p,!1)+2:l.join==="miter"&&ee/C<=_&&(Pt?(p.push(Kt,St),p.push(Kt,St)):(p.push(ie,Pe),p.push(ie,Pe)),y+=2),p.push(T-et*E,P-K*E),p.push(T+et*L,P+K*L),y+=2)}v=n[(x-2)*2],M=n[(x-2)*2+1],T=n[(x-1)*2],P=n[(x-1)*2+1],X=-(M-P),N=v-T,V=Math.sqrt(X*X+N*N),X/=V,N/=V,X*=A,N*=A,p.push(T-X*E,P-N*E),p.push(T+X*L,P+N*L),d||(l.cap==="round"?y+=en(T-X*(E-L)*.5,P-N*(E-L)*.5,T-X*E,P-N*E,T+X*L,P+N*L,p,!1)+2:l.cap==="square"&&(y+=_p(T,P,X,N,E,L,!1,p)));const Y=bp*bp;for(let W=b;W<y+b-2;++W)v=p[W*2],M=p[W*2+1],T=p[(W+1)*2],P=p[(W+1)*2+1],B=p[(W+2)*2],O=p[(W+2)*2+1],!(Math.abs(v*(P-O)+T*(O-M)+B*(M-P))<Y)&&r.push(W,W+1,W+2)}function VC(n,t,e,i){const s=gg;if(n.length===0)return;const r=n[0],o=n[1],l=n[n.length-2],u=n[n.length-1],c=t||Math.abs(r-l)<s&&Math.abs(o-u)<s,f=e,d=n.length/2,g=f.length/2;for(let p=0;p<d;p++)f.push(n[p*2]),f.push(n[p*2+1]);for(let p=0;p<d-1;p++)i.push(g+p,g+p+1);c&&i.push(g+d-1,g)}function xg(n,t,e,i,s,r,o){const l=K2(n,t,2);if(!l)return;for(let c=0;c<l.length;c+=3)r[o++]=l[c]+s,r[o++]=l[c+1]+s,r[o++]=l[c+2]+s;let u=s*i;for(let c=0;c<n.length;c+=2)e[u]=n[c],e[u+1]=n[c+1],u+=i}const $C=[],HC={extension:{type:_t.ShapeBuilder,name:"polygon"},build(n,t){for(let e=0;e<n.points.length;e++)t[e]=n.points[e];return t},triangulate(n,t,e,i,s,r){xg(n,$C,t,e,i,s,r)}},qC={extension:{type:_t.ShapeBuilder,name:"rectangle"},build(n,t){const e=n,i=e.x,s=e.y,r=e.width,o=e.height;return r>=0&&o>=0&&(t[0]=i,t[1]=s,t[2]=i+r,t[3]=s,t[4]=i+r,t[5]=s+o,t[6]=i,t[7]=s+o),t},triangulate(n,t,e,i,s,r){let o=0;i*=e,t[i+o]=n[0],t[i+o+1]=n[1],o+=e,t[i+o]=n[2],t[i+o+1]=n[3],o+=e,t[i+o]=n[6],t[i+o+1]=n[7],o+=e,t[i+o]=n[4],t[i+o+1]=n[5],o+=e;const l=i/e;s[r++]=l,s[r++]=l+1,s[r++]=l+2,s[r++]=l+1,s[r++]=l+3,s[r++]=l+2}},jC={extension:{type:_t.ShapeBuilder,name:"triangle"},build(n,t){return t[0]=n.x,t[1]=n.y,t[2]=n.x2,t[3]=n.y2,t[4]=n.x3,t[5]=n.y3,t},triangulate(n,t,e,i,s,r){let o=0;i*=e,t[i+o]=n[0],t[i+o+1]=n[1],o+=e,t[i+o]=n[2],t[i+o+1]=n[3],o+=e,t[i+o]=n[4],t[i+o+1]=n[5];const l=i/e;s[r++]=l,s[r++]=l+1,s[r++]=l+2}},KC=new Vt,ZC=new Ve;function QC(n,t,e,i){const s=t.matrix?n.copyFrom(t.matrix).invert():n.identity();if(t.textureSpace==="local"){const r=e.getBounds(ZC);s.translate(-r.x,-r.y),s.scale(1/r.width,1/r.height)}else{s.translate(t.texture.frame.x,t.texture.frame.y),s.scale(1/t.texture.source.width,1/t.texture.source.height);const r=t.texture.source.style;r.addressMode==="clamp-to-edge"&&(r.addressMode="repeat",r.update())}return i&&s.append(KC.copyFrom(i).invert()),s}const _o={};Fe.handleByMap(_t.ShapeBuilder,_o);Fe.add(qC,HC,jC,kr,UC,WC);const JC=new Ve,tT=new Vt;function eT(n,t){const{geometryData:e,batches:i}=t;i.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let s=0;s<n.instructions.length;s++){const r=n.instructions[s];if(r.action==="texture")iT(r.data,i,e);else if(r.action==="fill"||r.action==="stroke"){const o=r.action==="stroke",l=r.data.path.shapePath,u=r.data.style,c=r.data.hole;o&&c&&wp(c.shapePath,u,!0,i,e),c&&(l.shapePrimitives[l.shapePrimitives.length-1].holes=c.shapePath.shapePrimitives),wp(l,u,o,i,e)}}}function iT(n,t,e){const{vertices:i,uvs:s,indices:r}=e,o=r.length,l=i.length/2,u=[],c=_o.rectangle,f=JC,d=n.image;f.x=n.dx,f.y=n.dy,f.width=n.dw,f.height=n.dh;const g=n.transform;c.build(f,u),g&&pg(u,g),c.triangulate(u,i,2,l,r,o);const p=d.uvs;s.push(p.x0,p.y0,p.x1,p.y1,p.x3,p.y3,p.x2,p.y2);const x=_s.get(mg);x.indexOffset=o,x.indexSize=r.length-o,x.attributeOffset=l,x.attributeSize=i.length/2-l,x.baseColor=n.style,x.alpha=n.alpha,x.texture=d,x.geometryData=e,t.push(x)}function wp(n,t,e,i,s){const{vertices:r,uvs:o,indices:l}=s;n.shapePrimitives.forEach(({shape:u,transform:c,holes:f})=>{const d=l.length,g=r.length/2,p=[],x=_o[u.type];let y="triangle-list";if(x.build(u,p),c&&pg(p,c),e){const _=u.closePath??!0,v=t;v.pixelLine?(VC(p,_,r,l),y="line-list"):GC(p,v,!1,_,r,l)}else if(f){const _=[],v=p.slice();sT(f).forEach(T=>{_.push(v.length/2),v.push(...T)}),xg(v,_,r,2,g,l,d)}else x.triangulate(p,r,2,g,l,d);const b=o.length/2,A=t.texture;if(A!==Ot.WHITE){const _=QC(tT,t,u,c);YC(r,2,g,o,b,2,r.length/2-g,_)}else NC(o,b,2,r.length/2-g);const C=_s.get(mg);C.indexOffset=d,C.indexSize=l.length-d,C.attributeOffset=g,C.attributeSize=r.length/2-g,C.baseColor=t.color,C.alpha=t.alpha,C.texture=A,C.geometryData=s,C.topology=y,i.push(C)})}function sT(n){const t=[];for(let e=0;e<n.length;e++){const i=n[e].shape,s=[];_o[i.type].build(i,s),t.push(s)}return t}class nT{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class rT{constructor(){this.batcher=new DC,this.instructions=new Cm}init(){this.instructions.reset()}get geometry(){return jt(OA,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const hc=class Nh{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){Nh.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??Nh.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),eT(t,e);const i=t.batchMode;t.customShader||i==="no-batch"?e.isBatchable=!1:i==="auto"&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=_s.get(rT),{batches:i,geometryData:s}=this._gpuContextHash[t.uid],r=s.vertices.length,o=s.indices.length;for(let f=0;f<i.length;f++)i[f].applyTransform=!1;const l=e.batcher;l.ensureAttributeBuffer(r),l.ensureIndexBuffer(o),l.begin();for(let f=0;f<i.length;f++){const d=i[f];l.add(d)}l.finish(e.instructions);const u=l.geometry;u.indexBuffer.setDataWithSize(l.indexBuffer,l.indexSize,!0),u.buffers[0].setDataWithSize(l.attributeBuffer.float32View,l.attributeSize,!0);const c=l.batches;for(let f=0;f<c.length;f++){const d=c[f];d.bindGroup=lC(d.textures.textures,d.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new nT;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(_s.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(i=>{_s.return(i)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};hc.extension={type:[_t.WebGLSystem,_t.WebGPUSystem,_t.CanvasSystem],name:"graphicsContext"};hc.defaultOptions={bezierSmoothness:.5};let yg=hc;const aT=8,Ua=11920929e-14,oT=1;function bg(n,t,e,i,s,r,o,l,u,c){const d=Math.min(.99,Math.max(0,c??yg.defaultOptions.bezierSmoothness));let g=(oT-d)/1;return g*=g,lT(t,e,i,s,r,o,l,u,n,g),n}function lT(n,t,e,i,s,r,o,l,u,c){Xh(n,t,e,i,s,r,o,l,u,c,0),u.push(o,l)}function Xh(n,t,e,i,s,r,o,l,u,c,f){if(f>aT)return;const d=(n+e)/2,g=(t+i)/2,p=(e+s)/2,x=(i+r)/2,y=(s+o)/2,b=(r+l)/2,A=(d+p)/2,C=(g+x)/2,_=(p+y)/2,v=(x+b)/2,M=(A+_)/2,T=(C+v)/2;if(f>0){let P=o-n,B=l-t;const O=Math.abs((e-o)*B-(i-l)*P),X=Math.abs((s-o)*B-(r-l)*P);if(O>Ua&&X>Ua){if((O+X)*(O+X)<=c*(P*P+B*B)){u.push(M,T);return}}else if(O>Ua){if(O*O<=c*(P*P+B*B)){u.push(M,T);return}}else if(X>Ua){if(X*X<=c*(P*P+B*B)){u.push(M,T);return}}else if(P=M-(n+o)/2,B=T-(t+l)/2,P*P+B*B<=c){u.push(M,T);return}}Xh(n,t,d,g,A,C,M,T,u,c,f+1),Xh(M,T,_,v,y,b,o,l,u,c,f+1)}const hT=8,cT=11920929e-14,uT=1;function fT(n,t,e,i,s,r,o,l){const c=Math.min(.99,Math.max(0,l??yg.defaultOptions.bezierSmoothness));let f=(uT-c)/1;return f*=f,dT(t,e,i,s,r,o,n,f),n}function dT(n,t,e,i,s,r,o,l){Uh(o,n,t,e,i,s,r,l,0),o.push(s,r)}function Uh(n,t,e,i,s,r,o,l,u){if(u>hT)return;const c=(t+i)/2,f=(e+s)/2,d=(i+r)/2,g=(s+o)/2,p=(c+d)/2,x=(f+g)/2;let y=r-t,b=o-e;const A=Math.abs((i-r)*b-(s-o)*y);if(A>cT){if(A*A<=l*(y*y+b*b)){n.push(p,x);return}}else if(y=p-(t+r)/2,b=x-(e+o)/2,y*y+b*b<=l){n.push(p,x);return}Uh(n,t,e,c,f,p,x,l,u+1),Uh(n,p,x,d,g,r,o,l,u+1)}function _g(n,t,e,i,s,r,o,l){let u=Math.abs(s-r);(!o&&s>r||o&&r>s)&&(u=2*Math.PI-u),l||(l=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(u/Math.PI)))),l=Math.max(l,3);let c=u/l,f=s;c*=o?-1:1;for(let d=0;d<l+1;d++){const g=Math.cos(f),p=Math.sin(f),x=t+g*i,y=e+p*i;n.push(x,y),f+=c}}function pT(n,t,e,i,s,r){const o=n[n.length-2],u=n[n.length-1]-e,c=o-t,f=s-e,d=i-t,g=Math.abs(u*d-c*f);if(g<1e-8||r===0){(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e);return}const p=u*u+c*c,x=f*f+d*d,y=u*f+c*d,b=r*Math.sqrt(p)/g,A=r*Math.sqrt(x)/g,C=b*y/p,_=A*y/x,v=b*d+A*c,M=b*f+A*u,T=c*(A+C),P=u*(A+C),B=d*(b+_),O=f*(b+_),X=Math.atan2(P-M,T-v),N=Math.atan2(O-M,B-v);_g(n,v+t,M+e,r,X,N,c*f>d*u)}const Ir=Math.PI*2,hh={centerX:0,centerY:0,ang1:0,ang2:0},ch=({x:n,y:t},e,i,s,r,o,l,u)=>{n*=e,t*=i;const c=s*n-r*t,f=r*n+s*t;return u.x=c+o,u.y=f+l,u};function mT(n,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=t===1.5707963267948966?.551915024494:e,s=Math.cos(n),r=Math.sin(n),o=Math.cos(n+t),l=Math.sin(n+t);return[{x:s-r*i,y:r+s*i},{x:o+l*i,y:l-o*i},{x:o,y:l}]}const vp=(n,t,e,i)=>{const s=n*i-t*e<0?-1:1;let r=n*e+t*i;return r>1&&(r=1),r<-1&&(r=-1),s*Math.acos(r)},gT=(n,t,e,i,s,r,o,l,u,c,f,d,g)=>{const p=Math.pow(s,2),x=Math.pow(r,2),y=Math.pow(f,2),b=Math.pow(d,2);let A=p*x-p*b-x*y;A<0&&(A=0),A/=p*b+x*y,A=Math.sqrt(A)*(o===l?-1:1);const C=A*s/r*d,_=A*-r/s*f,v=c*C-u*_+(n+e)/2,M=u*C+c*_+(t+i)/2,T=(f-C)/s,P=(d-_)/r,B=(-f-C)/s,O=(-d-_)/r,X=vp(1,0,T,P);let N=vp(T,P,B,O);l===0&&N>0&&(N-=Ir),l===1&&N<0&&(N+=Ir),g.centerX=v,g.centerY=M,g.ang1=X,g.ang2=N};function xT(n,t,e,i,s,r,o,l=0,u=0,c=0){if(r===0||o===0)return;const f=Math.sin(l*Ir/360),d=Math.cos(l*Ir/360),g=d*(t-i)/2+f*(e-s)/2,p=-f*(t-i)/2+d*(e-s)/2;if(g===0&&p===0)return;r=Math.abs(r),o=Math.abs(o);const x=Math.pow(g,2)/Math.pow(r,2)+Math.pow(p,2)/Math.pow(o,2);x>1&&(r*=Math.sqrt(x),o*=Math.sqrt(x)),gT(t,e,i,s,r,o,u,c,f,d,g,p,hh);let{ang1:y,ang2:b}=hh;const{centerX:A,centerY:C}=hh;let _=Math.abs(b)/(Ir/4);Math.abs(1-_)<1e-7&&(_=1);const v=Math.max(Math.ceil(_),1);b/=v;let M=n[n.length-2],T=n[n.length-1];const P={x:0,y:0};for(let B=0;B<v;B++){const O=mT(y,b),{x:X,y:N}=ch(O[0],r,o,d,f,A,C,P),{x:et,y:K}=ch(O[1],r,o,d,f,A,C,P),{x:V,y:J}=ch(O[2],r,o,d,f,A,C,P);bg(n,M,T,X,N,et,K,V,J),M=V,T=J,y+=b}}function yT(n,t,e){const i=(o,l)=>{const u=l.x-o.x,c=l.y-o.y,f=Math.sqrt(u*u+c*c),d=u/f,g=c/f;return{len:f,nx:d,ny:g}},s=(o,l)=>{o===0?n.moveTo(l.x,l.y):n.lineTo(l.x,l.y)};let r=t[t.length-1];for(let o=0;o<t.length;o++){const l=t[o%t.length],u=l.radius??e;if(u<=0){s(o,l),r=l;continue}const c=t[(o+1)%t.length],f=i(l,r),d=i(l,c);if(f.len<1e-4||d.len<1e-4){s(o,l),r=l;continue}let g=Math.asin(f.nx*d.ny-f.ny*d.nx),p=1,x=!1;f.nx*d.nx-f.ny*-d.ny<0?g<0?g=Math.PI+g:(g=Math.PI-g,p=-1,x=!0):g>0&&(p=-1,x=!0);const y=g/2;let b,A=Math.abs(Math.cos(y)*u/Math.sin(y));A>Math.min(f.len/2,d.len/2)?(A=Math.min(f.len/2,d.len/2),b=Math.abs(A*Math.sin(y)/Math.cos(y))):b=u;const C=l.x+d.nx*A+-d.ny*b*p,_=l.y+d.ny*A+d.nx*b*p,v=Math.atan2(f.ny,f.nx)+Math.PI/2*p,M=Math.atan2(d.ny,d.nx)-Math.PI/2*p;o===0&&n.moveTo(C+Math.cos(v)*b,_+Math.sin(v)*b),n.arc(C,_,b,v,M,x),r=l}}function bT(n,t,e,i){const s=(l,u)=>Math.sqrt((l.x-u.x)**2+(l.y-u.y)**2),r=(l,u,c)=>({x:l.x+(u.x-l.x)*c,y:l.y+(u.y-l.y)*c}),o=t.length;for(let l=0;l<o;l++){const u=t[(l+1)%o],c=u.radius??e;if(c<=0){l===0?n.moveTo(u.x,u.y):n.lineTo(u.x,u.y);continue}const f=t[l],d=t[(l+2)%o],g=s(f,u);let p;if(g<1e-4)p=u;else{const b=Math.min(g/2,c);p=r(u,f,b/g)}const x=s(d,u);let y;if(x<1e-4)y=u;else{const b=Math.min(x/2,c);y=r(u,d,b/x)}l===0?n.moveTo(p.x,p.y):n.lineTo(p.x,p.y),n.quadraticCurveTo(u.x,u.y,y.x,y.y,i)}}const _T=new Ve;class wT{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Xi,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,s=i[i.length-2],r=i[i.length-1];return(s!==t||r!==e)&&i.push(t,e),this}arc(t,e,i,s,r,o){this._ensurePoly(!1);const l=this._currentPoly.points;return _g(l,t,e,i,s,r,o),this}arcTo(t,e,i,s,r){this._ensurePoly();const o=this._currentPoly.points;return pT(o,t,e,i,s,r),this}arcToSvg(t,e,i,s,r,o,l){const u=this._currentPoly.points;return xT(u,this._currentPoly.lastX,this._currentPoly.lastY,o,l,t,e,i,s,r),this}bezierCurveTo(t,e,i,s,r,o,l){this._ensurePoly();const u=this._currentPoly;return bg(this._currentPoly.points,u.lastX,u.lastY,t,e,i,s,r,o,l),this}quadraticCurveTo(t,e,i,s,r){this._ensurePoly();const o=this._currentPoly;return fT(this._currentPoly.points,o.lastX,o.lastY,t,e,i,s,r),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));const i=this.shapePrimitives,s=i.length;for(let r=0;r<t.instructions.length;r++){const o=t.instructions[r];this[o.action](...o.data)}if(t.checkForHoles&&i.length-s>1){let r=null;for(let o=s;o<i.length;o++){const l=i[o];if(l.shape.type==="polygon"){const u=l.shape,c=r==null?void 0:r.shape;c&&c.containsPolygon(u)?(r.holes||(r.holes=[]),r.holes.push(l),i.copyWithin(o,o+1),i.length--,o--):r=l}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,s,r){return this.drawShape(new Ve(t,e,i,s),r),this}circle(t,e,i,s){return this.drawShape(new ac(t,e,i),s),this}poly(t,e,i){const s=new Pr(t);return s.closePath=e,this.drawShape(s,i),this}regularPoly(t,e,i,s,r=0,o){s=Math.max(s|0,3);const l=-1*Math.PI/2+r,u=Math.PI*2/s,c=[];for(let f=0;f<s;f++){const d=l-f*u;c.push(t+i*Math.cos(d),e+i*Math.sin(d))}return this.poly(c,!0,o),this}roundPoly(t,e,i,s,r,o=0,l){if(s=Math.max(s|0,3),r<=0)return this.regularPoly(t,e,i,s,o);const u=i*Math.sin(Math.PI/s)-.001;r=Math.min(r,u);const c=-1*Math.PI/2+o,f=Math.PI*2/s,d=(s-2)*Math.PI/s/2;for(let g=0;g<s;g++){const p=g*f+c,x=t+i*Math.cos(p),y=e+i*Math.sin(p),b=p+Math.PI+d,A=p-Math.PI-d,C=x+r*Math.cos(b),_=y+r*Math.sin(b),v=x+r*Math.cos(A),M=y+r*Math.sin(A);g===0?this.moveTo(C,_):this.lineTo(C,_),this.quadraticCurveTo(x,y,v,M,l)}return this.closePath()}roundShape(t,e,i=!1,s){return t.length<3?this:(i?bT(this,t,e,s):yT(this,t,e),this.closePath())}filletRect(t,e,i,s,r){if(r===0)return this.rect(t,e,i,s);const o=Math.min(i,s)/2,l=Math.min(o,Math.max(-o,r)),u=t+i,c=e+s,f=l<0?-l:0,d=Math.abs(l);return this.moveTo(t,e+d).arcTo(t+f,e+f,t+d,e,d).lineTo(u-d,e).arcTo(u-f,e+f,u,e+d,d).lineTo(u,c-d).arcTo(u-f,c-f,t+i-d,c,d).lineTo(t+d,c).arcTo(t+f,c-f,t,c-d,d).closePath()}chamferRect(t,e,i,s,r,o){if(r<=0)return this.rect(t,e,i,s);const l=Math.min(r,Math.min(i,s)/2),u=t+i,c=e+s,f=[t+l,e,u-l,e,u,e+l,u,c-l,u-l,c,t+l,c,t,c-l,t,e+l];for(let d=f.length-1;d>=2;d-=2)f[d]===f[d-2]&&f[d-1]===f[d-3]&&f.splice(d-1,2);return this.poly(f,!0,o)}ellipse(t,e,i,s,r){return this.drawShape(new oc(t,e,i,s),r),this}roundRect(t,e,i,s,r,o){return this.drawShape(new lc(t,e,i,s,r),o),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new Pr,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new Pr,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,s=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const r=e.transform,o=i;i=r.a*i+r.c*s+r.tx,s=r.b*o+r.d*s+r.ty}this._currentPoly.points.push(i,s)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const s=e[i],r=s.shape.getBounds(_T);s.transform?t.addRect(r,s.transform):t.addRect(r)}return t}}class Jn{constructor(t,e=!1){this.instructions=[],this.uid=Se("graphicsPath"),this._dirty=!0,this.checkForHoles=e,typeof t=="string"?eC(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new wT(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,s,r){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(fe.shared);let u=0,c=0;if(!o||o.action!=="bezierCurveTo")u=l.x,c=l.y;else{u=o.data[2],c=o.data[3];const f=l.x,d=l.y;u=f+(f-u),c=d+(d-c)}return this.instructions.push({action:"bezierCurveTo",data:[u,c,t,e,i,s,r]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const s=this.instructions[this.instructions.length-1],r=this.getLastPoint(fe.shared);let o=0,l=0;if(!s||s.action!=="quadraticCurveTo")o=r.x,l=r.y;else{o=s.data[0],l=s.data[1];const u=r.x,c=r.y;o=u+(u-o),l=c+(c-l)}return this.instructions.push({action:"quadraticCurveTo",data:[o,l,t,e,i]}),this._dirty=!0,this}rect(t,e,i,s,r){return this.instructions.push({action:"rect",data:[t,e,i,s,r]}),this._dirty=!0,this}circle(t,e,i,s){return this.instructions.push({action:"circle",data:[t,e,i,s]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,s,r,o,l){r||(r=s/2);const u=-1*Math.PI/2+o,c=i*2,f=Math.PI*2/c,d=[];for(let g=0;g<c;g++){const p=g%2?r:s,x=g*f+u;d.push(t+p*Math.cos(x),e+p*Math.sin(x))}return this.poly(d,!0,l),this}clone(t=!1){const e=new Jn;if(e.checkForHoles=this.checkForHoles,!t)e.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const s=this.instructions[i];e.instructions.push({action:s.action,data:s.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,s=t.c,r=t.d,o=t.tx,l=t.ty;let u=0,c=0,f=0,d=0,g=0,p=0,x=0,y=0;for(let b=0;b<this.instructions.length;b++){const A=this.instructions[b],C=A.data;switch(A.action){case"moveTo":case"lineTo":u=C[0],c=C[1],C[0]=e*u+s*c+o,C[1]=i*u+r*c+l;break;case"bezierCurveTo":f=C[0],d=C[1],g=C[2],p=C[3],u=C[4],c=C[5],C[0]=e*f+s*d+o,C[1]=i*f+r*d+l,C[2]=e*g+s*p+o,C[3]=i*g+r*p+l,C[4]=e*u+s*c+o,C[5]=i*u+r*c+l;break;case"quadraticCurveTo":f=C[0],d=C[1],u=C[2],c=C[3],C[0]=e*f+s*d+o,C[1]=i*f+r*d+l,C[2]=e*u+s*c+o,C[3]=i*u+r*c+l;break;case"arcToSvg":u=C[5],c=C[6],x=C[0],y=C[1],C[0]=e*x+s*y,C[1]=i*x+r*y,C[5]=e*u+s*c+o,C[6]=i*u+r*c+l;break;case"circle":C[4]=wr(C[3],t);break;case"rect":C[4]=wr(C[4],t);break;case"ellipse":C[8]=wr(C[8],t);break;case"roundRect":C[5]=wr(C[5],t);break;case"addPath":C[0].transform(t);break;case"poly":C[2]=wr(C[2],t);break;default:ge("unknown transform action",A.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;i.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t);break}return t}}function wr(n,t){return n?n.prepend(t):t.clone()}function ye(n,t,e){const i=n.getAttribute(t);return i?Number(i):e}function vT(n,t){const e=n.querySelectorAll("defs");for(let i=0;i<e.length;i++){const s=e[i];for(let r=0;r<s.children.length;r++){const o=s.children[r];switch(o.nodeName.toLowerCase()){case"lineargradient":t.defs[o.id]=ST(o);break;case"radialgradient":t.defs[o.id]=AT();break}}}}function ST(n){const t=ye(n,"x1",0),e=ye(n,"y1",0),i=ye(n,"x2",1),s=ye(n,"y2",0),r=n.getAttribute("gradientUnits")||"objectBoundingBox",o=new Ws(t,e,i,s,r==="objectBoundingBox"?"local":"global");for(let l=0;l<n.children.length;l++){const u=n.children[l],c=ye(u,"offset",0),f=Be.shared.setValue(u.getAttribute("stop-color")).toNumber();o.addColorStop(c,f)}return o}function AT(n){return ge("[SVG Parser] Radial gradients are not yet supported"),new Ws(0,0,1,0)}function Sp(n){const t=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const Ap={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function wg(n,t){const e=n.getAttribute("style"),i={},s={},r={strokeStyle:i,fillStyle:s,useFill:!1,useStroke:!1};for(const o in Ap){const l=n.getAttribute(o);l&&Cp(t,r,o,l.trim())}if(e){const o=e.split(";");for(let l=0;l<o.length;l++){const u=o[l].trim(),[c,f]=u.split(":");Ap[c]&&Cp(t,r,c,f.trim())}}return{strokeStyle:r.useStroke?i:null,fillStyle:r.useFill?s:null,useFill:r.useFill,useStroke:r.useStroke}}function Cp(n,t,e,i){switch(e){case"stroke":if(i!=="none"){if(i.startsWith("url(")){const s=Sp(i);t.strokeStyle.fill=n.defs[s]}else t.strokeStyle.color=Be.shared.setValue(i).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(i);break;case"fill":if(i!=="none"){if(i.startsWith("url(")){const s=Sp(i);t.fillStyle.fill=n.defs[s]}else t.fillStyle.color=Be.shared.setValue(i).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(i);break;case"stroke-opacity":t.strokeStyle.alpha=Number(i);break;case"opacity":t.fillStyle.alpha=Number(i),t.strokeStyle.alpha=Number(i);break}}function CT(n,t){if(typeof n=="string"){const o=document.createElement("div");o.innerHTML=n.trim(),n=o.querySelector("svg")}const e={context:t,defs:{},path:new Jn};vT(n,e);const i=n.children,{fillStyle:s,strokeStyle:r}=wg(n,e);for(let o=0;o<i.length;o++){const l=i[o];l.nodeName.toLowerCase()!=="defs"&&vg(l,e,s,r)}return t}function vg(n,t,e,i){const s=n.children,{fillStyle:r,strokeStyle:o}=wg(n,t);r&&e?e={...e,...r}:r&&(e=r),o&&i?i={...i,...o}:o&&(i=o);const l=!e&&!i;l&&(e={color:0});let u,c,f,d,g,p,x,y,b,A,C,_,v,M,T,P,B;switch(n.nodeName.toLowerCase()){case"path":M=n.getAttribute("d"),n.getAttribute("fill-rule")==="evenodd"&&ge("SVG Evenodd fill rule not supported, your svg may render incorrectly"),T=new Jn(M,!0),t.context.path(T),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"circle":x=ye(n,"cx",0),y=ye(n,"cy",0),b=ye(n,"r",0),t.context.ellipse(x,y,b,b),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"rect":u=ye(n,"x",0),c=ye(n,"y",0),P=ye(n,"width",0),B=ye(n,"height",0),A=ye(n,"rx",0),C=ye(n,"ry",0),A||C?t.context.roundRect(u,c,P,B,A||C):t.context.rect(u,c,P,B),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"ellipse":x=ye(n,"cx",0),y=ye(n,"cy",0),A=ye(n,"rx",0),C=ye(n,"ry",0),t.context.beginPath(),t.context.ellipse(x,y,A,C),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"line":f=ye(n,"x1",0),d=ye(n,"y1",0),g=ye(n,"x2",0),p=ye(n,"y2",0),t.context.beginPath(),t.context.moveTo(f,d),t.context.lineTo(g,p),i&&t.context.stroke(i);break;case"polygon":v=n.getAttribute("points"),_=v.match(/\d+/g).map(O=>parseInt(O,10)),t.context.poly(_,!0),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"polyline":v=n.getAttribute("points"),_=v.match(/\d+/g).map(O=>parseInt(O,10)),t.context.poly(_,!1),i&&t.context.stroke(i);break;case"g":case"svg":break;default:{ge(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}l&&(e=null);for(let O=0;O<s.length;O++)vg(s[O],t,e,i)}function TT(n){return Be.isColorLike(n)}function Tp(n){return n instanceof bo}function Mp(n){return n instanceof Ws}function MT(n){return n instanceof Ot}function PT(n,t,e){const i=Be.shared.setValue(t??0);return n.color=i.toNumber(),n.alpha=i.alpha===1?e.alpha:i.alpha,n.texture=Ot.WHITE,{...e,...n}}function IT(n,t,e){return n.texture=t,{...e,...n}}function Pp(n,t,e){return n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...e,...n}}function Ip(n,t,e){return t.buildGradient(),n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,n.textureSpace=t.textureSpace,{...e,...n}}function kT(n,t){const e={...t,...n},i=Be.shared.setValue(e.color);return e.alpha*=i.alpha,e.color=i.toNumber(),e}function ln(n,t){if(n==null)return null;const e={},i=n;return TT(n)?PT(e,n,t):MT(n)?IT(e,n,t):Tp(n)?Pp(e,n,t):Mp(n)?Ip(e,n,t):i.fill&&Tp(i.fill)?Pp(i,i.fill,t):i.fill&&Mp(i.fill)?Ip(i,i.fill,t):kT(i,t)}function to(n,t){const{width:e,alignment:i,miterLimit:s,cap:r,join:o,pixelLine:l,...u}=t,c=ln(n,u);return c?{width:e,alignment:i,miterLimit:s,cap:r,join:o,pixelLine:l,...c}:null}const ET=new fe,kp=new Vt,cc=class Ki extends is{constructor(){super(...arguments),this.uid=Se("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Jn,this._transform=new Vt,this._fillStyle={...Ki.defaultFillStyle},this._strokeStyle={...Ki.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Xi,this._boundsDirty=!0}clone(){const t=new Ki;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=ln(t,Ki.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=to(t,Ki.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=ln(t,Ki.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=ln(t,Ki.defaultStrokeStyle),this}texture(t,e,i,s,r,o){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:s||0,dw:r||t.frame.width,dh:o||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?Be.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Jn,this}fill(t,e){let i;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="stroke"?i=s.data.path:i=this._activePath.clone(),i?(t!=null&&(e!==void 0&&typeof t=="number"&&(jt(le,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=ln(t,Ki.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(fe.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?e=i.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=to(t,Ki.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,e,i,s,r,o){this._tick++;const l=this._transform;return this._activePath.arc(l.a*t+l.c*e+l.tx,l.b*t+l.d*e+l.ty,i,s,r,o),this}arcTo(t,e,i,s,r){this._tick++;const o=this._transform;return this._activePath.arcTo(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,o.a*i+o.c*s+o.tx,o.b*i+o.d*s+o.ty,r),this}arcToSvg(t,e,i,s,r,o,l){this._tick++;const u=this._transform;return this._activePath.arcToSvg(t,e,i,s,r,u.a*o+u.c*l+u.tx,u.b*o+u.d*l+u.ty),this}bezierCurveTo(t,e,i,s,r,o,l){this._tick++;const u=this._transform;return this._activePath.bezierCurveTo(u.a*t+u.c*e+u.tx,u.b*t+u.d*e+u.ty,u.a*i+u.c*s+u.tx,u.b*i+u.d*s+u.ty,u.a*r+u.c*o+u.tx,u.b*r+u.d*o+u.ty,l),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,i,s){return this._tick++,this._activePath.ellipse(t,e,i,s,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,s=this._activePath.instructions,r=i.a*t+i.c*e+i.tx,o=i.b*t+i.d*e+i.ty;return s.length===1&&s[0].action==="moveTo"?(s[0].data[0]=r,s[0].data[1]=o,this):(this._activePath.moveTo(r,o),this)}quadraticCurveTo(t,e,i,s,r){this._tick++;const o=this._transform;return this._activePath.quadraticCurveTo(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,o.a*i+o.c*s+o.tx,o.b*i+o.d*s+o.ty,r),this}rect(t,e,i,s){return this._tick++,this._activePath.rect(t,e,i,s,this._transform.clone()),this}roundRect(t,e,i,s,r){return this._tick++,this._activePath.roundRect(t,e,i,s,r,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,s,r=0,o){return this._tick++,this._activePath.regularPoly(t,e,i,s,r,o),this}roundPoly(t,e,i,s,r,o){return this._tick++,this._activePath.roundPoly(t,e,i,s,r,o),this}roundShape(t,e,i,s){return this._tick++,this._activePath.roundShape(t,e,i,s),this}filletRect(t,e,i,s,r){return this._tick++,this._activePath.filletRect(t,e,i,s,r),this}chamferRect(t,e,i,s,r,o){return this._tick++,this._activePath.chamferRect(t,e,i,s,r,o),this}star(t,e,i,s,r=0,o=0){return this._tick++,this._activePath.star(t,e,i,s,r,o,this._transform.clone()),this}svg(t){return this._tick++,CT(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,s,r,o){return t instanceof Vt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,s,r,o),this)}transform(t,e,i,s,r,o){return t instanceof Vt?(this._transform.append(t),this):(kp.set(t,e,i,s,r,o),this._transform.append(kp),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],s=i.action;if(s==="fill"){const r=i.data;t.addBounds(r.path.bounds)}else if(s==="texture"){const r=i.data;t.addFrame(r.dx,r.dy,r.dx+r.dw,r.dy+r.dh,r.transform)}if(s==="stroke"){const r=i.data,o=r.style.alignment,l=r.style.width*(1-o),u=r.path.bounds;t.addFrame(u.minX-l,u.minY-l,u.maxX+l,u.maxY+l)}}return t}containsPoint(t){var s;if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let r=0;r<e.length;r++){const o=e[r],l=o.data,u=l.path;if(!o.action||!u)continue;const c=l.style,f=u.shapePath.shapePrimitives;for(let d=0;d<f.length;d++){const g=f[d].shape;if(!c||!g)continue;const p=f[d].transform,x=p?p.applyInverse(t,ET):t;if(o.action==="fill")i=g.contains(x.x,x.y);else{const b=c;i=g.strokeContains(x.x,x.y,b.width,b.alignment)}const y=l.hole;if(y){const b=(s=y.shapePath)==null?void 0:s.shapePrimitives;if(b)for(let A=0;A<b.length;A++)b[A].shape.contains(x.x,x.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};cc.defaultFillStyle={color:16777215,alpha:1,texture:Ot.WHITE,matrix:null,fill:null,textureSpace:"local"};cc.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Ot.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Ai=cc;const Ep=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function RT(n){const t=[];let e=0;for(let i=0;i<Ep.length;i++){const s=`_${Ep[i]}`;t[e++]=n[s]}return e=Sg(n._fill,t,e),e=FT(n._stroke,t,e),e=BT(n.dropShadow,t,e),t.join("-")}function Sg(n,t,e){var i;return n&&(t[e++]=n.color,t[e++]=n.alpha,t[e++]=(i=n.fill)==null?void 0:i.styleKey),e}function FT(n,t,e){return n&&(e=Sg(n,t,e),t[e++]=n.width,t[e++]=n.alignment,t[e++]=n.cap,t[e++]=n.join,t[e++]=n.miterLimit),e}function BT(n,t,e){return n&&(t[e++]=n.alpha,t[e++]=n.angle,t[e++]=n.blur,t[e++]=n.distance,t[e++]=Be.shared.setValue(n.color).toNumber()),e}const uc=class Xn extends is{constructor(t={}){super(),LT(t);const e={...Xn.defaultTextStyle,...t};for(const i in e){const s=i;this[s]=e[i]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...Xn.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...Xn.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...Ai.defaultFillStyle,...t},()=>{this._fill=ln({...this._originalFill},Ai.defaultFillStyle)})),this._fill=ln(t===0?"black":t,Ai.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...Ai.defaultStrokeStyle,...t},()=>{this._stroke=to({...this._originalStroke},Ai.defaultStrokeStyle)})),this._stroke=to(t,Ai.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=RT(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=Xn.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new Xn({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){var i,s,r,o;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const l=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(l),(s=this._originalFill)!=null&&s.texture&&this._originalFill.texture.destroy(l),(r=this._stroke)!=null&&r.texture&&this._stroke.texture.destroy(l),(o=this._originalStroke)!=null&&o.texture&&this._originalStroke.texture.destroy(l)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(i,s,r)=>(i[s]=r,e==null||e(s,r),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Be.isColorLike(t)||t instanceof Ws||t instanceof bo)}};uc.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};uc.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Er=uc;function LT(n){const t=n;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=Er.defaultDropShadow;n.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){jt(le,"strokeThickness is now a part of stroke");const e=t.stroke;let i={};if(Be.isColorLike(e))i.color=e;else if(e instanceof Ws||e instanceof bo)i.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))i=e;else throw new Error("Invalid stroke value.");n.stroke={...i,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){jt(le,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;n.fontSize==null?n.fontSize=Er.defaultTextStyle.fontSize:typeof n.fontSize=="string"?e=parseInt(n.fontSize,10):e=n.fontSize;const i=new Ws({start:{x:0,y:0},end:{x:0,y:(e||0)*1.7}}),s=t.fillGradientStops.map(r=>Be.shared.setValue(r).toNumber());s.forEach((r,o)=>{const l=o/(s.length-1);i.addColorStop(l,r)}),n.fill={fill:i}}}class OT{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const i=ve.get().createCanvas();i.width=t,i.height=e;const s=i.getContext("2d");return{canvas:i,context:s}}getOptimalCanvasAndContext(t,e,i=1){t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),t=Za(t),e=Za(e);const s=(t<<17)+(e<<1);this._canvasPool[s]||(this._canvasPool[s]=[]);let r=this._canvasPool[s].pop();return r||(r=this._createCanvasAndContext(t,e)),r}returnCanvasAndContext(t){const e=t.canvas,{width:i,height:s}=e,r=(i<<17)+(s<<1);t.context.clearRect(0,0,i,s),this._canvasPool[r].push(t)}clear(){this._canvasPool={}}}const Rp=new OT,DT=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Wh(n){const t=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let e=n.fontFamily;Array.isArray(n.fontFamily)||(e=n.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let s=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!DT.includes(s)&&(s=`"${s}"`),e[i]=s}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${t} ${e.join(",")}`}const uh={willReadFrequently:!0},zi=class bt{static get experimentalLetterSpacingSupported(){let t=bt._experimentalLetterSpacingSupported;if(t!==void 0){const e=ve.get().getCanvasRenderingContext2D().prototype;t=bt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,s,r,o,l,u,c){this.text=t,this.style=e,this.width=i,this.height=s,this.lines=r,this.lineWidths=o,this.lineHeight=l,this.maxLineWidth=u,this.fontProperties=c}static measureText(t=" ",e,i=bt._canvas,s=e.wordWrap){var C;const r=`${t}:${e.styleKey}`;if(bt._measurementCache[r])return bt._measurementCache[r];const o=Wh(e),l=bt.measureFont(o);l.fontSize===0&&(l.fontSize=e.fontSize,l.ascent=e.fontSize);const u=bt.__context;u.font=o;const f=(s?bt._wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),d=new Array(f.length);let g=0;for(let _=0;_<f.length;_++){const v=bt._measureText(f[_],e.letterSpacing,u);d[_]=v,g=Math.max(g,v)}const p=((C=e._stroke)==null?void 0:C.width)||0;let x=g+p;e.dropShadow&&(x+=e.dropShadow.distance);const y=e.lineHeight||l.fontSize;let b=Math.max(y,l.fontSize+p)+(f.length-1)*(y+e.leading);return e.dropShadow&&(b+=e.dropShadow.distance),new bt(t,e,x,b,f,d,y+e.leading,g,l)}static _measureText(t,e,i){let s=!1;bt.experimentalLetterSpacingSupported&&(bt.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const r=i.measureText(t);let o=r.width;const l=-r.actualBoundingBoxLeft;let c=r.actualBoundingBoxRight-l;if(o>0)if(s)o-=e,c-=e;else{const f=(bt.graphemeSegmenter(t).length-1)*e;o+=f,c+=f}return Math.max(o,c)}static _wordWrap(t,e,i=bt._canvas){const s=i.getContext("2d",uh);let r=0,o="",l="";const u=Object.create(null),{letterSpacing:c,whiteSpace:f}=e,d=bt._collapseSpaces(f),g=bt._collapseNewlines(f);let p=!d;const x=e.wordWrapWidth+c,y=bt._tokenize(t);for(let b=0;b<y.length;b++){let A=y[b];if(bt._isNewline(A)){if(!g){l+=bt._addLine(o),p=!d,o="",r=0;continue}A=" "}if(d){const _=bt.isBreakingSpace(A),v=bt.isBreakingSpace(o[o.length-1]);if(_&&v)continue}const C=bt._getFromCache(A,c,u,s);if(C>x)if(o!==""&&(l+=bt._addLine(o),o="",r=0),bt.canBreakWords(A,e.breakWords)){const _=bt.wordWrapSplit(A);for(let v=0;v<_.length;v++){let M=_[v],T=M,P=1;for(;_[v+P];){const O=_[v+P];if(!bt.canBreakChars(T,O,A,v,e.breakWords))M+=O;else break;T=O,P++}v+=P-1;const B=bt._getFromCache(M,c,u,s);B+r>x&&(l+=bt._addLine(o),p=!1,o="",r=0),o+=M,r+=B}}else{o.length>0&&(l+=bt._addLine(o),o="",r=0);const _=b===y.length-1;l+=bt._addLine(A,!_),p=!1,o="",r=0}else C+r>x&&(p=!1,l+=bt._addLine(o),o="",r=0),(o.length>0||!bt.isBreakingSpace(A)||p)&&(o+=A,r+=C)}return l+=bt._addLine(o,!1),l}static _addLine(t,e=!0){return t=bt._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,i,s){let r=i[t];return typeof r!="number"&&(r=bt._measureText(t,e,s)+e,i[t]=r),r}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!bt.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:bt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:bt._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let s=0;s<t.length;s++){const r=t[s],o=t[s+1];if(bt.isBreakingSpace(r,o)||bt._isNewline(r)){i!==""&&(e.push(i),i=""),e.push(r);continue}i+=r}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,s,r){return!0}static wordWrapSplit(t){return bt.graphemeSegmenter(t)}static measureFont(t){if(bt._fonts[t])return bt._fonts[t];const e=bt._context;e.font=t;const i=e.measureText(bt.METRICS_STRING+bt.BASELINE_SYMBOL),s={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return bt._fonts[t]=s,s}static clearMetrics(t=""){t?delete bt._fonts[t]:bt._fonts={}}static get _canvas(){if(!bt.__canvas){let t;try{const e=new OffscreenCanvas(0,0),i=e.getContext("2d",uh);if(i!=null&&i.measureText)return bt.__canvas=e,e;t=ve.get().createCanvas()}catch{t=ve.get().createCanvas()}t.width=t.height=10,bt.__canvas=t}return bt.__canvas}static get _context(){return bt.__context||(bt.__context=bt._canvas.getContext("2d",uh)),bt.__context}};zi.METRICS_STRING="|ÃqÃ";zi.BASELINE_SYMBOL="M";zi.BASELINE_MULTIPLIER=1.4;zi.HEIGHT_MULTIPLIER=2;zi.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return t=>[...n.segment(t)].map(e=>e.segment)}return n=>[...n]})();zi.experimentalLetterSpacing=!1;zi._fonts={};zi._newlines=[10,13];zi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];zi._measurementCache={};let Fp=zi;const Bp=1e5;function Lp(n,t,e,i=0){if(n.texture===Ot.WHITE&&!n.fill)return Be.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof bo){const s=n.fill,r=t.createPattern(s.texture.source.resource,"repeat"),o=s.transform.copyTo(Vt.shared);return o.scale(s.texture.frame.width,s.texture.frame.height),r.setTransform(o),r}else if(n.fill instanceof Ws){const s=n.fill,r=s.type==="linear",o=s.textureSpace==="local";let l=1,u=1;o&&e&&(l=e.width+i,u=e.height+i);let c,f=!1;if(r){const{start:d,end:g}=s;c=t.createLinearGradient(d.x*l,d.y*u,g.x*l,g.y*u),f=Math.abs(g.x-d.x)<Math.abs((g.y-d.y)*.1)}else{const{center:d,innerRadius:g,outerCenter:p,outerRadius:x}=s;c=t.createRadialGradient(d.x*l,d.y*u,g*l,p.x*l,p.y*u,x*l)}if(f&&o&&e){const d=e.lineHeight/u;for(let g=0;g<e.lines.length;g++){const p=(g*e.lineHeight+i/2)/u;s.colorStops.forEach(x=>{const y=p+x.offset*d;c.addColorStop(Math.floor(y*Bp)/Bp,Be.shared.setValue(x.color).toHex())})}}else s.colorStops.forEach(d=>{c.addColorStop(d.offset,Be.shared.setValue(d.color).toHex())});return c}}else{const s=t.createPattern(n.texture.source.resource,"repeat"),r=n.matrix.copyTo(Vt.shared);return r.scale(n.texture.frame.width,n.texture.frame.height),s.setTransform(r),s}return ge("FillStyle not recognised",n),"red"}function Ag(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const t=[];for(let e=0,i=n.length;e<i;e++){const s=n[e];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);if(s[0].length===0||s[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const r=s[0].charCodeAt(0),o=s[1].charCodeAt(0);if(o<r)throw new Error("[BitmapFont]: Invalid character range.");for(let l=r,u=o;l<=u;l++)t.push(String.fromCharCode(l))}else t.push(...Array.from(s))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Cg=class Tg extends Hm{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const e={...Tg.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;const i=e.style.clone();e.overrideFill&&(i._fill.color=16777215,i._fill.alpha=1,i._fill.texture=Ot.WHITE,i._fill.fill=null),this.applyFillAsTint=e.overrideFill;const s=i.fontSize;i.fontSize=this.baseMeasurementFontSize;const r=Wh(i);e.overrideSize?i._stroke&&(i._stroke.width*=this.baseRenderedFontSize/s):i.fontSize=this.baseRenderedFontSize=s,this._style=i,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,this.fontMetrics=Fp.measureFont(r),this.lineHeight=i.lineHeight||this.fontMetrics.fontSize||i.fontSize}ensureCharacters(t){var b,A;const e=Ag(t).filter(C=>!this._currentChars.includes(C)).filter((C,_,v)=>v.indexOf(C)===_);if(!e.length)return;this._currentChars=[...this._currentChars,...e];let i;this._currentPageIndex===-1?i=this._nextPage():i=this.pages[this._currentPageIndex];let{canvas:s,context:r}=i.canvasAndContext,o=i.texture.source;const l=this._style;let u=this._currentX,c=this._currentY;const f=this.baseRenderedFontSize/this.baseMeasurementFontSize,d=this._padding*f;let g=0,p=!1;const x=s.width/this.resolution,y=s.height/this.resolution;for(let C=0;C<e.length;C++){const _=e[C],v=Fp.measureText(_,l,s,!1);v.lineHeight=v.height;const M=v.width*f,T=Math.ceil((l.fontStyle==="italic"?2:1)*M),P=v.height*f,B=T+d*2,O=P+d*2;if(p=!1,_!==`
`&&_!=="\r"&&_!=="	"&&_!==" "&&(p=!0,g=Math.ceil(Math.max(O,g))),u+B>x&&(c+=g,g=O,u=0,c+g>y)){o.update();const N=this._nextPage();s=N.canvasAndContext.canvas,r=N.canvasAndContext.context,o=N.texture.source,c=0}const X=M/f-(((b=l.dropShadow)==null?void 0:b.distance)??0)-(((A=l._stroke)==null?void 0:A.width)??0);if(this.chars[_]={id:_.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:X,kerning:{}},p){this._drawGlyph(r,v,u+d,c+d,f,l);const N=o.width*f,et=o.height*f,K=new Ve(u/N*o.width,c/et*o.height,B/N*o.width,O/et*o.height);this.chars[_].texture=new Ot({source:o,frame:K}),u+=Math.ceil(B)}}o.update(),this._currentX=u,this._currentY=c,this._skipKerning&&this._applyKerning(e,r)}get pageTextures(){return jt(le,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const i=this._measureCache;for(let s=0;s<t.length;s++){const r=t[s];for(let o=0;o<this._currentChars.length;o++){const l=this._currentChars[o];let u=i[r];u||(u=i[r]=e.measureText(r).width);let c=i[l];c||(c=i[l]=e.measureText(l).width);let f=e.measureText(r+l).width,d=f-(u+c);d&&(this.chars[r].kerning[l]=d),f=e.measureText(r+l).width,d=f-(u+c),d&&(this.chars[l].kerning[r]=d)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=Rp.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const i=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),s=new Ot({source:new dn({resource:e.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),r={canvasAndContext:e,texture:s};return this.pages[this._currentPageIndex]=r,r}_setupContext(t,e,i){e.fontSize=this.baseRenderedFontSize,t.scale(i,i),t.font=Wh(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const s=e._stroke,r=(s==null?void 0:s.width)??0;if(s&&(t.lineWidth=r,t.lineJoin=s.join,t.miterLimit=s.miterLimit,t.strokeStyle=Lp(s,t)),e._fill&&(t.fillStyle=Lp(e._fill,t)),e.dropShadow){const o=e.dropShadow,l=Be.shared.setValue(o.color).toArray(),u=o.blur*i,c=o.distance*i;t.shadowColor=`rgba(${l[0]*255},${l[1]*255},${l[2]*255},${o.alpha})`,t.shadowBlur=u,t.shadowOffsetX=Math.cos(o.angle)*c,t.shadowOffsetY=Math.sin(o.angle)*c}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,i,s,r,o){const l=e.text,u=e.fontProperties,c=o._stroke,f=((c==null?void 0:c.width)??0)*r,d=i+f/2,g=s-f/2,p=u.descent*r,x=e.lineHeight*r;o.stroke&&f&&t.strokeText(l,d,g+x-p),o._fill&&t.fillText(l,d,g+x-p)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:i}=this.pages[t];Rp.returnCanvasAndContext(e),i.destroy(!0)}this.pages=null}};Cg.defaultOptions={textureSize:512,style:new Er,mipmap:!0};let Op=Cg;function YT(n,t,e,i){const s={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};s.offsetY=e.baseLineOffset;let r=s.lines[0],o=null,l=!0;const u={width:0,start:0,index:0,positions:[],chars:[]},c=x=>{const y=r.width;for(let b=0;b<u.index;b++){const A=x.positions[b];r.chars.push(x.chars[b]),r.charPositions.push(A+y)}r.width+=x.width,l=!1,u.width=0,u.index=0,u.chars.length=0},f=()=>{let x=r.chars.length-1;if(i){let y=r.chars[x];for(;y===" ";)r.width-=e.chars[y].xAdvance,y=r.chars[--x]}s.width=Math.max(s.width,r.width),r={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},l=!0,s.lines.push(r),s.height+=e.lineHeight},d=e.baseMeasurementFontSize/t.fontSize,g=t.letterSpacing*d,p=t.wordWrapWidth*d;for(let x=0;x<n.length+1;x++){let y;const b=x===n.length;b||(y=n[x]);const A=e.chars[y]||e.chars[" "];if(/(?:\s)/.test(y)||y==="\r"||y===`
`||b){if(!l&&t.wordWrap&&r.width+u.width-g>p?(f(),c(u),b||r.charPositions.push(0)):(u.start=r.width,c(u),b||r.charPositions.push(0)),y==="\r"||y===`
`)r.width!==0&&f();else if(!b){const M=A.xAdvance+(A.kerning[o]||0)+g;r.width+=M,r.spaceWidth=M,r.spacesIndex.push(r.charPositions.length),r.chars.push(y)}}else{const v=A.kerning[o]||0,M=A.xAdvance+v+g;u.positions[u.index++]=u.width+v,u.chars.push(y),u.width+=M}o=y}return f(),t.align==="center"?NT(s):t.align==="right"?XT(s):t.align==="justify"&&UT(s),s}function NT(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],i=n.width/2-e.width/2;for(let s=0;s<e.charPositions.length;s++)e.charPositions[s]+=i}}function XT(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],i=n.width-e.width;for(let s=0;s<e.charPositions.length;s++)e.charPositions[s]+=i}}function UT(n){const t=n.width;for(let e=0;e<n.lines.length;e++){const i=n.lines[e];let s=0,r=i.spacesIndex[s++],o=0;const l=i.spacesIndex.length,c=(t-i.width)/l;for(let f=0;f<i.charPositions.length;f++)f===r&&(r=i.spacesIndex[s++],o+=c),i.charPositions[f]+=o}}let Wa=0;class WT{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){var o;let i=`${e.fontFamily}-bitmap`,s=!0;if(e._fill.fill&&!e._stroke)i+=e._fill.fill.styleKey,s=!1;else if(e._stroke||e.dropShadow){let l=e.styleKey;l=l.substring(0,l.lastIndexOf("-")),i=`${l}-bitmap`,s=!1}if(!he.has(i)){const l=new Op({style:e,overrideFill:s,overrideSize:!0,...this.defaultOptions});Wa++,Wa>50&&ge("BitmapText",`You have dynamically created ${Wa} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),l.once("destroy",()=>{Wa--,he.remove(i)}),he.set(i,l)}const r=he.get(i);return(o=r.ensureCharacters)==null||o.call(r,t),r}getLayout(t,e,i=!0){const s=this.getFont(t,e);return YT([...t],e,s,i)}measureText(t,e,i=!0){return this.getLayout(t,e,i)}install(...t){var c,f,d,g;let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:(c=t[2])==null?void 0:c.chars,resolution:(f=t[2])==null?void 0:f.resolution,padding:(d=t[2])==null?void 0:d.padding,skipKerning:(g=t[2])==null?void 0:g.skipKerning},jt(le,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const i=e==null?void 0:e.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const s=e.style,r=s instanceof Er?s:new Er(s),o=r._fill.fill!==null&&r._fill.fill!==void 0,l=new Op({style:r,overrideFill:o,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),u=Ag(e.chars);return l.ensureCharacters(u.join("")),he.set(`${i}-bitmap`,l),l.once("destroy",()=>he.remove(`${i}-bitmap`)),l}uninstall(t){const e=`${t}-bitmap`,i=he.get(e);i&&i.destroy()}}const Dp=new WT;class Mg extends Hm{constructor(t,e){super();const{textures:i,data:s}=t;Object.keys(s.pages).forEach(r=>{const o=s.pages[parseInt(r,10)],l=i[o.id];this.pages.push({texture:l})}),Object.keys(s.chars).forEach(r=>{const o=s.chars[r],{frame:l,source:u}=i[o.page],c=new Ve(o.x+l.x,o.y+l.y,o.width,o.height),f=new Ot({source:u,frame:c});this.chars[r]={id:r.codePointAt(0),xOffset:o.xOffset,yOffset:o.yOffset,xAdvance:o.xAdvance,kerning:o.kerning??{},texture:f}}),this.baseRenderedFontSize=s.fontSize,this.baseMeasurementFontSize=s.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:s.fontSize},this.baseLineOffset=s.baseLineOffset,this.lineHeight=s.lineHeight,this.fontFamily=s.fontFamily,this.distanceField=s.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){Dp.install(t)}static uninstall(t){Dp.uninstall(t)}}const fh={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const t=n.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const d in t){const g=t[d].match(/^[a-z]+/gm)[0],p=t[d].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),x={};for(const y in p){const b=p[y].split("="),A=b[0],C=b[1].replace(/"/gm,""),_=parseFloat(C),v=isNaN(_)?C:_;x[A]=v}e[g].push(x)}const i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[s]=e.info,[r]=e.common,[o]=e.distanceField??[];o&&(i.distanceField={range:parseInt(o.distanceRange,10),type:o.fieldType}),i.fontSize=parseInt(s.size,10),i.fontFamily=s.face,i.lineHeight=parseInt(r.lineHeight,10);const l=e.page;for(let d=0;d<l.length;d++)i.pages.push({id:parseInt(l[d].id,10)||0,file:l[d].file});const u={};i.baseLineOffset=i.lineHeight-parseInt(r.base,10);const c=e.char;for(let d=0;d<c.length;d++){const g=c[d],p=parseInt(g.id,10);let x=g.letter??g.char??String.fromCharCode(p);x==="space"&&(x=" "),u[p]=x,i.chars[x]={id:p,page:parseInt(g.page,10)||0,x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xOffset:parseInt(g.xoffset,10),yOffset:parseInt(g.yoffset,10),xAdvance:parseInt(g.xadvance,10),kerning:{}}}const f=e.kerning||[];for(let d=0;d<f.length;d++){const g=parseInt(f[d].first,10),p=parseInt(f[d].second,10),x=parseInt(f[d].amount,10);i.chars[u[p]].kerning[u[g]]=x}return i}},Yp={test(n){const t=n;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},e=n.getElementsByTagName("info")[0],i=n.getElementsByTagName("common")[0],s=n.getElementsByTagName("distanceField")[0];s&&(t.distanceField={type:s.getAttribute("fieldType"),range:parseInt(s.getAttribute("distanceRange"),10)});const r=n.getElementsByTagName("page"),o=n.getElementsByTagName("char"),l=n.getElementsByTagName("kerning");t.fontSize=parseInt(e.getAttribute("size"),10),t.fontFamily=e.getAttribute("face"),t.lineHeight=parseInt(i.getAttribute("lineHeight"),10);for(let c=0;c<r.length;c++)t.pages.push({id:parseInt(r[c].getAttribute("id"),10)||0,file:r[c].getAttribute("file")});const u={};t.baseLineOffset=t.lineHeight-parseInt(i.getAttribute("base"),10);for(let c=0;c<o.length;c++){const f=o[c],d=parseInt(f.getAttribute("id"),10);let g=f.getAttribute("letter")??f.getAttribute("char")??String.fromCharCode(d);g==="space"&&(g=" "),u[d]=g,t.chars[g]={id:d,page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xOffset:parseInt(f.getAttribute("xoffset"),10),yOffset:parseInt(f.getAttribute("yoffset"),10),xAdvance:parseInt(f.getAttribute("xadvance"),10),kerning:{}}}for(let c=0;c<l.length;c++){const f=parseInt(l[c].getAttribute("first"),10),d=parseInt(l[c].getAttribute("second"),10),g=parseInt(l[c].getAttribute("amount"),10);t.chars[u[d]].kerning[u[f]]=g}return t}},Np={test(n){return typeof n=="string"&&n.includes("<font>")?Yp.test(ve.get().parseXML(n)):!1},parse(n){return Yp.parse(ve.get().parseXML(n))}},zT=[".xml",".fnt"],GT={extension:{type:_t.CacheParser,name:"cacheBitmapFont"},test:n=>n instanceof Mg,getCacheableAssets(n,t){const e={};return n.forEach(i=>{e[i]=t,e[`${i}-bitmap`]=t}),e[`${t.fontFamily}-bitmap`]=t,e}},VT={extension:{type:_t.LoadParser,priority:ss.Normal},name:"loadBitmapFont",test(n){return zT.includes(Xe.extname(n).toLowerCase())},async testParse(n){return fh.test(n)||Np.test(n)},async parse(n,t,e){const i=fh.test(n)?fh.parse(n):Np.parse(n),{src:s}=t,{pages:r}=i,o=[],l=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let d=0;d<r.length;++d){const g=r[d].file;let p=Xe.join(Xe.dirname(s),g);p=Ja(p,s),o.push({src:p,data:l})}const u=await e.load(o),c=o.map(d=>u[d.src]);return new Mg({data:i,textures:c},s)},async load(n,t){return await(await ve.get().fetch(n)).text()},async unload(n,t,e){await Promise.all(n.pages.map(i=>e.unload(i.texture.source._sourceOrigin))),n.destroy()}};class $T{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const HT={extension:{type:_t.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(t=>t instanceof Ot),getCacheableAssets:(n,t)=>{const e={};return n.forEach(i=>{t.forEach((s,r)=>{e[i+(r===0?"":r+1)]=s})}),e}};async function Pg(n){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(n)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const qT={extension:{type:_t.DetectionParser,priority:1},test:async()=>Pg("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(t=>t!=="avif")},Xp=["png","jpg","jpeg"],jT={extension:{type:_t.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...Xp],remove:async n=>n.filter(t=>!Xp.includes(t))},KT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function fc(n){return KT?!1:document.createElement("video").canPlayType(n)!==""}const ZT={extension:{type:_t.DetectionParser,priority:0},test:async()=>fc("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(t=>t!=="mp4"&&t!=="m4v")},QT={extension:{type:_t.DetectionParser,priority:0},test:async()=>fc("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(t=>t!=="ogv")},JT={extension:{type:_t.DetectionParser,priority:0},test:async()=>fc("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(t=>t!=="webm")},tM={extension:{type:_t.DetectionParser,priority:0},test:async()=>Pg("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(t=>t!=="webp")};class eM{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var o,l;let s=null,r=null;if(e.loadParser&&(r=this._parserHash[e.loadParser],r||ge(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!r){for(let u=0;u<this.parsers.length;u++){const c=this.parsers[u];if(c.load&&((o=c.test)!=null&&o.call(c,t,e,this))){r=c;break}}if(!r)return ge(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await r.load(t,e,this),i.parser=r;for(let u=0;u<this.parsers.length;u++){const c=this.parsers[u];c.parse&&c.parse&&await((l=c.testParse)==null?void 0:l.call(c,s,e,this))&&(s=await c.parse(s,e,this)||s,i.parser=c)}return s})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const s={},r=Qa(t),o=Di(t,c=>({alias:[c],src:c,data:{}})),l=o.length,u=o.map(async c=>{const f=Xe.toAbsolute(c.src);if(!s[c.src])try{this.promiseCache[f]||(this.promiseCache[f]=this._getLoadPromiseAndParser(f,c)),s[c.src]=await this.promiseCache[f].promise,e&&e(++i/l)}catch(d){throw delete this.promiseCache[f],delete s[c.src],new Error(`[Loader.load] Failed to load ${f}.
${d}`)}});return await Promise.all(u),r?s[o[0].src]:s}async unload(t){const i=Di(t,s=>({alias:[s],src:s})).map(async s=>{var l,u;const r=Xe.toAbsolute(s.src),o=this.promiseCache[r];if(o){const c=await o.promise;delete this.promiseCache[r],await((u=(l=o.parser)==null?void 0:l.unload)==null?void 0:u.call(l,c,s,this))}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(e.name?t[e.name]&&ge(`[Assets] loadParser name conflict "${e.name}"`):ge("[Assets] loadParser should have a name"),{...t,[e.name]:e}),{})}}function ir(n,t){if(Array.isArray(t)){for(const e of t)if(n.startsWith(`data:${e}`))return!0;return!1}return n.startsWith(`data:${t}`)}function Ti(n,t){const e=n.split("?")[0],i=Xe.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const iM=".json",sM="application/json",nM={extension:{type:_t.LoadParser,priority:ss.Low},name:"loadJson",test(n){return ir(n,sM)||Ti(n,iM)},async load(n){return await(await ve.get().fetch(n)).json()}},rM=".txt",aM="text/plain",oM={name:"loadTxt",extension:{type:_t.LoadParser,priority:ss.Low,name:"loadTxt"},test(n){return ir(n,aM)||Ti(n,rM)},async load(n){return await(await ve.get().fetch(n)).text()}},lM=["normal","bold","100","200","300","400","500","600","700","800","900"],hM=[".ttf",".otf",".woff",".woff2"],cM=["font/ttf","font/otf","font/woff","font/woff2"],uM=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function fM(n){const t=Xe.extname(n),s=Xe.basename(n,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1));let r=s.length>0;for(const l of s)if(!l.match(uM)){r=!1;break}let o=s.join(" ");return r||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const dM=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function pM(n){return dM.test(n)?n:encodeURI(n)}const mM={extension:{type:_t.LoadParser,priority:ss.Low},name:"loadWebFont",test(n){return ir(n,cM)||Ti(n,hM)},async load(n,t){var i,s,r;const e=ve.get().getFontFaceSet();if(e){const o=[],l=((i=t.data)==null?void 0:i.family)??fM(n),u=((r=(s=t.data)==null?void 0:s.weights)==null?void 0:r.filter(f=>lM.includes(f)))??["normal"],c=t.data??{};for(let f=0;f<u.length;f++){const d=u[f],g=new FontFace(l,`url(${pM(n)})`,{...c,weight:d});await g.load(),e.add(g),o.push(g)}return he.set(`${l}-and-url`,{url:n,fontFaces:o}),o.length===1?o[0]:o}return ge("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(t=>{he.remove(`${t.family}-and-url`),ve.get().getFontFaceSet().delete(t)})}};function dc(n,t=1){var i;const e=(i=mn.RETINA_PREFIX)==null?void 0:i.exec(n);return e?parseFloat(e[1]):t}function pc(n,t,e){n.label=e,n._sourceOrigin=e;const i=new Ot({source:n,label:e}),s=()=>{delete t.promiseCache[e],he.has(e)&&he.remove(e)};return i.source.once("destroy",()=>{t.promiseCache[e]&&(ge("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),s())}),i.once("destroy",()=>{n.destroyed||(ge("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),i}const gM=".svg",xM="image/svg+xml",yM={extension:{type:_t.LoadParser,priority:ss.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return ir(n,xM)||Ti(n,gM)},async load(n,t,e){var i;return((i=t.data)==null?void 0:i.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?_M(n):bM(n,t,e,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function bM(n,t,e,i){var b,A,C;const r=await(await ve.get().fetch(n)).blob(),o=URL.createObjectURL(r),l=new Image;l.src=o,l.crossOrigin=i,await l.decode(),URL.revokeObjectURL(o);const u=document.createElement("canvas"),c=u.getContext("2d"),f=((b=t.data)==null?void 0:b.resolution)||dc(n),d=((A=t.data)==null?void 0:A.width)??l.width,g=((C=t.data)==null?void 0:C.height)??l.height;u.width=d*f,u.height=g*f,c.drawImage(l,0,0,d*f,g*f);const{parseAsGraphicsContext:p,...x}=t.data??{},y=new dn({resource:u,alphaMode:"premultiply-alpha-on-upload",resolution:f,...x});return pc(y,e,n)}async function _M(n){const e=await(await ve.get().fetch(n)).text(),i=new Ai;return i.svg(e),i}const wM=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let qn=null,zh=class{constructor(){qn||(qn=URL.createObjectURL(new Blob([wM],{type:"application/javascript"}))),this.worker=new Worker(qn)}};zh.revokeObjectURL=function(){qn&&(URL.revokeObjectURL(qn),qn=null)};const vM=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let jn=null;class Ig{constructor(){jn||(jn=URL.createObjectURL(new Blob([vM],{type:"application/javascript"}))),this.worker=new Worker(jn)}}Ig.revokeObjectURL=function(){jn&&(URL.revokeObjectURL(jn),jn=null)};let Up=0,dh;class SM{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new zh;e.addEventListener("message",i=>{e.terminate(),zh.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){var i;return this._run("loadImageBitmap",[t,(i=e==null?void 0:e.data)==null?void 0:i.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){dh===void 0&&(dh=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<dh&&(this._createdWorkers++,t=new Ig().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((s,r)=>{this._queue.push({id:t,arguments:e,resolve:s,reject:r})});return this._next(),i}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),i=e.id;this._resolveHash[Up]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Up++,id:i})}}const Wp=new SM,AM=[".jpeg",".jpg",".png",".webp",".avif"],CM=["image/jpeg","image/png","image/webp","image/avif"];async function TM(n,t){var s;const e=await ve.get().fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const i=await e.blob();return((s=t==null?void 0:t.data)==null?void 0:s.alphaMode)==="premultiplied-alpha"?createImageBitmap(i,{premultiplyAlpha:"none"}):createImageBitmap(i)}const kg={name:"loadTextures",extension:{type:_t.LoadParser,priority:ss.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return ir(n,CM)||Ti(n,AM)},async load(n,t,e){var r;let i=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Wp.isImageBitmapSupported()?i=await Wp.loadImageBitmap(n,t):i=await TM(n,t):i=await new Promise((o,l)=>{i=new Image,i.crossOrigin=this.config.crossOrigin,i.src=n,i.complete?o(i):(i.onload=()=>{o(i)},i.onerror=l)});const s=new dn({resource:i,alphaMode:"premultiply-alpha-on-upload",resolution:((r=t.data)==null?void 0:r.resolution)||dc(n),...t.data});return pc(s,e,n)},unload(n){n.destroy(!0)}},Eg=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],MM=Eg.map(n=>`video/${n.substring(1)}`);function PM(n,t,e){e===void 0&&!t.startsWith("data:")?n.crossOrigin=kM(t):e!==!1&&(n.crossOrigin=typeof e=="string"?e:"anonymous")}function IM(n){return new Promise((t,e)=>{n.addEventListener("canplaythrough",i),n.addEventListener("error",s),n.load();function i(){r(),t()}function s(o){r(),e(o)}function r(){n.removeEventListener("canplaythrough",i),n.removeEventListener("error",s)}})}function kM(n,t=globalThis.location){if(n.startsWith("data:"))return"";t||(t=globalThis.location);const e=new URL(n,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}const EM={name:"loadVideo",extension:{type:_t.LoadParser,name:"loadVideo"},test(n){const t=ir(n,MM),e=Ti(n,Eg);return t||e},async load(n,t,e){var u,c;const i={...Ha.defaultOptions,resolution:((u=t.data)==null?void 0:u.resolution)||dc(n),alphaMode:((c=t.data)==null?void 0:c.alphaMode)||await Bm(),...t.data},s=document.createElement("video"),r={preload:i.autoLoad!==!1?"auto":void 0,"webkit-playsinline":i.playsinline!==!1?"":void 0,playsinline:i.playsinline!==!1?"":void 0,muted:i.muted===!0?"":void 0,loop:i.loop===!0?"":void 0,autoplay:i.autoPlay!==!1?"":void 0};Object.keys(r).forEach(f=>{const d=r[f];d!==void 0&&s.setAttribute(f,d)}),i.muted===!0&&(s.muted=!0),PM(s,n,i.crossorigin);const o=document.createElement("source");let l;if(n.startsWith("data:"))l=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const f=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();l=Ha.MIME_TYPES[f]||`video/${f}`}return o.src=n,l&&(o.type=l),new Promise(f=>{const d=async()=>{const g=new Ha({...i,resource:s});s.removeEventListener("canplay",d),t.data.preload&&await IM(s),f(pc(g,e,n))};s.addEventListener("canplay",d),s.appendChild(o)})},unload(n){n.destroy(!0)}},Rg={extension:{type:_t.ResolveParser,name:"resolveTexture"},test:kg.test,parse:n=>{var t;return{resolution:parseFloat(((t=mn.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:n.split(".").pop(),src:n}}},RM={extension:{type:_t.ResolveParser,priority:-2,name:"resolveJson"},test:n=>mn.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:Rg.parse};class FM{constructor(){this._detections=[],this._initialized=!1,this.resolver=new mn,this.loader=new eM,this.cache=he,this._backgroundLoader=new $T(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var r,o;if(this._initialized){ge("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const e=((r=t.texturePreference)==null?void 0:r.resolution)??1,i=typeof e=="number"?[e]:e,s=await this._detectFormats({preferredFormats:(o=t.texturePreference)==null?void 0:o.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const i=Qa(t),s=Di(t).map(l=>{if(typeof l!="string"){const u=this.resolver.getAlias(l);return u.some(c=>!this.resolver.hasKey(c))&&this.add(l),Array.isArray(u)?u[0]:u}return this.resolver.hasKey(l)||this.add({alias:l,src:l}),l}),r=this.resolver.resolve(s),o=await this._mapLoadToResolve(r,e);return i?o[s[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const s=this.resolver.resolveBundle(t),r={},o=Object.keys(s);let l=0,u=0;const c=()=>{e==null||e(++l/u)},f=o.map(d=>{const g=s[d];return u+=Object.keys(g).length,this._mapLoadToResolve(g,c).then(p=>{r[d]=p})});return await Promise.all(f),i?r[t[0]]:r}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return he.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=he.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const s=await this.loader.load(i,e);this._backgroundLoader.active=!0;const r={};return i.forEach(o=>{const l=s[o.src],u=[o.src];o.alias&&u.push(...o.alias),u.forEach(c=>{r[c]=l}),he.set(u,l)}),r}async unload(t){this._initialized||await this.init();const e=Di(t).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=Di(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(s=>this._unloadFromResolved(e[s]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{he.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,s)=>e.indexOf(i)===s),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const zn=new FM;Fe.handleByList(_t.LoadParser,zn.loader.parsers).handleByList(_t.ResolveParser,zn.resolver.parsers).handleByList(_t.CacheParser,zn.cache.parsers).handleByList(_t.DetectionParser,zn.detections);Fe.add(HT,jT,qT,tM,ZT,QT,JT,nM,oM,mM,yM,kg,EM,VT,GT,Rg,RM);const zp={loader:_t.LoadParser,resolver:_t.ResolveParser,cache:_t.CacheParser,detection:_t.DetectionParser};Fe.handle(_t.Asset,n=>{const t=n.ref;Object.entries(zp).filter(([e])=>!!t[e]).forEach(([e,i])=>Fe.add(Object.assign(t[e],{extension:t[e].extension??i})))},n=>{const t=n.ref;Object.keys(zp).filter(e=>!!t[e]).forEach(e=>Fe.remove(t[e]))});class eo extends sc{constructor(t){t instanceof Ai&&(t={context:t});const{context:e,roundPixels:i,...s}=t||{};super({label:"Graphics",...s}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new Ai,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new eo(this._context.clone()):(this._ownedContext=null,new eo(this._context))}lineStyle(t,e,i){jt(le,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const s={};return t&&(s.width=t),e&&(s.color=e),i&&(s.alpha=i),this.context.strokeStyle=s,this}beginFill(t,e){jt(le,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t!==void 0&&(i.color=t),e!==void 0&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){jt(le,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==Ai.defaultStrokeStyle.width||t.color!==Ai.defaultStrokeStyle.color||t.alpha!==Ai.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return jt(le,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return jt(le,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return jt(le,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return jt(le,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return jt(le,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return jt(le,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}function BM(n,t,e){jt("8.7.0","Please use container.collectRenderables instead.");const i=e.renderPipes?e:e.batch.renderer;return n.collectRenderables(t,i,null)}Fe.add(MA,PA);class Fg{constructor(){S(this,"entries",{});S(this,"size",0)}add(t){let e=this.entries[t];return this.entries[t]=!0,e?!1:(this.size++,!0)}addAll(t){let e=this.size;for(var i=0,s=t.length;i<s;i++)this.add(t[i]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}}const ui=class ui{constructor(t=0,e=0,i=0,s=0){S(this,"r");S(this,"g");S(this,"b");S(this,"a");this.r=t,this.g=e,this.b=i,this.a=s}set(t,e,i,s){return this.r=t,this.g=e,this.b=i,this.a=s,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t=t.charAt(0)=="#"?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=t.length!=8?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,i,s){return this.r+=t,this.g+=e,this.b+=i,this.a+=s,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((e&4278190080)>>>24)/255,t.g=((e&16711680)>>>16)/255,t.b=((e&65280)>>>8)/255,t.a=(e&255)/255}static rgb888ToColor(t,e){t.r=((e&16711680)>>>16)/255,t.g=((e&65280)>>>8)/255,t.b=(e&255)/255}toRgb888(){const t=e=>("0"+(e*255).toString(16)).slice(-2);return+("0x"+t(this.r)+t(this.g)+t(this.b))}static fromString(t){return new ui().setFromString(t)}};S(ui,"WHITE",new ui(1,1,1,1)),S(ui,"RED",new ui(1,0,0,1)),S(ui,"GREEN",new ui(0,1,0,1)),S(ui,"BLUE",new ui(0,0,1,1)),S(ui,"MAGENTA",new ui(1,0,1,1));let kt=ui;const Te=class Te{static clamp(t,e,i){return t<e?e:t>i?i:t}static cosDeg(t){return Math.cos(t*Te.degRad)}static sinDeg(t){return Math.sin(t*Te.degRad)}static atan2Deg(t,e){return Math.atan2(t,e)*Te.degRad}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),.3333333333333333);return t<0?-e:e}static randomTriangular(t,e){return Te.randomTriangularWith(t,e,(t+e)*.5)}static randomTriangularWith(t,e,i){let s=Math.random(),r=e-t;return s<=(i-t)/r?t+Math.sqrt(s*r*(i-t)):e-Math.sqrt((1-s)*r*(e-i))}static isPowerOfTwo(t){return t&&(t&t-1)===0}};S(Te,"PI",3.1415927),S(Te,"PI2",Te.PI*2),S(Te,"invPI2",1/Te.PI2),S(Te,"radiansToDegrees",180/Te.PI),S(Te,"radDeg",Te.radiansToDegrees),S(Te,"degreesToRadians",Te.PI/180),S(Te,"degRad",Te.degreesToRadians);let ft=Te;const Os=class Os{static arrayCopy(t,e,i,s,r){for(let o=e,l=s;o<e+r;o++,l++)i[l]=t[o]}static arrayFill(t,e,i,s){for(let r=e;r<i;r++)t[r]=s}static setArraySize(t,e,i=0){let s=t.length;if(s==e)return t;if(t.length=e,s<e)for(let r=s;r<e;r++)t[r]=i;return t}static ensureArrayCapacity(t,e,i=0){return t.length>=e?t:Os.setArraySize(t,e,i)}static newArray(t,e){let i=new Array(t);for(let s=0;s<t;s++)i[s]=e;return i}static newFloatArray(t){if(Os.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let i=0;i<e.length;i++)e[i]=0;return e}}static newShortArray(t){if(Os.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let i=0;i<e.length;i++)e[i]=0;return e}}static toFloatArray(t){return Os.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return Os.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,i=!0){for(var s=0;s<t.length;s++)if(t[s]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}};S(Os,"SUPPORTS_TYPED_ARRAYS",typeof Float32Array<"u");let dt=Os;class Rr{constructor(t){S(this,"items",new Array);S(this,"instantiator");this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}}class io{constructor(t=0,e=0){S(this,"x");S(this,"y");this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return t!=0&&(this.x/=t,this.y/=t),this}}class Bg{constructor(t){S(this,"name");if(!t)throw new Error("name cannot be null.");this.name=t}}const co=class co extends Bg{constructor(e){super(e);S(this,"id",co.nextID++);S(this,"bones",null);S(this,"vertices",[]);S(this,"worldVerticesLength",0);S(this,"timelineAttachment",this)}computeWorldVertices(e,i,s,r,o,l){s=o+(s>>1)*l;let u=e.bone.skeleton,c=e.deform,f=this.vertices,d=this.bones;if(!d){c.length>0&&(f=c);let y=e.bone,b=y.worldX,A=y.worldY,C=y.a,_=y.b,v=y.c,M=y.d;for(let T=i,P=o;P<s;T+=2,P+=l){let B=f[T],O=f[T+1];r[P]=B*C+O*_+b,r[P+1]=B*v+O*M+A}return}let g=0,p=0;for(let y=0;y<i;y+=2){let b=d[g];g+=b+1,p+=b}let x=u.bones;if(c.length==0)for(let y=o,b=p*3;y<s;y+=l){let A=0,C=0,_=d[g++];for(_+=g;g<_;g++,b+=3){let v=x[d[g]],M=f[b],T=f[b+1],P=f[b+2];A+=(M*v.a+T*v.b+v.worldX)*P,C+=(M*v.c+T*v.d+v.worldY)*P}r[y]=A,r[y+1]=C}else{let y=c;for(let b=o,A=p*3,C=p<<1;b<s;b+=l){let _=0,v=0,M=d[g++];for(M+=g;g<M;g++,A+=3,C+=2){let T=x[d[g]],P=f[A]+y[C],B=f[A+1]+y[C+1],O=f[A+2];_+=(P*T.a+B*T.b+T.worldX)*O,v+=(P*T.c+B*T.d+T.worldY)*O}r[b]=_,r[b+1]=v}}}copyTo(e){this.bones?(e.bones=new Array(this.bones.length),dt.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,this.vertices&&(e.vertices=dt.newFloatArray(this.vertices.length),dt.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)),e.worldVerticesLength=this.worldVerticesLength,e.timelineAttachment=this.timelineAttachment}};S(co,"nextID",0);let Ui=co;const Vn=class Vn{constructor(t){S(this,"id",Vn.nextID());S(this,"regions");S(this,"start",0);S(this,"digits",0);S(this,"setupIndex",0);this.regions=new Array(t)}copy(){let t=new Vn(this.regions.length);return dt.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let i=t.sequenceIndex;i==-1&&(i=this.setupIndex),i>=this.regions.length&&(i=this.regions.length-1);let s=this.regions[i];e.region!=s&&(e.region=s,e.updateRegion())}getPath(t,e){let i=t,s=(this.start+e).toString();for(let r=this.digits-s.length;r>0;r--)i+="0";return i+=s,i}static nextID(){return Vn._nextID++}};S(Vn,"_nextID",0);let so=Vn;var Ne;(function(n){n[n.hold=0]="hold",n[n.once=1]="once",n[n.loop=2]="loop",n[n.pingpong=3]="pingpong",n[n.onceReverse=4]="onceReverse",n[n.loopReverse=5]="loopReverse",n[n.pingpongReverse=6]="pingpongReverse"})(Ne||(Ne={}));const Lg=[Ne.hold,Ne.once,Ne.loop,Ne.pingpong,Ne.onceReverse,Ne.loopReverse,Ne.pingpongReverse];class mc{constructor(t,e,i){S(this,"name");S(this,"timelines",[]);S(this,"timelineIds",new Fg);S(this,"duration");if(!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=i}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,i,s,r,o,l,u){if(!t)throw new Error("skeleton cannot be null.");s&&this.duration!=0&&(i%=this.duration,e>0&&(e%=this.duration));let c=this.timelines;for(let f=0,d=c.length;f<d;f++)c[f].apply(t,e,i,r,o,l,u)}}var at;(function(n){n[n.setup=0]="setup",n[n.first=1]="first",n[n.replace=2]="replace",n[n.add=3]="add"})(at||(at={}));var Ge;(function(n){n[n.mixIn=0]="mixIn",n[n.mixOut=1]="mixOut"})(Ge||(Ge={}));const Bt={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28};class ce{constructor(t,e){S(this,"propertyIds");S(this,"frames");this.propertyIds=e,this.frames=dt.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let i=t.length;for(let s=1;s<i;s++)if(t[s]>e)return s-1;return i-1}static search(t,e,i){let s=t.length;for(let r=i;r<s;r+=i)if(t[r]>e)return r-i;return s-i}}class ns extends ce{constructor(e,i,s){super(e,s);S(this,"curves");this.curves=dt.newFloatArray(e+i*18),this.curves[e-1]=1}setLinear(e){this.curves[e]=0}setStepped(e){this.curves[e]=1}shrink(e){let i=this.getFrameCount()+e*18;if(this.curves.length>i){let s=dt.newFloatArray(i);dt.arrayCopy(this.curves,0,s,0,i),this.curves=s}}setBezier(e,i,s,r,o,l,u,c,f,d,g){let p=this.curves,x=this.getFrameCount()+e*18;s==0&&(p[i]=2+x);let y=(r-l*2+c)*.03,b=(o-u*2+f)*.03,A=((l-c)*3-r+d)*.006,C=((u-f)*3-o+g)*.006,_=y*2+A,v=b*2+C,M=(l-r)*.3+y+A*.16666667,T=(u-o)*.3+b+C*.16666667,P=r+M,B=o+T;for(let O=x+18;x<O;x+=2)p[x]=P,p[x+1]=B,M+=_,T+=v,_+=A,v+=C,P+=M,B+=T}getBezierValue(e,i,s,r){let o=this.curves;if(o[r]>e){let f=this.frames[i],d=this.frames[i+s];return d+(e-f)/(o[r]-f)*(o[r+1]-d)}let l=r+18;for(r+=2;r<l;r+=2)if(o[r]>=e){let f=o[r-2],d=o[r-1];return d+(e-f)/(o[r]-f)*(o[r+1]-d)}i+=this.getFrameEntries();let u=o[l-2],c=o[l-1];return c+(e-u)/(this.frames[i]-u)*(this.frames[i+s]-c)}}class Gi extends ns{constructor(t,e,i){super(t,e,[i])}getFrameEntries(){return 2}setFrame(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+1]=i}getCurveValue(t){let e=this.frames,i=e.length-2;for(let r=2;r<=i;r+=2)if(e[r]>t){i=r-2;break}let s=this.curves[i>>1];switch(s){case 0:let r=e[i],o=e[i+1];return o+(t-r)/(e[i+2]-r)*(e[i+2+1]-o);case 1:return e[i+1]}return this.getBezierValue(t,i,1,s-2)}getRelativeValue(t,e,i,s,r){if(t<this.frames[0]){switch(i){case at.setup:return r;case at.first:return s+(r-s)*e}return s}let o=this.getCurveValue(t);switch(i){case at.setup:return r+o*e;case at.first:case at.replace:o+=r-s}return s+o*e}getAbsoluteValue(t,e,i,s,r){if(t<this.frames[0]){switch(i){case at.setup:return r;case at.first:return s+(r-s)*e}return s}let o=this.getCurveValue(t);return i==at.setup?r+(o-r)*e:s+(o-s)*e}getAbsoluteValue2(t,e,i,s,r,o){if(t<this.frames[0]){switch(i){case at.setup:return r;case at.first:return s+(r-s)*e}return s}return i==at.setup?r+(o-r)*e:s+(o-s)*e}getScaleValue(t,e,i,s,r,o){const l=this.frames;if(t<l[0]){switch(i){case at.setup:return o;case at.first:return r+(o-r)*e}return r}let u=this.getCurveValue(t)*o;if(e==1)return i==at.add?r+u-o:u;if(s==Ge.mixOut)switch(i){case at.setup:return o+(Math.abs(u)*ft.signum(o)-o)*e;case at.first:case at.replace:return r+(Math.abs(u)*ft.signum(r)-r)*e}else{let c=0;switch(i){case at.setup:return c=Math.abs(o)*ft.signum(u),c+(u-c)*e;case at.first:case at.replace:return c=Math.abs(r)*ft.signum(u),c+(u-c)*e}}return r+(u-o)*e}}class gc extends ns{constructor(t,e,i,s){super(t,e,[i,s])}getFrameEntries(){return 3}setFrame(t,e,i,s){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=s}}class no extends Gi{constructor(e,i,s){super(e,i,Bt.rotate+"|"+s);S(this,"boneIndex",0);this.boneIndex=s}apply(e,i,s,r,o,l,u){let c=e.bones[this.boneIndex];c.active&&(c.rotation=this.getRelativeValue(s,o,l,c.rotation,c.data.rotation))}}class Og extends gc{constructor(e,i,s){super(e,i,Bt.x+"|"+s,Bt.y+"|"+s);S(this,"boneIndex",0);this.boneIndex=s}apply(e,i,s,r,o,l,u){let c=e.bones[this.boneIndex];if(!c.active)return;let f=this.frames;if(s<f[0]){switch(l){case at.setup:c.x=c.data.x,c.y=c.data.y;return;case at.first:c.x+=(c.data.x-c.x)*o,c.y+=(c.data.y-c.y)*o}return}let d=0,g=0,p=ce.search(f,s,3),x=this.curves[p/3];switch(x){case 0:let y=f[p];d=f[p+1],g=f[p+2];let b=(s-y)/(f[p+3]-y);d+=(f[p+3+1]-d)*b,g+=(f[p+3+2]-g)*b;break;case 1:d=f[p+1],g=f[p+2];break;default:d=this.getBezierValue(s,p,1,x-2),g=this.getBezierValue(s,p,2,x+18-2)}switch(l){case at.setup:c.x=c.data.x+d*o,c.y=c.data.y+g*o;break;case at.first:case at.replace:c.x+=(c.data.x+d-c.x)*o,c.y+=(c.data.y+g-c.y)*o;break;case at.add:c.x+=d*o,c.y+=g*o}}}class Dg extends Gi{constructor(e,i,s){super(e,i,Bt.x+"|"+s);S(this,"boneIndex",0);this.boneIndex=s}apply(e,i,s,r,o,l,u){let c=e.bones[this.boneIndex];c.active&&(c.x=this.getRelativeValue(s,o,l,c.x,c.data.x))}}class Yg extends Gi{constructor(e,i,s){super(e,i,Bt.y+"|"+s);S(this,"boneIndex",0);this.boneIndex=s}apply(e,i,s,r,o,l,u){let c=e.bones[this.boneIndex];c.active&&(c.y=this.getRelativeValue(s,o,l,c.y,c.data.y))}}class Ng extends gc{constructor(e,i,s){super(e,i,Bt.scaleX+"|"+s,Bt.scaleY+"|"+s);S(this,"boneIndex",0);this.boneIndex=s}apply(e,i,s,r,o,l,u){let c=e.bones[this.boneIndex];if(!c.active)return;let f=this.frames;if(s<f[0]){switch(l){case at.setup:c.scaleX=c.data.scaleX,c.scaleY=c.data.scaleY;return;case at.first:c.scaleX+=(c.data.scaleX-c.scaleX)*o,c.scaleY+=(c.data.scaleY-c.scaleY)*o}return}let d,g,p=ce.search(f,s,3),x=this.curves[p/3];switch(x){case 0:let y=f[p];d=f[p+1],g=f[p+2];let b=(s-y)/(f[p+3]-y);d+=(f[p+3+1]-d)*b,g+=(f[p+3+2]-g)*b;break;case 1:d=f[p+1],g=f[p+2];break;default:d=this.getBezierValue(s,p,1,x-2),g=this.getBezierValue(s,p,2,x+18-2)}if(d*=c.data.scaleX,g*=c.data.scaleY,o==1)l==at.add?(c.scaleX+=d-c.data.scaleX,c.scaleY+=g-c.data.scaleY):(c.scaleX=d,c.scaleY=g);else{let y=0,b=0;if(u==Ge.mixOut)switch(l){case at.setup:y=c.data.scaleX,b=c.data.scaleY,c.scaleX=y+(Math.abs(d)*ft.signum(y)-y)*o,c.scaleY=b+(Math.abs(g)*ft.signum(b)-b)*o;break;case at.first:case at.replace:y=c.scaleX,b=c.scaleY,c.scaleX=y+(Math.abs(d)*ft.signum(y)-y)*o,c.scaleY=b+(Math.abs(g)*ft.signum(b)-b)*o;break;case at.add:c.scaleX+=(d-c.data.scaleX)*o,c.scaleY+=(g-c.data.scaleY)*o}else switch(l){case at.setup:y=Math.abs(c.data.scaleX)*ft.signum(d),b=Math.abs(c.data.scaleY)*ft.signum(g),c.scaleX=y+(d-y)*o,c.scaleY=b+(g-b)*o;break;case at.first:case at.replace:y=Math.abs(c.scaleX)*ft.signum(d),b=Math.abs(c.scaleY)*ft.signum(g),c.scaleX=y+(d-y)*o,c.scaleY=b+(g-b)*o;break;case at.add:c.scaleX+=(d-c.data.scaleX)*o,c.scaleY+=(g-c.data.scaleY)*o}}}}class Xg extends Gi{constructor(e,i,s){super(e,i,Bt.scaleX+"|"+s);S(this,"boneIndex",0);this.boneIndex=s}apply(e,i,s,r,o,l,u){let c=e.bones[this.boneIndex];c.active&&(c.scaleX=this.getScaleValue(s,o,l,u,c.scaleX,c.data.scaleX))}}class Ug extends Gi{constructor(e,i,s){super(e,i,Bt.scaleY+"|"+s);S(this,"boneIndex",0);this.boneIndex=s}apply(e,i,s,r,o,l,u){let c=e.bones[this.boneIndex];c.active&&(c.scaleY=this.getScaleValue(s,o,l,u,c.scaleY,c.data.scaleY))}}class Wg extends gc{constructor(e,i,s){super(e,i,Bt.shearX+"|"+s,Bt.shearY+"|"+s);S(this,"boneIndex",0);this.boneIndex=s}apply(e,i,s,r,o,l,u){let c=e.bones[this.boneIndex];if(!c.active)return;let f=this.frames;if(s<f[0]){switch(l){case at.setup:c.shearX=c.data.shearX,c.shearY=c.data.shearY;return;case at.first:c.shearX+=(c.data.shearX-c.shearX)*o,c.shearY+=(c.data.shearY-c.shearY)*o}return}let d=0,g=0,p=ce.search(f,s,3),x=this.curves[p/3];switch(x){case 0:let y=f[p];d=f[p+1],g=f[p+2];let b=(s-y)/(f[p+3]-y);d+=(f[p+3+1]-d)*b,g+=(f[p+3+2]-g)*b;break;case 1:d=f[p+1],g=f[p+2];break;default:d=this.getBezierValue(s,p,1,x-2),g=this.getBezierValue(s,p,2,x+18-2)}switch(l){case at.setup:c.shearX=c.data.shearX+d*o,c.shearY=c.data.shearY+g*o;break;case at.first:case at.replace:c.shearX+=(c.data.shearX+d-c.shearX)*o,c.shearY+=(c.data.shearY+g-c.shearY)*o;break;case at.add:c.shearX+=d*o,c.shearY+=g*o}}}class zg extends Gi{constructor(e,i,s){super(e,i,Bt.shearX+"|"+s);S(this,"boneIndex",0);this.boneIndex=s}apply(e,i,s,r,o,l,u){let c=e.bones[this.boneIndex];c.active&&(c.shearX=this.getRelativeValue(s,o,l,c.shearX,c.data.shearX))}}class Gg extends Gi{constructor(e,i,s){super(e,i,Bt.shearY+"|"+s);S(this,"boneIndex",0);this.boneIndex=s}apply(e,i,s,r,o,l,u){let c=e.bones[this.boneIndex];c.active&&(c.shearY=this.getRelativeValue(s,o,l,c.shearY,c.data.shearY))}}class Vg extends ce{constructor(e,i){super(e,[Bt.inherit+"|"+i]);S(this,"boneIndex",0);this.boneIndex=i}getFrameEntries(){return 2}setFrame(e,i,s){e*=2,this.frames[e]=i,this.frames[e+1]=s}apply(e,i,s,r,o,l,u){let c=e.bones[this.boneIndex];if(!c.active)return;if(u==Ge.mixOut){l==at.setup&&(c.inherit=c.data.inherit);return}let f=this.frames;if(s<f[0]){(l==at.setup||l==at.first)&&(c.inherit=c.data.inherit);return}c.inherit=this.frames[ce.search(f,s,2)+1]}}class $g extends ns{constructor(e,i,s){super(e,i,[Bt.rgb+"|"+s,Bt.alpha+"|"+s]);S(this,"slotIndex",0);this.slotIndex=s}getFrameEntries(){return 5}setFrame(e,i,s,r,o,l){e*=5,this.frames[e]=i,this.frames[e+1]=s,this.frames[e+2]=r,this.frames[e+3]=o,this.frames[e+4]=l}apply(e,i,s,r,o,l,u){let c=e.slots[this.slotIndex];if(!c.bone.active)return;let f=this.frames,d=c.color;if(s<f[0]){let C=c.data.color;switch(l){case at.setup:d.setFromColor(C);return;case at.first:d.add((C.r-d.r)*o,(C.g-d.g)*o,(C.b-d.b)*o,(C.a-d.a)*o)}return}let g=0,p=0,x=0,y=0,b=ce.search(f,s,5),A=this.curves[b/5];switch(A){case 0:let C=f[b];g=f[b+1],p=f[b+2],x=f[b+3],y=f[b+4];let _=(s-C)/(f[b+5]-C);g+=(f[b+5+1]-g)*_,p+=(f[b+5+2]-p)*_,x+=(f[b+5+3]-x)*_,y+=(f[b+5+4]-y)*_;break;case 1:g=f[b+1],p=f[b+2],x=f[b+3],y=f[b+4];break;default:g=this.getBezierValue(s,b,1,A-2),p=this.getBezierValue(s,b,2,A+18-2),x=this.getBezierValue(s,b,3,A+18*2-2),y=this.getBezierValue(s,b,4,A+18*3-2)}o==1?d.set(g,p,x,y):(l==at.setup&&d.setFromColor(c.data.color),d.add((g-d.r)*o,(p-d.g)*o,(x-d.b)*o,(y-d.a)*o))}}class Hg extends ns{constructor(e,i,s){super(e,i,[Bt.rgb+"|"+s]);S(this,"slotIndex",0);this.slotIndex=s}getFrameEntries(){return 4}setFrame(e,i,s,r,o){e<<=2,this.frames[e]=i,this.frames[e+1]=s,this.frames[e+2]=r,this.frames[e+3]=o}apply(e,i,s,r,o,l,u){let c=e.slots[this.slotIndex];if(!c.bone.active)return;let f=this.frames,d=c.color;if(s<f[0]){let A=c.data.color;switch(l){case at.setup:d.r=A.r,d.g=A.g,d.b=A.b;return;case at.first:d.r+=(A.r-d.r)*o,d.g+=(A.g-d.g)*o,d.b+=(A.b-d.b)*o}return}let g=0,p=0,x=0,y=ce.search(f,s,4),b=this.curves[y>>2];switch(b){case 0:let A=f[y];g=f[y+1],p=f[y+2],x=f[y+3];let C=(s-A)/(f[y+4]-A);g+=(f[y+4+1]-g)*C,p+=(f[y+4+2]-p)*C,x+=(f[y+4+3]-x)*C;break;case 1:g=f[y+1],p=f[y+2],x=f[y+3];break;default:g=this.getBezierValue(s,y,1,b-2),p=this.getBezierValue(s,y,2,b+18-2),x=this.getBezierValue(s,y,3,b+18*2-2)}if(o==1)d.r=g,d.g=p,d.b=x;else{if(l==at.setup){let A=c.data.color;d.r=A.r,d.g=A.g,d.b=A.b}d.r+=(g-d.r)*o,d.g+=(p-d.g)*o,d.b+=(x-d.b)*o}}}class qg extends Gi{constructor(e,i,s){super(e,i,Bt.alpha+"|"+s);S(this,"slotIndex",0);this.slotIndex=s}apply(e,i,s,r,o,l,u){let c=e.slots[this.slotIndex];if(!c.bone.active)return;let f=c.color;if(s<this.frames[0]){let g=c.data.color;switch(l){case at.setup:f.a=g.a;return;case at.first:f.a+=(g.a-f.a)*o}return}let d=this.getCurveValue(s);o==1?f.a=d:(l==at.setup&&(f.a=c.data.color.a),f.a+=(d-f.a)*o)}}class jg extends ns{constructor(e,i,s){super(e,i,[Bt.rgb+"|"+s,Bt.alpha+"|"+s,Bt.rgb2+"|"+s]);S(this,"slotIndex",0);this.slotIndex=s}getFrameEntries(){return 8}setFrame(e,i,s,r,o,l,u,c,f){e<<=3,this.frames[e]=i,this.frames[e+1]=s,this.frames[e+2]=r,this.frames[e+3]=o,this.frames[e+4]=l,this.frames[e+5]=u,this.frames[e+6]=c,this.frames[e+7]=f}apply(e,i,s,r,o,l,u){let c=e.slots[this.slotIndex];if(!c.bone.active)return;let f=this.frames,d=c.color,g=c.darkColor;if(s<f[0]){let T=c.data.color,P=c.data.darkColor;switch(l){case at.setup:d.setFromColor(T),g.r=P.r,g.g=P.g,g.b=P.b;return;case at.first:d.add((T.r-d.r)*o,(T.g-d.g)*o,(T.b-d.b)*o,(T.a-d.a)*o),g.r+=(P.r-g.r)*o,g.g+=(P.g-g.g)*o,g.b+=(P.b-g.b)*o}return}let p=0,x=0,y=0,b=0,A=0,C=0,_=0,v=ce.search(f,s,8),M=this.curves[v>>3];switch(M){case 0:let T=f[v];p=f[v+1],x=f[v+2],y=f[v+3],b=f[v+4],A=f[v+5],C=f[v+6],_=f[v+7];let P=(s-T)/(f[v+8]-T);p+=(f[v+8+1]-p)*P,x+=(f[v+8+2]-x)*P,y+=(f[v+8+3]-y)*P,b+=(f[v+8+4]-b)*P,A+=(f[v+8+5]-A)*P,C+=(f[v+8+6]-C)*P,_+=(f[v+8+7]-_)*P;break;case 1:p=f[v+1],x=f[v+2],y=f[v+3],b=f[v+4],A=f[v+5],C=f[v+6],_=f[v+7];break;default:p=this.getBezierValue(s,v,1,M-2),x=this.getBezierValue(s,v,2,M+18-2),y=this.getBezierValue(s,v,3,M+18*2-2),b=this.getBezierValue(s,v,4,M+18*3-2),A=this.getBezierValue(s,v,5,M+18*4-2),C=this.getBezierValue(s,v,6,M+18*5-2),_=this.getBezierValue(s,v,7,M+18*6-2)}if(o==1)d.set(p,x,y,b),g.r=A,g.g=C,g.b=_;else{if(l==at.setup){d.setFromColor(c.data.color);let T=c.data.darkColor;g.r=T.r,g.g=T.g,g.b=T.b}d.add((p-d.r)*o,(x-d.g)*o,(y-d.b)*o,(b-d.a)*o),g.r+=(A-g.r)*o,g.g+=(C-g.g)*o,g.b+=(_-g.b)*o}}}class Kg extends ns{constructor(e,i,s){super(e,i,[Bt.rgb+"|"+s,Bt.rgb2+"|"+s]);S(this,"slotIndex",0);this.slotIndex=s}getFrameEntries(){return 7}setFrame(e,i,s,r,o,l,u,c){e*=7,this.frames[e]=i,this.frames[e+1]=s,this.frames[e+2]=r,this.frames[e+3]=o,this.frames[e+4]=l,this.frames[e+5]=u,this.frames[e+6]=c}apply(e,i,s,r,o,l,u){let c=e.slots[this.slotIndex];if(!c.bone.active)return;let f=this.frames,d=c.color,g=c.darkColor;if(s<f[0]){let M=c.data.color,T=c.data.darkColor;switch(l){case at.setup:d.r=M.r,d.g=M.g,d.b=M.b,g.r=T.r,g.g=T.g,g.b=T.b;return;case at.first:d.r+=(M.r-d.r)*o,d.g+=(M.g-d.g)*o,d.b+=(M.b-d.b)*o,g.r+=(T.r-g.r)*o,g.g+=(T.g-g.g)*o,g.b+=(T.b-g.b)*o}return}let p=0,x=0,y=0,b=0,A=0,C=0,_=ce.search(f,s,7),v=this.curves[_/7];switch(v){case 0:let M=f[_];p=f[_+1],x=f[_+2],y=f[_+3],b=f[_+4],A=f[_+5],C=f[_+6];let T=(s-M)/(f[_+7]-M);p+=(f[_+7+1]-p)*T,x+=(f[_+7+2]-x)*T,y+=(f[_+7+3]-y)*T,b+=(f[_+7+4]-b)*T,A+=(f[_+7+5]-A)*T,C+=(f[_+7+6]-C)*T;break;case 1:p=f[_+1],x=f[_+2],y=f[_+3],b=f[_+4],A=f[_+5],C=f[_+6];break;default:p=this.getBezierValue(s,_,1,v-2),x=this.getBezierValue(s,_,2,v+18-2),y=this.getBezierValue(s,_,3,v+18*2-2),b=this.getBezierValue(s,_,4,v+18*3-2),A=this.getBezierValue(s,_,5,v+18*4-2),C=this.getBezierValue(s,_,6,v+18*5-2)}if(o==1)d.r=p,d.g=x,d.b=y,g.r=b,g.g=A,g.b=C;else{if(l==at.setup){let M=c.data.color,T=c.data.darkColor;d.r=M.r,d.g=M.g,d.b=M.b,g.r=T.r,g.g=T.g,g.b=T.b}d.r+=(p-d.r)*o,d.g+=(x-d.g)*o,d.b+=(y-d.b)*o,g.r+=(b-g.r)*o,g.g+=(A-g.g)*o,g.b+=(C-g.b)*o}}}class Gn extends ce{constructor(e,i){super(e,[Bt.attachment+"|"+i]);S(this,"slotIndex",0);S(this,"attachmentNames");this.slotIndex=i,this.attachmentNames=new Array(e)}getFrameCount(){return this.frames.length}setFrame(e,i,s){this.frames[e]=i,this.attachmentNames[e]=s}apply(e,i,s,r,o,l,u){let c=e.slots[this.slotIndex];if(c.bone.active){if(u==Ge.mixOut){l==at.setup&&this.setAttachment(e,c,c.data.attachmentName);return}if(s<this.frames[0]){(l==at.setup||l==at.first)&&this.setAttachment(e,c,c.data.attachmentName);return}this.setAttachment(e,c,this.attachmentNames[ce.search1(this.frames,s)])}}setAttachment(e,i,s){i.setAttachment(s?e.getAttachment(this.slotIndex,s):null)}}class Zg extends ns{constructor(e,i,s,r){super(e,i,[Bt.deform+"|"+s+"|"+r.id]);S(this,"slotIndex",0);S(this,"attachment");S(this,"vertices");this.slotIndex=s,this.attachment=r,this.vertices=new Array(e)}getFrameCount(){return this.frames.length}setFrame(e,i,s){this.frames[e]=i,this.vertices[e]=s}setBezier(e,i,s,r,o,l,u,c,f,d,g){let p=this.curves,x=this.getFrameCount()+e*18;s==0&&(p[i]=2+x);let y=(r-l*2+c)*.03,b=f*.03-u*.06,A=((l-c)*3-r+d)*.006,C=(u-f+.33333333)*.018,_=y*2+A,v=b*2+C,M=(l-r)*.3+y+A*.16666667,T=u*.3+b+C*.16666667,P=r+M,B=T;for(let O=x+18;x<O;x+=2)p[x]=P,p[x+1]=B,M+=_,T+=v,_+=A,v+=C,P+=M,B+=T}getCurvePercent(e,i){let s=this.curves,r=s[i];switch(r){case 0:let c=this.frames[i];return(e-c)/(this.frames[i+this.getFrameEntries()]-c);case 1:return 0}if(r-=2,s[r]>e){let c=this.frames[i];return s[r+1]*(e-c)/(s[r]-c)}let o=r+18;for(r+=2;r<o;r+=2)if(s[r]>=e){let c=s[r-2],f=s[r-1];return f+(e-c)/(s[r]-c)*(s[r+1]-f)}let l=s[o-2],u=s[o-1];return u+(1-u)*(e-l)/(this.frames[i+this.getFrameEntries()]-l)}apply(e,i,s,r,o,l,u){let c=e.slots[this.slotIndex];if(!c.bone.active)return;let f=c.getAttachment();if(!f||!(f instanceof Ui)||f.timelineAttachment!=this.attachment)return;let d=c.deform;d.length==0&&(l=at.setup);let g=this.vertices,p=g[0].length,x=this.frames;if(s<x[0]){switch(l){case at.setup:d.length=0;return;case at.first:if(o==1){d.length=0;return}d.length=p;let v=f;if(v.bones){o=1-o;for(var y=0;y<p;y++)d[y]*=o}else{let M=v.vertices;for(var y=0;y<p;y++)d[y]+=(M[y]-d[y])*o}}return}if(d.length=p,s>=x[x.length-1]){let v=g[x.length-1];if(o==1)if(l==at.add){let M=f;if(M.bones)for(let T=0;T<p;T++)d[T]+=v[T];else{let T=M.vertices;for(let P=0;P<p;P++)d[P]+=v[P]-T[P]}}else dt.arrayCopy(v,0,d,0,p);else switch(l){case at.setup:{let T=f;if(T.bones)for(let P=0;P<p;P++)d[P]=v[P]*o;else{let P=T.vertices;for(let B=0;B<p;B++){let O=P[B];d[B]=O+(v[B]-O)*o}}break}case at.first:case at.replace:for(let T=0;T<p;T++)d[T]+=(v[T]-d[T])*o;break;case at.add:let M=f;if(M.bones)for(let T=0;T<p;T++)d[T]+=v[T]*o;else{let T=M.vertices;for(let P=0;P<p;P++)d[P]+=(v[P]-T[P])*o}}return}let b=ce.search1(x,s),A=this.getCurvePercent(s,b),C=g[b],_=g[b+1];if(o==1)if(l==at.add){let v=f;if(v.bones)for(let M=0;M<p;M++){let T=C[M];d[M]+=T+(_[M]-T)*A}else{let M=v.vertices;for(let T=0;T<p;T++){let P=C[T];d[T]+=P+(_[T]-P)*A-M[T]}}}else for(let v=0;v<p;v++){let M=C[v];d[v]=M+(_[v]-M)*A}else switch(l){case at.setup:{let M=f;if(M.bones)for(let T=0;T<p;T++){let P=C[T];d[T]=(P+(_[T]-P)*A)*o}else{let T=M.vertices;for(let P=0;P<p;P++){let B=C[P],O=T[P];d[P]=O+(B+(_[P]-B)*A-O)*o}}break}case at.first:case at.replace:for(let M=0;M<p;M++){let T=C[M];d[M]+=(T+(_[M]-T)*A-d[M])*o}break;case at.add:let v=f;if(v.bones)for(let M=0;M<p;M++){let T=C[M];d[M]+=(T+(_[M]-T)*A)*o}else{let M=v.vertices;for(let T=0;T<p;T++){let P=C[T];d[T]+=(P+(_[T]-P)*A-M[T])*o}}}}}const uo=class uo extends ce{constructor(e){super(e,uo.propertyIds);S(this,"events");this.events=new Array(e)}getFrameCount(){return this.frames.length}setFrame(e,i){this.frames[e]=i.time,this.events[e]=i}apply(e,i,s,r,o,l,u){if(!r)return;let c=this.frames,f=this.frames.length;if(i>s)this.apply(e,i,Number.MAX_VALUE,r,o,l,u),i=-1;else if(i>=c[f-1])return;if(s<c[0])return;let d=0;if(i<c[0])d=0;else{d=ce.search1(c,i)+1;let g=c[d];for(;d>0&&c[d-1]==g;)d--}for(;d<f&&s>=c[d];d++)r.push(this.events[d])}};S(uo,"propertyIds",[""+Bt.event]);let Fr=uo;const fo=class fo extends ce{constructor(e){super(e,fo.propertyIds);S(this,"drawOrders");this.drawOrders=new Array(e)}getFrameCount(){return this.frames.length}setFrame(e,i,s){this.frames[e]=i,this.drawOrders[e]=s}apply(e,i,s,r,o,l,u){if(u==Ge.mixOut){l==at.setup&&dt.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}if(s<this.frames[0]){(l==at.setup||l==at.first)&&dt.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}let c=ce.search1(this.frames,s),f=this.drawOrders[c];if(!f)dt.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);else{let d=e.drawOrder,g=e.slots;for(let p=0,x=f.length;p<x;p++)d[p]=g[f[p]]}}};S(fo,"propertyIds",[""+Bt.drawOrder]);let hn=fo;class Qg extends ns{constructor(e,i,s){super(e,i,[Bt.ikConstraint+"|"+s]);S(this,"constraintIndex",0);this.constraintIndex=s}getFrameEntries(){return 6}setFrame(e,i,s,r,o,l,u){e*=6,this.frames[e]=i,this.frames[e+1]=s,this.frames[e+2]=r,this.frames[e+3]=o,this.frames[e+4]=l?1:0,this.frames[e+5]=u?1:0}apply(e,i,s,r,o,l,u){let c=e.ikConstraints[this.constraintIndex];if(!c.active)return;let f=this.frames;if(s<f[0]){switch(l){case at.setup:c.mix=c.data.mix,c.softness=c.data.softness,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch;return;case at.first:c.mix+=(c.data.mix-c.mix)*o,c.softness+=(c.data.softness-c.softness)*o,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch}return}let d=0,g=0,p=ce.search(f,s,6),x=this.curves[p/6];switch(x){case 0:let y=f[p];d=f[p+1],g=f[p+2];let b=(s-y)/(f[p+6]-y);d+=(f[p+6+1]-d)*b,g+=(f[p+6+2]-g)*b;break;case 1:d=f[p+1],g=f[p+2];break;default:d=this.getBezierValue(s,p,1,x-2),g=this.getBezierValue(s,p,2,x+18-2)}l==at.setup?(c.mix=c.data.mix+(d-c.data.mix)*o,c.softness=c.data.softness+(g-c.data.softness)*o,u==Ge.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=f[p+3],c.compress=f[p+4]!=0,c.stretch=f[p+5]!=0)):(c.mix+=(d-c.mix)*o,c.softness+=(g-c.softness)*o,u==Ge.mixIn&&(c.bendDirection=f[p+3],c.compress=f[p+4]!=0,c.stretch=f[p+5]!=0))}}class Jg extends ns{constructor(e,i,s){super(e,i,[Bt.transformConstraint+"|"+s]);S(this,"constraintIndex",0);this.constraintIndex=s}getFrameEntries(){return 7}setFrame(e,i,s,r,o,l,u,c){let f=this.frames;e*=7,f[e]=i,f[e+1]=s,f[e+2]=r,f[e+3]=o,f[e+4]=l,f[e+5]=u,f[e+6]=c}apply(e,i,s,r,o,l,u){let c=e.transformConstraints[this.constraintIndex];if(!c.active)return;let f=this.frames;if(s<f[0]){let _=c.data;switch(l){case at.setup:c.mixRotate=_.mixRotate,c.mixX=_.mixX,c.mixY=_.mixY,c.mixScaleX=_.mixScaleX,c.mixScaleY=_.mixScaleY,c.mixShearY=_.mixShearY;return;case at.first:c.mixRotate+=(_.mixRotate-c.mixRotate)*o,c.mixX+=(_.mixX-c.mixX)*o,c.mixY+=(_.mixY-c.mixY)*o,c.mixScaleX+=(_.mixScaleX-c.mixScaleX)*o,c.mixScaleY+=(_.mixScaleY-c.mixScaleY)*o,c.mixShearY+=(_.mixShearY-c.mixShearY)*o}return}let d,g,p,x,y,b,A=ce.search(f,s,7),C=this.curves[A/7];switch(C){case 0:let _=f[A];d=f[A+1],g=f[A+2],p=f[A+3],x=f[A+4],y=f[A+5],b=f[A+6];let v=(s-_)/(f[A+7]-_);d+=(f[A+7+1]-d)*v,g+=(f[A+7+2]-g)*v,p+=(f[A+7+3]-p)*v,x+=(f[A+7+4]-x)*v,y+=(f[A+7+5]-y)*v,b+=(f[A+7+6]-b)*v;break;case 1:d=f[A+1],g=f[A+2],p=f[A+3],x=f[A+4],y=f[A+5],b=f[A+6];break;default:d=this.getBezierValue(s,A,1,C-2),g=this.getBezierValue(s,A,2,C+18-2),p=this.getBezierValue(s,A,3,C+18*2-2),x=this.getBezierValue(s,A,4,C+18*3-2),y=this.getBezierValue(s,A,5,C+18*4-2),b=this.getBezierValue(s,A,6,C+18*5-2)}if(l==at.setup){let _=c.data;c.mixRotate=_.mixRotate+(d-_.mixRotate)*o,c.mixX=_.mixX+(g-_.mixX)*o,c.mixY=_.mixY+(p-_.mixY)*o,c.mixScaleX=_.mixScaleX+(x-_.mixScaleX)*o,c.mixScaleY=_.mixScaleY+(y-_.mixScaleY)*o,c.mixShearY=_.mixShearY+(b-_.mixShearY)*o}else c.mixRotate+=(d-c.mixRotate)*o,c.mixX+=(g-c.mixX)*o,c.mixY+=(p-c.mixY)*o,c.mixScaleX+=(x-c.mixScaleX)*o,c.mixScaleY+=(y-c.mixScaleY)*o,c.mixShearY+=(b-c.mixShearY)*o}}class t0 extends Gi{constructor(e,i,s){super(e,i,Bt.pathConstraintPosition+"|"+s);S(this,"constraintIndex",0);this.constraintIndex=s}apply(e,i,s,r,o,l,u){let c=e.pathConstraints[this.constraintIndex];c.active&&(c.position=this.getAbsoluteValue(s,o,l,c.position,c.data.position))}}class e0 extends Gi{constructor(e,i,s){super(e,i,Bt.pathConstraintSpacing+"|"+s);S(this,"constraintIndex",0);this.constraintIndex=s}apply(e,i,s,r,o,l,u){let c=e.pathConstraints[this.constraintIndex];c.active&&(c.spacing=this.getAbsoluteValue(s,o,l,c.spacing,c.data.spacing))}}class i0 extends ns{constructor(e,i,s){super(e,i,[Bt.pathConstraintMix+"|"+s]);S(this,"constraintIndex",0);this.constraintIndex=s}getFrameEntries(){return 4}setFrame(e,i,s,r,o){let l=this.frames;e<<=2,l[e]=i,l[e+1]=s,l[e+2]=r,l[e+3]=o}apply(e,i,s,r,o,l,u){let c=e.pathConstraints[this.constraintIndex];if(!c.active)return;let f=this.frames;if(s<f[0]){switch(l){case at.setup:c.mixRotate=c.data.mixRotate,c.mixX=c.data.mixX,c.mixY=c.data.mixY;return;case at.first:c.mixRotate+=(c.data.mixRotate-c.mixRotate)*o,c.mixX+=(c.data.mixX-c.mixX)*o,c.mixY+=(c.data.mixY-c.mixY)*o}return}let d,g,p,x=ce.search(f,s,4),y=this.curves[x>>2];switch(y){case 0:let b=f[x];d=f[x+1],g=f[x+2],p=f[x+3];let A=(s-b)/(f[x+4]-b);d+=(f[x+4+1]-d)*A,g+=(f[x+4+2]-g)*A,p+=(f[x+4+3]-p)*A;break;case 1:d=f[x+1],g=f[x+2],p=f[x+3];break;default:d=this.getBezierValue(s,x,1,y-2),g=this.getBezierValue(s,x,2,y+18-2),p=this.getBezierValue(s,x,3,y+18*2-2)}if(l==at.setup){let b=c.data;c.mixRotate=b.mixRotate+(d-b.mixRotate)*o,c.mixX=b.mixX+(g-b.mixX)*o,c.mixY=b.mixY+(p-b.mixY)*o}else c.mixRotate+=(d-c.mixRotate)*o,c.mixX+=(g-c.mixX)*o,c.mixY+=(p-c.mixY)*o}}class gn extends Gi{constructor(e,i,s,r){super(e,i,r+"|"+s);S(this,"constraintIndex",0);this.constraintIndex=s}apply(e,i,s,r,o,l,u){let c;if(this.constraintIndex==-1){const f=s>=this.frames[0]?this.getCurveValue(s):0;for(const d of e.physicsConstraints)d.active&&this.global(d.data)&&this.set(d,this.getAbsoluteValue2(s,o,l,this.get(d),this.setup(d),f))}else c=e.physicsConstraints[this.constraintIndex],c.active&&this.set(c,this.getAbsoluteValue(s,o,l,this.get(c),this.setup(c)))}}class s0 extends gn{constructor(t,e,i){super(t,e,i,Bt.physicsConstraintInertia)}setup(t){return t.data.inertia}get(t){return t.inertia}set(t,e){t.inertia=e}global(t){return t.inertiaGlobal}}class n0 extends gn{constructor(t,e,i){super(t,e,i,Bt.physicsConstraintStrength)}setup(t){return t.data.strength}get(t){return t.strength}set(t,e){t.strength=e}global(t){return t.strengthGlobal}}class r0 extends gn{constructor(t,e,i){super(t,e,i,Bt.physicsConstraintDamping)}setup(t){return t.data.damping}get(t){return t.damping}set(t,e){t.damping=e}global(t){return t.dampingGlobal}}class a0 extends gn{constructor(t,e,i){super(t,e,i,Bt.physicsConstraintMass)}setup(t){return 1/t.data.massInverse}get(t){return 1/t.massInverse}set(t,e){t.massInverse=1/e}global(t){return t.massGlobal}}class o0 extends gn{constructor(t,e,i){super(t,e,i,Bt.physicsConstraintWind)}setup(t){return t.data.wind}get(t){return t.wind}set(t,e){t.wind=e}global(t){return t.windGlobal}}class l0 extends gn{constructor(t,e,i){super(t,e,i,Bt.physicsConstraintGravity)}setup(t){return t.data.gravity}get(t){return t.gravity}set(t,e){t.gravity=e}global(t){return t.gravityGlobal}}class h0 extends gn{constructor(t,e,i){super(t,e,i,Bt.physicsConstraintMix)}setup(t){return t.data.mix}get(t){return t.mix}set(t,e){t.mix=e}global(t){return t.mixGlobal}}const po=class po extends ce{constructor(e,i){super(e,po.propertyIds);S(this,"constraintIndex");this.constraintIndex=i}getFrameCount(){return this.frames.length}setFrame(e,i){this.frames[e]=i}apply(e,i,s,r,o,l,u){let c;if(this.constraintIndex!=-1&&(c=e.physicsConstraints[this.constraintIndex],!c.active))return;const f=this.frames;if(i>s)this.apply(e,i,Number.MAX_VALUE,[],o,l,u),i=-1;else if(i>=f[f.length-1])return;if(!(s<f[0])&&(i<f[0]||s>=f[ce.search1(f,i)+1]))if(c!=null)c.reset();else for(const d of e.physicsConstraints)d.active&&d.reset()}};S(po,"propertyIds",[Bt.physicsConstraintReset.toString()]);let ro=po;const Si=class Si extends ce{constructor(e,i,s){super(e,[Bt.sequence+"|"+i+"|"+s.sequence.id]);S(this,"slotIndex");S(this,"attachment");this.slotIndex=i,this.attachment=s}getFrameEntries(){return Si.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(e,i,s,r,o){let l=this.frames;e*=Si.ENTRIES,l[e]=i,l[e+Si.MODE]=s|r<<4,l[e+Si.DELAY]=o}apply(e,i,s,r,o,l,u){let c=e.slots[this.slotIndex];if(!c.bone.active)return;let f=c.attachment,d=this.attachment;if(f!=d&&(!(f instanceof Ui)||f.timelineAttachment!=d))return;if(u==Ge.mixOut){l==at.setup&&(c.sequenceIndex=-1);return}let g=this.frames;if(s<g[0]){(l==at.setup||l==at.first)&&(c.sequenceIndex=-1);return}let p=ce.search(g,s,Si.ENTRIES),x=g[p],y=g[p+Si.MODE],b=g[p+Si.DELAY];if(!this.attachment.sequence)return;let A=y>>4,C=this.attachment.sequence.regions.length,_=Lg[y&15];if(_!=Ne.hold)switch(A+=(s-x)/b+1e-5|0,_){case Ne.once:A=Math.min(C-1,A);break;case Ne.loop:A%=C;break;case Ne.pingpong:{let v=(C<<1)-2;A=v==0?0:A%v,A>=C&&(A=v-A);break}case Ne.onceReverse:A=Math.max(C-1-A,0);break;case Ne.loopReverse:A=C-1-A%C;break;case Ne.pingpongReverse:{let v=(C<<1)-2;A=v==0?0:(A+C-1)%v,A>=C&&(A=v-A)}}c.sequenceIndex=A}};S(Si,"ENTRIES",3),S(Si,"MODE",1),S(Si,"DELAY",2);let ao=Si;const $n=class $n{constructor(t){S(this,"data");S(this,"tracks",new Array);S(this,"timeScale",1);S(this,"unkeyedState",0);S(this,"events",new Array);S(this,"listeners",new Array);S(this,"queue",new OM(this));S(this,"propertyIDs",new Fg);S(this,"animationsChanged",!1);S(this,"trackEntryPool",new Rr(()=>new LM));this.data=t}static emptyAnimation(){return $n._emptyAnimation}update(t){t*=this.timeScale;let e=this.tracks;for(let i=0,s=e.length;i<s;i++){let r=e[i];if(!r)continue;r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;let o=t*r.timeScale;if(r.delay>0){if(r.delay-=o,r.delay>0)continue;o=-r.delay,r.delay=0}let l=r.next;if(l){let u=r.trackLast-l.delay;if(u>=0){for(l.delay=0,l.trackTime+=r.timeScale==0?0:(u/r.timeScale+t)*l.timeScale,r.trackTime+=o,this.setCurrent(i,l,!0);l.mixingFrom;)l.mixTime+=t,l=l.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&!r.mixingFrom){e[i]=null,this.queue.end(r),this.clearNext(r);continue}if(r.mixingFrom&&this.updateMixingFrom(r,t)){let u=r.mixingFrom;for(r.mixingFrom=null,u&&(u.mixingTo=null);u;)this.queue.end(u),u=u.mixingFrom}r.trackTime+=o}this.queue.drain()}updateMixingFrom(t,e){let i=t.mixingFrom;if(!i)return!0;let s=this.updateMixingFrom(i,e);if(i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.nextTrackLast!=-1){const r=t.mixTime==0&&i.mixTime==0;if(t.mixTime>=t.mixDuration||r)return(i.totalAlpha==0||t.mixDuration==0||r)&&(t.mixingFrom=i.mixingFrom,i.mixingFrom!=null&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),s}return i.trackTime+=e*i.timeScale,t.mixTime+=e,!1}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,i=this.tracks,s=!1;for(let g=0,p=i.length;g<p;g++){let x=i[g];if(!x||x.delay>0)continue;s=!0;let y=g==0?at.first:x.mixBlend,b=x.alpha;x.mixingFrom?b*=this.applyMixingFrom(x,t,y):x.trackTime>=x.trackEnd&&!x.next&&(b=0);let A=b>=x.alphaAttachmentThreshold,C=x.animationLast,_=x.getAnimationTime(),v=_,M=e;x.reverse&&(v=x.animation.duration-v,M=null);let T=x.animation.timelines,P=T.length;if(g==0&&b==1||y==at.add){g==0&&(A=!0);for(let B=0;B<P;B++){var r=T[B];r instanceof Gn?this.applyAttachmentTimeline(r,t,v,y,A):r.apply(t,C,v,M,b,y,Ge.mixIn)}}else{let B=x.timelineMode,O=x.shortestRotation,X=!O&&x.timelinesRotation.length!=P<<1;X&&(x.timelinesRotation.length=P<<1);for(let N=0;N<P;N++){let et=T[N],K=B[N]==ph?y:at.setup;!O&&et instanceof no?this.applyRotateTimeline(et,t,v,b,K,x.timelinesRotation,N<<1,X):et instanceof Gn?this.applyAttachmentTimeline(et,t,v,y,A):et.apply(t,C,v,M,b,K,Ge.mixIn)}}this.queueEvents(x,_),e.length=0,x.nextAnimationLast=_,x.nextTrackLast=x.trackTime}for(var o=this.unkeyedState+$p,l=t.slots,u=0,c=t.slots.length;u<c;u++){var f=l[u];if(f.attachmentState==o){var d=f.data.attachmentName;f.setAttachment(d?t.getAttachment(f.data.index,d):null)}}return this.unkeyedState+=2,this.queue.drain(),s}applyMixingFrom(t,e,i){let s=t.mixingFrom;s.mixingFrom&&this.applyMixingFrom(s,e,i);let r=0;t.mixDuration==0?(r=1,i==at.first&&(i=at.setup)):(r=t.mixTime/t.mixDuration,r>1&&(r=1),i!=at.first&&(i=s.mixBlend));let o=r<s.mixAttachmentThreshold,l=r<s.mixDrawOrderThreshold,u=s.animation.timelines,c=u.length,f=s.alpha*t.interruptAlpha,d=f*(1-r),g=s.animationLast,p=s.getAnimationTime(),x=p,y=null;if(s.reverse?x=s.animation.duration-x:r<s.eventThreshold&&(y=this.events),i==at.add)for(let b=0;b<c;b++)u[b].apply(e,g,x,y,d,i,Ge.mixOut);else{let b=s.timelineMode,A=s.timelineHoldMix,C=s.shortestRotation,_=!C&&s.timelinesRotation.length!=c<<1;_&&(s.timelinesRotation.length=c<<1),s.totalAlpha=0;for(let v=0;v<c;v++){let M=u[v],T=Ge.mixOut,P,B=0;switch(b[v]){case ph:if(!l&&M instanceof hn)continue;P=i,B=d;break;case Gp:P=at.setup,B=d;break;case Vp:P=i,B=f;break;case mh:P=at.setup,B=f;break;default:P=at.setup;let O=A[v];B=f*Math.max(0,1-O.mixTime/O.mixDuration);break}s.totalAlpha+=B,!C&&M instanceof no?this.applyRotateTimeline(M,e,x,B,P,s.timelinesRotation,v<<1,_):M instanceof Gn?this.applyAttachmentTimeline(M,e,x,P,o&&B>=s.alphaAttachmentThreshold):(l&&M instanceof hn&&P==at.setup&&(T=Ge.mixIn),M.apply(e,g,x,y,B,P,T))}}return t.mixDuration>0&&this.queueEvents(s,p),this.events.length=0,s.nextAnimationLast=p,s.nextTrackLast=s.trackTime,r}applyAttachmentTimeline(t,e,i,s,r){var o=e.slots[t.slotIndex];o.bone.active&&(i<t.frames[0]?(s==at.setup||s==at.first)&&this.setAttachment(e,o,o.data.attachmentName,r):this.setAttachment(e,o,t.attachmentNames[ce.search1(t.frames,i)],r),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+$p))}setAttachment(t,e,i,s){e.setAttachment(i?t.getAttachment(e.data.index,i):null),s&&(e.attachmentState=this.unkeyedState+YM)}applyRotateTimeline(t,e,i,s,r,o,l,u){if(u&&(o[l]=0),s==1){t.apply(e,0,i,null,1,r,Ge.mixIn);return}let c=e.bones[t.boneIndex];if(!c.active)return;let f=t.frames,d=0,g=0;if(i<f[0])switch(r){case at.setup:c.rotation=c.data.rotation;default:return;case at.first:d=c.rotation,g=c.data.rotation}else d=r==at.setup?c.data.rotation:c.rotation,g=c.data.rotation+t.getCurveValue(i);let p=0,x=g-d;if(x-=Math.ceil(x/360-.5)*360,x==0)p=o[l];else{let y=0,b=0;u?(y=0,b=x):(y=o[l],b=o[l+1]);let A=y-y%360;p=x+A;let C=x>=0,_=y>=0;Math.abs(b)<=90&&ft.signum(b)!=ft.signum(x)&&(Math.abs(y-A)>180?(p+=360*ft.signum(y),_=C):A!=0?p-=360*ft.signum(y):_=C),_!=C&&(p+=360*ft.signum(y)),o[l]=p}o[l+1]=x,c.rotation=d+p*s}queueEvents(t,e){let i=t.animationStart,s=t.animationEnd,r=s-i,o=t.trackLast%r,l=this.events,u=0,c=l.length;for(;u<c;u++){let d=l[u];if(d.time<o)break;d.time>s||this.queue.event(t,d)}let f=!1;if(t.loop)if(r==0)f=!0;else{const d=Math.floor(t.trackTime/r);f=d>0&&d>Math.floor(t.trackLast/r)}else f=e>=s&&t.animationLast<s;for(f&&this.queue.complete(t);u<c;u++){let d=l[u];d.time<i||this.queue.event(t,d)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let i=e;for(;;){let s=i.mixingFrom;if(!s)break;this.queue.end(s),i.mixingFrom=null,i.mixingTo=null,i=s}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,i){let s=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,s&&(i&&this.queue.interrupt(s),e.mixingFrom=s,s.mixingTo=e,e.mixTime=0,s.mixingFrom&&s.mixDuration>0&&(e.interruptAlpha*=Math.min(1,s.mixTime/s.mixDuration)),s.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,i=!1){let s=this.data.skeletonData.findAnimation(e);if(!s)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,s,i)}setAnimationWith(t,e,i=!1){if(!e)throw new Error("animation cannot be null.");let s=!0,r=this.expandToIndex(t);r&&(r.nextTrackLast==-1?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,s=!1):this.clearNext(r));let o=this.trackEntry(t,e,i,r);return this.setCurrent(t,o,s),this.queue.drain(),o}addAnimation(t,e,i=!1,s=0){let r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,s)}addAnimationWith(t,e,i=!1,s=0){if(!e)throw new Error("animation cannot be null.");let r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;let o=this.trackEntry(t,e,i,r);return r?(r.next=o,o.previous=r,s<=0&&(s+=r.getTrackComplete()-o.mixDuration)):(this.setCurrent(t,o,!0),this.queue.drain()),o.delay=s,o}setEmptyAnimation(t,e=0){let i=this.setAnimationWith(t,$n.emptyAnimation(),!1);return i.mixDuration=e,i.trackEnd=e,i}addEmptyAnimation(t,e=0,i=0){let s=this.addAnimationWith(t,$n.emptyAnimation(),!1,i);return i<=0&&(s.delay+=s.mixDuration-e),s.mixDuration=e,s.trackEnd=e,s}setEmptyAnimations(t=0){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let i=0,s=this.tracks.length;i<s;i++){let r=this.tracks[i];r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(dt.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,i,s){let r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=t,r.animation=e,r.loop=i,r.holdPrevious=!1,r.reverse=!1,r.shortestRotation=!1,r.eventThreshold=0,r.alphaAttachmentThreshold=0,r.mixAttachmentThreshold=0,r.mixDrawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.mixTime=0,r.mixDuration=s?this.data.getMix(s.animation,e):0,r.interruptAlpha=1,r.totalAlpha=0,r.mixBlend=at.replace,r}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let e=0,i=t.length;e<i;e++){let s=t[e];if(s){for(;s.mixingFrom;)s=s.mixingFrom;do(!s.mixingTo||s.mixBlend!=at.add)&&this.computeHold(s),s=s.mixingTo;while(s)}}}computeHold(t){let e=t.mixingTo,i=t.animation.timelines,s=t.animation.timelines.length,r=t.timelineMode;r.length=s;let o=t.timelineHoldMix;o.length=0;let l=this.propertyIDs;if(e&&e.holdPrevious){for(let u=0;u<s;u++)r[u]=l.addAll(i[u].getPropertyIds())?mh:Vp;return}t:for(let u=0;u<s;u++){let c=i[u],f=c.getPropertyIds();if(!l.addAll(f))r[u]=ph;else if(!e||c instanceof Gn||c instanceof hn||c instanceof Fr||!e.animation.hasTimeline(f))r[u]=Gp;else{for(let d=e.mixingTo;d;d=d.mixingTo)if(!d.animation.hasTimeline(f)){if(t.mixDuration>0){r[u]=DM,o[u]=d;continue t}break}r[u]=mh}}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}};S($n,"_emptyAnimation",new mc("<empty>",[],0));let Gh=$n;class LM{constructor(){S(this,"animation",null);S(this,"previous",null);S(this,"next",null);S(this,"mixingFrom",null);S(this,"mixingTo",null);S(this,"listener",null);S(this,"trackIndex",0);S(this,"loop",!1);S(this,"holdPrevious",!1);S(this,"reverse",!1);S(this,"shortestRotation",!1);S(this,"eventThreshold",0);S(this,"mixAttachmentThreshold",0);S(this,"alphaAttachmentThreshold",0);S(this,"mixDrawOrderThreshold",0);S(this,"animationStart",0);S(this,"animationEnd",0);S(this,"animationLast",0);S(this,"nextAnimationLast",0);S(this,"delay",0);S(this,"trackTime",0);S(this,"trackLast",0);S(this,"nextTrackLast",0);S(this,"trackEnd",0);S(this,"timeScale",0);S(this,"alpha",0);S(this,"mixTime",0);S(this,"_mixDuration",0);S(this,"interruptAlpha",0);S(this,"totalAlpha",0);S(this,"mixBlend",at.replace);S(this,"timelineMode",new Array);S(this,"timelineHoldMix",new Array);S(this,"timelinesRotation",new Array)}get mixDuration(){return this._mixDuration}set mixDuration(t){this._mixDuration=t}setMixDurationWithDelay(t,e){this._mixDuration=t,this.previous!=null&&e<=0&&(e+=this.previous.getTrackComplete()-t),this.delay=e}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(t!=0){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}}class OM{constructor(t){S(this,"objects",[]);S(this,"drainDisabled",!1);S(this,"animState");this.animState=t}start(t){this.objects.push(ti.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(ti.interrupt),this.objects.push(t)}end(t){this.objects.push(ti.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(ti.dispose),this.objects.push(t)}complete(t){this.objects.push(ti.complete),this.objects.push(t)}event(t,e){this.objects.push(ti.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let i=0;i<t.length;i+=2){let s=t[i],r=t[i+1];switch(s){case ti.start:r.listener&&r.listener.start&&r.listener.start(r);for(let l=0;l<e.length;l++){let u=e[l];u.start&&u.start(r)}break;case ti.interrupt:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let l=0;l<e.length;l++){let u=e[l];u.interrupt&&u.interrupt(r)}break;case ti.end:r.listener&&r.listener.end&&r.listener.end(r);for(let l=0;l<e.length;l++){let u=e[l];u.end&&u.end(r)}case ti.dispose:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let l=0;l<e.length;l++){let u=e[l];u.dispose&&u.dispose(r)}this.animState.trackEntryPool.free(r);break;case ti.complete:r.listener&&r.listener.complete&&r.listener.complete(r);for(let l=0;l<e.length;l++){let u=e[l];u.complete&&u.complete(r)}break;case ti.event:let o=t[i+++2];r.listener&&r.listener.event&&r.listener.event(r,o);for(let l=0;l<e.length;l++){let u=e[l];u.event&&u.event(r,o)}break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var ti;(function(n){n[n.start=0]="start",n[n.interrupt=1]="interrupt",n[n.end=2]="end",n[n.dispose=3]="dispose",n[n.complete=4]="complete",n[n.event=5]="event"})(ti||(ti={}));const ph=0,Gp=1,Vp=2,mh=3,DM=4,$p=1,YM=2;class NM{constructor(t){S(this,"skeletonData");S(this,"animationToMixTime",{});S(this,"defaultMix",0);if(!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,i){let s=this.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);let r=this.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);this.setMixWith(s,r,i)}setMixWith(t,e,i){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let s=t.name+"."+e.name;this.animationToMixTime[s]=i}getMix(t,e){let i=t.name+"."+e.name,s=this.animationToMixTime[i];return s===void 0?this.defaultMix:s}}class wo extends Ui{constructor(e){super(e);S(this,"color",new kt(1,1,1,1))}copy(){let e=new wo(this.name);return this.copyTo(e),e.color.setFromColor(this.color),e}}class cn extends Ui{constructor(e){super(e);S(this,"endSlot",null);S(this,"color",new kt(.2275,.2275,.8078,1))}copy(){let e=new cn(this.name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e}}class XM{constructor(t){S(this,"_image");this._image=t}getImage(){return this._image}}var ke;(function(n){n[n.Nearest=9728]="Nearest",n[n.Linear=9729]="Linear",n[n.MipMap=9987]="MipMap",n[n.MipMapNearestNearest=9984]="MipMapNearestNearest",n[n.MipMapLinearNearest=9985]="MipMapLinearNearest",n[n.MipMapNearestLinear=9986]="MipMapNearestLinear",n[n.MipMapLinearLinear=9987]="MipMapLinearLinear"})(ke||(ke={}));var vs;(function(n){n[n.MirroredRepeat=33648]="MirroredRepeat",n[n.ClampToEdge=33071]="ClampToEdge",n[n.Repeat=10497]="Repeat"})(vs||(vs={}));class UM{constructor(){S(this,"texture");S(this,"u",0);S(this,"v",0);S(this,"u2",0);S(this,"v2",0);S(this,"width",0);S(this,"height",0);S(this,"degrees",0);S(this,"offsetX",0);S(this,"offsetY",0);S(this,"originalWidth",0);S(this,"originalHeight",0)}}class WM{constructor(t){S(this,"pages",new Array);S(this,"regions",new Array);let e=new zM(t),i=new Array(4),s={};s.size=f=>{f.width=parseInt(i[1]),f.height=parseInt(i[2])},s.format=()=>{},s.filter=f=>{f.minFilter=dt.enumValue(ke,i[1]),f.magFilter=dt.enumValue(ke,i[2])},s.repeat=f=>{i[1].indexOf("x")!=-1&&(f.uWrap=vs.Repeat),i[1].indexOf("y")!=-1&&(f.vWrap=vs.Repeat)},s.pma=f=>{f.pma=i[1]=="true"};var r={};r.xy=f=>{f.x=parseInt(i[1]),f.y=parseInt(i[2])},r.size=f=>{f.width=parseInt(i[1]),f.height=parseInt(i[2])},r.bounds=f=>{f.x=parseInt(i[1]),f.y=parseInt(i[2]),f.width=parseInt(i[3]),f.height=parseInt(i[4])},r.offset=f=>{f.offsetX=parseInt(i[1]),f.offsetY=parseInt(i[2])},r.orig=f=>{f.originalWidth=parseInt(i[1]),f.originalHeight=parseInt(i[2])},r.offsets=f=>{f.offsetX=parseInt(i[1]),f.offsetY=parseInt(i[2]),f.originalWidth=parseInt(i[3]),f.originalHeight=parseInt(i[4])},r.rotate=f=>{let d=i[1];d=="true"?f.degrees=90:d!="false"&&(f.degrees=parseInt(d))},r.index=f=>{f.index=parseInt(i[1])};let o=e.readLine();for(;o&&o.trim().length==0;)o=e.readLine();for(;!(!o||o.trim().length==0||e.readEntry(i,o)==0);)o=e.readLine();let l=null,u=null,c=null;for(;o!==null;)if(o.trim().length==0)l=null,o=e.readLine();else if(l){let f=new c0(l,o);for(;;){let d=e.readEntry(i,o=e.readLine());if(d==0)break;let g=r[i[0]];if(g)g(f);else{u||(u=[]),c||(c=[]),u.push(i[0]);let p=[];for(let x=0;x<d;x++)p.push(parseInt(i[x+1]));c.push(p)}}f.originalWidth==0&&f.originalHeight==0&&(f.originalWidth=f.width,f.originalHeight=f.height),u&&u.length>0&&c&&c.length>0&&(f.names=u,f.values=c,u=null,c=null),f.u=f.x/l.width,f.v=f.y/l.height,f.degrees==90?(f.u2=(f.x+f.height)/l.width,f.v2=(f.y+f.width)/l.height):(f.u2=(f.x+f.width)/l.width,f.v2=(f.y+f.height)/l.height),this.regions.push(f)}else{for(l=new GM(o.trim());e.readEntry(i,o=e.readLine())!=0;){let f=s[i[0]];f&&f(l)}this.pages.push(l)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(let i of this.pages)i.setTexture(t.get(e+i.name))}dispose(){var t;for(let e=0;e<this.pages.length;e++)(t=this.pages[e].texture)==null||t.dispose()}}class zM{constructor(t){S(this,"lines");S(this,"index",0);this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e||(e=e.trim(),e.length==0))return 0;let i=e.indexOf(":");if(i==-1)return 0;t[0]=e.substr(0,i).trim();for(let s=1,r=i+1;;s++){let o=e.indexOf(",",r);if(o==-1)return t[s]=e.substr(r).trim(),s;if(t[s]=e.substr(r,o-r).trim(),r=o+1,s==4)return 4}}}class GM{constructor(t){S(this,"name");S(this,"minFilter",ke.Nearest);S(this,"magFilter",ke.Nearest);S(this,"uWrap",vs.ClampToEdge);S(this,"vWrap",vs.ClampToEdge);S(this,"texture",null);S(this,"width",0);S(this,"height",0);S(this,"pma",!1);S(this,"regions",new Array);this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);for(let e of this.regions)e.texture=t}}class c0 extends UM{constructor(e,i){super();S(this,"page");S(this,"name");S(this,"x",0);S(this,"y",0);S(this,"offsetX",0);S(this,"offsetY",0);S(this,"originalWidth",0);S(this,"originalHeight",0);S(this,"index",0);S(this,"degrees",0);S(this,"names",null);S(this,"values",null);this.page=e,this.name=i,e.regions.push(this)}}class Ni extends Ui{constructor(e,i){super(e);S(this,"region",null);S(this,"path");S(this,"regionUVs",[]);S(this,"uvs",[]);S(this,"triangles",[]);S(this,"color",new kt(1,1,1,1));S(this,"width",0);S(this,"height",0);S(this,"hullLength",0);S(this,"edges",[]);S(this,"parentMesh",null);S(this,"sequence",null);S(this,"tempColor",new kt(0,0,0,0));this.path=i}updateRegion(){if(!this.region)throw new Error("Region not set.");let e=this.regionUVs;(!this.uvs||this.uvs.length!=e.length)&&(this.uvs=dt.newFloatArray(e.length));let i=this.uvs,s=this.uvs.length,r=this.region.u,o=this.region.v,l=0,u=0;if(this.region instanceof c0){let c=this.region,f=c.page,d=f.width,g=f.height;switch(c.degrees){case 90:r-=(c.originalHeight-c.offsetY-c.height)/d,o-=(c.originalWidth-c.offsetX-c.width)/g,l=c.originalHeight/d,u=c.originalWidth/g;for(let p=0;p<s;p+=2)i[p]=r+e[p+1]*l,i[p+1]=o+(1-e[p])*u;return;case 180:r-=(c.originalWidth-c.offsetX-c.width)/d,o-=c.offsetY/g,l=c.originalWidth/d,u=c.originalHeight/g;for(let p=0;p<s;p+=2)i[p]=r+(1-e[p])*l,i[p+1]=o+(1-e[p+1])*u;return;case 270:r-=c.offsetY/d,o-=c.offsetX/g,l=c.originalHeight/d,u=c.originalWidth/g;for(let p=0;p<s;p+=2)i[p]=r+(1-e[p+1])*l,i[p+1]=o+e[p]*u;return}r-=c.offsetX/d,o-=(c.originalHeight-c.offsetY-c.height)/g,l=c.originalWidth/d,u=c.originalHeight/g}else this.region?(l=this.region.u2-r,u=this.region.v2-o):(r=o=0,l=u=1);for(let c=0;c<s;c+=2)i[c]=r+e[c]*l,i[c+1]=o+e[c+1]*u}getParentMesh(){return this.parentMesh}setParentMesh(e){this.parentMesh=e,e&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let e=new Ni(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Array(this.regionUVs.length),dt.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=new Array(this.uvs.length),dt.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),dt.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,e.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(e.edges=new Array(this.edges.length),dt.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e}computeWorldVertices(e,i,s,r,o,l){this.sequence!=null&&this.sequence.apply(e,this),super.computeWorldVertices(e,i,s,r,o,l)}newLinkedMesh(){let e=new Ni(this.name,this.path);return e.region=this.region,e.color.setFromColor(this.color),e.timelineAttachment=this.timelineAttachment,e.setParentMesh(this.parentMesh?this.parentMesh:this),e.region!=null&&e.updateRegion(),e}}class tr extends Ui{constructor(e){super(e);S(this,"lengths",[]);S(this,"closed",!1);S(this,"constantSpeed",!1);S(this,"color",new kt(1,1,1,1))}copy(){let e=new tr(this.name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),dt.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e}}class xc extends Ui{constructor(e){super(e);S(this,"x",0);S(this,"y",0);S(this,"rotation",0);S(this,"color",new kt(.38,.94,0,1))}computeWorldPosition(e,i){return i.x=this.x*e.a+this.y*e.b+e.worldX,i.y=this.x*e.c+this.y*e.d+e.worldY,i}computeWorldRotation(e){const i=this.rotation*ft.degRad,s=Math.cos(i),r=Math.sin(i),o=s*e.a+r*e.b,l=s*e.c+r*e.d;return ft.atan2Deg(l,o)}copy(){let e=new xc(this.name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e}}const zt=class zt extends Bg{constructor(e,i){super(e);S(this,"x",0);S(this,"y",0);S(this,"scaleX",1);S(this,"scaleY",1);S(this,"rotation",0);S(this,"width",0);S(this,"height",0);S(this,"color",new kt(1,1,1,1));S(this,"path");S(this,"region",null);S(this,"sequence",null);S(this,"offset",dt.newFloatArray(8));S(this,"uvs",dt.newFloatArray(8));S(this,"tempColor",new kt(1,1,1,1));this.path=i}updateRegion(){if(!this.region)throw new Error("Region not set.");let e=this.region,i=this.uvs;if(e==null){i[0]=0,i[1]=0,i[2]=0,i[3]=1,i[4]=1,i[5]=1,i[6]=1,i[7]=0;return}let s=this.width/this.region.originalWidth*this.scaleX,r=this.height/this.region.originalHeight*this.scaleY,o=-this.width/2*this.scaleX+this.region.offsetX*s,l=-this.height/2*this.scaleY+this.region.offsetY*r,u=o+this.region.width*s,c=l+this.region.height*r,f=this.rotation*ft.degRad,d=Math.cos(f),g=Math.sin(f),p=this.x,x=this.y,y=o*d+p,b=o*g,A=l*d+x,C=l*g,_=u*d+p,v=u*g,M=c*d+x,T=c*g,P=this.offset;P[0]=y-C,P[1]=A+b,P[2]=y-T,P[3]=M+b,P[4]=_-T,P[5]=M+v,P[6]=_-C,P[7]=A+v,e.degrees==90?(i[0]=e.u2,i[1]=e.v2,i[2]=e.u,i[3]=e.v2,i[4]=e.u,i[5]=e.v,i[6]=e.u2,i[7]=e.v):(i[0]=e.u,i[1]=e.v2,i[2]=e.u,i[3]=e.v,i[4]=e.u2,i[5]=e.v,i[6]=e.u2,i[7]=e.v2)}computeWorldVertices(e,i,s,r){this.sequence!=null&&this.sequence.apply(e,this);let o=e.bone,l=this.offset,u=o.worldX,c=o.worldY,f=o.a,d=o.b,g=o.c,p=o.d,x=0,y=0;x=l[0],y=l[1],i[s]=x*f+y*d+u,i[s+1]=x*g+y*p+c,s+=r,x=l[2],y=l[3],i[s]=x*f+y*d+u,i[s+1]=x*g+y*p+c,s+=r,x=l[4],y=l[5],i[s]=x*f+y*d+u,i[s+1]=x*g+y*p+c,s+=r,x=l[6],y=l[7],i[s]=x*f+y*d+u,i[s+1]=x*g+y*p+c}copy(){let e=new zt(this.name,this.path);return e.region=this.region,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,dt.arrayCopy(this.uvs,0,e.uvs,0,8),dt.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e.sequence=this.sequence!=null?this.sequence.copy():null,e}};S(zt,"X1",0),S(zt,"Y1",1),S(zt,"C1R",2),S(zt,"C1G",3),S(zt,"C1B",4),S(zt,"C1A",5),S(zt,"U1",6),S(zt,"V1",7),S(zt,"X2",8),S(zt,"Y2",9),S(zt,"C2R",10),S(zt,"C2G",11),S(zt,"C2B",12),S(zt,"C2A",13),S(zt,"U2",14),S(zt,"V2",15),S(zt,"X3",16),S(zt,"Y3",17),S(zt,"C3R",18),S(zt,"C3G",19),S(zt,"C3B",20),S(zt,"C3A",21),S(zt,"U3",22),S(zt,"V3",23),S(zt,"X4",24),S(zt,"Y4",25),S(zt,"C4R",26),S(zt,"C4G",27),S(zt,"C4B",28),S(zt,"C4A",29),S(zt,"U4",30),S(zt,"V4",31);let Yi=zt;class VM{constructor(t){S(this,"atlas");this.atlas=t}loadSequence(t,e,i){let s=i.regions;for(let r=0,o=s.length;r<o;r++){let l=i.getPath(e,r),u=this.atlas.findRegion(l);if(u==null)throw new Error("Region not found in atlas: "+l+" (sequence: "+t+")");s[r]=u}}newRegionAttachment(t,e,i,s){let r=new Yi(e,i);if(s!=null)this.loadSequence(e,i,s);else{let o=this.atlas.findRegion(i);if(!o)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");r.region=o}return r}newMeshAttachment(t,e,i,s){let r=new Ni(e,i);if(s!=null)this.loadSequence(e,i,s);else{let o=this.atlas.findRegion(i);if(!o)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");r.region=o}return r}newBoundingBoxAttachment(t,e){return new wo(e)}newPathAttachment(t,e){return new tr(e)}newPointAttachment(t,e){return new xc(e)}newClippingAttachment(t,e){return new cn(e)}}class u0{constructor(t,e,i){S(this,"index",0);S(this,"name");S(this,"parent",null);S(this,"length",0);S(this,"x",0);S(this,"y",0);S(this,"rotation",0);S(this,"scaleX",1);S(this,"scaleY",1);S(this,"shearX",0);S(this,"shearY",0);S(this,"inherit",me.Normal);S(this,"skinRequired",!1);S(this,"color",new kt);S(this,"icon");S(this,"visible",!1);if(t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i}}var me;(function(n){n[n.Normal=0]="Normal",n[n.OnlyTranslation=1]="OnlyTranslation",n[n.NoRotationOrReflection=2]="NoRotationOrReflection",n[n.NoScale=3]="NoScale",n[n.NoScaleOrReflection=4]="NoScaleOrReflection"})(me||(me={}));class Hp{constructor(t,e,i){S(this,"data");S(this,"skeleton");S(this,"parent",null);S(this,"children",new Array);S(this,"x",0);S(this,"y",0);S(this,"rotation",0);S(this,"scaleX",0);S(this,"scaleY",0);S(this,"shearX",0);S(this,"shearY",0);S(this,"ax",0);S(this,"ay",0);S(this,"arotation",0);S(this,"ascaleX",0);S(this,"ascaleY",0);S(this,"ashearX",0);S(this,"ashearY",0);S(this,"a",0);S(this,"b",0);S(this,"c",0);S(this,"d",0);S(this,"worldY",0);S(this,"worldX",0);S(this,"inherit",me.Normal);S(this,"sorted",!1);S(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}isActive(){return this.active}update(t){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,i,s,r,o,l){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=s,this.ascaleY=r,this.ashearX=o,this.ashearY=l;let u=this.parent;if(!u){let p=this.skeleton;const x=p.scaleX,y=p.scaleY,b=(i+o)*ft.degRad,A=(i+90+l)*ft.degRad;this.a=Math.cos(b)*s*x,this.b=Math.cos(A)*r*x,this.c=Math.sin(b)*s*y,this.d=Math.sin(A)*r*y,this.worldX=t*x+p.x,this.worldY=e*y+p.y;return}let c=u.a,f=u.b,d=u.c,g=u.d;switch(this.worldX=c*t+f*e+u.worldX,this.worldY=d*t+g*e+u.worldY,this.inherit){case me.Normal:{const p=(i+o)*ft.degRad,x=(i+90+l)*ft.degRad,y=Math.cos(p)*s,b=Math.cos(x)*r,A=Math.sin(p)*s,C=Math.sin(x)*r;this.a=c*y+f*A,this.b=c*b+f*C,this.c=d*y+g*A,this.d=d*b+g*C;return}case me.OnlyTranslation:{const p=(i+o)*ft.degRad,x=(i+90+l)*ft.degRad;this.a=Math.cos(p)*s,this.b=Math.cos(x)*r,this.c=Math.sin(p)*s,this.d=Math.sin(x)*r;break}case me.NoRotationOrReflection:{let p=1/this.skeleton.scaleX,x=1/this.skeleton.scaleY;c*=p,d*=x;let y=c*c+d*d,b=0;y>1e-4?(y=Math.abs(c*g*x-f*p*d)/y,f=d*y,g=c*y,b=Math.atan2(d,c)*ft.radDeg):(c=0,d=0,b=90-Math.atan2(g,f)*ft.radDeg);const A=(i+o-b)*ft.degRad,C=(i+l-b+90)*ft.degRad,_=Math.cos(A)*s,v=Math.cos(C)*r,M=Math.sin(A)*s,T=Math.sin(C)*r;this.a=c*_-f*M,this.b=c*v-f*T,this.c=d*_+g*M,this.d=d*v+g*T;break}case me.NoScale:case me.NoScaleOrReflection:{i*=ft.degRad;const p=Math.cos(i),x=Math.sin(i);let y=(c*p+f*x)/this.skeleton.scaleX,b=(d*p+g*x)/this.skeleton.scaleY,A=Math.sqrt(y*y+b*b);A>1e-5&&(A=1/A),y*=A,b*=A,A=Math.sqrt(y*y+b*b),this.inherit==me.NoScale&&c*g-f*d<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(A=-A),i=Math.PI/2+Math.atan2(b,y);const C=Math.cos(i)*A,_=Math.sin(i)*A;o*=ft.degRad,l=(90+l)*ft.degRad;const v=Math.cos(o)*s,M=Math.cos(l)*r,T=Math.sin(o)*s,P=Math.sin(l)*r;this.a=y*v+C*T,this.b=y*M+C*P,this.c=b*v+_*T,this.d=b*M+_*P;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY,this.inherit=t.inherit}updateAppliedTransform(){let t=this.parent;if(!t){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*ft.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*ft.radDeg;return}let e=t.a,i=t.b,s=t.c,r=t.d,o=1/(e*r-i*s),l=r*o,u=i*o,c=s*o,f=e*o,d=this.worldX-t.worldX,g=this.worldY-t.worldY;this.ax=d*l-g*u,this.ay=g*f-d*c;let p,x,y,b;if(this.inherit==me.OnlyTranslation)p=this.a,x=this.b,y=this.c,b=this.d;else{switch(this.inherit){case me.NoRotationOrReflection:{let M=Math.abs(e*r-i*s)/(e*e+s*s);i=-s*this.skeleton.scaleX*M/this.skeleton.scaleY,r=e*this.skeleton.scaleY*M/this.skeleton.scaleX,o=1/(e*r-i*s),l=r*o,u=i*o;break}case me.NoScale:case me.NoScaleOrReflection:let A=ft.cosDeg(this.rotation),C=ft.sinDeg(this.rotation);e=(e*A+i*C)/this.skeleton.scaleX,s=(s*A+r*C)/this.skeleton.scaleY;let _=Math.sqrt(e*e+s*s);_>1e-5&&(_=1/_),e*=_,s*=_,_=Math.sqrt(e*e+s*s),this.inherit==me.NoScale&&o<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(_=-_);let v=ft.PI/2+Math.atan2(s,e);i=Math.cos(v)*_,r=Math.sin(v)*_,o=1/(e*r-i*s),l=r*o,u=i*o,c=s*o,f=e*o}p=l*this.a-u*this.c,x=l*this.b-u*this.d,y=f*this.c-c*this.a,b=f*this.d-c*this.b}if(this.ashearX=0,this.ascaleX=Math.sqrt(p*p+y*y),this.ascaleX>1e-4){let A=p*b-x*y;this.ascaleY=A/this.ascaleX,this.ashearY=-Math.atan2(p*x+y*b,A)*ft.radDeg,this.arotation=Math.atan2(y,p)*ft.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(x*x+b*b),this.ashearY=0,this.arotation=90-Math.atan2(b,x)*ft.radDeg}getWorldRotationX(){return Math.atan2(this.c,this.a)*ft.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*ft.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(t){let e=1/(this.a*this.d-this.b*this.c),i=t.x-this.worldX,s=t.y-this.worldY;return t.x=i*this.d*e-s*this.b*e,t.y=s*this.a*e-i*this.c*e,t}localToWorld(t){let e=t.x,i=t.y;return t.x=e*this.a+i*this.b+this.worldX,t.y=e*this.c+i*this.d+this.worldY,t}worldToParent(t){if(t==null)throw new Error("world cannot be null.");return this.parent==null?t:this.parent.worldToLocal(t)}parentToWorld(t){if(t==null)throw new Error("world cannot be null.");return this.parent==null?t:this.parent.localToWorld(t)}worldToLocalRotation(t){let e=ft.sinDeg(t),i=ft.cosDeg(t);return Math.atan2(this.a*e-this.c*i,this.d*i-this.b*e)*ft.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=ft.sinDeg(t),i=ft.cosDeg(t);return Math.atan2(i*this.c+e*this.d,i*this.a+e*this.b)*ft.radDeg}rotateWorld(t){t*=ft.degRad;const e=Math.sin(t),i=Math.cos(t),s=this.a,r=this.b;this.a=i*s-e*this.c,this.b=i*r-e*this.d,this.c=e*s+i*this.c,this.d=e*r+i*this.d}}class vo{constructor(t,e,i){S(this,"name");S(this,"order");S(this,"skinRequired");this.name=t,this.order=e,this.skinRequired=i}}class f0{constructor(t,e){S(this,"data");S(this,"intValue",0);S(this,"floatValue",0);S(this,"stringValue",null);S(this,"time",0);S(this,"volume",0);S(this,"balance",0);if(!e)throw new Error("data cannot be null.");this.time=t,this.data=e}}class d0{constructor(t){S(this,"name");S(this,"intValue",0);S(this,"floatValue",0);S(this,"stringValue",null);S(this,"audioPath",null);S(this,"volume",0);S(this,"balance",0);this.name=t}}class $M{constructor(t,e){S(this,"data");S(this,"bones");S(this,"target");S(this,"bendDirection",0);S(this,"compress",!1);S(this,"stretch",!1);S(this,"mix",1);S(this,"softness",0);S(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let s=0;s<t.bones.length;s++){let r=e.findBone(t.bones[s].name);if(!r)throw new Error(`Couldn't find bone ${t.bones[s].name}`);this.bones.push(r)}let i=e.findBone(t.target.name);if(!i)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=i,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch}isActive(){return this.active}setToSetupPose(){const t=this.data;this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch}update(t){if(this.mix==0)return;let e=this.target,i=this.bones;switch(i.length){case 1:this.apply1(i[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(i[0],i[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(t,e,i,s,r,o,l){let u=t.parent;if(!u)throw new Error("IK bone must have parent.");let c=u.a,f=u.b,d=u.c,g=u.d,p=-t.ashearX-t.arotation,x=0,y=0;switch(t.inherit){case me.OnlyTranslation:x=(e-t.worldX)*ft.signum(t.skeleton.scaleX),y=(i-t.worldY)*ft.signum(t.skeleton.scaleY);break;case me.NoRotationOrReflection:let C=Math.abs(c*g-f*d)/Math.max(1e-4,c*c+d*d),_=c/t.skeleton.scaleX,v=d/t.skeleton.scaleY;f=-v*C*t.skeleton.scaleX,g=_*C*t.skeleton.scaleY,p+=Math.atan2(v,_)*ft.radDeg;default:let M=e-u.worldX,T=i-u.worldY,P=c*g-f*d;Math.abs(P)<=1e-4?(x=0,y=0):(x=(M*g-T*f)/P-t.ax,y=(T*c-M*d)/P-t.ay)}p+=Math.atan2(y,x)*ft.radDeg,t.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);let b=t.ascaleX,A=t.ascaleY;if(s||r){switch(t.inherit){case me.NoScale:case me.NoScaleOrReflection:x=e-t.worldX,y=i-t.worldY}const C=t.data.length*b;if(C>1e-4){const _=x*x+y*y;if(s&&_<C*C||r&&_>C*C){const v=(Math.sqrt(_)/C-1)*l+1;b*=v,o&&(A*=v)}}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+p*l,b,A,t.ashearX,t.ashearY)}apply2(t,e,i,s,r,o,l,u,c){if(t.inherit!=me.Normal||e.inherit!=me.Normal)return;let f=t.ax,d=t.ay,g=t.ascaleX,p=t.ascaleY,x=g,y=p,b=e.ascaleX,A=0,C=0,_=0;g<0?(g=-g,A=180,_=-1):(A=0,_=1),p<0&&(p=-p,_=-_),b<0?(b=-b,C=180):C=0;let v=e.ax,M=0,T=0,P=0,B=t.a,O=t.b,X=t.c,N=t.d,et=Math.abs(g-p)<=1e-4;!et||o?(M=0,T=B*v+t.worldX,P=X*v+t.worldY):(M=e.ay,T=B*v+O*M+t.worldX,P=X*v+N*M+t.worldY);let K=t.parent;if(!K)throw new Error("IK parent must itself have a parent.");B=K.a,O=K.b,X=K.c,N=K.d;let V=B*N-O*X,J=T-K.worldX,E=P-K.worldY;V=Math.abs(V)<=1e-4?0:1/V;let L=(J*N-E*O)*V-f,Y=(E*B-J*X)*V-d,W=Math.sqrt(L*L+Y*Y),q=e.data.length*b,j,tt;if(W<1e-4){this.apply1(t,i,s,!1,o,!1,c),e.updateWorldTransformWith(v,M,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}J=i-K.worldX,E=s-K.worldY;let Z=(J*N-E*O)*V-f,ct=(E*B-J*X)*V-d,lt=Z*Z+ct*ct;if(u!=0){u*=g*(b+1)*.5;let gt=Math.sqrt(lt),It=gt-W-q*g+u;if(It>0){let wt=Math.min(1,It/(u*2))-1;wt=(It-u*(1-wt*wt))/gt,Z-=wt*Z,ct-=wt*ct,lt=Z*Z+ct*ct}}t:if(et){q*=g;let gt=(lt-W*W-q*q)/(2*W*q);gt<-1?(gt=-1,tt=Math.PI*r):gt>1?(gt=1,tt=0,o&&(B=(Math.sqrt(lt)/(W+q)-1)*c+1,x*=B,l&&(y*=B))):tt=Math.acos(gt)*r,B=W+q*gt,O=q*Math.sin(tt),j=Math.atan2(ct*B-Z*O,Z*B+ct*O)}else{B=g*q,O=p*q;let gt=B*B,It=O*O,wt=Math.atan2(ct,Z);X=It*W*W+gt*lt-gt*It;let ee=-2*It*W,ie=It-gt;if(N=ee*ee-4*ie*X,N>=0){let be=Math.sqrt(N);ee<0&&(be=-be),be=-(ee+be)*.5;let ii=be/ie,rs=X/be,Cs=Math.abs(ii)<Math.abs(rs)?ii:rs;if(ii=lt-Cs*Cs,ii>=0){E=Math.sqrt(ii)*r,j=wt-Math.atan2(E,Cs),tt=Math.atan2(E/p,(Cs-W)/g);break t}}let Pe=ft.PI,Kt=W-B,St=Kt*Kt,Dt=0,Le=0,Ii=W+B,As=Ii*Ii,Vi=0;X=-B*W/(gt-It),X>=-1&&X<=1&&(X=Math.acos(X),J=B*Math.cos(X)+W,E=O*Math.sin(X),N=J*J+E*E,N<St&&(Pe=X,St=N,Kt=J,Dt=E),N>As&&(Le=X,As=N,Ii=J,Vi=E)),lt<=(St+As)*.5?(j=wt-Math.atan2(Dt*r,Kt),tt=Pe*r):(j=wt-Math.atan2(Vi*r,Ii),tt=Le*r)}let Pt=Math.atan2(M,v)*_,Ct=t.arotation;j=(j-Pt)*ft.radDeg+A-Ct,j>180?j-=360:j<-180&&(j+=360),t.updateWorldTransformWith(f,d,Ct+j*c,x,y,0,0),Ct=e.arotation,tt=((tt+Pt)*ft.radDeg-e.ashearX)*_+C-Ct,tt>180?tt-=360:tt<-180&&(tt+=360),e.updateWorldTransformWith(v,M,Ct+tt*c,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}class p0 extends vo{constructor(e){super(e,0,!1);S(this,"bones",new Array);S(this,"_target",null);S(this,"bendDirection",0);S(this,"compress",!1);S(this,"stretch",!1);S(this,"uniform",!1);S(this,"mix",0);S(this,"softness",0)}set target(e){this._target=e}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class m0 extends vo{constructor(e){super(e,0,!1);S(this,"bones",new Array);S(this,"_target",null);S(this,"positionMode",es.Fixed);S(this,"spacingMode",Me.Fixed);S(this,"rotateMode",un.Chain);S(this,"offsetRotation",0);S(this,"position",0);S(this,"spacing",0);S(this,"mixRotate",0);S(this,"mixX",0);S(this,"mixY",0)}set target(e){this._target=e}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}var es;(function(n){n[n.Fixed=0]="Fixed",n[n.Percent=1]="Percent"})(es||(es={}));var Me;(function(n){n[n.Length=0]="Length",n[n.Fixed=1]="Fixed",n[n.Percent=2]="Percent",n[n.Proportional=3]="Proportional"})(Me||(Me={}));var un;(function(n){n[n.Tangent=0]="Tangent",n[n.Chain=1]="Chain",n[n.ChainScale=2]="ChainScale"})(un||(un={}));const fi=class fi{constructor(t,e){S(this,"data");S(this,"bones");S(this,"target");S(this,"position",0);S(this,"spacing",0);S(this,"mixRotate",0);S(this,"mixX",0);S(this,"mixY",0);S(this,"spaces",new Array);S(this,"positions",new Array);S(this,"world",new Array);S(this,"curves",new Array);S(this,"lengths",new Array);S(this,"segments",new Array);S(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let s=0,r=t.bones.length;s<r;s++){let o=e.findBone(t.bones[s].name);if(!o)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(o)}let i=e.findSlot(t.target.name);if(!i)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=i,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}setToSetupPose(){const t=this.data;this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}update(t){let e=this.target.getAttachment();if(!(e instanceof tr))return;let i=this.mixRotate,s=this.mixX,r=this.mixY;if(i==0&&s==0&&r==0)return;let o=this.data,l=o.rotateMode==un.Tangent,u=o.rotateMode==un.ChainScale,c=this.bones,f=c.length,d=l?f:f+1,g=dt.setArraySize(this.spaces,d),p=u?this.lengths=dt.setArraySize(this.lengths,f):[],x=this.spacing;switch(o.spacingMode){case Me.Percent:if(u)for(let T=0,P=d-1;T<P;T++){let B=c[T],O=B.data.length,X=O*B.a,N=O*B.c;p[T]=Math.sqrt(X*X+N*N)}dt.arrayFill(g,1,d,x);break;case Me.Proportional:let v=0;for(let T=0,P=d-1;T<P;){let B=c[T],O=B.data.length;if(O<fi.epsilon)u&&(p[T]=0),g[++T]=x;else{let X=O*B.a,N=O*B.c,et=Math.sqrt(X*X+N*N);u&&(p[T]=et),g[++T]=et,v+=et}}if(v>0){v=d/v*x;for(let T=1;T<d;T++)g[T]*=v}break;default:let M=o.spacingMode==Me.Length;for(let T=0,P=d-1;T<P;){let B=c[T],O=B.data.length;if(O<fi.epsilon)u&&(p[T]=0),g[++T]=x;else{let X=O*B.a,N=O*B.c,et=Math.sqrt(X*X+N*N);u&&(p[T]=et),g[++T]=(M?O+x:x)*et/O}}}let y=this.computeWorldPositions(e,d,l),b=y[0],A=y[1],C=o.offsetRotation,_=!1;if(C==0)_=o.rotateMode==un.Chain;else{_=!1;let v=this.target.bone;C*=v.a*v.d-v.b*v.c>0?ft.degRad:-.01745329277777778}for(let v=0,M=3;v<f;v++,M+=3){let T=c[v];T.worldX+=(b-T.worldX)*s,T.worldY+=(A-T.worldY)*r;let P=y[M],B=y[M+1],O=P-b,X=B-A;if(u){let N=p[v];if(N!=0){let et=(Math.sqrt(O*O+X*X)/N-1)*i+1;T.a*=et,T.c*=et}}if(b=P,A=B,i>0){let N=T.a,et=T.b,K=T.c,V=T.d,J=0,E=0,L=0;if(l?J=y[M-1]:g[v+1]==0?J=y[M+2]:J=Math.atan2(X,O),J-=Math.atan2(K,N),_){E=Math.cos(J),L=Math.sin(J);let Y=T.data.length;b+=(Y*(E*N-L*K)-O)*i,A+=(Y*(L*N+E*K)-X)*i}else J+=C;J>ft.PI?J-=ft.PI2:J<-3.1415927&&(J+=ft.PI2),J*=i,E=Math.cos(J),L=Math.sin(J),T.a=E*N-L*K,T.b=E*et-L*V,T.c=L*N+E*K,T.d=L*et+E*V}T.updateAppliedTransform()}}computeWorldPositions(t,e,i){let s=this.target,r=this.position,o=this.spaces,l=dt.setArraySize(this.positions,e*3+2),u=this.world,c=t.closed,f=t.worldVerticesLength,d=f/6,g=fi.NONE;if(!t.constantSpeed){let Y=t.lengths;d-=c?1:2;let W=Y[d];this.data.positionMode==es.Percent&&(r*=W);let q;switch(this.data.spacingMode){case Me.Percent:q=W;break;case Me.Proportional:q=W/e;break;default:q=1}u=dt.setArraySize(this.world,8);for(let j=0,tt=0,Z=0;j<e;j++,tt+=3){let ct=o[j]*q;r+=ct;let lt=r;if(c)lt%=W,lt<0&&(lt+=W),Z=0;else if(lt<0){g!=fi.BEFORE&&(g=fi.BEFORE,t.computeWorldVertices(s,2,4,u,0,2)),this.addBeforePosition(lt,u,0,l,tt);continue}else if(lt>W){g!=fi.AFTER&&(g=fi.AFTER,t.computeWorldVertices(s,f-6,4,u,0,2)),this.addAfterPosition(lt-W,u,0,l,tt);continue}for(;;Z++){let Pt=Y[Z];if(!(lt>Pt)){if(Z==0)lt/=Pt;else{let Ct=Y[Z-1];lt=(lt-Ct)/(Pt-Ct)}break}}Z!=g&&(g=Z,c&&Z==d?(t.computeWorldVertices(s,f-4,4,u,0,2),t.computeWorldVertices(s,0,4,u,4,2)):t.computeWorldVertices(s,Z*6+2,8,u,0,2)),this.addCurvePosition(lt,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,tt,i||j>0&&ct==0)}return l}c?(f+=2,u=dt.setArraySize(this.world,f),t.computeWorldVertices(s,2,f-4,u,0,2),t.computeWorldVertices(s,0,2,u,f-4,2),u[f-2]=u[0],u[f-1]=u[1]):(d--,f-=4,u=dt.setArraySize(this.world,f),t.computeWorldVertices(s,2,f,u,0,2));let p=dt.setArraySize(this.curves,d),x=0,y=u[0],b=u[1],A=0,C=0,_=0,v=0,M=0,T=0,P=0,B=0,O=0,X=0,N=0,et=0,K=0,V=0;for(let Y=0,W=2;Y<d;Y++,W+=6)A=u[W],C=u[W+1],_=u[W+2],v=u[W+3],M=u[W+4],T=u[W+5],P=(y-A*2+_)*.1875,B=(b-C*2+v)*.1875,O=((A-_)*3-y+M)*.09375,X=((C-v)*3-b+T)*.09375,N=P*2+O,et=B*2+X,K=(A-y)*.75+P+O*.16666667,V=(C-b)*.75+B+X*.16666667,x+=Math.sqrt(K*K+V*V),K+=N,V+=et,N+=O,et+=X,x+=Math.sqrt(K*K+V*V),K+=N,V+=et,x+=Math.sqrt(K*K+V*V),K+=N+O,V+=et+X,x+=Math.sqrt(K*K+V*V),p[Y]=x,y=M,b=T;this.data.positionMode==es.Percent&&(r*=x);let J;switch(this.data.spacingMode){case Me.Percent:J=x;break;case Me.Proportional:J=x/e;break;default:J=1}let E=this.segments,L=0;for(let Y=0,W=0,q=0,j=0;Y<e;Y++,W+=3){let tt=o[Y]*J;r+=tt;let Z=r;if(c)Z%=x,Z<0&&(Z+=x),q=0;else if(Z<0){this.addBeforePosition(Z,u,0,l,W);continue}else if(Z>x){this.addAfterPosition(Z-x,u,f-4,l,W);continue}for(;;q++){let ct=p[q];if(!(Z>ct)){if(q==0)Z/=ct;else{let lt=p[q-1];Z=(Z-lt)/(ct-lt)}break}}if(q!=g){g=q;let ct=q*6;for(y=u[ct],b=u[ct+1],A=u[ct+2],C=u[ct+3],_=u[ct+4],v=u[ct+5],M=u[ct+6],T=u[ct+7],P=(y-A*2+_)*.03,B=(b-C*2+v)*.03,O=((A-_)*3-y+M)*.006,X=((C-v)*3-b+T)*.006,N=P*2+O,et=B*2+X,K=(A-y)*.3+P+O*.16666667,V=(C-b)*.3+B+X*.16666667,L=Math.sqrt(K*K+V*V),E[0]=L,ct=1;ct<8;ct++)K+=N,V+=et,N+=O,et+=X,L+=Math.sqrt(K*K+V*V),E[ct]=L;K+=N,V+=et,L+=Math.sqrt(K*K+V*V),E[8]=L,K+=N+O,V+=et+X,L+=Math.sqrt(K*K+V*V),E[9]=L,j=0}for(Z*=L;;j++){let ct=E[j];if(!(Z>ct)){if(j==0)Z/=ct;else{let lt=E[j-1];Z=j+(Z-lt)/(ct-lt)}break}}this.addCurvePosition(Z*.1,y,b,A,C,_,v,M,T,l,W,i||Y>0&&tt==0)}return l}addBeforePosition(t,e,i,s,r){let o=e[i],l=e[i+1],u=e[i+2]-o,c=e[i+3]-l,f=Math.atan2(c,u);s[r]=o+t*Math.cos(f),s[r+1]=l+t*Math.sin(f),s[r+2]=f}addAfterPosition(t,e,i,s,r){let o=e[i+2],l=e[i+3],u=o-e[i],c=l-e[i+1],f=Math.atan2(c,u);s[r]=o+t*Math.cos(f),s[r+1]=l+t*Math.sin(f),s[r+2]=f}addCurvePosition(t,e,i,s,r,o,l,u,c,f,d,g){if(t==0||isNaN(t)){f[d]=e,f[d+1]=i,f[d+2]=Math.atan2(r-i,s-e);return}let p=t*t,x=p*t,y=1-t,b=y*y,A=b*y,C=y*t,_=C*3,v=y*_,M=_*t,T=e*A+s*v+o*M+u*x,P=i*A+r*v+l*M+c*x;f[d]=T,f[d+1]=P,g&&(t<.001?f[d+2]=Math.atan2(r-i,s-e):f[d+2]=Math.atan2(P-(i*b+r*C*2+l*p),T-(e*b+s*C*2+o*p)))}};S(fi,"NONE",-1),S(fi,"BEFORE",-2),S(fi,"AFTER",-3),S(fi,"epsilon",1e-5);let Vh=fi;class HM{constructor(t,e){S(this,"data");S(this,"_bone",null);S(this,"inertia",0);S(this,"strength",0);S(this,"damping",0);S(this,"massInverse",0);S(this,"wind",0);S(this,"gravity",0);S(this,"mix",0);S(this,"_reset",!0);S(this,"ux",0);S(this,"uy",0);S(this,"cx",0);S(this,"cy",0);S(this,"tx",0);S(this,"ty",0);S(this,"xOffset",0);S(this,"xVelocity",0);S(this,"yOffset",0);S(this,"yVelocity",0);S(this,"rotateOffset",0);S(this,"rotateVelocity",0);S(this,"scaleOffset",0);S(this,"scaleVelocity",0);S(this,"active",!1);S(this,"skeleton");S(this,"remaining",0);S(this,"lastTime",0);this.data=t,this.skeleton=e,this.bone=e.bones[t.bone.index],this.inertia=t.inertia,this.strength=t.strength,this.damping=t.damping,this.massInverse=t.massInverse,this.wind=t.wind,this.gravity=t.gravity,this.mix=t.mix}set bone(t){this._bone=t}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=!0,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0}setToSetupPose(){const t=this.data;this.inertia=t.inertia,this.strength=t.strength,this.damping=t.damping,this.massInverse=t.massInverse,this.wind=t.wind,this.gravity=t.gravity,this.mix=t.mix}isActive(){return this.active}update(t){const e=this.mix;if(e==0)return;const i=this.data.x>0,s=this.data.y>0,r=this.data.rotate>0||this.data.shearX>0,o=this.data.scaleX>0,l=this.bone,u=l.data.length;switch(t){case Ys.none:return;case Ys.reset:this.reset();case Ys.update:const c=this.skeleton,f=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=f,this.lastTime=c.time;const d=l.worldX,g=l.worldY;if(this._reset)this._reset=!1,this.ux=d,this.uy=g;else{let p=this.remaining,x=this.inertia,y=this.data.step,b=this.skeleton.data.referenceScale,A=-1,C=this.data.limit*f,_=C*Math.abs(c.scaleY);if(C*=Math.abs(c.scaleX),i||s){if(i){const v=(this.ux-d)*x;this.xOffset+=v>C?C:v<-C?-C:v,this.ux=d}if(s){const v=(this.uy-g)*x;this.yOffset+=v>_?_:v<-_?-_:v,this.uy=g}if(p>=y){A=Math.pow(this.damping,60*y);const v=this.massInverse*y,M=this.strength,T=this.wind*b*c.scaleX,P=this.gravity*b*c.scaleY;do i&&(this.xVelocity+=(T-this.xOffset*M)*v,this.xOffset+=this.xVelocity*y,this.xVelocity*=A),s&&(this.yVelocity-=(P+this.yOffset*M)*v,this.yOffset+=this.yVelocity*y,this.yVelocity*=A),p-=y;while(p>=y)}i&&(l.worldX+=this.xOffset*e*this.data.x),s&&(l.worldY+=this.yOffset*e*this.data.y)}if(r||o){let v=Math.atan2(l.c,l.a),M=0,T=0,P=0,B=this.cx-l.worldX,O=this.cy-l.worldY;if(B>C?B=C:B<-C&&(B=-C),O>_?O=_:O<-_&&(O=-_),r){P=(this.data.rotate+this.data.shearX)*e;let X=Math.atan2(O+this.ty,B+this.tx)-v-this.rotateOffset*P;this.rotateOffset+=(X-Math.ceil(X*ft.invPI2-.5)*ft.PI2)*x,X=this.rotateOffset*P+v,M=Math.cos(X),T=Math.sin(X),o&&(X=u*l.getWorldScaleX(),X>0&&(this.scaleOffset+=(B*M+O*T)*x/X))}else{M=Math.cos(v),T=Math.sin(v);const X=u*l.getWorldScaleX();X>0&&(this.scaleOffset+=(B*M+O*T)*x/X)}if(p=this.remaining,p>=y){A==-1&&(A=Math.pow(this.damping,60*y));const X=this.massInverse*y,N=this.strength,et=this.wind,K=Br.yDown?-this.gravity:this.gravity,V=u/b;for(;;)if(p-=y,o&&(this.scaleVelocity+=(et*M-K*T-this.scaleOffset*N)*X,this.scaleOffset+=this.scaleVelocity*y,this.scaleVelocity*=A),r){if(this.rotateVelocity-=((et*T+K*M)*V+this.rotateOffset*N)*X,this.rotateOffset+=this.rotateVelocity*y,this.rotateVelocity*=A,p<y)break;const J=this.rotateOffset*P+v;M=Math.cos(J),T=Math.sin(J)}else if(p<y)break}}this.remaining=p}this.cx=l.worldX,this.cy=l.worldY;break;case Ys.pose:i&&(l.worldX+=this.xOffset*e*this.data.x),s&&(l.worldY+=this.yOffset*e*this.data.y)}if(r){let c=this.rotateOffset*e,f=0,d=0,g=0;if(this.data.shearX>0){let p=0;this.data.rotate>0&&(p=c*this.data.rotate,f=Math.sin(p),d=Math.cos(p),g=l.b,l.b=d*g-f*l.d,l.d=f*g+d*l.d),p+=c*this.data.shearX,f=Math.sin(p),d=Math.cos(p),g=l.a,l.a=d*g-f*l.c,l.c=f*g+d*l.c}else c*=this.data.rotate,f=Math.sin(c),d=Math.cos(c),g=l.a,l.a=d*g-f*l.c,l.c=f*g+d*l.c,g=l.b,l.b=d*g-f*l.d,l.d=f*g+d*l.d}if(o){const c=1+this.scaleOffset*e*this.data.scaleX;l.a*=c,l.c*=c}t!=Ys.pose&&(this.tx=u*l.a,this.ty=u*l.c),l.updateAppliedTransform()}translate(t,e){this.ux-=t,this.uy-=e,this.cx-=t,this.cy-=e}rotate(t,e,i){const s=i*ft.degRad,r=Math.cos(s),o=Math.sin(s),l=this.cx-t,u=this.cy-e;this.translate(l*r-u*o-l,l*o+u*r-u)}}class qM{constructor(t,e){S(this,"data");S(this,"bone");S(this,"color");S(this,"darkColor",null);S(this,"attachment",null);S(this,"attachmentState",0);S(this,"sequenceIndex",-1);S(this,"deform",new Array);if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new kt,this.darkColor=t.darkColor?new kt:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&((!(t instanceof Ui)||!(this.attachment instanceof Ui)||t.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class jM{constructor(t,e){S(this,"data");S(this,"bones");S(this,"target");S(this,"mixRotate",0);S(this,"mixX",0);S(this,"mixY",0);S(this,"mixScaleX",0);S(this,"mixScaleY",0);S(this,"mixShearY",0);S(this,"temp",new io);S(this,"active",!1);if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let s=0;s<t.bones.length;s++){let r=e.findBone(t.bones[s].name);if(!r)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(r)}let i=e.findBone(t.target.name);if(!i)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=i,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY}isActive(){return this.active}setToSetupPose(){const t=this.data;this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY}update(t){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleY==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,o=this.mixShearY,l=e!=0||i!=0,u=this.target,c=u.a,f=u.b,d=u.c,g=u.d,p=c*g-f*d>0?ft.degRad:-.01745329277777778,x=this.data.offsetRotation*p,y=this.data.offsetShearY*p,b=this.bones;for(let A=0,C=b.length;A<C;A++){let _=b[A];if(t!=0){let v=_.a,M=_.b,T=_.c,P=_.d,B=Math.atan2(d,c)-Math.atan2(T,v)+x;B>ft.PI?B-=ft.PI2:B<-3.1415927&&(B+=ft.PI2),B*=t;let O=Math.cos(B),X=Math.sin(B);_.a=O*v-X*T,_.b=O*M-X*P,_.c=X*v+O*T,_.d=X*M+O*P}if(l){let v=this.temp;u.localToWorld(v.set(this.data.offsetX,this.data.offsetY)),_.worldX+=(v.x-_.worldX)*e,_.worldY+=(v.y-_.worldY)*i}if(s!=0){let v=Math.sqrt(_.a*_.a+_.c*_.c);v!=0&&(v=(v+(Math.sqrt(c*c+d*d)-v+this.data.offsetScaleX)*s)/v),_.a*=v,_.c*=v}if(r!=0){let v=Math.sqrt(_.b*_.b+_.d*_.d);v!=0&&(v=(v+(Math.sqrt(f*f+g*g)-v+this.data.offsetScaleY)*r)/v),_.b*=v,_.d*=v}if(o>0){let v=_.b,M=_.d,T=Math.atan2(M,v),P=Math.atan2(g,f)-Math.atan2(d,c)-(T-Math.atan2(_.c,_.a));P>ft.PI?P-=ft.PI2:P<-3.1415927&&(P+=ft.PI2),P=T+(P+y)*o;let B=Math.sqrt(v*v+M*M);_.b=Math.cos(P)*B,_.d=Math.sin(P)*B}_.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,o=this.mixShearY,l=e!=0||i!=0,u=this.target,c=u.a,f=u.b,d=u.c,g=u.d,p=c*g-f*d>0?ft.degRad:-.01745329277777778,x=this.data.offsetRotation*p,y=this.data.offsetShearY*p,b=this.bones;for(let A=0,C=b.length;A<C;A++){let _=b[A];if(t!=0){let v=_.a,M=_.b,T=_.c,P=_.d,B=Math.atan2(d,c)+x;B>ft.PI?B-=ft.PI2:B<-3.1415927&&(B+=ft.PI2),B*=t;let O=Math.cos(B),X=Math.sin(B);_.a=O*v-X*T,_.b=O*M-X*P,_.c=X*v+O*T,_.d=X*M+O*P}if(l){let v=this.temp;u.localToWorld(v.set(this.data.offsetX,this.data.offsetY)),_.worldX+=v.x*e,_.worldY+=v.y*i}if(s!=0){let v=(Math.sqrt(c*c+d*d)-1+this.data.offsetScaleX)*s+1;_.a*=v,_.c*=v}if(r!=0){let v=(Math.sqrt(f*f+g*g)-1+this.data.offsetScaleY)*r+1;_.b*=v,_.d*=v}if(o>0){let v=Math.atan2(g,f)-Math.atan2(d,c);v>ft.PI?v-=ft.PI2:v<-3.1415927&&(v+=ft.PI2);let M=_.b,T=_.d;v=Math.atan2(T,M)+(v-ft.PI/2+y)*o;let P=Math.sqrt(M*M+T*T);_.b=Math.cos(v)*P,_.d=Math.sin(v)*P}_.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,o=this.mixShearY,l=this.target,u=this.bones;for(let c=0,f=u.length;c<f;c++){let d=u[c],g=d.arotation;t!=0&&(g+=(l.arotation-g+this.data.offsetRotation)*t);let p=d.ax,x=d.ay;p+=(l.ax-p+this.data.offsetX)*e,x+=(l.ay-x+this.data.offsetY)*i;let y=d.ascaleX,b=d.ascaleY;s!=0&&y!=0&&(y=(y+(l.ascaleX-y+this.data.offsetScaleX)*s)/y),r!=0&&b!=0&&(b=(b+(l.ascaleY-b+this.data.offsetScaleY)*r)/b);let A=d.ashearY;o!=0&&(A+=(l.ashearY-A+this.data.offsetShearY)*o),d.updateWorldTransformWith(p,x,g,y,b,d.ashearX,A)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,s=this.mixScaleX,r=this.mixScaleY,o=this.mixShearY,l=this.target,u=this.bones;for(let c=0,f=u.length;c<f;c++){let d=u[c],g=d.arotation+(l.arotation+this.data.offsetRotation)*t,p=d.ax+(l.ax+this.data.offsetX)*e,x=d.ay+(l.ay+this.data.offsetY)*i,y=d.ascaleX*((l.ascaleX-1+this.data.offsetScaleX)*s+1),b=d.ascaleY*((l.ascaleY-1+this.data.offsetScaleY)*r+1),A=d.ashearY+(l.ashearY+this.data.offsetShearY)*o;d.updateWorldTransformWith(p,x,g,y,b,d.ashearX,A)}}}const Hn=class Hn{constructor(t){S(this,"data");S(this,"bones");S(this,"slots");S(this,"drawOrder");S(this,"ikConstraints");S(this,"transformConstraints");S(this,"pathConstraints");S(this,"physicsConstraints");S(this,"_updateCache",new Array);S(this,"skin",null);S(this,"color");S(this,"scaleX",1);S(this,"_scaleY",1);S(this,"x",0);S(this,"y",0);S(this,"time",0);if(!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let i=t.bones[e],s;if(!i.parent)s=new Hp(i,this,null);else{let r=this.bones[i.parent.index];s=new Hp(i,this,r),r.children.push(s)}this.bones.push(s)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let i=t.slots[e],s=this.bones[i.boneData.index],r=new qM(i,s);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let i=t.ikConstraints[e];this.ikConstraints.push(new $M(i,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let i=t.transformConstraints[e];this.transformConstraints.push(new jM(i,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let i=t.pathConstraints[e];this.pathConstraints.push(new Vh(i,this))}this.physicsConstraints=new Array;for(let e=0;e<t.physicsConstraints.length;e++){let i=t.physicsConstraints[e];this.physicsConstraints.push(new HM(i,this))}this.color=new kt(1,1,1,1),this.updateCache()}get scaleY(){return Hn.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}updateCache(){let t=this._updateCache;t.length=0;let e=this.bones;for(let g=0,p=e.length;g<p;g++){let x=e[g];x.sorted=x.data.skinRequired,x.active=!x.sorted}if(this.skin){let g=this.skin.bones;for(let p=0,x=this.skin.bones.length;p<x;p++){let y=this.bones[g[p].index];do y.sorted=!1,y.active=!0,y=y.parent;while(y)}}let i=this.ikConstraints,s=this.transformConstraints,r=this.pathConstraints,o=this.physicsConstraints,l=i.length,u=s.length,c=r.length,f=this.physicsConstraints.length,d=l+u+c+f;t:for(let g=0;g<d;g++){for(let p=0;p<l;p++){let x=i[p];if(x.data.order==g){this.sortIkConstraint(x);continue t}}for(let p=0;p<u;p++){let x=s[p];if(x.data.order==g){this.sortTransformConstraint(x);continue t}}for(let p=0;p<c;p++){let x=r[p];if(x.data.order==g){this.sortPathConstraint(x);continue t}}for(let p=0;p<f;p++){const x=o[p];if(x.data.order==g){this.sortPhysicsConstraint(x);continue t}}}for(let g=0,p=e.length;g<p;g++)this.sortBone(e[g])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&dt.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let i=t.bones,s=i[0];if(this.sortBone(s),i.length==1)this._updateCache.push(t),this.sortReset(s.children);else{let r=i[i.length-1];this.sortBone(r),this._updateCache.push(t),this.sortReset(s.children),r.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&dt.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,i=e.data.index,s=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,s),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,s);for(let u=0,c=this.data.skins.length;u<c;u++)this.sortPathConstraintAttachment(this.data.skins[u],i,s);let r=e.getAttachment();r instanceof tr&&this.sortPathConstraintAttachmentWith(r,s);let o=t.bones,l=o.length;for(let u=0;u<l;u++)this.sortBone(o[u]);this._updateCache.push(t);for(let u=0;u<l;u++)this.sortReset(o[u].children);for(let u=0;u<l;u++)o[u].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&dt.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,i=e.length;if(t.data.local)for(let s=0;s<i;s++){let r=e[s];this.sortBone(r.parent),this.sortBone(r)}else for(let s=0;s<i;s++)this.sortBone(e[s]);this._updateCache.push(t);for(let s=0;s<i;s++)this.sortReset(e[s].children);for(let s=0;s<i;s++)e[s].sorted=!0}sortPathConstraintAttachment(t,e,i){let s=t.attachments[e];if(s)for(let r in s)this.sortPathConstraintAttachmentWith(s[r],i)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof tr))return;let i=t.bones;if(!i)this.sortBone(e);else{let s=this.bones;for(let r=0,o=i.length;r<o;){let l=i[r++];for(l+=r;r<l;)this.sortBone(s[i[r++]])}}}sortPhysicsConstraint(t){const e=t.bone;t.active=e.active&&(!t.data.skinRequired||this.skin!=null&&dt.contains(this.skin.constraints,t.data,!0)),t.active&&(this.sortBone(e),this._updateCache.push(t),this.sortReset(e.children),e.sorted=!0)}sortBone(t){if(!t||t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,i=t.length;e<i;e++){let s=t[e];s.active&&(s.sorted&&this.sortReset(s.children),s.sorted=!1)}}updateWorldTransform(t){if(t==null)throw new Error("physics is undefined");let e=this.bones;for(let s=0,r=e.length;s<r;s++){let o=e[s];o.ax=o.x,o.ay=o.y,o.arotation=o.rotation,o.ascaleX=o.scaleX,o.ascaleY=o.scaleY,o.ashearX=o.shearX,o.ashearY=o.shearY}let i=this._updateCache;for(let s=0,r=i.length;s<r;s++)i[s].update(t)}updateWorldTransformWith(t,e){if(!e)throw new Error("parent cannot be null.");let i=this.bones;for(let b=1,A=i.length;b<A;b++){let C=i[b];C.ax=C.x,C.ay=C.y,C.arotation=C.rotation,C.ascaleX=C.scaleX,C.ascaleY=C.scaleY,C.ashearX=C.shearX,C.ashearY=C.shearY}let s=this.getRootBone();if(!s)throw new Error("Root bone must not be null.");let r=e.a,o=e.b,l=e.c,u=e.d;s.worldX=r*this.x+o*this.y+e.worldX,s.worldY=l*this.x+u*this.y+e.worldY;const c=(s.rotation+s.shearX)*ft.degRad,f=(s.rotation+90+s.shearY)*ft.degRad,d=Math.cos(c)*s.scaleX,g=Math.cos(f)*s.scaleY,p=Math.sin(c)*s.scaleX,x=Math.sin(f)*s.scaleY;s.a=(r*d+o*p)*this.scaleX,s.b=(r*g+o*x)*this.scaleX,s.c=(l*d+u*p)*this.scaleY,s.d=(l*g+u*x)*this.scaleY;let y=this._updateCache;for(let b=0,A=y.length;b<A;b++){let C=y[b];C!=s&&C.update(t)}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){for(const t of this.bones)t.setToSetupPose();for(const t of this.ikConstraints)t.setToSetupPose();for(const t of this.transformConstraints)t.setToSetupPose();for(const t of this.pathConstraints)t.setToSetupPose();for(const t of this.physicsConstraints)t.setToSetupPose()}setSlotsToSetupPose(){let t=this.slots;dt.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,s=e.length;i<s;i++){let r=e[i];if(r.data.name==t)return r}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,s=e.length;i<s;i++){let r=e[i];if(r.data.name==t)return r}return null}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let i=0,s=e.length;i<s;i++){let r=e[i],o=r.data.attachmentName;if(o){let l=t.getAttachment(i,o);l&&r.setAttachment(l)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){let i=this.data.findSlot(t);if(!i)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(i.index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){let i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");let i=this.slots;for(let s=0,r=i.length;s<r;s++){let o=i[s];if(o.data.name==t){let l=null;if(e&&(l=this.getAttachment(s,e),!l))throw new Error("Attachment not found: "+e+", for slot: "+t);o.setAttachment(l);return}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.ikConstraints.find(e=>e.data.name==t)??null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.transformConstraints.find(e=>e.data.name==t)??null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.pathConstraints.find(e=>e.data.name==t)??null}findPhysicsConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find(e=>e.data.name==t)??null}getBoundsRect(t){let e=new io,i=new io;return this.getBounds(e,i,void 0,t),{x:e.x,y:e.y,width:i.x,height:i.y}}getBounds(t,e,i=new Array(2),s=null){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let r=this.drawOrder,o=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;for(let f=0,d=r.length;f<d;f++){let g=r[f];if(!g.bone.active)continue;let p=0,x=null,y=null,b=g.getAttachment();if(b instanceof Yi)p=8,x=dt.setArraySize(i,p,0),b.computeWorldVertices(g,x,0,2),y=Hn.quadTriangles;else if(b instanceof Ni){let A=b;p=A.worldVerticesLength,x=dt.setArraySize(i,p,0),A.computeWorldVertices(g,0,p,x,0,2),y=A.triangles}else if(b instanceof cn&&s!=null){s.clipStart(g,b);continue}if(x&&y){s!=null&&s.isClipping()&&(s.clipTriangles(x,y,y.length),x=s.clippedVertices,p=s.clippedVertices.length);for(let A=0,C=x.length;A<C;A+=2){let _=x[A],v=x[A+1];o=Math.min(o,_),l=Math.min(l,v),u=Math.max(u,_),c=Math.max(c,v)}}s!=null&&s.clipEndWithSlot(g)}s!=null&&s.clipEnd(),t.set(o,l),e.set(u-o,c-l)}update(t){this.time+=t}physicsTranslate(t,e){const i=this.physicsConstraints;for(let s=0,r=i.length;s<r;s++)i[s].translate(t,e)}physicsRotate(t,e,i){const s=this.physicsConstraints;for(let r=0,o=s.length;r<o;r++)s[r].rotate(t,e,i)}};S(Hn,"quadTriangles",[0,1,2,2,3,0]),S(Hn,"yDown",!1);let Br=Hn;var Ys;(function(n){n[n.none=0]="none",n[n.reset=1]="reset",n[n.update=2]="update",n[n.pose=3]="pose"})(Ys||(Ys={}));class g0 extends vo{constructor(e){super(e,0,!1);S(this,"_bone",null);S(this,"x",0);S(this,"y",0);S(this,"rotate",0);S(this,"scaleX",0);S(this,"shearX",0);S(this,"limit",0);S(this,"step",0);S(this,"inertia",0);S(this,"strength",0);S(this,"damping",0);S(this,"massInverse",0);S(this,"wind",0);S(this,"gravity",0);S(this,"mix",0);S(this,"inertiaGlobal",!1);S(this,"strengthGlobal",!1);S(this,"dampingGlobal",!1);S(this,"massGlobal",!1);S(this,"windGlobal",!1);S(this,"gravityGlobal",!1);S(this,"mixGlobal",!1)}set bone(e){this._bone=e}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}}class oo{constructor(){S(this,"name",null);S(this,"bones",new Array);S(this,"slots",new Array);S(this,"skins",new Array);S(this,"defaultSkin",null);S(this,"events",new Array);S(this,"animations",new Array);S(this,"ikConstraints",new Array);S(this,"transformConstraints",new Array);S(this,"pathConstraints",new Array);S(this,"physicsConstraints",new Array);S(this,"x",0);S(this,"y",0);S(this,"width",0);S(this,"height",0);S(this,"referenceScale",100);S(this,"version",null);S(this,"hash",null);S(this,"fps",0);S(this,"imagesPath",null);S(this,"audioPath",null)}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,s=e.length;i<s;i++){let r=e[i];if(r.name==t)return r}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,s=e.length;i<s;i++){let r=e[i];if(r.name==t)return r}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let e=this.skins;for(let i=0,s=e.length;i<s;i++){let r=e[i];if(r.name==t)return r}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let i=0,s=e.length;i<s;i++){let r=e[i];if(r.name==t)return r}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let e=this.animations;for(let i=0,s=e.length;i<s;i++){let r=e[i];if(r.name==t)return r}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let i=0,s=e.length;i<s;i++){const r=e[i];if(r.name==t)return r}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let i=0,s=e.length;i<s;i++){const r=e[i];if(r.name==t)return r}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let i=0,s=e.length;i<s;i++){const r=e[i];if(r.name==t)return r}return null}findPhysicsConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.physicsConstraints;for(let i=0,s=e.length;i<s;i++){const r=e[i];if(r.name==t)return r}return null}}class qp{constructor(t=0,e,i){S(this,"slotIndex");S(this,"name");S(this,"attachment");this.slotIndex=t,this.name=e,this.attachment=i}}class $h{constructor(t){S(this,"name");S(this,"attachments",new Array);S(this,"bones",Array());S(this,"constraints",new Array);S(this,"color",new kt(.99607843,.61960787,.30980393,1));if(!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,i){if(!i)throw new Error("attachment cannot be null.");let s=this.attachments;t>=s.length&&(s.length=t+1),s[t]||(s[t]={}),s[t][e]=i}addSkin(t){for(let s=0;s<t.bones.length;s++){let r=t.bones[s],o=!1;for(let l=0;l<this.bones.length;l++)if(this.bones[l]==r){o=!0;break}o||this.bones.push(r)}for(let s=0;s<t.constraints.length;s++){let r=t.constraints[s],o=!1;for(let l=0;l<this.constraints.length;l++)if(this.constraints[l]==r){o=!0;break}o||this.constraints.push(r)}let e=t.getAttachments();for(let s=0;s<e.length;s++){var i=e[s];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(t){for(let s=0;s<t.bones.length;s++){let r=t.bones[s],o=!1;for(let l=0;l<this.bones.length;l++)if(this.bones[l]==r){o=!0;break}o||this.bones.push(r)}for(let s=0;s<t.constraints.length;s++){let r=t.constraints[s],o=!1;for(let l=0;l<this.constraints.length;l++)if(this.constraints[l]==r){o=!0;break}o||this.constraints.push(r)}let e=t.getAttachments();for(let s=0;s<e.length;s++){var i=e[s];i.attachment&&(i.attachment instanceof Ni?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)))}}getAttachment(t,e){let i=this.attachments[t];return i?i[e]:null}removeAttachment(t,e){let i=this.attachments[t];i&&delete i[e]}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){let i=this.attachments[e];if(i)for(let s in i){let r=i[s];r&&t.push(new qp(e,s,r))}}return t}getAttachmentsForSlot(t,e){let i=this.attachments[t];if(i)for(let s in i){let r=i[s];r&&e.push(new qp(t,s,r))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let i=0;for(let s=0;s<t.slots.length;s++){let r=t.slots[s],o=r.getAttachment();if(o&&i<e.attachments.length){let l=e.attachments[i];for(let u in l){let c=l[u];if(o==c){let f=this.getAttachment(i,u);f&&r.setAttachment(f);break}}}i++}}}class x0{constructor(t,e,i){S(this,"index",0);S(this,"name");S(this,"boneData");S(this,"color",new kt(1,1,1,1));S(this,"darkColor",null);S(this,"attachmentName",null);S(this,"blendMode",Xs.Normal);S(this,"visible",!0);if(t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i}}var Xs;(function(n){n[n.Normal=0]="Normal",n[n.Additive=1]="Additive",n[n.Multiply=2]="Multiply",n[n.Screen=3]="Screen"})(Xs||(Xs={}));class y0 extends vo{constructor(e){super(e,0,!1);S(this,"bones",new Array);S(this,"_target",null);S(this,"mixRotate",0);S(this,"mixX",0);S(this,"mixY",0);S(this,"mixScaleX",0);S(this,"mixScaleY",0);S(this,"mixShearY",0);S(this,"offsetRotation",0);S(this,"offsetX",0);S(this,"offsetY",0);S(this,"offsetScaleX",0);S(this,"offsetScaleY",0);S(this,"offsetShearY",0);S(this,"relative",!1);S(this,"local",!1)}set target(e){this._target=e}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class KM{constructor(t){S(this,"scale",1);S(this,"attachmentLoader");S(this,"linkedMeshes",new Array);this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new oo;i.name="";let s=new ZM(t),r=s.readInt32(),o=s.readInt32();i.hash=o==0&&r==0?null:o.toString(16)+r.toString(16),i.version=s.readString(),i.x=s.readFloat(),i.y=s.readFloat(),i.width=s.readFloat(),i.height=s.readFloat(),i.referenceScale=s.readFloat()*e;let l=s.readBoolean();l&&(i.fps=s.readFloat(),i.imagesPath=s.readString(),i.audioPath=s.readString());let u=0;u=s.readInt(!0);for(let f=0;f<u;f++){let d=s.readString();if(!d)throw new Error("String in string table must not be null.");s.strings.push(d)}u=s.readInt(!0);for(let f=0;f<u;f++){let d=s.readString();if(!d)throw new Error("Bone name must not be null.");let g=f==0?null:i.bones[s.readInt(!0)],p=new u0(f,d,g);p.rotation=s.readFloat(),p.x=s.readFloat()*e,p.y=s.readFloat()*e,p.scaleX=s.readFloat(),p.scaleY=s.readFloat(),p.shearX=s.readFloat(),p.shearY=s.readFloat(),p.length=s.readFloat()*e,p.inherit=s.readByte(),p.skinRequired=s.readBoolean(),l&&(kt.rgba8888ToColor(p.color,s.readInt32()),p.icon=s.readString()??void 0,p.visible=s.readBoolean()),i.bones.push(p)}u=s.readInt(!0);for(let f=0;f<u;f++){let d=s.readString();if(!d)throw new Error("Slot name must not be null.");let g=i.bones[s.readInt(!0)],p=new x0(f,d,g);kt.rgba8888ToColor(p.color,s.readInt32());let x=s.readInt32();x!=-1&&kt.rgb888ToColor(p.darkColor=new kt,x),p.attachmentName=s.readStringRef(),p.blendMode=s.readInt(!0),l&&(p.visible=s.readBoolean()),i.slots.push(p)}u=s.readInt(!0);for(let f=0,d;f<u;f++){let g=s.readString();if(!g)throw new Error("IK constraint data name must not be null.");let p=new p0(g);p.order=s.readInt(!0),d=s.readInt(!0);for(let y=0;y<d;y++)p.bones.push(i.bones[s.readInt(!0)]);p.target=i.bones[s.readInt(!0)];let x=s.readByte();p.skinRequired=(x&1)!=0,p.bendDirection=(x&2)!=0?1:-1,p.compress=(x&4)!=0,p.stretch=(x&8)!=0,p.uniform=(x&16)!=0,(x&32)!=0&&(p.mix=(x&64)!=0?s.readFloat():1),(x&128)!=0&&(p.softness=s.readFloat()*e),i.ikConstraints.push(p)}u=s.readInt(!0);for(let f=0,d;f<u;f++){let g=s.readString();if(!g)throw new Error("Transform constraint data name must not be null.");let p=new y0(g);p.order=s.readInt(!0),d=s.readInt(!0);for(let y=0;y<d;y++)p.bones.push(i.bones[s.readInt(!0)]);p.target=i.bones[s.readInt(!0)];let x=s.readByte();p.skinRequired=(x&1)!=0,p.local=(x&2)!=0,p.relative=(x&4)!=0,(x&8)!=0&&(p.offsetRotation=s.readFloat()),(x&16)!=0&&(p.offsetX=s.readFloat()*e),(x&32)!=0&&(p.offsetY=s.readFloat()*e),(x&64)!=0&&(p.offsetScaleX=s.readFloat()),(x&128)!=0&&(p.offsetScaleY=s.readFloat()),x=s.readByte(),(x&1)!=0&&(p.offsetShearY=s.readFloat()),(x&2)!=0&&(p.mixRotate=s.readFloat()),(x&4)!=0&&(p.mixX=s.readFloat()),(x&8)!=0&&(p.mixY=s.readFloat()),(x&16)!=0&&(p.mixScaleX=s.readFloat()),(x&32)!=0&&(p.mixScaleY=s.readFloat()),(x&64)!=0&&(p.mixShearY=s.readFloat()),i.transformConstraints.push(p)}u=s.readInt(!0);for(let f=0,d;f<u;f++){let g=s.readString();if(!g)throw new Error("Path constraint data name must not be null.");let p=new m0(g);p.order=s.readInt(!0),p.skinRequired=s.readBoolean(),d=s.readInt(!0);for(let y=0;y<d;y++)p.bones.push(i.bones[s.readInt(!0)]);p.target=i.slots[s.readInt(!0)];const x=s.readByte();p.positionMode=x&1,p.spacingMode=x>>1&3,p.rotateMode=x>>3&3,(x&128)!=0&&(p.offsetRotation=s.readFloat()),p.position=s.readFloat(),p.positionMode==es.Fixed&&(p.position*=e),p.spacing=s.readFloat(),(p.spacingMode==Me.Length||p.spacingMode==Me.Fixed)&&(p.spacing*=e),p.mixRotate=s.readFloat(),p.mixX=s.readFloat(),p.mixY=s.readFloat(),i.pathConstraints.push(p)}u=s.readInt(!0);for(let f=0,d;f<u;f++){const g=s.readString();if(!g)throw new Error("Physics constraint data name must not be null.");const p=new g0(g);p.order=s.readInt(!0),p.bone=i.bones[s.readInt(!0)];let x=s.readByte();p.skinRequired=(x&1)!=0,(x&2)!=0&&(p.x=s.readFloat()),(x&4)!=0&&(p.y=s.readFloat()),(x&8)!=0&&(p.rotate=s.readFloat()),(x&16)!=0&&(p.scaleX=s.readFloat()),(x&32)!=0&&(p.shearX=s.readFloat()),p.limit=((x&64)!=0?s.readFloat():5e3)*e,p.step=1/s.readUnsignedByte(),p.inertia=s.readFloat(),p.strength=s.readFloat(),p.damping=s.readFloat(),p.massInverse=(x&128)!=0?s.readFloat():1,p.wind=s.readFloat(),p.gravity=s.readFloat(),x=s.readByte(),(x&1)!=0&&(p.inertiaGlobal=!0),(x&2)!=0&&(p.strengthGlobal=!0),(x&4)!=0&&(p.dampingGlobal=!0),(x&8)!=0&&(p.massGlobal=!0),(x&16)!=0&&(p.windGlobal=!0),(x&32)!=0&&(p.gravityGlobal=!0),(x&64)!=0&&(p.mixGlobal=!0),p.mix=(x&128)!=0?s.readFloat():1,i.physicsConstraints.push(p)}let c=this.readSkin(s,i,!0,l);c&&(i.defaultSkin=c,i.skins.push(c));{let f=i.skins.length;for(dt.setArraySize(i.skins,u=f+s.readInt(!0));f<u;f++){let d=this.readSkin(s,i,!1,l);if(!d)throw new Error("readSkin() should not have returned null.");i.skins[f]=d}}u=this.linkedMeshes.length;for(let f=0;f<u;f++){let d=this.linkedMeshes[f];const g=i.skins[d.skinIndex];if(!d.parent)throw new Error("Linked mesh parent must not be null");let p=g.getAttachment(d.slotIndex,d.parent);if(!p)throw new Error(`Parent mesh not found: ${d.parent}`);d.mesh.timelineAttachment=d.inheritTimeline?p:d.mesh,d.mesh.setParentMesh(p),d.mesh.region!=null&&d.mesh.updateRegion()}this.linkedMeshes.length=0,u=s.readInt(!0);for(let f=0;f<u;f++){let d=s.readString();if(!d)throw new Error("Event data name must not be null");let g=new d0(d);g.intValue=s.readInt(!1),g.floatValue=s.readFloat(),g.stringValue=s.readString(),g.audioPath=s.readString(),g.audioPath&&(g.volume=s.readFloat(),g.balance=s.readFloat()),i.events.push(g)}u=s.readInt(!0);for(let f=0;f<u;f++){let d=s.readString();if(!d)throw new Error("Animatio name must not be null.");i.animations.push(this.readAnimation(s,d,i))}return i}readSkin(t,e,i,s){let r=null,o=0;if(i){if(o=t.readInt(!0),o==0)return null;r=new $h("default")}else{let l=t.readString();if(!l)throw new Error("Skin name must not be null.");r=new $h(l),s&&kt.rgba8888ToColor(r.color,t.readInt32()),r.bones.length=t.readInt(!0);for(let u=0,c=r.bones.length;u<c;u++)r.bones[u]=e.bones[t.readInt(!0)];for(let u=0,c=t.readInt(!0);u<c;u++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let u=0,c=t.readInt(!0);u<c;u++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let u=0,c=t.readInt(!0);u<c;u++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);for(let u=0,c=t.readInt(!0);u<c;u++)r.constraints.push(e.physicsConstraints[t.readInt(!0)]);o=t.readInt(!0)}for(let l=0;l<o;l++){let u=t.readInt(!0);for(let c=0,f=t.readInt(!0);c<f;c++){let d=t.readStringRef();if(!d)throw new Error("Attachment name must not be null");let g=this.readAttachment(t,e,r,u,d,s);g&&r.setAttachment(u,d,g)}}return r}readAttachment(t,e,i,s,r,o){let l=this.scale,u=t.readByte();const c=(u&8)!=0?t.readStringRef():r;if(!c)throw new Error("Attachment name must not be null");switch(u&7){case xs.Region:{let f=(u&16)!=0?t.readStringRef():null;const d=(u&32)!=0?t.readInt32():4294967295,g=(u&64)!=0?this.readSequence(t):null;let p=(u&128)!=0?t.readFloat():0,x=t.readFloat(),y=t.readFloat(),b=t.readFloat(),A=t.readFloat(),C=t.readFloat(),_=t.readFloat();f||(f=c);let v=this.attachmentLoader.newRegionAttachment(i,c,f,g);return v?(v.path=f,v.x=x*l,v.y=y*l,v.scaleX=b,v.scaleY=A,v.rotation=p,v.width=C*l,v.height=_*l,kt.rgba8888ToColor(v.color,d),v.sequence=g,g==null&&v.updateRegion(),v):null}case xs.BoundingBox:{let f=this.readVertices(t,(u&16)!=0),d=o?t.readInt32():0,g=this.attachmentLoader.newBoundingBoxAttachment(i,c);return g?(g.worldVerticesLength=f.length,g.vertices=f.vertices,g.bones=f.bones,o&&kt.rgba8888ToColor(g.color,d),g):null}case xs.Mesh:{let f=(u&16)!=0?t.readStringRef():c;const d=(u&32)!=0?t.readInt32():4294967295,g=(u&64)!=0?this.readSequence(t):null,p=t.readInt(!0),x=this.readVertices(t,(u&128)!=0),y=this.readFloatArray(t,x.length,1),b=this.readShortArray(t,(x.length-p-2)*3);let A=[],C=0,_=0;o&&(A=this.readShortArray(t,t.readInt(!0)),C=t.readFloat(),_=t.readFloat()),f||(f=c);let v=this.attachmentLoader.newMeshAttachment(i,c,f,g);return v?(v.path=f,kt.rgba8888ToColor(v.color,d),v.bones=x.bones,v.vertices=x.vertices,v.worldVerticesLength=x.length,v.triangles=b,v.regionUVs=y,g==null&&v.updateRegion(),v.hullLength=p<<1,v.sequence=g,o&&(v.edges=A,v.width=C*l,v.height=_*l),v):null}case xs.LinkedMesh:{const f=(u&16)!=0?t.readStringRef():c;if(f==null)throw new Error("Path of linked mesh must not be null");const d=(u&32)!=0?t.readInt32():4294967295,g=(u&64)!=0?this.readSequence(t):null,p=(u&128)!=0,x=t.readInt(!0),y=t.readStringRef();let b=0,A=0;o&&(b=t.readFloat(),A=t.readFloat());let C=this.attachmentLoader.newMeshAttachment(i,c,f,g);return C?(C.path=f,kt.rgba8888ToColor(C.color,d),C.sequence=g,o&&(C.width=b*l,C.height=A*l),this.linkedMeshes.push(new QM(C,x,s,y,p)),C):null}case xs.Path:{const f=(u&16)!=0,d=(u&32)!=0,g=this.readVertices(t,(u&64)!=0),p=dt.newArray(g.length/6,0);for(let b=0,A=p.length;b<A;b++)p[b]=t.readFloat()*l;const x=o?t.readInt32():0,y=this.attachmentLoader.newPathAttachment(i,c);return y?(y.closed=f,y.constantSpeed=d,y.worldVerticesLength=g.length,y.vertices=g.vertices,y.bones=g.bones,y.lengths=p,o&&kt.rgba8888ToColor(y.color,x),y):null}case xs.Point:{const f=t.readFloat(),d=t.readFloat(),g=t.readFloat(),p=o?t.readInt32():0,x=this.attachmentLoader.newPointAttachment(i,c);return x?(x.x=d*l,x.y=g*l,x.rotation=f,o&&kt.rgba8888ToColor(x.color,p),x):null}case xs.Clipping:{const f=t.readInt(!0),d=this.readVertices(t,(u&16)!=0);let g=o?t.readInt32():0,p=this.attachmentLoader.newClippingAttachment(i,c);return p?(p.endSlot=e.slots[f],p.worldVerticesLength=d.length,p.vertices=d.vertices,p.bones=d.bones,o&&kt.rgba8888ToColor(p.color,g),p):null}}return null}readSequence(t){let e=new so(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readVertices(t,e){const i=this.scale,s=t.readInt(!0),r=new JM;if(r.length=s<<1,!e)return r.vertices=this.readFloatArray(t,r.length,i),r;let o=new Array,l=new Array;for(let u=0;u<s;u++){let c=t.readInt(!0);l.push(c);for(let f=0;f<c;f++)l.push(t.readInt(!0)),o.push(t.readFloat()*i),o.push(t.readFloat()*i),o.push(t.readFloat())}return r.vertices=dt.toFloatArray(o),r.bones=l,r}readFloatArray(t,e,i){let s=new Array(e);if(i==1)for(let r=0;r<e;r++)s[r]=t.readFloat();else for(let r=0;r<e;r++)s[r]=t.readFloat()*i;return s}readShortArray(t,e){let i=new Array(e);for(let s=0;s<e;s++)i[s]=t.readInt(!0);return i}readAnimation(t,e,i){t.readInt(!0);let s=new Array,r=this.scale;for(let c=0,f=t.readInt(!0);c<f;c++){let d=t.readInt(!0);for(let g=0,p=t.readInt(!0);g<p;g++){let x=t.readByte(),y=t.readInt(!0),b=y-1;switch(x){case uP:{let A=new Gn(y,d);for(let C=0;C<y;C++)A.setFrame(C,t.readFloat(),t.readStringRef());s.push(A);break}case fP:{let A=t.readInt(!0),C=new $g(y,A,d),_=t.readFloat(),v=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255;for(let B=0,O=0;C.setFrame(B,_,v,M,T,P),B!=b;B++){let X=t.readFloat(),N=t.readUnsignedByte()/255,et=t.readUnsignedByte()/255,K=t.readUnsignedByte()/255,V=t.readUnsignedByte()/255;switch(t.readByte()){case Zi:C.setStepped(B);break;case Qi:Ut(t,C,O++,B,0,_,X,v,N,1),Ut(t,C,O++,B,1,_,X,M,et,1),Ut(t,C,O++,B,2,_,X,T,K,1),Ut(t,C,O++,B,3,_,X,P,V,1)}_=X,v=N,M=et,T=K,P=V}s.push(C);break}case dP:{let A=t.readInt(!0),C=new Hg(y,A,d),_=t.readFloat(),v=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255;for(let P=0,B=0;C.setFrame(P,_,v,M,T),P!=b;P++){let O=t.readFloat(),X=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255,et=t.readUnsignedByte()/255;switch(t.readByte()){case Zi:C.setStepped(P);break;case Qi:Ut(t,C,B++,P,0,_,O,v,X,1),Ut(t,C,B++,P,1,_,O,M,N,1),Ut(t,C,B++,P,2,_,O,T,et,1)}_=O,v=X,M=N,T=et}s.push(C);break}case pP:{let A=t.readInt(!0),C=new jg(y,A,d),_=t.readFloat(),v=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,B=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255,X=t.readUnsignedByte()/255;for(let N=0,et=0;C.setFrame(N,_,v,M,T,P,B,O,X),N!=b;N++){let K=t.readFloat(),V=t.readUnsignedByte()/255,J=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,Y=t.readUnsignedByte()/255,W=t.readUnsignedByte()/255,q=t.readUnsignedByte()/255;switch(t.readByte()){case Zi:C.setStepped(N);break;case Qi:Ut(t,C,et++,N,0,_,K,v,V,1),Ut(t,C,et++,N,1,_,K,M,J,1),Ut(t,C,et++,N,2,_,K,T,E,1),Ut(t,C,et++,N,3,_,K,P,L,1),Ut(t,C,et++,N,4,_,K,B,Y,1),Ut(t,C,et++,N,5,_,K,O,W,1),Ut(t,C,et++,N,6,_,K,X,q,1)}_=K,v=V,M=J,T=E,P=L,B=Y,O=W,X=q}s.push(C);break}case mP:{let A=t.readInt(!0),C=new Kg(y,A,d),_=t.readFloat(),v=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,B=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255;for(let X=0,N=0;C.setFrame(X,_,v,M,T,P,B,O),X!=b;X++){let et=t.readFloat(),K=t.readUnsignedByte()/255,V=t.readUnsignedByte()/255,J=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,Y=t.readUnsignedByte()/255;switch(t.readByte()){case Zi:C.setStepped(X);break;case Qi:Ut(t,C,N++,X,0,_,et,v,K,1),Ut(t,C,N++,X,1,_,et,M,V,1),Ut(t,C,N++,X,2,_,et,T,J,1),Ut(t,C,N++,X,3,_,et,P,E,1),Ut(t,C,N++,X,4,_,et,B,L,1),Ut(t,C,N++,X,5,_,et,O,Y,1)}_=et,v=K,M=V,T=J,P=E,B=L,O=Y}s.push(C);break}case gP:{let A=new qg(y,t.readInt(!0),d),C=t.readFloat(),_=t.readUnsignedByte()/255;for(let v=0,M=0;A.setFrame(v,C,_),v!=b;v++){let T=t.readFloat(),P=t.readUnsignedByte()/255;switch(t.readByte()){case Zi:A.setStepped(v);break;case Qi:Ut(t,A,M++,v,0,C,T,_,P,1)}C=T,_=P}s.push(A)}}}}for(let c=0,f=t.readInt(!0);c<f;c++){let d=t.readInt(!0);for(let g=0,p=t.readInt(!0);g<p;g++){let x=t.readByte(),y=t.readInt(!0);if(x==cP){let A=new Vg(y,d);for(let C=0;C<y;C++)A.setFrame(C,t.readFloat(),t.readByte());s.push(A);continue}let b=t.readInt(!0);switch(x){case tP:s.push(ze(t,new no(y,b,d),1));break;case eP:s.push(gh(t,new Og(y,b,d),r));break;case iP:s.push(ze(t,new Dg(y,b,d),r));break;case sP:s.push(ze(t,new Yg(y,b,d),r));break;case nP:s.push(gh(t,new Ng(y,b,d),1));break;case rP:s.push(ze(t,new Xg(y,b,d),1));break;case aP:s.push(ze(t,new Ug(y,b,d),1));break;case oP:s.push(gh(t,new Wg(y,b,d),1));break;case lP:s.push(ze(t,new zg(y,b,d),1));break;case hP:s.push(ze(t,new Gg(y,b,d),1))}}}for(let c=0,f=t.readInt(!0);c<f;c++){let d=t.readInt(!0),g=t.readInt(!0),p=g-1,x=new Qg(g,t.readInt(!0),d),y=t.readByte(),b=t.readFloat(),A=(y&1)!=0?(y&2)!=0?t.readFloat():1:0,C=(y&4)!=0?t.readFloat()*r:0;for(let _=0,v=0;x.setFrame(_,b,A,C,(y&8)!=0?1:-1,(y&16)!=0,(y&32)!=0),_!=p;_++){y=t.readByte();const M=t.readFloat(),T=(y&1)!=0?(y&2)!=0?t.readFloat():1:0,P=(y&4)!=0?t.readFloat()*r:0;(y&64)!=0?x.setStepped(_):(y&128)!=0&&(Ut(t,x,v++,_,0,b,M,A,T,1),Ut(t,x,v++,_,1,b,M,C,P,r)),b=M,A=T,C=P}s.push(x)}for(let c=0,f=t.readInt(!0);c<f;c++){let d=t.readInt(!0),g=t.readInt(!0),p=g-1,x=new Jg(g,t.readInt(!0),d),y=t.readFloat(),b=t.readFloat(),A=t.readFloat(),C=t.readFloat(),_=t.readFloat(),v=t.readFloat(),M=t.readFloat();for(let T=0,P=0;x.setFrame(T,y,b,A,C,_,v,M),T!=p;T++){let B=t.readFloat(),O=t.readFloat(),X=t.readFloat(),N=t.readFloat(),et=t.readFloat(),K=t.readFloat(),V=t.readFloat();switch(t.readByte()){case Zi:x.setStepped(T);break;case Qi:Ut(t,x,P++,T,0,y,B,b,O,1),Ut(t,x,P++,T,1,y,B,A,X,1),Ut(t,x,P++,T,2,y,B,C,N,1),Ut(t,x,P++,T,3,y,B,_,et,1),Ut(t,x,P++,T,4,y,B,v,K,1),Ut(t,x,P++,T,5,y,B,M,V,1)}y=B,b=O,A=X,C=N,_=et,v=K,M=V}s.push(x)}for(let c=0,f=t.readInt(!0);c<f;c++){let d=t.readInt(!0),g=i.pathConstraints[d];for(let p=0,x=t.readInt(!0);p<x;p++){const y=t.readByte(),b=t.readInt(!0),A=t.readInt(!0);switch(y){case bP:s.push(ze(t,new t0(b,A,d),g.positionMode==es.Fixed?r:1));break;case _P:s.push(ze(t,new e0(b,A,d),g.spacingMode==Me.Length||g.spacingMode==Me.Fixed?r:1));break;case wP:let C=new i0(b,A,d),_=t.readFloat(),v=t.readFloat(),M=t.readFloat(),T=t.readFloat();for(let P=0,B=0,O=C.getFrameCount()-1;C.setFrame(P,_,v,M,T),P!=O;P++){let X=t.readFloat(),N=t.readFloat(),et=t.readFloat(),K=t.readFloat();switch(t.readByte()){case Zi:C.setStepped(P);break;case Qi:Ut(t,C,B++,P,0,_,X,v,N,1),Ut(t,C,B++,P,1,_,X,M,et,1),Ut(t,C,B++,P,2,_,X,T,K,1)}_=X,v=N,M=et,T=K}s.push(C)}}}for(let c=0,f=t.readInt(!0);c<f;c++){const d=t.readInt(!0)-1;for(let g=0,p=t.readInt(!0);g<p;g++){const x=t.readByte(),y=t.readInt(!0);if(x==IP){const A=new ro(y,d);for(let C=0;C<y;C++)A.setFrame(C,t.readFloat());s.push(A);continue}const b=t.readInt(!0);switch(x){case vP:s.push(ze(t,new s0(y,b,d),1));break;case SP:s.push(ze(t,new n0(y,b,d),1));break;case AP:s.push(ze(t,new r0(y,b,d),1));break;case CP:s.push(ze(t,new a0(y,b,d),1));break;case TP:s.push(ze(t,new o0(y,b,d),1));break;case MP:s.push(ze(t,new l0(y,b,d),1));break;case PP:s.push(ze(t,new h0(y,b,d),1))}}}for(let c=0,f=t.readInt(!0);c<f;c++){let d=i.skins[t.readInt(!0)];for(let g=0,p=t.readInt(!0);g<p;g++){let x=t.readInt(!0);for(let y=0,b=t.readInt(!0);y<b;y++){let A=t.readStringRef();if(!A)throw new Error("attachmentName must not be null.");let C=d.getAttachment(x,A),_=t.readByte(),v=t.readInt(!0),M=v-1;switch(_){case xP:{let T=C,P=T.bones,B=T.vertices,O=P?B.length/3*2:B.length,X=t.readInt(!0),N=new Zg(v,X,x,T),et=t.readFloat();for(let K=0,V=0;;K++){let J,E=t.readInt(!0);if(E==0)J=P?dt.newFloatArray(O):B;else{J=dt.newFloatArray(O);let Y=t.readInt(!0);if(E+=Y,r==1)for(let W=Y;W<E;W++)J[W]=t.readFloat();else for(let W=Y;W<E;W++)J[W]=t.readFloat()*r;if(!P)for(let W=0,q=J.length;W<q;W++)J[W]+=B[W]}if(N.setFrame(K,et,J),K==M)break;let L=t.readFloat();switch(t.readByte()){case Zi:N.setStepped(K);break;case Qi:Ut(t,N,V++,K,0,et,L,0,1,1)}et=L}s.push(N);break}case yP:{let T=new ao(v,x,C);for(let P=0;P<v;P++){let B=t.readFloat(),O=t.readInt32();T.setFrame(P,B,Lg[O&15],O>>4,t.readFloat())}s.push(T);break}}}}}let o=t.readInt(!0);if(o>0){let c=new hn(o),f=i.slots.length;for(let d=0;d<o;d++){let g=t.readFloat(),p=t.readInt(!0),x=dt.newArray(f,0);for(let C=f-1;C>=0;C--)x[C]=-1;let y=dt.newArray(f-p,0),b=0,A=0;for(let C=0;C<p;C++){let _=t.readInt(!0);for(;b!=_;)y[A++]=b++;x[b+t.readInt(!0)]=b++}for(;b<f;)y[A++]=b++;for(let C=f-1;C>=0;C--)x[C]==-1&&(x[C]=y[--A]);c.setFrame(d,g,x)}s.push(c)}let l=t.readInt(!0);if(l>0){let c=new Fr(l);for(let f=0;f<l;f++){let d=t.readFloat(),g=i.events[t.readInt(!0)],p=new f0(d,g);p.intValue=t.readInt(!1),p.floatValue=t.readFloat(),p.stringValue=t.readString(),p.stringValue==null&&(p.stringValue=g.stringValue),p.data.audioPath&&(p.volume=t.readFloat(),p.balance=t.readFloat()),c.setFrame(f,p)}s.push(c)}let u=0;for(let c=0,f=s.length;c<f;c++)u=Math.max(u,s[c].getDuration());return new mc(e,s,u)}}class ZM{constructor(t,e=new Array,i=0,s=new DataView(t instanceof ArrayBuffer?t:t.buffer)){S(this,"strings");S(this,"index");S(this,"buffer");this.strings=e,this.index=i,this.buffer=s}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),i=e&127;return(e&128)!=0&&(e=this.readByte(),i|=(e&127)<<7,(e&128)!=0&&(e=this.readByte(),i|=(e&127)<<14,(e&128)!=0&&(e=this.readByte(),i|=(e&127)<<21,(e&128)!=0&&(e=this.readByte(),i|=(e&127)<<28)))),t?i:i>>>1^-(i&1)}readStringRef(){let t=this.readInt(!0);return t==0?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let i=0;i<t;){let s=this.readUnsignedByte();switch(s>>4){case 12:case 13:e+=String.fromCharCode((s&31)<<6|this.readByte()&63),i+=2;break;case 14:e+=String.fromCharCode((s&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),i+=3;break;default:e+=String.fromCharCode(s),i++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return this.readByte()!=0}}let QM=class{constructor(t,e,i,s,r){S(this,"parent");S(this,"skinIndex");S(this,"slotIndex");S(this,"mesh");S(this,"inheritTimeline");this.mesh=t,this.skinIndex=e,this.slotIndex=i,this.parent=s,this.inheritTimeline=r}};class JM{constructor(t=null,e=null,i=0){S(this,"bones");S(this,"vertices");S(this,"length");this.bones=t,this.vertices=e,this.length=i}}var xs;(function(n){n[n.Region=0]="Region",n[n.BoundingBox=1]="BoundingBox",n[n.Mesh=2]="Mesh",n[n.LinkedMesh=3]="LinkedMesh",n[n.Path=4]="Path",n[n.Point=5]="Point",n[n.Clipping=6]="Clipping"})(xs||(xs={}));function ze(n,t,e){let i=n.readFloat(),s=n.readFloat()*e;for(let r=0,o=0,l=t.getFrameCount()-1;t.setFrame(r,i,s),r!=l;r++){let u=n.readFloat(),c=n.readFloat()*e;switch(n.readByte()){case Zi:t.setStepped(r);break;case Qi:Ut(n,t,o++,r,0,i,u,s,c,e)}i=u,s=c}return t}function gh(n,t,e){let i=n.readFloat(),s=n.readFloat()*e,r=n.readFloat()*e;for(let o=0,l=0,u=t.getFrameCount()-1;t.setFrame(o,i,s,r),o!=u;o++){let c=n.readFloat(),f=n.readFloat()*e,d=n.readFloat()*e;switch(n.readByte()){case Zi:t.setStepped(o);break;case Qi:Ut(n,t,l++,o,0,i,c,s,f,e),Ut(n,t,l++,o,1,i,c,r,d,e)}i=c,s=f,r=d}return t}function Ut(n,t,e,i,s,r,o,l,u,c){t.setBezier(e,i,s,r,l,n.readFloat(),n.readFloat()*c,n.readFloat(),n.readFloat()*c,o,u)}const tP=0,eP=1,iP=2,sP=3,nP=4,rP=5,aP=6,oP=7,lP=8,hP=9,cP=10,uP=0,fP=1,dP=2,pP=3,mP=4,gP=5,xP=0,yP=1,bP=0,_P=1,wP=2,vP=0,SP=1,AP=2,CP=4,TP=5,MP=6,PP=7,IP=8,Zi=1,Qi=2;class kP{constructor(){S(this,"minX",0);S(this,"minY",0);S(this,"maxX",0);S(this,"maxY",0);S(this,"boundingBoxes",new Array);S(this,"polygons",new Array);S(this,"polygonPool",new Rr(()=>dt.newFloatArray(16)))}update(t,e){if(!t)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,s=this.polygons,r=this.polygonPool,o=t.slots,l=o.length;i.length=0,r.freeAll(s),s.length=0;for(let u=0;u<l;u++){let c=o[u];if(!c.bone.active)continue;let f=c.getAttachment();if(f instanceof wo){let d=f;i.push(d);let g=r.obtain();g.length!=d.worldVerticesLength&&(g=dt.newFloatArray(d.worldVerticesLength)),s.push(g),d.computeWorldVertices(c,0,d.worldVerticesLength,g,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=this.polygons;for(let o=0,l=r.length;o<l;o++){let u=r[o],c=u;for(let f=0,d=u.length;f<d;f+=2){let g=c[f],p=c[f+1];t=Math.min(t,g),e=Math.min(e,p),i=Math.max(i,g),s=Math.max(s,p)}}this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,i,s){let r=this.minX,o=this.minY,l=this.maxX,u=this.maxY;if(t<=r&&i<=r||e<=o&&s<=o||t>=l&&i>=l||e>=u&&s>=u)return!1;let c=(s-e)/(i-t),f=c*(r-t)+e;if(f>o&&f<u||(f=c*(l-t)+e,f>o&&f<u))return!0;let d=(o-e)/c+t;return d>r&&d<l||(d=(u-e)/c+t,d>r&&d<l)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let i=this.polygons;for(let s=0,r=i.length;s<r;s++)if(this.containsPointPolygon(i[s],t,e))return this.boundingBoxes[s];return null}containsPointPolygon(t,e,i){let s=t,r=t.length,o=r-2,l=!1;for(let u=0;u<r;u+=2){let c=s[u+1],f=s[o+1];if(c<i&&f>=i||f<i&&c>=i){let d=s[u];d+(i-c)/(f-c)*(s[o]-d)<e&&(l=!l)}o=u}return l}intersectsSegment(t,e,i,s){let r=this.polygons;for(let o=0,l=r.length;o<l;o++)if(this.intersectsSegmentPolygon(r[o],t,e,i,s))return this.boundingBoxes[o];return null}intersectsSegmentPolygon(t,e,i,s,r){let o=t,l=t.length,u=e-s,c=i-r,f=e*r-i*s,d=o[l-2],g=o[l-1];for(let p=0;p<l;p+=2){let x=o[p],y=o[p+1],b=d*y-g*x,A=d-x,C=g-y,_=u*C-c*A,v=(f*A-u*b)/_;if((v>=d&&v<=x||v>=x&&v<=d)&&(v>=e&&v<=s||v>=s&&v<=e)){let M=(f*C-c*b)/_;if((M>=g&&M<=y||M>=y&&M<=g)&&(M>=i&&M<=r||M>=r&&M<=i))return!0}d=x,g=y}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return e==-1?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}class ei{constructor(){S(this,"convexPolygons",new Array);S(this,"convexPolygonsIndices",new Array);S(this,"indicesArray",new Array);S(this,"isConcaveArray",new Array);S(this,"triangles",new Array);S(this,"polygonPool",new Rr(()=>new Array));S(this,"polygonIndicesPool",new Rr(()=>new Array))}triangulate(t){let e=t,i=t.length>>1,s=this.indicesArray;s.length=0;for(let l=0;l<i;l++)s[l]=l;let r=this.isConcaveArray;r.length=0;for(let l=0,u=i;l<u;++l)r[l]=ei.isConcave(l,i,e,s);let o=this.triangles;for(o.length=0;i>3;){let l=i-1,u=0,c=1;for(;;){t:if(!r[u]){let g=s[l]<<1,p=s[u]<<1,x=s[c]<<1,y=e[g],b=e[g+1],A=e[p],C=e[p+1],_=e[x],v=e[x+1];for(let M=(c+1)%i;M!=l;M=(M+1)%i){if(!r[M])continue;let T=s[M]<<1,P=e[T],B=e[T+1];if(ei.positiveArea(_,v,y,b,P,B)&&ei.positiveArea(y,b,A,C,P,B)&&ei.positiveArea(A,C,_,v,P,B))break t}break}if(c==0){do{if(!r[u])break;u--}while(u>0);break}l=u,u=c,c=(c+1)%i}o.push(s[(i+u-1)%i]),o.push(s[u]),o.push(s[(u+1)%i]),s.splice(u,1),r.splice(u,1),i--;let f=(i+u-1)%i,d=u==i?0:u;r[f]=ei.isConcave(f,i,e,s),r[d]=ei.isConcave(d,i,e,s)}return i==3&&(o.push(s[2]),o.push(s[0]),o.push(s[1])),o}decompose(t,e){let i=t,s=this.convexPolygons;this.polygonPool.freeAll(s),s.length=0;let r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;let o=this.polygonIndicesPool.obtain();o.length=0;let l=this.polygonPool.obtain();l.length=0;let u=-1,c=0;for(let f=0,d=e.length;f<d;f+=3){let g=e[f]<<1,p=e[f+1]<<1,x=e[f+2]<<1,y=i[g],b=i[g+1],A=i[p],C=i[p+1],_=i[x],v=i[x+1],M=!1;if(u==g){let T=l.length-4,P=ei.winding(l[T],l[T+1],l[T+2],l[T+3],_,v),B=ei.winding(_,v,l[0],l[1],l[2],l[3]);P==c&&B==c&&(l.push(_),l.push(v),o.push(x),M=!0)}M||(l.length>0?(s.push(l),r.push(o)):(this.polygonPool.free(l),this.polygonIndicesPool.free(o)),l=this.polygonPool.obtain(),l.length=0,l.push(y),l.push(b),l.push(A),l.push(C),l.push(_),l.push(v),o=this.polygonIndicesPool.obtain(),o.length=0,o.push(g),o.push(p),o.push(x),c=ei.winding(y,b,A,C,_,v),u=g)}l.length>0&&(s.push(l),r.push(o));for(let f=0,d=s.length;f<d;f++){if(o=r[f],o.length==0)continue;let g=o[0],p=o[o.length-1];l=s[f];let x=l.length-4,y=l[x],b=l[x+1],A=l[x+2],C=l[x+3],_=l[0],v=l[1],M=l[2],T=l[3],P=ei.winding(y,b,A,C,_,v);for(let B=0;B<d;B++){if(B==f)continue;let O=r[B];if(O.length!=3)continue;let X=O[0],N=O[1],et=O[2],K=s[B],V=K[K.length-2],J=K[K.length-1];if(X!=g||N!=p)continue;let E=ei.winding(y,b,A,C,V,J),L=ei.winding(V,J,_,v,M,T);E==P&&L==P&&(K.length=0,O.length=0,l.push(V),l.push(J),o.push(et),y=A,b=C,A=V,C=J,B=0)}}for(let f=s.length-1;f>=0;f--)l=s[f],l.length==0&&(s.splice(f,1),this.polygonPool.free(l),o=r[f],r.splice(f,1),this.polygonIndicesPool.free(o));return s}static isConcave(t,e,i,s){let r=s[(e+t-1)%e]<<1,o=s[t]<<1,l=s[(t+1)%e]<<1;return!this.positiveArea(i[r],i[r+1],i[o],i[o+1],i[l],i[l+1])}static positiveArea(t,e,i,s,r,o){return t*(o-s)+i*(e-o)+r*(s-e)>=0}static winding(t,e,i,s,r,o){let l=i-t,u=s-e;return r*u-o*l+l*e-t*u>=0?1:-1}}class lo{constructor(){S(this,"triangulator",new ei);S(this,"clippingPolygon",new Array);S(this,"clipOutput",new Array);S(this,"clippedVertices",new Array);S(this,"clippedUVs",new Array);S(this,"clippedTriangles",new Array);S(this,"scratch",new Array);S(this,"clipAttachment",null);S(this,"clippingPolygons",null)}clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;let i=e.worldVerticesLength,s=dt.setArraySize(this.clippingPolygon,i);e.computeWorldVertices(t,0,i,s,0,2);let r=this.clippingPolygon;lo.makeClockwise(r);let o=this.clippingPolygons=this.triangulator.decompose(r,this.triangulator.triangulate(r));for(let l=0,u=o.length;l<u;l++){let c=o[l];lo.makeClockwise(c),c.push(c[0]),c.push(c[1])}return o.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return this.clipAttachment!=null}clipTriangles(t,e,i,s,r,o,l,u){let c,f,d,g,p,x;typeof e=="number"?(c=i,f=s,d=r,g=o,p=l,x=u):(c=e,f=i,d=s,g=r,p=o,x=l),d&&g&&p&&typeof x=="boolean"?this.clipTrianglesRender(t,c,f,d,g,p,x):this.clipTrianglesNoRender(t,c,f)}clipTrianglesNoRender(t,e,i){let s=this.clipOutput,r=this.clippedVertices,o=this.clippedTriangles,l=this.clippingPolygons,u=l.length,c=0;r.length=0,o.length=0;for(let f=0;f<i;f+=3){let d=e[f]<<1,g=t[d],p=t[d+1];d=e[f+1]<<1;let x=t[d],y=t[d+1];d=e[f+2]<<1;let b=t[d],A=t[d+1];for(let C=0;C<u;C++){let _=r.length;if(this.clip(g,p,x,y,b,A,l[C],s)){let v=s.length;if(v==0)continue;let M=v>>1,T=this.clipOutput,P=dt.setArraySize(r,_+M*2);for(let O=0;O<v;O+=2,_+=2){let X=T[O],N=T[O+1];P[_]=X,P[_+1]=N}_=o.length;let B=dt.setArraySize(o,_+3*(M-2));M--;for(let O=1;O<M;O++,_+=3)B[_]=c,B[_+1]=c+O,B[_+2]=c+O+1;c+=M+1}else{let v=dt.setArraySize(r,_+6);v[_]=g,v[_+1]=p,v[_+2]=x,v[_+3]=y,v[_+4]=b,v[_+5]=A,_=o.length;let M=dt.setArraySize(o,_+3);M[_]=c,M[_+1]=c+1,M[_+2]=c+2,c+=3;break}}}}clipTrianglesRender(t,e,i,s,r,o,l){let u=this.clipOutput,c=this.clippedVertices,f=this.clippedTriangles,d=this.clippingPolygons,g=d.length,p=l?12:8,x=0;c.length=0,f.length=0;for(let y=0;y<i;y+=3){let b=e[y]<<1,A=t[b],C=t[b+1],_=s[b],v=s[b+1];b=e[y+1]<<1;let M=t[b],T=t[b+1],P=s[b],B=s[b+1];b=e[y+2]<<1;let O=t[b],X=t[b+1],N=s[b],et=s[b+1];for(let K=0;K<g;K++){let V=c.length;if(this.clip(A,C,M,T,O,X,d[K],u)){let J=u.length;if(J==0)continue;let E=T-X,L=O-M,Y=A-O,W=X-C,q=1/(E*Y+L*(C-X)),j=J>>1,tt=this.clipOutput,Z=dt.setArraySize(c,V+j*p);for(let lt=0;lt<J;lt+=2,V+=p){let Pt=tt[lt],Ct=tt[lt+1];Z[V]=Pt,Z[V+1]=Ct,Z[V+2]=r.r,Z[V+3]=r.g,Z[V+4]=r.b,Z[V+5]=r.a;let gt=Pt-O,It=Ct-X,wt=(E*gt+L*It)*q,ee=(W*gt+Y*It)*q,ie=1-wt-ee;Z[V+6]=_*wt+P*ee+N*ie,Z[V+7]=v*wt+B*ee+et*ie,l&&(Z[V+8]=o.r,Z[V+9]=o.g,Z[V+10]=o.b,Z[V+11]=o.a)}V=f.length;let ct=dt.setArraySize(f,V+3*(j-2));j--;for(let lt=1;lt<j;lt++,V+=3)ct[V]=x,ct[V+1]=x+lt,ct[V+2]=x+lt+1;x+=j+1}else{let J=dt.setArraySize(c,V+3*p);J[V]=A,J[V+1]=C,J[V+2]=r.r,J[V+3]=r.g,J[V+4]=r.b,J[V+5]=r.a,l?(J[V+6]=_,J[V+7]=v,J[V+8]=o.r,J[V+9]=o.g,J[V+10]=o.b,J[V+11]=o.a,J[V+12]=M,J[V+13]=T,J[V+14]=r.r,J[V+15]=r.g,J[V+16]=r.b,J[V+17]=r.a,J[V+18]=P,J[V+19]=B,J[V+20]=o.r,J[V+21]=o.g,J[V+22]=o.b,J[V+23]=o.a,J[V+24]=O,J[V+25]=X,J[V+26]=r.r,J[V+27]=r.g,J[V+28]=r.b,J[V+29]=r.a,J[V+30]=N,J[V+31]=et,J[V+32]=o.r,J[V+33]=o.g,J[V+34]=o.b,J[V+35]=o.a):(J[V+6]=_,J[V+7]=v,J[V+8]=M,J[V+9]=T,J[V+10]=r.r,J[V+11]=r.g,J[V+12]=r.b,J[V+13]=r.a,J[V+14]=P,J[V+15]=B,J[V+16]=O,J[V+17]=X,J[V+18]=r.r,J[V+19]=r.g,J[V+20]=r.b,J[V+21]=r.a,J[V+22]=N,J[V+23]=et),V=f.length;let E=dt.setArraySize(f,V+3);E[V]=x,E[V+1]=x+1,E[V+2]=x+2,x+=3;break}}}}clipTrianglesUnpacked(t,e,i,s){let r=this.clipOutput,o=this.clippedVertices,l=this.clippedUVs,u=this.clippedTriangles,c=this.clippingPolygons,f=c.length,d=0;o.length=0,l.length=0,u.length=0;for(let g=0;g<i;g+=3){let p=e[g]<<1,x=t[p],y=t[p+1],b=s[p],A=s[p+1];p=e[g+1]<<1;let C=t[p],_=t[p+1],v=s[p],M=s[p+1];p=e[g+2]<<1;let T=t[p],P=t[p+1],B=s[p],O=s[p+1];for(let X=0;X<f;X++){let N=o.length;if(this.clip(x,y,C,_,T,P,c[X],r)){let et=r.length;if(et==0)continue;let K=_-P,V=T-C,J=x-T,E=P-y,L=1/(K*J+V*(y-P)),Y=et>>1,W=this.clipOutput,q=dt.setArraySize(o,N+Y*2),j=dt.setArraySize(l,N+Y*2);for(let Z=0;Z<et;Z+=2,N+=2){let ct=W[Z],lt=W[Z+1];q[N]=ct,q[N+1]=lt;let Pt=ct-T,Ct=lt-P,gt=(K*Pt+V*Ct)*L,It=(E*Pt+J*Ct)*L,wt=1-gt-It;j[N]=b*gt+v*It+B*wt,j[N+1]=A*gt+M*It+O*wt}N=u.length;let tt=dt.setArraySize(u,N+3*(Y-2));Y--;for(let Z=1;Z<Y;Z++,N+=3)tt[N]=d,tt[N+1]=d+Z,tt[N+2]=d+Z+1;d+=Y+1}else{let et=dt.setArraySize(o,N+6);et[N]=x,et[N+1]=y,et[N+2]=C,et[N+3]=_,et[N+4]=T,et[N+5]=P;let K=dt.setArraySize(l,N+3*2);K[N]=b,K[N+1]=A,K[N+2]=v,K[N+3]=M,K[N+4]=B,K[N+5]=O,N=u.length;let V=dt.setArraySize(u,N+3);V[N]=d,V[N+1]=d+1,V[N+2]=d+2,d+=3;break}}}}clip(t,e,i,s,r,o,l,u){let c=u,f=!1,d;l.length%4>=2?(d=u,u=this.scratch):d=this.scratch,d.length=0,d.push(t),d.push(e),d.push(i),d.push(s),d.push(r),d.push(o),d.push(t),d.push(e),u.length=0;let g=l.length-4,p=l;for(let x=0;;x+=2){let y=p[x],b=p[x+1],A=y-p[x+2],C=b-p[x+3],_=u.length,v=d;for(let T=0,P=d.length-2;T<P;){let B=v[T],O=v[T+1];T+=2;let X=v[T],N=v[T+1],et=C*(y-X)>A*(b-N),K=C*(y-B)-A*(b-O);if(K>0){if(et){u.push(X),u.push(N);continue}let V=X-B,J=N-O,E=K/(V*C-J*A);if(E>=0&&E<=1)u.push(B+V*E),u.push(O+J*E);else{u.push(X),u.push(N);continue}}else if(et){let V=X-B,J=N-O,E=K/(V*C-J*A);if(E>=0&&E<=1)u.push(B+V*E),u.push(O+J*E),u.push(X),u.push(N);else{u.push(X),u.push(N);continue}}f=!0}if(_==u.length)return c.length=0,!0;if(u.push(u[0]),u.push(u[1]),x==g)break;let M=u;u=d,u.length=0,d=M}if(c!=u){c.length=0;for(let x=0,y=u.length-2;x<y;x++)c[x]=u[x]}else c.length=c.length-2;return f}static makeClockwise(t){let e=t,i=t.length,s=e[i-2]*e[1]-e[0]*e[i-1],r=0,o=0,l=0,u=0;for(let c=0,f=i-3;c<f;c+=2)r=e[c],o=e[c+1],l=e[c+2],u=e[c+3],s+=r*u-l*o;if(!(s<0))for(let c=0,f=i-2,d=i>>1;c<d;c+=2){let g=e[c],p=e[c+1],x=f-c;e[c]=e[x],e[c+1]=e[x+1],e[x]=g,e[x+1]=p}}}class EP{constructor(t){S(this,"attachmentLoader");S(this,"scale",1);S(this,"linkedMeshes",new Array);this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new oo,s=typeof t=="string"?JSON.parse(t):t,r=s.skeleton;if(r&&(i.hash=r.hash,i.version=r.spine,i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height,i.referenceScale=G(r,"referenceScale",100)*e,i.fps=r.fps,i.imagesPath=r.images??null,i.audioPath=r.audio??null),s.bones)for(let o=0;o<s.bones.length;o++){let l=s.bones[o],u=null,c=G(l,"parent",null);c&&(u=i.findBone(c));let f=new u0(i.bones.length,l.name,u);f.length=G(l,"length",0)*e,f.x=G(l,"x",0)*e,f.y=G(l,"y",0)*e,f.rotation=G(l,"rotation",0),f.scaleX=G(l,"scaleX",1),f.scaleY=G(l,"scaleY",1),f.shearX=G(l,"shearX",0),f.shearY=G(l,"shearY",0),f.inherit=dt.enumValue(me,G(l,"inherit","Normal")),f.skinRequired=G(l,"skin",!1);let d=G(l,"color",null);d&&f.color.setFromString(d),i.bones.push(f)}if(s.slots)for(let o=0;o<s.slots.length;o++){let l=s.slots[o],u=l.name,c=i.findBone(l.bone);if(!c)throw new Error(`Couldn't find bone ${l.bone} for slot ${u}`);let f=new x0(i.slots.length,u,c),d=G(l,"color",null);d&&f.color.setFromString(d);let g=G(l,"dark",null);g&&(f.darkColor=kt.fromString(g)),f.attachmentName=G(l,"attachment",null),f.blendMode=dt.enumValue(Xs,G(l,"blend","normal")),f.visible=G(l,"visible",!0),i.slots.push(f)}if(s.ik)for(let o=0;o<s.ik.length;o++){let l=s.ik[o],u=new p0(l.name);u.order=G(l,"order",0),u.skinRequired=G(l,"skin",!1);for(let f=0;f<l.bones.length;f++){let d=i.findBone(l.bones[f]);if(!d)throw new Error(`Couldn't find bone ${l.bones[f]} for IK constraint ${l.name}.`);u.bones.push(d)}let c=i.findBone(l.target);if(!c)throw new Error(`Couldn't find target bone ${l.target} for IK constraint ${l.name}.`);u.target=c,u.mix=G(l,"mix",1),u.softness=G(l,"softness",0)*e,u.bendDirection=G(l,"bendPositive",!0)?1:-1,u.compress=G(l,"compress",!1),u.stretch=G(l,"stretch",!1),u.uniform=G(l,"uniform",!1),i.ikConstraints.push(u)}if(s.transform)for(let o=0;o<s.transform.length;o++){let l=s.transform[o],u=new y0(l.name);u.order=G(l,"order",0),u.skinRequired=G(l,"skin",!1);for(let d=0;d<l.bones.length;d++){let g=l.bones[d],p=i.findBone(g);if(!p)throw new Error(`Couldn't find bone ${g} for transform constraint ${l.name}.`);u.bones.push(p)}let c=l.target,f=i.findBone(c);if(!f)throw new Error(`Couldn't find target bone ${c} for transform constraint ${l.name}.`);u.target=f,u.local=G(l,"local",!1),u.relative=G(l,"relative",!1),u.offsetRotation=G(l,"rotation",0),u.offsetX=G(l,"x",0)*e,u.offsetY=G(l,"y",0)*e,u.offsetScaleX=G(l,"scaleX",0),u.offsetScaleY=G(l,"scaleY",0),u.offsetShearY=G(l,"shearY",0),u.mixRotate=G(l,"mixRotate",1),u.mixX=G(l,"mixX",1),u.mixY=G(l,"mixY",u.mixX),u.mixScaleX=G(l,"mixScaleX",1),u.mixScaleY=G(l,"mixScaleY",u.mixScaleX),u.mixShearY=G(l,"mixShearY",1),i.transformConstraints.push(u)}if(s.path)for(let o=0;o<s.path.length;o++){let l=s.path[o],u=new m0(l.name);u.order=G(l,"order",0),u.skinRequired=G(l,"skin",!1);for(let d=0;d<l.bones.length;d++){let g=l.bones[d],p=i.findBone(g);if(!p)throw new Error(`Couldn't find bone ${g} for path constraint ${l.name}.`);u.bones.push(p)}let c=l.target,f=i.findSlot(c);if(!f)throw new Error(`Couldn't find target slot ${c} for path constraint ${l.name}.`);u.target=f,u.positionMode=dt.enumValue(es,G(l,"positionMode","Percent")),u.spacingMode=dt.enumValue(Me,G(l,"spacingMode","Length")),u.rotateMode=dt.enumValue(un,G(l,"rotateMode","Tangent")),u.offsetRotation=G(l,"rotation",0),u.position=G(l,"position",0),u.positionMode==es.Fixed&&(u.position*=e),u.spacing=G(l,"spacing",0),(u.spacingMode==Me.Length||u.spacingMode==Me.Fixed)&&(u.spacing*=e),u.mixRotate=G(l,"mixRotate",1),u.mixX=G(l,"mixX",1),u.mixY=G(l,"mixY",u.mixX),i.pathConstraints.push(u)}if(s.physics)for(let o=0;o<s.physics.length;o++){const l=s.physics[o],u=new g0(l.name);u.order=G(l,"order",0),u.skinRequired=G(l,"skin",!1);const c=l.bone,f=i.findBone(c);if(f==null)throw new Error("Physics bone not found: "+c);u.bone=f,u.x=G(l,"x",0),u.y=G(l,"y",0),u.rotate=G(l,"rotate",0),u.scaleX=G(l,"scaleX",0),u.shearX=G(l,"shearX",0),u.limit=G(l,"limit",5e3)*e,u.step=1/G(l,"fps",60),u.inertia=G(l,"inertia",1),u.strength=G(l,"strength",100),u.damping=G(l,"damping",1),u.massInverse=1/G(l,"mass",1),u.wind=G(l,"wind",0),u.gravity=G(l,"gravity",0),u.mix=G(l,"mix",1),u.inertiaGlobal=G(l,"inertiaGlobal",!1),u.strengthGlobal=G(l,"strengthGlobal",!1),u.dampingGlobal=G(l,"dampingGlobal",!1),u.massGlobal=G(l,"massGlobal",!1),u.windGlobal=G(l,"windGlobal",!1),u.gravityGlobal=G(l,"gravityGlobal",!1),u.mixGlobal=G(l,"mixGlobal",!1),i.physicsConstraints.push(u)}if(s.skins)for(let o=0;o<s.skins.length;o++){let l=s.skins[o],u=new $h(l.name);if(l.bones)for(let c=0;c<l.bones.length;c++){let f=l.bones[c],d=i.findBone(f);if(!d)throw new Error(`Couldn't find bone ${f} for skin ${l.name}.`);u.bones.push(d)}if(l.ik)for(let c=0;c<l.ik.length;c++){let f=l.ik[c],d=i.findIkConstraint(f);if(!d)throw new Error(`Couldn't find IK constraint ${f} for skin ${l.name}.`);u.constraints.push(d)}if(l.transform)for(let c=0;c<l.transform.length;c++){let f=l.transform[c],d=i.findTransformConstraint(f);if(!d)throw new Error(`Couldn't find transform constraint ${f} for skin ${l.name}.`);u.constraints.push(d)}if(l.path)for(let c=0;c<l.path.length;c++){let f=l.path[c],d=i.findPathConstraint(f);if(!d)throw new Error(`Couldn't find path constraint ${f} for skin ${l.name}.`);u.constraints.push(d)}if(l.physics)for(let c=0;c<l.physics.length;c++){let f=l.physics[c],d=i.findPhysicsConstraint(f);if(!d)throw new Error(`Couldn't find physics constraint ${f} for skin ${l.name}.`);u.constraints.push(d)}for(let c in l.attachments){let f=i.findSlot(c);if(!f)throw new Error(`Couldn't find slot ${c} for skin ${l.name}.`);let d=l.attachments[c];for(let g in d){let p=this.readAttachment(d[g],u,f.index,g,i);p&&u.setAttachment(f.index,g,p)}}i.skins.push(u),u.name=="default"&&(i.defaultSkin=u)}for(let o=0,l=this.linkedMeshes.length;o<l;o++){let u=this.linkedMeshes[o],c=u.skin?i.findSkin(u.skin):i.defaultSkin;if(!c)throw new Error(`Skin not found: ${u.skin}`);let f=c.getAttachment(u.slotIndex,u.parent);if(!f)throw new Error(`Parent mesh not found: ${u.parent}`);u.mesh.timelineAttachment=u.inheritTimeline?f:u.mesh,u.mesh.setParentMesh(f),u.mesh.region!=null&&u.mesh.updateRegion()}if(this.linkedMeshes.length=0,s.events)for(let o in s.events){let l=s.events[o],u=new d0(o);u.intValue=G(l,"int",0),u.floatValue=G(l,"float",0),u.stringValue=G(l,"string",""),u.audioPath=G(l,"audio",null),u.audioPath&&(u.volume=G(l,"volume",1),u.balance=G(l,"balance",0)),i.events.push(u)}if(s.animations)for(let o in s.animations){let l=s.animations[o];this.readAnimation(l,o,i)}return i}readAttachment(t,e,i,s,r){let o=this.scale;switch(s=G(t,"name",s),G(t,"type","region")){case"region":{let l=G(t,"path",s),u=this.readSequence(G(t,"sequence",null)),c=this.attachmentLoader.newRegionAttachment(e,s,l,u);if(!c)return null;c.path=l,c.x=G(t,"x",0)*o,c.y=G(t,"y",0)*o,c.scaleX=G(t,"scaleX",1),c.scaleY=G(t,"scaleY",1),c.rotation=G(t,"rotation",0),c.width=t.width*o,c.height=t.height*o,c.sequence=u;let f=G(t,"color",null);return f&&c.color.setFromString(f),c.region!=null&&c.updateRegion(),c}case"boundingbox":{let l=this.attachmentLoader.newBoundingBoxAttachment(e,s);if(!l)return null;this.readVertices(t,l,t.vertexCount<<1);let u=G(t,"color",null);return u&&l.color.setFromString(u),l}case"mesh":case"linkedmesh":{let l=G(t,"path",s),u=this.readSequence(G(t,"sequence",null)),c=this.attachmentLoader.newMeshAttachment(e,s,l,u);if(!c)return null;c.path=l;let f=G(t,"color",null);f&&c.color.setFromString(f),c.width=G(t,"width",0)*o,c.height=G(t,"height",0)*o,c.sequence=u;let d=G(t,"parent",null);if(d)return this.linkedMeshes.push(new RP(c,G(t,"skin",null),i,d,G(t,"timelines",!0))),c;let g=t.uvs;return this.readVertices(t,c,g.length),c.triangles=t.triangles,c.regionUVs=g,c.region!=null&&c.updateRegion(),c.edges=G(t,"edges",null),c.hullLength=G(t,"hull",0)*2,c}case"path":{let l=this.attachmentLoader.newPathAttachment(e,s);if(!l)return null;l.closed=G(t,"closed",!1),l.constantSpeed=G(t,"constantSpeed",!0);let u=t.vertexCount;this.readVertices(t,l,u<<1);let c=dt.newArray(u/3,0);for(let d=0;d<t.lengths.length;d++)c[d]=t.lengths[d]*o;l.lengths=c;let f=G(t,"color",null);return f&&l.color.setFromString(f),l}case"point":{let l=this.attachmentLoader.newPointAttachment(e,s);if(!l)return null;l.x=G(t,"x",0)*o,l.y=G(t,"y",0)*o,l.rotation=G(t,"rotation",0);let u=G(t,"color",null);return u&&l.color.setFromString(u),l}case"clipping":{let l=this.attachmentLoader.newClippingAttachment(e,s);if(!l)return null;let u=G(t,"end",null);u&&(l.endSlot=r.findSlot(u));let c=t.vertexCount;this.readVertices(t,l,c<<1);let f=G(t,"color",null);return f&&l.color.setFromString(f),l}}return null}readSequence(t){if(t==null)return null;let e=new so(G(t,"count",0));return e.start=G(t,"start",1),e.digits=G(t,"digits",0),e.setupIndex=G(t,"setup",0),e}readVertices(t,e,i){let s=this.scale;e.worldVerticesLength=i;let r=t.vertices;if(i==r.length){let u=dt.toFloatArray(r);if(s!=1)for(let c=0,f=r.length;c<f;c++)u[c]*=s;e.vertices=u;return}let o=new Array,l=new Array;for(let u=0,c=r.length;u<c;){let f=r[u++];l.push(f);for(let d=u+f*4;u<d;u+=4)l.push(r[u]),o.push(r[u+1]*s),o.push(r[u+2]*s),o.push(r[u+3])}e.bones=l,e.vertices=dt.toFloatArray(o)}readAnimation(t,e,i){let s=this.scale,r=new Array;if(t.slots)for(let l in t.slots){let u=t.slots[l],c=i.findSlot(l);if(!c)throw new Error("Slot not found: "+l);let f=c.index;for(let d in u){let g=u[d];if(!g)continue;let p=g.length;if(d=="attachment"){let x=new Gn(p,f);for(let y=0;y<p;y++){let b=g[y];x.setFrame(y,G(b,"time",0),G(b,"name",null))}r.push(x)}else if(d=="rgba"){let x=new $g(p,p<<2,f),y=g[0],b=G(y,"time",0),A=kt.fromString(y.color);for(let C=0,_=0;;C++){x.setFrame(C,b,A.r,A.g,A.b,A.a);let v=g[C+1];if(!v){x.shrink(_);break}let M=G(v,"time",0),T=kt.fromString(v.color),P=y.curve;P&&(_=Gt(P,x,_,C,0,b,M,A.r,T.r,1),_=Gt(P,x,_,C,1,b,M,A.g,T.g,1),_=Gt(P,x,_,C,2,b,M,A.b,T.b,1),_=Gt(P,x,_,C,3,b,M,A.a,T.a,1)),b=M,A=T,y=v}r.push(x)}else if(d=="rgb"){let x=new Hg(p,p*3,f),y=g[0],b=G(y,"time",0),A=kt.fromString(y.color);for(let C=0,_=0;;C++){x.setFrame(C,b,A.r,A.g,A.b);let v=g[C+1];if(!v){x.shrink(_);break}let M=G(v,"time",0),T=kt.fromString(v.color),P=y.curve;P&&(_=Gt(P,x,_,C,0,b,M,A.r,T.r,1),_=Gt(P,x,_,C,1,b,M,A.g,T.g,1),_=Gt(P,x,_,C,2,b,M,A.b,T.b,1)),b=M,A=T,y=v}r.push(x)}else if(d=="alpha")r.push(Li(g,new qg(p,p,f),0,1));else if(d=="rgba2"){let x=new jg(p,p*7,f),y=g[0],b=G(y,"time",0),A=kt.fromString(y.light),C=kt.fromString(y.dark);for(let _=0,v=0;;_++){x.setFrame(_,b,A.r,A.g,A.b,A.a,C.r,C.g,C.b);let M=g[_+1];if(!M){x.shrink(v);break}let T=G(M,"time",0),P=kt.fromString(M.light),B=kt.fromString(M.dark),O=y.curve;O&&(v=Gt(O,x,v,_,0,b,T,A.r,P.r,1),v=Gt(O,x,v,_,1,b,T,A.g,P.g,1),v=Gt(O,x,v,_,2,b,T,A.b,P.b,1),v=Gt(O,x,v,_,3,b,T,A.a,P.a,1),v=Gt(O,x,v,_,4,b,T,C.r,B.r,1),v=Gt(O,x,v,_,5,b,T,C.g,B.g,1),v=Gt(O,x,v,_,6,b,T,C.b,B.b,1)),b=T,A=P,C=B,y=M}r.push(x)}else if(d=="rgb2"){let x=new Kg(p,p*6,f),y=g[0],b=G(y,"time",0),A=kt.fromString(y.light),C=kt.fromString(y.dark);for(let _=0,v=0;;_++){x.setFrame(_,b,A.r,A.g,A.b,C.r,C.g,C.b);let M=g[_+1];if(!M){x.shrink(v);break}let T=G(M,"time",0),P=kt.fromString(M.light),B=kt.fromString(M.dark),O=y.curve;O&&(v=Gt(O,x,v,_,0,b,T,A.r,P.r,1),v=Gt(O,x,v,_,1,b,T,A.g,P.g,1),v=Gt(O,x,v,_,2,b,T,A.b,P.b,1),v=Gt(O,x,v,_,3,b,T,C.r,B.r,1),v=Gt(O,x,v,_,4,b,T,C.g,B.g,1),v=Gt(O,x,v,_,5,b,T,C.b,B.b,1)),b=T,A=P,C=B,y=M}r.push(x)}}}if(t.bones)for(let l in t.bones){let u=t.bones[l],c=i.findBone(l);if(!c)throw new Error("Bone not found: "+l);let f=c.index;for(let d in u){let g=u[d],p=g.length;if(p!=0){if(d==="rotate")r.push(Li(g,new no(p,p,f),0,1));else if(d==="translate"){let x=new Og(p,p<<1,f);r.push(xh(g,x,"x","y",0,s))}else if(d==="translatex"){let x=new Dg(p,p,f);r.push(Li(g,x,0,s))}else if(d==="translatey"){let x=new Yg(p,p,f);r.push(Li(g,x,0,s))}else if(d==="scale"){let x=new Ng(p,p<<1,f);r.push(xh(g,x,"x","y",1,1))}else if(d==="scalex"){let x=new Xg(p,p,f);r.push(Li(g,x,1,1))}else if(d==="scaley"){let x=new Ug(p,p,f);r.push(Li(g,x,1,1))}else if(d==="shear"){let x=new Wg(p,p<<1,f);r.push(xh(g,x,"x","y",0,1))}else if(d==="shearx"){let x=new zg(p,p,f);r.push(Li(g,x,0,1))}else if(d==="sheary"){let x=new Gg(p,p,f);r.push(Li(g,x,0,1))}else if(d==="inherit"){let x=new Vg(p,c.index);for(let y=0;y<g.length;y++){let b=g[y];x.setFrame(y,G(b,"time",0),dt.enumValue(me,G(b,"inherit","Normal")))}r.push(x)}}}}if(t.ik)for(let l in t.ik){let u=t.ik[l],c=u[0];if(!c)continue;let f=i.findIkConstraint(l);if(!f)throw new Error("IK Constraint not found: "+l);let d=i.ikConstraints.indexOf(f),g=new Qg(u.length,u.length<<1,d),p=G(c,"time",0),x=G(c,"mix",1),y=G(c,"softness",0)*s;for(let b=0,A=0;;b++){g.setFrame(b,p,x,y,G(c,"bendPositive",!0)?1:-1,G(c,"compress",!1),G(c,"stretch",!1));let C=u[b+1];if(!C){g.shrink(A);break}let _=G(C,"time",0),v=G(C,"mix",1),M=G(C,"softness",0)*s,T=c.curve;T&&(A=Gt(T,g,A,b,0,p,_,x,v,1),A=Gt(T,g,A,b,1,p,_,y,M,s)),p=_,x=v,y=M,c=C}r.push(g)}if(t.transform)for(let l in t.transform){let u=t.transform[l],c=u[0];if(!c)continue;let f=i.findTransformConstraint(l);if(!f)throw new Error("Transform constraint not found: "+l);let d=i.transformConstraints.indexOf(f),g=new Jg(u.length,u.length*6,d),p=G(c,"time",0),x=G(c,"mixRotate",1),y=G(c,"mixX",1),b=G(c,"mixY",y),A=G(c,"mixScaleX",1),C=G(c,"mixScaleY",A),_=G(c,"mixShearY",1);for(let v=0,M=0;;v++){g.setFrame(v,p,x,y,b,A,C,_);let T=u[v+1];if(!T){g.shrink(M);break}let P=G(T,"time",0),B=G(T,"mixRotate",1),O=G(T,"mixX",1),X=G(T,"mixY",O),N=G(T,"mixScaleX",1),et=G(T,"mixScaleY",N),K=G(T,"mixShearY",1),V=c.curve;V&&(M=Gt(V,g,M,v,0,p,P,x,B,1),M=Gt(V,g,M,v,1,p,P,y,O,1),M=Gt(V,g,M,v,2,p,P,b,X,1),M=Gt(V,g,M,v,3,p,P,A,N,1),M=Gt(V,g,M,v,4,p,P,C,et,1),M=Gt(V,g,M,v,5,p,P,_,K,1)),p=P,x=B,y=O,b=X,A=N,C=et,A=N,c=T}r.push(g)}if(t.path)for(let l in t.path){let u=t.path[l],c=i.findPathConstraint(l);if(!c)throw new Error("Path constraint not found: "+l);let f=i.pathConstraints.indexOf(c);for(let d in u){let g=u[d],p=g[0];if(!p)continue;let x=g.length;if(d==="position"){let y=new t0(x,x,f);r.push(Li(g,y,0,c.positionMode==es.Fixed?s:1))}else if(d==="spacing"){let y=new e0(x,x,f);r.push(Li(g,y,0,c.spacingMode==Me.Length||c.spacingMode==Me.Fixed?s:1))}else if(d==="mix"){let y=new i0(x,x*3,f),b=G(p,"time",0),A=G(p,"mixRotate",1),C=G(p,"mixX",1),_=G(p,"mixY",C);for(let v=0,M=0;;v++){y.setFrame(v,b,A,C,_);let T=g[v+1];if(!T){y.shrink(M);break}let P=G(T,"time",0),B=G(T,"mixRotate",1),O=G(T,"mixX",1),X=G(T,"mixY",O),N=p.curve;N&&(M=Gt(N,y,M,v,0,b,P,A,B,1),M=Gt(N,y,M,v,1,b,P,C,O,1),M=Gt(N,y,M,v,2,b,P,_,X,1)),b=P,A=B,C=O,_=X,p=T}r.push(y)}}}if(t.physics)for(let l in t.physics){let u=t.physics[l],c=-1;if(l.length>0){let f=i.findPhysicsConstraint(l);if(!f)throw new Error("Physics constraint not found: "+l);c=i.physicsConstraints.indexOf(f)}for(let f in u){let d=u[f],g=d[0];if(!g)continue;let p=d.length;if(f=="reset"){const y=new ro(p,c);for(let b=0;g!=null;g=d[b+1],b++)y.setFrame(b,G(g,"time",0));r.push(y);continue}let x;if(f=="inertia")x=new s0(p,p,c);else if(f=="strength")x=new n0(p,p,c);else if(f=="damping")x=new r0(p,p,c);else if(f=="mass")x=new a0(p,p,c);else if(f=="wind")x=new o0(p,p,c);else if(f=="gravity")x=new l0(p,p,c);else if(f=="mix")x=new h0(p,p,c);else continue;r.push(Li(d,x,0,1))}}if(t.attachments)for(let l in t.attachments){let u=t.attachments[l],c=i.findSkin(l);if(!c)throw new Error("Skin not found: "+l);for(let f in u){let d=u[f],g=i.findSlot(f);if(!g)throw new Error("Slot not found: "+f);let p=g.index;for(let x in d){let y=d[x],b=c.getAttachment(p,x);for(let A in y){let C=y[A],_=C[0];if(_){if(A=="deform"){let v=b.bones,M=b.vertices,T=v?M.length/3*2:M.length,P=new Zg(C.length,C.length,p,b),B=G(_,"time",0);for(let O=0,X=0;;O++){let N,et=G(_,"vertices",null);if(!et)N=v?dt.newFloatArray(T):M;else{N=dt.newFloatArray(T);let E=G(_,"offset",0);if(dt.arrayCopy(et,0,N,E,et.length),s!=1)for(let L=E,Y=L+et.length;L<Y;L++)N[L]*=s;if(!v)for(let L=0;L<T;L++)N[L]+=M[L]}P.setFrame(O,B,N);let K=C[O+1];if(!K){P.shrink(X);break}let V=G(K,"time",0),J=_.curve;J&&(X=Gt(J,P,X,O,0,B,V,0,1,1)),B=V,_=K}r.push(P)}else if(A=="sequence"){let v=new ao(C.length,p,b),M=0;for(let T=0;T<C.length;T++){let P=G(_,"delay",M),B=G(_,"time",0),O=Ne[G(_,"mode","hold")],X=G(_,"index",0);v.setFrame(T,B,O,X,P),M=P,_=C[T+1]}r.push(v)}}}}}}if(t.drawOrder){let l=new hn(t.drawOrder.length),u=i.slots.length,c=0;for(let f=0;f<t.drawOrder.length;f++,c++){let d=t.drawOrder[f],g=null,p=G(d,"offsets",null);if(p){g=dt.newArray(u,-1);let x=dt.newArray(u-p.length,0),y=0,b=0;for(let A=0;A<p.length;A++){let C=p[A],_=i.findSlot(C.slot);if(!_)throw new Error("Slot not found: "+_);let v=_.index;for(;y!=v;)x[b++]=y++;g[y+C.offset]=y++}for(;y<u;)x[b++]=y++;for(let A=u-1;A>=0;A--)g[A]==-1&&(g[A]=x[--b])}l.setFrame(c,G(d,"time",0),g)}r.push(l)}if(t.events){let l=new Fr(t.events.length),u=0;for(let c=0;c<t.events.length;c++,u++){let f=t.events[c],d=i.findEvent(f.name);if(!d)throw new Error("Event not found: "+f.name);let g=new f0(dt.toSinglePrecision(G(f,"time",0)),d);g.intValue=G(f,"int",d.intValue),g.floatValue=G(f,"float",d.floatValue),g.stringValue=G(f,"string",d.stringValue),g.data.audioPath&&(g.volume=G(f,"volume",1),g.balance=G(f,"balance",0)),l.setFrame(u,g)}r.push(l)}let o=0;for(let l=0,u=r.length;l<u;l++)o=Math.max(o,r[l].getDuration());i.animations.push(new mc(e,r,o))}}class RP{constructor(t,e,i,s,r){S(this,"parent");S(this,"skin");S(this,"slotIndex");S(this,"mesh");S(this,"inheritTimeline");this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=s,this.inheritTimeline=r}}function Li(n,t,e,i){let s=n[0],r=G(s,"time",0),o=G(s,"value",e)*i,l=0;for(let u=0;;u++){t.setFrame(u,r,o);let c=n[u+1];if(!c)return t.shrink(l),t;let f=G(c,"time",0),d=G(c,"value",e)*i;s.curve&&(l=Gt(s.curve,t,l,u,0,r,f,o,d,i)),r=f,o=d,s=c}}function xh(n,t,e,i,s,r){let o=n[0],l=G(o,"time",0),u=G(o,e,s)*r,c=G(o,i,s)*r,f=0;for(let d=0;;d++){t.setFrame(d,l,u,c);let g=n[d+1];if(!g)return t.shrink(f),t;let p=G(g,"time",0),x=G(g,e,s)*r,y=G(g,i,s)*r,b=o.curve;b&&(f=Gt(b,t,f,d,0,l,p,u,x,r),f=Gt(b,t,f,d,1,l,p,c,y,r)),l=p,u=x,c=y,o=g}}function Gt(n,t,e,i,s,r,o,l,u,c){if(n=="stepped")return t.setStepped(i),e;let f=s<<2,d=n[f],g=n[f+1]*c,p=n[f+2],x=n[f+3]*c;return t.setBezier(e,i,s,r,l,d,g,p,x,o,u),e+1}function G(n,t,e){return n[t]!==void 0?n[t]:e}typeof Math.fround>"u"&&(Math.fround=function(n){return function(t){return n[0]=t,n[0]}}(new Float32Array(1)));const Oi=class Oi extends XM{constructor(e){super(e.resource);S(this,"texture");this.texture=Ot.from(e)}static from(e){return Oi.textureMap.has(e)?Oi.textureMap.get(e):new Oi(e)}setFilters(e,i){const s=this.texture.source.style;s.minFilter=Oi.toPixiTextureFilter(e),s.magFilter=Oi.toPixiTextureFilter(i),this.texture.source.autoGenerateMipmaps=Oi.toPixiMipMap(e),this.texture.source.updateMipmaps()}setWraps(e,i){const s=this.texture.source.style;s.addressModeU=Oi.toPixiTextureWrap(e),s.addressModeV=Oi.toPixiTextureWrap(i)}dispose(){this.texture.destroy()}static toPixiMipMap(e){switch(e){case ke.Nearest:case ke.Linear:return!1;case ke.MipMapNearestLinear:case ke.MipMapNearestNearest:case ke.MipMapLinearLinear:case ke.MipMapLinearNearest:return!0;default:throw new Error(`Unknown texture filter: ${String(e)}`)}}static toPixiTextureFilter(e){switch(e){case ke.Nearest:case ke.MipMapNearestLinear:case ke.MipMapNearestNearest:return"nearest";case ke.Linear:case ke.MipMapLinearLinear:case ke.MipMapLinearNearest:return"linear";default:throw new Error(`Unknown texture filter: ${String(e)}`)}}static toPixiTextureWrap(e){switch(e){case vs.ClampToEdge:return"clamp-to-edge";case vs.MirroredRepeat:return"mirror-repeat";case vs.Repeat:return"repeat";default:throw new Error(`Unknown texture wrap: ${String(e)}`)}}static toPixiBlending(e){switch(e){case Xs.Normal:return"normal";case Xs.Additive:return"add";case Xs.Multiply:return"multiply";case Xs.Screen:return"screen";default:throw new Error(`Unknown blendMode: ${String(e)}`)}}};S(Oi,"textureMap",new Map);let ho=Oi;const FP={extension:_t.Asset,resolver:{test:n=>Ti(n,".atlas"),parse:n=>{var e,i;const t=n.split(".");return{resolution:parseFloat(((i=(e=mn.RETINA_PREFIX)==null?void 0:e.exec(n))==null?void 0:i[1])??"1"),format:t[t.length-2],src:n}}},loader:{extension:{type:_t.LoadParser,priority:ss.Normal,name:"spineTextureAtlasLoader"},test(n){return Ti(n,".atlas")},async load(n){return await(await ve.get().fetch(n)).text()},testParse(n,t){const e=Ti(t.src,".atlas"),i=typeof n=="string";return Promise.resolve(e&&i)},unload(n){n.dispose()},async parse(n,t,e){const i=t.data||{};let s=Xe.dirname(t.src);s&&s.lastIndexOf("/")!==s.length-1&&(s+="/");const r=new WM(n);if(i.images instanceof Pi||typeof i.images=="string"){const l=i.images;i.images={},i.images[r.pages[0].name]=l}const o=[];for(const l of r.pages){const u=l.name,c=i!=null&&i.images?i.images[u]:void 0;if(c instanceof Pi)l.setTexture(ho.from(c));else{const f=c??Xe.normalize([...s.split(Xe.sep),u].join(Xe.sep)),d={src:Ja(f,t.src),data:{...i.imageMetadata,alphaMode:l.pma?"premultiplied-alpha":"premultiply-alpha-on-upload"}},g=e.load(d).then(p=>{l.setTexture(ho.from(p.source))});o.push(g)}}return await Promise.all(o),r}}};Fe.add(FP);function BP(n){return Object.prototype.hasOwnProperty.call(n,"bones")}function LP(n){return n instanceof Uint8Array}const OP={extension:_t.Asset,loader:{extension:{type:_t.LoadParser,priority:ss.Normal,name:"spineSkeletonLoader"},test(n){return Ti(n,".skel")},async load(n){const t=await ve.get().fetch(n);return new Uint8Array(await t.arrayBuffer())},testParse(n,t){const e=Ti(t.src,".json")&&BP(n),i=Ti(t.src,".skel")&&LP(n);return Promise.resolve(e||i)}}};Fe.add(OP);const DP=new Float32Array(1),YP=new Uint32Array(1);class NP extends tg{constructor(){const e=new pn({data:DP,label:"attribute-batch-buffer",usage:Re.VERTEX|Re.COPY_DST,shrinkToFit:!1}),i=new pn({data:YP,label:"index-batch-buffer",usage:Re.INDEX|Re.COPY_DST,shrinkToFit:!1}),s=7*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:s,offset:0},aUV:{buffer:e,format:"float32x2",stride:s,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:s,offset:4*4},aDarkColor:{buffer:e,format:"unorm8x4",stride:s,offset:5*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:s,offset:6*4}},indexBuffer:i})}}const XP={name:"color-bit",vertex:{header:`
            @in aDarkColor: vec4<f32>;
            @out vDarkColor: vec4<f32>;
        `,main:`
        vDarkColor = aDarkColor;
        `},fragment:{header:`
            @in vDarkColor: vec4<f32>;
        `,end:`

        let alpha = outColor.a * vColor.a;
        let rgb = ((outColor.a - 1.0) * vDarkColor.a + 1.0 - outColor.rgb) * vDarkColor.rgb + outColor.rgb * vColor.rgb;

        finalColor = vec4<f32>(rgb, alpha);

        `}},UP={name:"color-bit",vertex:{header:`
            in vec4 aDarkColor;
            out vec4 vDarkColor;
        `,main:`
            vDarkColor = aDarkColor;
        `},fragment:{header:`
            in vec4 vDarkColor;
        `,end:`

        finalColor.a = outColor.a * vColor.a;
        finalColor.rgb = ((outColor.a - 1.0) * vDarkColor.a + 1.0 - outColor.rgb) * vDarkColor.rgb + outColor.rgb * vColor.rgb;
        `}};class WP extends yo{constructor(t){const e=ng({name:"dark-tint-batch",bits:[ag,UP,lg(t),cg]}),i=sg({name:"dark-tint-batch",bits:[rg,XP,og(t),hg]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:ug(t)}})}}let jp=null;const mo=class mo extends Qm{constructor(){super(...arguments);S(this,"geometry",new NP);S(this,"shader",jp||(jp=new WP(this.maxTextures)));S(this,"name",mo.extension.name);S(this,"vertexSize",7)}packAttributes(e,i,s,r,o){const l=o<<16|e.roundPixels&65535,u=e.transform,c=u.a,f=u.b,d=u.c,g=u.d,p=u.tx,x=u.ty,{positions:y,uvs:b}=e,A=e.color,C=(A>>24&255)/255,_=Be.shared.setValue(e.darkColor).premultiply(C,!0).toPremultiplied(1,!1),v=e.attributeOffset,M=v+e.attributeSize;for(let T=v;T<M;T++){const P=T*2,B=y[P],O=y[P+1];i[r++]=c*B+d*O+p,i[r++]=g*O+f*B+x,i[r++]=b[P],i[r++]=b[P+1],s[r++]=A,s[r++]=_,s[r++]=l}}packQuadAttributes(e,i,s,r,o){const l=e.texture,u=e.transform,c=u.a,f=u.b,d=u.c,g=u.d,p=u.tx,x=u.ty,y=e.bounds,b=y.maxX,A=y.minX,C=y.maxY,_=y.minY,v=l.uvs,M=e.color,T=e.darkColor,P=o<<16|e.roundPixels&65535;i[r+0]=c*A+d*_+p,i[r+1]=g*_+f*A+x,i[r+2]=v.x0,i[r+3]=v.y0,s[r+4]=M,s[r+5]=T,s[r+6]=P,i[r+7]=c*b+d*_+p,i[r+8]=g*_+f*b+x,i[r+9]=v.x1,i[r+10]=v.y1,s[r+11]=M,s[r+12]=T,s[r+13]=P,i[r+14]=c*b+d*C+p,i[r+15]=g*C+f*b+x,i[r+16]=v.x2,i[r+17]=v.y2,s[r+18]=M,s[r+19]=T,s[r+20]=P,i[r+21]=c*A+d*C+p,i[r+22]=g*C+f*A+x,i[r+23]=v.x3,i[r+24]=v.y3,s[r+25]=M,s[r+26]=T,s[r+27]=P}};S(mo,"extension",{type:[_t.Batcher],name:"darkTint"});let Hh=mo;Fe.add(Hh);class zP{constructor(){S(this,"indexOffset",0);S(this,"attributeOffset",0);S(this,"indexSize");S(this,"attributeSize");S(this,"batcherName","darkTint");S(this,"topology","triangle-list");S(this,"packAsQuad",!1);S(this,"renderable");S(this,"positions");S(this,"indices");S(this,"uvs");S(this,"roundPixels");S(this,"data");S(this,"blendMode");S(this,"darkTint");S(this,"texture");S(this,"transform");S(this,"_textureId");S(this,"_attributeStart");S(this,"_indexStart");S(this,"_batcher");S(this,"_batch")}get color(){const t=this.data.color,e=this.renderable.groupColor,i=this.renderable.groupAlpha;let s;const r=t.a*i*255;if(e!==16777215){const o=e>>16&255,l=e>>8&255,u=e&255,c=t.r*u,f=t.g*l,d=t.b*o;s=r<<24|d<<16|f<<8|c}else s=r<<24|t.b*255<<16|t.g*255<<8|t.r*255;return s}get darkColor(){const t=this.data.darkColor;return t.b*255<<16|t.g*255<<8|t.r*255}get groupTransform(){return this.renderable.groupTransform}setData(t,e,i,s){if(this.renderable=t,this.transform=t.groupTransform,this.data=e,e.clipped){const r=e.clippedData;this.indexSize=r.indicesCount,this.attributeSize=r.vertexCount,this.positions=r.vertices,this.indices=r.indices,this.uvs=r.uvs}else this.indexSize=e.indices.length,this.attributeSize=e.vertices.length/2,this.positions=e.vertices,this.indices=e.indices,this.uvs=e.uvs;this.texture=e.texture,this.roundPixels=s,this.blendMode=i,this.batcherName=e.darkTint?"darkTint":"default"}}const GP={0:"normal",1:"add",2:"multiply",3:"screen"};class b0{constructor(t){S(this,"renderer");S(this,"gpuSpineData",{});S(this,"_destroyRenderableBound",this.destroyRenderable.bind(this));this.renderer=t}validateRenderable(t){if(t._validateAndTransformAttachments(),t.spineAttachmentsDirty)return!0;if(t.spineTexturesDirty){const e=t.skeleton.drawOrder,i=this.gpuSpineData[t.uid];for(let s=0,r=e.length;s<r;s++){const o=e[s],l=o.getAttachment();if(l instanceof Yi||l instanceof Ni){const u=t._getCachedData(o,l),c=i.slotBatches[u.id],f=u.texture;if(f!==c.texture&&!c._batcher.checkAndUpdateTexture(c,f))return!0}}}return!1}addRenderable(t,e){var l,u;const i=this._getSpineData(t),s=this.renderer.renderPipes.batch,r=t.skeleton.drawOrder,o=this.renderer._roundPixels|t._roundPixels;t._validateAndTransformAttachments(),t.spineAttachmentsDirty=!1,t.spineTexturesDirty=!1;for(let c=0,f=r.length;c<f;c++){const d=r[c],g=d.getAttachment(),p=GP[d.data.blendMode];if(g instanceof Yi||g instanceof Ni){const y=t._getCachedData(d,g),b=(l=i.slotBatches)[u=y.id]||(l[u]=new zP);b.setData(t,y,p,o),y.skipRender||s.addToBatch(b,e)}const x=t._slotsObject[d.data.name];if(x){const y=x.container;y.includeInBuild=!0,BM(y,e,this.renderer),y.includeInBuild=!1}}}updateRenderable(t){var s;const e=this.gpuSpineData[t.uid];t._validateAndTransformAttachments(),t.spineAttachmentsDirty=!1,t.spineTexturesDirty=!1;const i=t.skeleton.drawOrder;for(let r=0,o=i.length;r<o;r++){const l=i[r],u=l.getAttachment();if((u instanceof Yi||u instanceof Ni)&&!t._getCachedData(l,u).skipRender){const f=e.slotBatches[t._getCachedData(l,u).id];(s=f._batcher)==null||s.updateElement(f)}}}destroyRenderable(t){this.gpuSpineData[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}destroy(){this.gpuSpineData=null,this.renderer=null}_getSpineData(t){return this.gpuSpineData[t.uid]||this._initMeshData(t)}_initMeshData(t){return this.gpuSpineData[t.uid]={slotBatches:{}},t.on("destroyed",this._destroyRenderableBound),this.gpuSpineData[t.uid]}}S(b0,"extension",{type:[_t.WebGLPipes,_t.WebGPUPipes,_t.CanvasPipes],name:"spine"});Fe.add(b0);const za=new io;Br.yDown=!0;const Ln=new lo,Kp=new Rr(()=>new eo);class qh extends sc{constructor(e){e instanceof oo&&(e={skeletonData:e});super();S(this,"batched",!0);S(this,"buildId",0);S(this,"renderPipeId","spine");S(this,"_didSpineUpdate",!1);S(this,"beforeUpdateWorldTransforms",()=>{});S(this,"afterUpdateWorldTransforms",()=>{});S(this,"skeleton");S(this,"state");S(this,"skeletonBounds");S(this,"darkTint",!1);S(this,"_debug");S(this,"_slotsObject",Object.create(null));S(this,"clippingSlotToPixiMasks",Object.create(null));S(this,"spineAttachmentsDirty",!0);S(this,"spineTexturesDirty",!0);S(this,"_lastAttachments",[]);S(this,"_stateChanged",!0);S(this,"attachmentCacheData",[]);S(this,"_autoUpdate",!0);S(this,"_boundsProvider");S(this,"hasNeverUpdated",!0);S(this,"currentClippingSlot");const i=e instanceof oo?e:e.skeletonData;this.skeleton=new Br(i),this.state=new Gh(new NM(i)),this.autoUpdate=(e==null?void 0:e.autoUpdate)??!0,this.darkTint=(e==null?void 0:e.darkTint)===void 0?this.skeleton.slots.some(r=>!!r.data.darkColor):e==null?void 0:e.darkTint;const s=this.skeleton.slots;for(let r=0;r<s.length;r++)this.attachmentCacheData[r]=Object.create(null);this._boundsProvider=e.boundsProvider}getSlotFromRef(e){let i;if(typeof e=="number"?i=this.skeleton.slots[e]:typeof e=="string"?i=this.skeleton.findSlot(e):i=e,!i)throw new Error(`No slot found with the given slot reference: ${e}`);return i}get debug(){return this._debug}set debug(e){this._debug&&this._debug.unregisterSpine(this),e&&e.registerSpine(this),this._debug=e}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e?bs.shared.add(this.internalUpdate,this):bs.shared.remove(this.internalUpdate,this),this._autoUpdate=e}get boundsProvider(){return this._boundsProvider}set boundsProvider(e){this._boundsProvider=e,e&&(this._boundsDirty=!1),this.updateBounds()}update(e){this.internalUpdate(0,e)}internalUpdate(e,i){this._updateAndApplyState(i??bs.shared.deltaMS/1e3)}get bounds(){return this._boundsDirty&&this.updateBounds(),this._bounds}setBonePosition(e,i){const s=e;if(typeof e=="string"&&(e=this.skeleton.findBone(e)),!e)throw Error(`Cant set bone position, bone ${String(s)} not found`);if(za.set(i.x,i.y),e.parent){const r=e.parent.worldToLocal(za);e.x=r.x,e.y=-r.y}else e.x=za.x,e.y=za.y}getBonePosition(e,i){const s=e;return typeof e=="string"&&(e=this.skeleton.findBone(e)),e?(i||(i={x:0,y:0}),i.x=e.worldX,i.y=e.worldY,i):(console.error(`Cant set bone position! Bone ${String(s)} not found`),i)}_updateAndApplyState(e){this.hasNeverUpdated=!1,this.state.update(e),this.skeleton.update(e);const{skeleton:i}=this;this.state.apply(i),this.beforeUpdateWorldTransforms(this),i.updateWorldTransform(Ys.update),this.afterUpdateWorldTransforms(this),this.updateSlotObjects(),this._stateChanged=!0,this.onViewUpdate()}_validateAndTransformAttachments(){this._stateChanged&&(this._stateChanged=!1,this.validateAttachments(),this.transformAttachments())}validateAttachments(){const e=this.skeleton.drawOrder,i=this._lastAttachments;let s=0,r=!1;for(let o=0;o<e.length;o++){const u=e[o].getAttachment();u&&(u!==i[s]&&(r=!0,i[s]=u),s++)}s!==i.length&&(r=!0,i.length=s),this.spineAttachmentsDirty||(this.spineAttachmentsDirty=r)}updateAndSetPixiMask(e,i){var l,u;const s=e.attachment;if(s&&s instanceof cn){const c=(l=this.clippingSlotToPixiMasks)[u=e.data.name]||(l[u]={slot:e,vertices:new Array});c.maskComputed=!1,this.currentClippingSlot=this.clippingSlotToPixiMasks[e.data.name];return}let r=this.currentClippingSlot,o=this._slotsObject[e.data.name];if(r&&o){let c=r.slot,f=c.attachment,d=r.mask;if(d||(d=Kp.obtain(),r.mask=d,this.addChild(d)),!r.maskComputed){r.maskComputed=!0;const g=f.worldVerticesLength,p=r.vertices;f.computeWorldVertices(c,0,g,p,0,2),d.clear().poly(p).stroke({width:0}).fill({alpha:.25})}o.container.mask=d}else o!=null&&o.container.mask&&(o.container.mask=null);if(r&&r.slot.attachment.endSlot==e.data&&(this.currentClippingSlot=void 0),i){for(const c in this.clippingSlotToPixiMasks){const f=this.clippingSlotToPixiMasks[c];(!(f.slot.attachment instanceof cn)||!f.maskComputed)&&f.mask&&(this.removeChild(f.mask),Kp.free(f.mask),f.mask=void 0)}this.currentClippingSlot=void 0}}transformAttachments(){var i;const e=this.skeleton.drawOrder;for(let s=0;s<e.length;s++){const r=e[s];this.updateAndSetPixiMask(r,s===e.length-1);const o=r.getAttachment();if(o){if(o instanceof Ni||o instanceof Yi){const l=this._getCachedData(r,o);o instanceof Yi?o.computeWorldVertices(r,l.vertices,0,2):o.computeWorldVertices(r,0,o.worldVerticesLength,l.vertices,0,2),l.uvs.length<o.uvs.length&&(l.uvs=new Float32Array(o.uvs.length)),Dh(o.uvs.buffer,l.uvs.buffer);const c=r.bone.skeleton.color,f=r.color,d=o.color;l.color.set(c.r*f.r*d.r,c.g*f.g*d.g,c.b*f.b*d.b,c.a*f.a*d.a),r.darkColor&&l.darkColor.setFromColor(r.darkColor),l.skipRender=l.clipped=!1;const g=((i=o.region)==null?void 0:i.texture.texture)||Ot.EMPTY;l.texture!==g&&(l.texture=g,this.spineTexturesDirty=!0),Ln.isClipping()&&this.updateClippingData(l)}else if(o instanceof cn){Ln.clipStart(r,o);continue}}Ln.clipEndWithSlot(r)}Ln.clipEnd()}updateClippingData(e){e.clipped=!0,Ln.clipTrianglesUnpacked(e.vertices,e.indices,e.indices.length,e.uvs);const{clippedVertices:i,clippedUVs:s,clippedTriangles:r}=Ln,o=i.length/2,l=r.length;e.clippedData||(e.clippedData={vertices:new Float32Array(o*2),uvs:new Float32Array(o*2),vertexCount:o,indices:new Uint16Array(l),indicesCount:l},this.spineAttachmentsDirty=!0);const u=e.clippedData,c=u.vertexCount!==o||l!==u.indicesCount;e.skipRender=o===0,c&&(this.spineAttachmentsDirty=!0,u.vertexCount<o&&(u.vertices=new Float32Array(o*2),u.uvs=new Float32Array(o*2)),u.indices.length<l&&(u.indices=new Uint16Array(l)));const{vertices:f,uvs:d,indices:g}=u;for(let p=0;p<o;p++)f[p*2]=i[p*2],f[p*2+1]=i[p*2+1],d[p*2]=s[p*2],d[p*2+1]=s[p*2+1];u.vertexCount=o;for(let p=0;p<l;p++)g[p]!==r[p]&&(this.spineAttachmentsDirty=!0,g[p]=r[p]);u.indicesCount=l}updateSlotObjects(){for(const e in this._slotsObject){const i=this._slotsObject[e];i&&this.updateSlotObject(i)}}updateSlotObject(e){const{slot:i,container:s}=e,r=e.followAttachmentTimeline?!!i.attachment:!0;if(s.visible=this.skeleton.drawOrder.includes(i)&&r,s.visible){const o=i.bone;s.position.set(o.worldX,o.worldY),s.scale.x=o.getWorldScaleX(),s.scale.y=o.getWorldScaleY(),s.rotation=o.getWorldRotationX()*lm,s.alpha=this.skeleton.color.a*i.color.a}}_getCachedData(e,i){return this.attachmentCacheData[e.data.index][i.name]||this.initCachedData(e,i)}initCachedData(e,i){var r,o;let s;return i instanceof Yi?(s=new Float32Array(8),this.attachmentCacheData[e.data.index][i.name]={id:`${e.data.index}-${i.name}`,vertices:s,clipped:!1,indices:[0,1,2,0,2,3],uvs:new Float32Array(i.uvs.length),color:new kt(1,1,1,1),darkColor:new kt(0,0,0,0),darkTint:this.darkTint,skipRender:!1,texture:(r=i.region)==null?void 0:r.texture.texture}):(s=new Float32Array(i.worldVerticesLength),this.attachmentCacheData[e.data.index][i.name]={id:`${e.data.index}-${i.name}`,vertices:s,clipped:!1,indices:i.triangles,uvs:new Float32Array(i.uvs.length),color:new kt(1,1,1,1),darkColor:new kt(0,0,0,0),darkTint:this.darkTint,skipRender:!1,texture:(o=i.region)==null?void 0:o.texture.texture}),this.attachmentCacheData[e.data.index][i.name]}onViewUpdate(){var i;if(this._didViewChangeTick++,this._boundsProvider||(this._boundsDirty=!0),this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this),(i=this.debug)==null||i.renderDebug(this)}addSlotObject(e,i,s){var o;e=this.getSlotFromRef(e);for(const l in this._slotsObject)((o=this._slotsObject[l])==null?void 0:o.container)===i&&this.removeSlotObject(this._slotsObject[l].slot);this.removeSlotObject(e),i.includeInBuild=!1,this.addChild(i);const r={container:i,slot:e,followAttachmentTimeline:(s==null?void 0:s.followAttachmentTimeline)||!1};this._slotsObject[e.data.name]=r,this.updateSlotObject(r)}removeSlotObject(e){var s,r;let i;if(e instanceof er){for(const o in this._slotsObject)if(((s=this._slotsObject[o])==null?void 0:s.container)===e){this._slotsObject[o]=null,i=e;break}}else{const o=this.getSlotFromRef(e);i=(r=this._slotsObject[o.data.name])==null?void 0:r.container,this._slotsObject[o.data.name]=null}i&&(this.removeChild(i),i.includeInBuild=!0)}removeSlotObjects(){Object.entries(this._slotsObject).forEach(([e,i])=>{i&&i.container.removeFromParent(),delete this._slotsObject[e]})}getSlotObject(e){var i;return e=this.getSlotFromRef(e),(i=this._slotsObject[e.data.name])==null?void 0:i.container}updateBounds(){this._boundsDirty=!1,this.skeletonBounds||(this.skeletonBounds=new kP);const e=this.skeletonBounds;if(e.update(this.skeleton,!0),this._boundsProvider){const i=this._boundsProvider.calculateBounds(this),s=this._bounds;s.clear(),s.x=i.x,s.y=i.y,s.width=i.width,s.height=i.height}else if(e.minX===1/0){this.hasNeverUpdated&&(this._updateAndApplyState(0),this._boundsDirty=!1),this._validateAndTransformAttachments();const i=this.skeleton.drawOrder,s=this._bounds;s.clear();for(let r=0;r<i.length;r++){const o=i[r],l=o.getAttachment();if(l&&(l instanceof Yi||l instanceof Ni)){const u=this._getCachedData(o,l);s.addVertexData(u.vertices,0,u.vertices.length)}}}else this._bounds.minX=e.minX,this._bounds.minY=e.minY,this._bounds.maxX=e.maxX,this._bounds.maxY=e.maxY}addBounds(e){e.addBounds(this.bounds)}destroy(e=!1){super.destroy(e),bs.shared.remove(this.internalUpdate,this),this.state.clearListeners(),this.debug=void 0,this.skeleton=null,this.state=null,this._slotsObject=null,this._lastAttachments.length=0,this.attachmentCacheData=null}skeletonToPixiWorldCoordinates(e){this.worldTransform.apply(e,e)}pixiWorldCoordinatesToSkeleton(e){this.worldTransform.applyInverse(e,e)}pixiWorldCoordinatesToBone(e,i){this.pixiWorldCoordinatesToSkeleton(e),i.parent?i.parent.worldToLocal(e):i.worldToLocal(e)}static from({skeleton:e,atlas:i,scale:s=1,darkTint:r,autoUpdate:o=!0,boundsProvider:l}){const u=`${e}-${i}-${s}`;if(he.has(u))return new qh({skeletonData:he.get(u),darkTint:r,autoUpdate:o,boundsProvider:l});const c=zn.get(e),f=zn.get(i),d=new VM(f),g=c instanceof Uint8Array?new KM(d):new EP(d);g.scale=s;const p=g.readSkeletonData(c);return he.set(u,p),new qh({skeletonData:p,darkTint:r,autoUpdate:o,boundsProvider:l})}}var yh={exports:{}},Zp;function VP(){return Zp||(Zp=1,function(n){(function(){function t(F,z,ot){return F.call.apply(F.bind,arguments)}function e(F,z,ot){if(!F)throw Error();if(2<arguments.length){var st=Array.prototype.slice.call(arguments,2);return function(){var ut=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ut,st),F.apply(z,ut)}}return function(){return F.apply(z,arguments)}}function i(F,z,ot){return i=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?t:e,i.apply(null,arguments)}var s=Date.now||function(){return+new Date};function r(F,z){this.a=F,this.o=z||F,this.c=this.o.document}var o=!!window.FontFace;function l(F,z,ot,st){if(z=F.c.createElement(z),ot)for(var ut in ot)ot.hasOwnProperty(ut)&&(ut=="style"?z.style.cssText=ot[ut]:z.setAttribute(ut,ot[ut]));return st&&z.appendChild(F.c.createTextNode(st)),z}function u(F,z,ot){F=F.c.getElementsByTagName(z)[0],F||(F=document.documentElement),F.insertBefore(ot,F.lastChild)}function c(F){F.parentNode&&F.parentNode.removeChild(F)}function f(F,z,ot){z=z||[],ot=ot||[];for(var st=F.className.split(/\s+/),ut=0;ut<z.length;ut+=1){for(var xt=!1,vt=0;vt<st.length;vt+=1)if(z[ut]===st[vt]){xt=!0;break}xt||st.push(z[ut])}for(z=[],ut=0;ut<st.length;ut+=1){for(xt=!1,vt=0;vt<ot.length;vt+=1)if(st[ut]===ot[vt]){xt=!0;break}xt||z.push(st[ut])}F.className=z.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(F,z){for(var ot=F.className.split(/\s+/),st=0,ut=ot.length;st<ut;st++)if(ot[st]==z)return!0;return!1}function g(F){return F.o.location.hostname||F.a.location.hostname}function p(F,z,ot){function st(){$t&&ut&&xt&&($t(vt),$t=null)}z=l(F,"link",{rel:"stylesheet",href:z,media:"all"});var ut=!1,xt=!0,vt=null,$t=ot||null;o?(z.onload=function(){ut=!0,st()},z.onerror=function(){ut=!0,vt=Error("Stylesheet failed to load"),st()}):setTimeout(function(){ut=!0,st()},0),u(F,"head",z)}function x(F,z,ot,st){var ut=F.c.getElementsByTagName("head")[0];if(ut){var xt=l(F,"script",{src:z}),vt=!1;return xt.onload=xt.onreadystatechange=function(){vt||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(vt=!0,ot&&ot(null),xt.onload=xt.onreadystatechange=null,xt.parentNode.tagName=="HEAD"&&ut.removeChild(xt))},ut.appendChild(xt),setTimeout(function(){vt||(vt=!0,ot&&ot(Error("Script load timeout")))},st||5e3),xt}return null}function y(){this.a=0,this.c=null}function b(F){return F.a++,function(){F.a--,C(F)}}function A(F,z){F.c=z,C(F)}function C(F){F.a==0&&F.c&&(F.c(),F.c=null)}function _(F){this.a=F||"-"}_.prototype.c=function(F){for(var z=[],ot=0;ot<arguments.length;ot++)z.push(arguments[ot].replace(/[\W_]+/g,"").toLowerCase());return z.join(this.a)};function v(F,z){this.c=F,this.f=4,this.a="n";var ot=(z||"n4").match(/^([nio])([1-9])$/i);ot&&(this.a=ot[1],this.f=parseInt(ot[2],10))}function M(F){return B(F)+" "+(F.f+"00")+" 300px "+T(F.c)}function T(F){var z=[];F=F.split(/,\s*/);for(var ot=0;ot<F.length;ot++){var st=F[ot].replace(/['"]/g,"");st.indexOf(" ")!=-1||/^\d/.test(st)?z.push("'"+st+"'"):z.push(st)}return z.join(",")}function P(F){return F.a+F.f}function B(F){var z="normal";return F.a==="o"?z="oblique":F.a==="i"&&(z="italic"),z}function O(F){var z=4,ot="n",st=null;return F&&((st=F.match(/(normal|oblique|italic)/i))&&st[1]&&(ot=st[1].substr(0,1).toLowerCase()),(st=F.match(/([1-9]00|normal|bold)/i))&&st[1]&&(/bold/i.test(st[1])?z=7:/[1-9]00/.test(st[1])&&(z=parseInt(st[1].substr(0,1),10)))),ot+z}function X(F,z){this.c=F,this.f=F.o.document.documentElement,this.h=z,this.a=new _("-"),this.j=z.events!==!1,this.g=z.classes!==!1}function N(F){F.g&&f(F.f,[F.a.c("wf","loading")]),K(F,"loading")}function et(F){if(F.g){var z=d(F.f,F.a.c("wf","active")),ot=[],st=[F.a.c("wf","loading")];z||ot.push(F.a.c("wf","inactive")),f(F.f,ot,st)}K(F,"inactive")}function K(F,z,ot){F.j&&F.h[z]&&(ot?F.h[z](ot.c,P(ot)):F.h[z]())}function V(){this.c={}}function J(F,z,ot){var st=[],ut;for(ut in z)if(z.hasOwnProperty(ut)){var xt=F.c[ut];xt&&st.push(xt(z[ut],ot))}return st}function E(F,z){this.c=F,this.f=z,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function L(F){u(F.c,"body",F.a)}function Y(F){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+T(F.c)+";"+("font-style:"+B(F)+";font-weight:"+(F.f+"00")+";")}function W(F,z,ot,st,ut,xt){this.g=F,this.j=z,this.a=st,this.c=ot,this.f=ut||3e3,this.h=xt||void 0}W.prototype.start=function(){var F=this.c.o.document,z=this,ot=s(),st=new Promise(function(vt,$t){function Ht(){s()-ot>=z.f?$t():F.fonts.load(M(z.a),z.h).then(function(re){1<=re.length?vt():setTimeout(Ht,25)},function(){$t()})}Ht()}),ut=null,xt=new Promise(function(vt,$t){ut=setTimeout($t,z.f)});Promise.race([xt,st]).then(function(){ut&&(clearTimeout(ut),ut=null),z.g(z.a)},function(){z.j(z.a)})};function q(F,z,ot,st,ut,xt,vt){this.v=F,this.B=z,this.c=ot,this.a=st,this.s=vt||"BESbswy",this.f={},this.w=ut||3e3,this.u=xt||null,this.m=this.j=this.h=this.g=null,this.g=new E(this.c,this.s),this.h=new E(this.c,this.s),this.j=new E(this.c,this.s),this.m=new E(this.c,this.s),F=new v(this.a.c+",serif",P(this.a)),F=Y(F),this.g.a.style.cssText=F,F=new v(this.a.c+",sans-serif",P(this.a)),F=Y(F),this.h.a.style.cssText=F,F=new v("serif",P(this.a)),F=Y(F),this.j.a.style.cssText=F,F=new v("sans-serif",P(this.a)),F=Y(F),this.m.a.style.cssText=F,L(this.g),L(this.h),L(this.j),L(this.m)}var j={D:"serif",C:"sans-serif"},tt=null;function Z(){if(tt===null){var F=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);tt=!!F&&(536>parseInt(F[1],10)||parseInt(F[1],10)===536&&11>=parseInt(F[2],10))}return tt}q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),lt(this)};function ct(F,z,ot){for(var st in j)if(j.hasOwnProperty(st)&&z===F.f[j[st]]&&ot===F.f[j[st]])return!0;return!1}function lt(F){var z=F.g.a.offsetWidth,ot=F.h.a.offsetWidth,st;(st=z===F.f.serif&&ot===F.f["sans-serif"])||(st=Z()&&ct(F,z,ot)),st?s()-F.A>=F.w?Z()&&ct(F,z,ot)&&(F.u===null||F.u.hasOwnProperty(F.a.c))?Ct(F,F.v):Ct(F,F.B):Pt(F):Ct(F,F.v)}function Pt(F){setTimeout(i(function(){lt(this)},F),50)}function Ct(F,z){setTimeout(i(function(){c(this.g.a),c(this.h.a),c(this.j.a),c(this.m.a),z(this.a)},F),0)}function gt(F,z,ot){this.c=F,this.a=z,this.f=0,this.m=this.j=!1,this.s=ot}var It=null;gt.prototype.g=function(F){var z=this.a;z.g&&f(z.f,[z.a.c("wf",F.c,P(F).toString(),"active")],[z.a.c("wf",F.c,P(F).toString(),"loading"),z.a.c("wf",F.c,P(F).toString(),"inactive")]),K(z,"fontactive",F),this.m=!0,wt(this)},gt.prototype.h=function(F){var z=this.a;if(z.g){var ot=d(z.f,z.a.c("wf",F.c,P(F).toString(),"active")),st=[],ut=[z.a.c("wf",F.c,P(F).toString(),"loading")];ot||st.push(z.a.c("wf",F.c,P(F).toString(),"inactive")),f(z.f,st,ut)}K(z,"fontinactive",F),wt(this)};function wt(F){--F.f==0&&F.j&&(F.m?(F=F.a,F.g&&f(F.f,[F.a.c("wf","active")],[F.a.c("wf","loading"),F.a.c("wf","inactive")]),K(F,"active")):et(F.a))}function ee(F){this.j=F,this.a=new V,this.h=0,this.f=this.g=!0}ee.prototype.load=function(F){this.c=new r(this.j,F.context||this.j),this.g=F.events!==!1,this.f=F.classes!==!1,Pe(this,new X(this.c,F),F)};function ie(F,z,ot,st,ut){var xt=--F.h==0;(F.f||F.g)&&setTimeout(function(){var vt=ut||null,$t=st||null||{};if(ot.length===0&&xt)et(z.a);else{z.f+=ot.length,xt&&(z.j=xt);var Ht,re=[];for(Ht=0;Ht<ot.length;Ht++){var ae=ot[Ht],Oe=$t[ae.c],si=z.a,Ts=ae;if(si.g&&f(si.f,[si.a.c("wf",Ts.c,P(Ts).toString(),"loading")]),K(si,"fontloading",Ts),si=null,It===null)if(window.FontFace){var Ts=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),Co=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);It=Ts?42<parseInt(Ts[1],10):!Co}else It=!1;It?si=new W(i(z.g,z),i(z.h,z),z.c,ae,z.s,Oe):si=new q(i(z.g,z),i(z.h,z),z.c,ae,z.s,vt,Oe),re.push(si)}for(Ht=0;Ht<re.length;Ht++)re[Ht].start()}},0)}function Pe(F,z,ot){var ut=[],st=ot.timeout;N(z);var ut=J(F.a,ot,F.c),xt=new gt(F.c,z,st);for(F.h=ut.length,z=0,ot=ut.length;z<ot;z++)ut[z].load(function(vt,$t,Ht){ie(F,xt,vt,$t,Ht)})}function Kt(F,z){this.c=F,this.a=z}Kt.prototype.load=function(F){function z(){if(xt["__mti_fntLst"+st]){var vt=xt["__mti_fntLst"+st](),$t=[],Ht;if(vt)for(var re=0;re<vt.length;re++){var ae=vt[re].fontfamily;vt[re].fontStyle!=null&&vt[re].fontWeight!=null?(Ht=vt[re].fontStyle+vt[re].fontWeight,$t.push(new v(ae,Ht))):$t.push(new v(ae))}F($t)}else setTimeout(function(){z()},50)}var ot=this,st=ot.a.projectId,ut=ot.a.version;if(st){var xt=ot.c.o;x(this.c,(ot.a.api||"https://fast.fonts.net/jsapi")+"/"+st+".js"+(ut?"?v="+ut:""),function(vt){vt?F([]):(xt["__MonotypeConfiguration__"+st]=function(){return ot.a},z())}).id="__MonotypeAPIScript__"+st}else F([])};function St(F,z){this.c=F,this.a=z}St.prototype.load=function(F){var z,ot,st=this.a.urls||[],ut=this.a.families||[],xt=this.a.testStrings||{},vt=new y;for(z=0,ot=st.length;z<ot;z++)p(this.c,st[z],b(vt));var $t=[];for(z=0,ot=ut.length;z<ot;z++)if(st=ut[z].split(":"),st[1])for(var Ht=st[1].split(","),re=0;re<Ht.length;re+=1)$t.push(new v(st[0],Ht[re]));else $t.push(new v(st[0]));A(vt,function(){F($t,xt)})};function Dt(F,z){F?this.c=F:this.c=Le,this.a=[],this.f=[],this.g=z||""}var Le="https://fonts.googleapis.com/css";function Ii(F,z){for(var ot=z.length,st=0;st<ot;st++){var ut=z[st].split(":");ut.length==3&&F.f.push(ut.pop());var xt="";ut.length==2&&ut[1]!=""&&(xt=":"),F.a.push(ut.join(xt))}}function As(F){if(F.a.length==0)throw Error("No fonts to load!");if(F.c.indexOf("kit=")!=-1)return F.c;for(var z=F.a.length,ot=[],st=0;st<z;st++)ot.push(F.a[st].replace(/ /g,"+"));return z=F.c+"?family="+ot.join("%7C"),0<F.f.length&&(z+="&subset="+F.f.join(",")),0<F.g.length&&(z+="&text="+encodeURIComponent(F.g)),z}function Vi(F){this.f=F,this.a=[],this.c={}}var be={latin:"BESbswy","latin-ext":"Ã§Ã¶Ã¼ÄÅ",cyrillic:"Ð¹ÑÐ",greek:"Î±Î²Î£",khmer:"ááá",Hanuman:"ááá"},ii={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},rs={i:"i",italic:"i",n:"n",normal:"n"},Cs=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Gs(F){for(var z=F.f.length,ot=0;ot<z;ot++){var st=F.f[ot].split(":"),ut=st[0].replace(/\+/g," "),xt=["n4"];if(2<=st.length){var vt,$t=st[1];if(vt=[],$t)for(var $t=$t.split(","),Ht=$t.length,re=0;re<Ht;re++){var ae;if(ae=$t[re],ae.match(/^[\w-]+$/)){var Oe=Cs.exec(ae.toLowerCase());if(Oe==null)ae="";else{if(ae=Oe[2],ae=ae==null||ae==""?"n":rs[ae],Oe=Oe[1],Oe==null||Oe=="")Oe="4";else var si=ii[Oe],Oe=si||(isNaN(Oe)?"4":Oe.substr(0,1));ae=[ae,Oe].join("")}}else ae="";ae&&vt.push(ae)}0<vt.length&&(xt=vt),st.length==3&&(st=st[2],vt=[],st=st?st.split(","):vt,0<st.length&&(st=be[st[0]])&&(F.c[ut]=st))}for(F.c[ut]||(st=be[ut])&&(F.c[ut]=st),st=0;st<xt.length;st+=1)F.a.push(new v(ut,xt[st]))}}function Nr(F,z){this.c=F,this.a=z}var Vs={Arimo:!0,Cousine:!0,Tinos:!0};Nr.prototype.load=function(F){var z=new y,ot=this.c,st=new Dt(this.a.api,this.a.text),ut=this.a.families;Ii(st,ut);var xt=new Vi(ut);Gs(xt),p(ot,As(st),b(z)),A(z,function(){F(xt.a,xt.c,Vs)})};function as(F,z){this.c=F,this.a=z}as.prototype.load=function(F){var z=this.a.id,ot=this.c.o;z?x(this.c,(this.a.api||"https://use.typekit.net")+"/"+z+".js",function(st){if(st)F([]);else if(ot.Typekit&&ot.Typekit.config&&ot.Typekit.config.fn){st=ot.Typekit.config.fn;for(var ut=[],xt=0;xt<st.length;xt+=2)for(var vt=st[xt],$t=st[xt+1],Ht=0;Ht<$t.length;Ht++)ut.push(new v(vt,$t[Ht]));try{ot.Typekit.load({events:!1,classes:!1,async:!0})}catch{}F(ut)}},2e3):F([])};function xn(F,z){this.c=F,this.f=z,this.a=[]}xn.prototype.load=function(F){var z=this.f.id,ot=this.c.o,st=this;z?(ot.__webfontfontdeckmodule__||(ot.__webfontfontdeckmodule__={}),ot.__webfontfontdeckmodule__[z]=function(ut,xt){for(var vt=0,$t=xt.fonts.length;vt<$t;++vt){var Ht=xt.fonts[vt];st.a.push(new v(Ht.name,O("font-weight:"+Ht.weight+";font-style:"+Ht.style)))}F(st.a)},x(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+g(this.c)+"/"+z+".js",function(ut){ut&&F([])})):F([])};var pi=new ee(window);pi.a.c.custom=function(F,z){return new St(z,F)},pi.a.c.fontdeck=function(F,z){return new xn(z,F)},pi.a.c.monotype=function(F,z){return new Kt(z,F)},pi.a.c.typekit=function(F,z){return new as(z,F)},pi.a.c.google=function(F,z){return new Nr(z,F)};var yn={load:i(pi.load,pi)};n.exports?n.exports=yn:(window.WebFont=yn,window.WebFontConfig&&pi.load(window.WebFontConfig))})()}(yh)),yh.exports}var $P=VP();const UI=Dr($P);/*!
 * @barvynkoa/particle-emitter - v6.0.0
 * Compiled Mon, 27 May 2024 12:15:21 UTC
 *
 * @barvynkoa/particle-emitter is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */class yc{constructor(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}init(t){if(!t||!t.length)this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});else if(Array.isArray(t[0]))for(let e=0;e<t.length;++e){const i=t[e];let s=i[0];for(let r=1;r<i.length;++r){const o=i[r];this.segments.push({p1:s,p2:o,l:0}),s=o}}else{let e=t[0];for(let i=1;i<t.length;++i){const s=t[i];this.segments.push({p1:e,p2:s,l:0}),e=s}}for(let e=0;e<this.segments.length;++e){const{p1:i,p2:s}=this.segments[e],r=Math.sqrt((s.x-i.x)*(s.x-i.x)+(s.y-i.y)*(s.y-i.y));this.segments[e].l=r,this.totalLength+=r,this.countingLengths.push(this.totalLength)}}getRandPos(t){const e=Math.random()*this.totalLength;let i,s;if(this.segments.length===1)i=this.segments[0],s=e;else for(let l=0;l<this.countingLengths.length;++l)if(e<this.countingLengths[l]){i=this.segments[l],s=l===0?e:e-this.countingLengths[l-1];break}s/=i.l||1;const{p1:r,p2:o}=i;t.x=r.x+s*(o.x-r.x),t.y=r.y+s*(o.y-r.y)}}yc.type="polygonalChain";yc.editorConfig=null;class bc{constructor(t){this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h}getRandPos(t){t.x=Math.random()*this.w+this.x,t.y=Math.random()*this.h+this.y}}bc.type="rect";bc.editorConfig=null;class ts{constructor(t,e,i){this.value=t,this.time=e,this.next=null,this.isStepped=!1,i?this.ease=typeof i=="function"?i:v0(i):this.ease=null}static createList(t){if("list"in t){const i=t.list;let s;const{value:r,time:o}=i[0],l=s=new ts(typeof r=="string"?Ga(r):r,o,t.ease);if(i.length>2||i.length===2&&i[1].value!==r)for(let u=1;u<i.length;++u){const{value:c,time:f}=i[u];s.next=new ts(typeof c=="string"?Ga(c):c,f),s=s.next}return l.isStepped=!!t.isStepped,l}const e=new ts(typeof t.start=="string"?Ga(t.start):t.start,0);return t.end!==t.start&&(e.next=new ts(typeof t.end=="string"?Ga(t.end):t.end,1)),e}}let Lr=Ot.from;const Ji=Math.PI/180;function Ss(n,t){if(!n)return;const e=Math.sin(n),i=Math.cos(n),s=t.x*i-t.y*e,r=t.x*e+t.y*i;t.x=s,t.y=r}function So(n,t,e){return n<<16|t<<8|e}function _0(n){return Math.sqrt(n.x*n.x+n.y*n.y)}function HP(n){const t=1/_0(n);n.x*=t,n.y*=t}function w0(n,t){n.x*=t,n.y*=t}function Ga(n,t){t||(t={}),n.charAt(0)==="#"?n=n.substr(1):n.indexOf("0x")===0&&(n=n.substr(2));let e;return n.length===8&&(e=n.substr(0,2),n=n.substr(2)),t.r=parseInt(n.substr(0,2),16),t.g=parseInt(n.substr(2,2),16),t.b=parseInt(n.substr(4,2),16),e&&(t.a=parseInt(e,16)),t}function v0(n){const t=n.length,e=1/t;return function(i){const s=t*i|0,r=(i-s*e)*t,o=n[s]||n[t-1];return o.s+r*(2*(1-r)*(o.cp-o.s)+r*(o.e-o.s))}}function qP(n){return n||"normal"}class Ao{constructor(t){this.x=t.x||0,this.y=t.y||0,this.radius=t.radius,this.innerRadius=t.innerRadius||0,this.rotation=!!t.affectRotation}getRandPos(t){this.innerRadius!==this.radius?t.x=Math.random()*(this.radius-this.innerRadius)+this.innerRadius:t.x=this.radius,t.y=0;const e=Math.random()*Math.PI*2;this.rotation&&(t.rotation+=e),Ss(e,t.position),t.position.x+=this.x,t.position.y+=this.y}}Ao.type="torus";Ao.editorConfig=null;var ne;(function(n){n[n.Spawn=0]="Spawn",n[n.Normal=2]="Normal",n[n.Late=5]="Late"})(ne||(ne={}));class _c{constructor(t){this.order=ne.Late,this.minStart=t.minStart,this.maxStart=t.maxStart,this.accel=t.accel,this.rotate=!!t.rotate,this.maxSpeed=t.maxSpeed??0}initParticles(t){let e=t;for(;e;){const i=Math.random()*(this.maxStart-this.minStart)+this.minStart;e.config.velocity?e.config.velocity.set(i,0):e.config.velocity=new fe(i,0),Ss(e.rotation,e.config.velocity),e=e.next}}updateParticle(t,e){const i=t.config.velocity,s=i.x,r=i.y;if(i.x+=this.accel.x*e,i.y+=this.accel.y*e,this.maxSpeed){const o=_0(i);o>this.maxSpeed&&w0(i,this.maxSpeed/o)}t.x+=(s+i.x)/2*e,t.y+=(r+i.y)/2*e,this.rotate&&(t.rotation=Math.atan2(i.y,i.x))}}_c.type="moveAcceleration";_c.editorConfig=null;function jP(n){return this.ease&&(n=this.ease(n)),(this.first.next.value-this.first.value)*n+this.first.value}function KP(n){this.ease&&(n=this.ease(n));const t=this.first.value,e=this.first.next.value,i=(e.r-t.r)*n+t.r,s=(e.g-t.g)*n+t.g,r=(e.b-t.b)*n+t.b;return So(i,s,r)}function ZP(n){this.ease&&(n=this.ease(n));let t=this.first,e=t.next;for(;n>e.time;)t=e,e=e.next;return n=(n-t.time)/(e.time-t.time),(e.value-t.value)*n+t.value}function QP(n){this.ease&&(n=this.ease(n));let t=this.first,e=t.next;for(;n>e.time;)t=e,e=e.next;n=(n-t.time)/(e.time-t.time);const i=t.value,s=e.value,r=(s.r-i.r)*n+i.r,o=(s.g-i.g)*n+i.g,l=(s.b-i.b)*n+i.b;return So(r,o,l)}function JP(n){this.ease&&(n=this.ease(n));let t=this.first;for(;t.next&&n>t.next.time;)t=t.next;return t.value}function tI(n){this.ease&&(n=this.ease(n));let t=this.first;for(;t.next&&n>t.next.time;)t=t.next;const e=t.value;return So(e.r,e.g,e.b)}class Yr{constructor(t=!1){this.first=null,this.isColor=!!t,this.interpolate=null,this.ease=null}reset(t){this.first=t,t.next&&t.next.time>=1?this.interpolate=this.isColor?KP:jP:t.isStepped?this.interpolate=this.isColor?tI:JP:this.interpolate=this.isColor?QP:ZP,this.ease=this.first.ease}}class wc{constructor(t){this.order=ne.Normal,this.list=new Yr(!1),this.list.reset(ts.createList(t.alpha))}initParticles(t){let e=t;for(;e;)e.alpha=this.list.first.value,e=e.next}updateParticle(t){t.alpha=this.list.interpolate(t.agePercent)}}wc.type="alpha";wc.editorConfig=null;class vc{constructor(t){this.order=ne.Normal,this.value=t.alpha}initParticles(t){let e=t;for(;e;)e.alpha=this.value,e=e.next}}vc.type="alphaStatic";vc.editorConfig=null;function S0(n){const t=[];for(let e=0;e<n.length;++e){let i=n[e];if(typeof i=="string")t.push(Lr(i));else if(i instanceof Ot)t.push(i);else{let s=i.count||1;for(typeof i.texture=="string"?i=Lr(i.texture):i=i.texture;s>0;--s)t.push(i)}}return t}class Sc{constructor(t){this.order=ne.Normal,this.anims=[];for(let e=0;e<t.anims.length;++e){const i=t.anims[e],s=S0(i.textures),r=i.framerate<0?-1:i.framerate>0?i.framerate:60,o={textures:s,duration:r>0?s.length/r:0,framerate:r,loop:r>0?!!i.loop:!1};this.anims.push(o)}}initParticles(t){let e=t;for(;e;){const i=Math.floor(Math.random()*this.anims.length),s=e.config.anim=this.anims[i];e.texture=s.textures[0],e.config.animElapsed=0,s.framerate===-1?(e.config.animDuration=e.maxLife,e.config.animFramerate=s.textures.length/e.maxLife):(e.config.animDuration=s.duration,e.config.animFramerate=s.framerate),e=e.next}}updateParticle(t,e){const i=t.config,s=i.anim;i.animElapsed+=e,i.animElapsed>=i.animDuration&&(i.anim.loop?i.animElapsed=i.animElapsed%i.animDuration:i.animElapsed=i.animDuration-1e-6);const r=i.animElapsed*i.animFramerate+1e-7|0;t.texture=s.textures[r]||s.textures[s.textures.length-1]||Ot.EMPTY}}Sc.type="animatedRandom";Sc.editorConfig=null;class Ac{constructor(t){this.order=ne.Normal;const e=t.anim,i=S0(e.textures),s=e.framerate<0?-1:e.framerate>0?e.framerate:60;this.anim={textures:i,duration:s>0?i.length/s:0,framerate:s,loop:s>0?!!e.loop:!1}}initParticles(t){let e=t;const i=this.anim;for(;e;)e.texture=i.textures[0],e.config.animElapsed=0,i.framerate===-1?(e.config.animDuration=e.maxLife,e.config.animFramerate=i.textures.length/e.maxLife):(e.config.animDuration=i.duration,e.config.animFramerate=i.framerate),e=e.next}updateParticle(t,e){const i=this.anim,s=t.config;s.animElapsed+=e,s.animElapsed>=s.animDuration&&(i.loop?s.animElapsed=s.animElapsed%s.animDuration:s.animElapsed=s.animDuration-1e-6);const r=s.animElapsed*s.animFramerate+1e-7|0;t.texture=i.textures[r]||i.textures[i.textures.length-1]||Ot.EMPTY}}Ac.type="animatedSingle";Ac.editorConfig=null;class Cc{constructor(t){this.order=ne.Normal,this.value=t.blendMode}initParticles(t){let e=t;for(;e;)e.blendMode=qP(this.value),e=e.next}}Cc.type="blendMode";Cc.editorConfig=null;class Tc{constructor(t){this.order=ne.Spawn,this.spacing=t.spacing*Ji,this.start=t.start*Ji,this.distance=t.distance}initParticles(t){let e=0,i=t;for(;i;){let s;this.spacing?s=this.start+this.spacing*e:s=Math.random()*Math.PI*2,i.rotation=s,this.distance&&(i.position.x=this.distance,Ss(s,i.position)),i=i.next,++e}}}Tc.type="spawnBurst";Tc.editorConfig=null;class Mc{constructor(t){this.order=ne.Normal,this.list=new Yr(!0),this.list.reset(ts.createList(t.color))}initParticles(t){let e=t;const i=this.list.first.value,s=So(i.r,i.g,i.b);for(;e;)e.tint=s,e=e.next}updateParticle(t){t.tint=this.list.interpolate(t.agePercent)}}Mc.type="color";Mc.editorConfig=null;class Pc{constructor(t){this.order=ne.Normal;let e=t.color;e.charAt(0)==="#"?e=e.substr(1):e.indexOf("0x")===0&&(e=e.substr(2)),this.value=parseInt(e,16)}initParticles(t){let e=t;for(;e;)e.tint=this.value,e=e.next}}Pc.type="colorStatic";Pc.editorConfig=null;class Ic{constructor(t){this.order=ne.Normal,this.index=0,this.textures=t.textures.map(e=>typeof e=="string"?Lr(e):e)}initParticles(t){let e=t;for(;e;)e.texture=this.textures[this.index],++this.index>=this.textures.length&&(this.index=0),e=e.next}}Ic.type="textureOrdered";Ic.editorConfig=null;const On=new fe,A0=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","exp","expm1","floor","fround","hypot","log","log1p","log10","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh"],eI=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(A0).join("|"),"g");function iI(n){const t=n.match(eI);for(let e=t.length-1;e>=0;--e)A0.indexOf(t[e])>=0&&(t[e]=`Math.${t[e]}`);return n=t.join(""),new Function("x",`return ${n};`)}class kc{constructor(t){if(this.order=ne.Late,t.path)if(typeof t.path=="function")this.path=t.path;else try{this.path=iI(t.path)}catch{this.path=null}else this.path=e=>e;this.list=new Yr(!1),this.list.reset(ts.createList(t.speed)),this.minMult=t.minMult??1}initParticles(t){let e=t;for(;e;){e.config.initRotation=e.rotation,e.config.initPosition?e.config.initPosition.copyFrom(e.position):e.config.initPosition=new fe(e.x,e.y),e.config.movement=0;const i=Math.random()*(1-this.minMult)+this.minMult;e.config.speedMult=i,e=e.next}}updateParticle(t,e){const i=this.list.interpolate(t.agePercent)*t.config.speedMult;t.config.movement+=i*e,On.x=t.config.movement,On.y=this.path(On.x),Ss(t.config.initRotation,On),t.position.x=t.config.initPosition.x+On.x,t.position.y=t.config.initPosition.y+On.y}}kc.type="movePath";kc.editorConfig=null;class Ec{constructor(){this.order=ne.Spawn}initParticles(t){}}Ec.type="spawnPoint";Ec.editorConfig=null;class Rc{constructor(t){this.order=ne.Normal,this.textures=t.textures.map(e=>typeof e=="string"?Lr(e):e)}initParticles(t){let e=t;for(;e;){const i=Math.floor(Math.random()*this.textures.length);e.texture=this.textures[i],e=e.next}}}Rc.type="textureRandom";Rc.editorConfig=null;class Fc{constructor(t){this.order=ne.Normal,this.minStart=t.minStart*Ji,this.maxStart=t.maxStart*Ji,this.minSpeed=t.minSpeed*Ji,this.maxSpeed=t.maxSpeed*Ji,this.accel=t.accel*Ji}initParticles(t){let e=t;for(;e;)this.minStart===this.maxStart?e.rotation+=this.maxStart:e.rotation+=Math.random()*(this.maxStart-this.minStart)+this.minStart,e.config.rotSpeed=Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed,e=e.next}updateParticle(t,e){if(this.accel){const i=t.config.rotSpeed;t.config.rotSpeed+=this.accel*e,t.rotation+=(t.config.rotSpeed+i)/2*e}else t.rotation+=t.config.rotSpeed*e}}Fc.type="rotation";Fc.editorConfig=null;class Bc{constructor(t){this.order=ne.Normal,this.min=t.min*Ji,this.max=t.max*Ji}initParticles(t){let e=t;for(;e;)this.min===this.max?e.rotation+=this.max:e.rotation+=Math.random()*(this.max-this.min)+this.min,e=e.next}}Bc.type="rotationStatic";Bc.editorConfig=null;class Lc{constructor(t){this.order=ne.Late+1,this.rotation=(t.rotation||0)*Ji}initParticles(t){let e=t;for(;e;)e.rotation=this.rotation,e=e.next}}Lc.type="noRotation";Lc.editorConfig=null;class Oc{constructor(t){this.order=ne.Normal,this.list=new Yr(!1),this.list.reset(ts.createList(t.scale)),this.minMult=t.minMult??1}initParticles(t){let e=t;for(;e;){const i=Math.random()*(1-this.minMult)+this.minMult;e.config.scaleMult=i,e.scale.x=e.scale.y=this.list.first.value*i,e=e.next}}updateParticle(t){t.scale.x=t.scale.y=this.list.interpolate(t.agePercent)*t.config.scaleMult}}Oc.type="scale";Oc.editorConfig=null;class Dc{constructor(t){this.order=ne.Normal,this.min=t.min,this.max=t.max}initParticles(t){let e=t;for(;e;){const i=Math.random()*(this.max-this.min)+this.min;e.scale.x=e.scale.y=i,e=e.next}}}Dc.type="scaleStatic";Dc.editorConfig=null;class Wi{static registerShape(t,e){Wi.shapes[e||t.type]=t}constructor(t){this.order=ne.Spawn;const e=Wi.shapes[t.type];if(!e)throw new Error(`No shape found with type '${t.type}'`);this.shape=new e(t.data)}initParticles(t){let e=t;for(;e;)this.shape.getRandPos(e),e=e.next}}Wi.type="spawnShape";Wi.editorConfig=null;Wi.shapes={};Wi.registerShape(yc);Wi.registerShape(bc);Wi.registerShape(Ao);Wi.registerShape(Ao,"circle");class Yc{constructor(t){this.order=ne.Normal,this.texture=typeof t.texture=="string"?Lr(t.texture):t.texture}initParticles(t){let e=t;for(;e;)e.texture=this.texture,e=e.next}}Yc.type="textureSingle";Yc.editorConfig=null;class Nc{constructor(t){this.order=ne.Late,this.list=new Yr(!1),this.list.reset(ts.createList(t.speed)),this.minMult=t.minMult??1}initParticles(t){let e=t;for(;e;){const i=Math.random()*(1-this.minMult)+this.minMult;e.config.speedMult=i,e.config.velocity?e.config.velocity.set(this.list.first.value*i,0):e.config.velocity=new fe(this.list.first.value*i,0),Ss(e.rotation,e.config.velocity),e=e.next}}updateParticle(t,e){const i=this.list.interpolate(t.agePercent)*t.config.speedMult,s=t.config.velocity;HP(s),w0(s,i),t.x+=s.x*e,t.y+=s.y*e}}Nc.type="moveSpeed";Nc.editorConfig=null;class Xc{constructor(t){this.order=ne.Late,this.min=t.min,this.max=t.max}initParticles(t){let e=t;for(;e;){const i=Math.random()*(this.max-this.min)+this.min;e.config.velocity?e.config.velocity.set(i,0):e.config.velocity=new fe(i,0),Ss(e.rotation,e.config.velocity),e=e.next}}updateParticle(t,e){const i=t.config.velocity;t.x+=i.x*e,t.y+=i.y*e}}Xc.type="moveSpeedStatic";Xc.editorConfig=null;class bh extends Qn{constructor(t){super(),this.prevChild=this.nextChild=null,this.emitter=t,this.config={},this.anchor.x=this.anchor.y=.5,this.maxLife=0,this.age=0,this.agePercent=0,this.oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.kill=this.kill}init(t){this.maxLife=t,this.age=this.agePercent=0,this.rotation=0,this.position.x=this.position.y=0,this.scale.x=this.scale.y=1,this.tint=16777215,this.alpha=1,this.oneOverLife=1/this.maxLife,this.visible=!0}kill(){this.emitter.recycle(this)}destroy(){this.parent&&this.parent.removeChild(this),this.emitter=this.next=this.prev=null,super.destroy()}}const _h=bs.shared,sn=Symbol("Position particle per emitter position");class Jt{static registerBehavior(t){Jt.knownBehaviors[t.type]=t}constructor(t,e){this.initBehaviors=[],this.updateBehaviors=[],this.recycleBehaviors=[],this.minLifetime=0,this.maxLifetime=0,this.customEase=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=new fe,this.particlesPerWave=1,this.rotation=0,this.ownerPos=new fe,this._prevEmitterPos=new fe,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,e&&this.init(e),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}get frequency(){return this._frequency}set frequency(t){typeof t=="number"&&t>0?this._frequency=t:this._frequency=1}get parent(){return this._parent}set parent(t){this.cleanup(),this._parent=t}init(t){if(!t)return;this.cleanup(),this._origConfig=t,this.minLifetime=t.lifetime.min,this.maxLifetime=t.lifetime.max,t.ease?this.customEase=typeof t.ease=="function"?t.ease:v0(t.ease):this.customEase=null,this.particlesPerWave=1,t.particlesPerWave&&t.particlesPerWave>1&&(this.particlesPerWave=t.particlesPerWave),this.frequency=t.frequency,this.spawnChance=typeof t.spawnChance=="number"&&t.spawnChance>0?t.spawnChance:1,this.emitterLifetime=t.emitterLifetime||-1,this.maxParticles=t.maxParticles>0?t.maxParticles:1e3,this.addAtBack=!!t.addAtBack,this.rotation=0,this.ownerPos.set(0),t.pos?this.spawnPos.copyFrom(t.pos):this.spawnPos.set(0),this._prevEmitterPos.copyFrom(this.spawnPos),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=t.emit===void 0?!0:!!t.emit,this.autoUpdate=!!t.autoUpdate;const e=t.behaviors.map(i=>{const s=Jt.knownBehaviors[i.type];return s?new s(i.config):(console.error(`Unknown behavior: ${i.type}`),null)}).filter(i=>!!i);e.push(sn),e.sort((i,s)=>i===sn?s.order===ne.Spawn?1:-1:s===sn?i.order===ne.Spawn?-1:1:i.order-s.order),this.initBehaviors=e.slice(),this.updateBehaviors=e.filter(i=>i!==sn&&i.updateParticle),this.recycleBehaviors=e.filter(i=>i!==sn&&i.recycleParticle)}getBehavior(t){return Jt.knownBehaviors[t]&&this.initBehaviors.find(e=>e instanceof Jt.knownBehaviors[t])||null}fillPool(t){for(;t>0;--t){const e=new bh(this);e.next=this._poolFirst,this._poolFirst=e}}recycle(t,e=!1){for(let i=0;i<this.recycleBehaviors.length;++i)this.recycleBehaviors[i].recycleParticle(t,!e);t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t===this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount}rotate(t){if(this.rotation===t)return;const e=t-this.rotation;this.rotation=t,Ss(e,this.spawnPos),this._posChanged=!0}updateSpawnPos(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e}updateOwnerPos(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e}resetPositionTracking(){this._prevPosIsValid=!1}get emit(){return this._emit}set emit(t){this._emit=!!t,this._emitterLife=this.emitterLifetime}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){this._autoUpdate&&!t?_h.remove(this.update,this):!this._autoUpdate&&t&&_h.add(this.update,this),this._autoUpdate=!!t}playOnceAndDestroy(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t}playOnce(t){this.emit=!0,this._completeCallback=t}update(t){if(typeof t!="number"&&(t=t.deltaTime),this._autoUpdate&&(t=_h.elapsedMS*.001),!this._parent)return;for(let o=this._activeParticlesFirst,l;o;o=l)if(l=o.next,o.age+=t,o.age>o.maxLife||o.age<0)this.recycle(o);else{let u=o.age*o.oneOverLife;this.customEase&&(this.customEase.length===4?u=this.customEase(u,0,1,1):u=this.customEase(u)),o.agePercent=u;for(let c=0;c<this.updateBehaviors.length;++c)if(this.updateBehaviors[c].updateParticle(o,t)){this.recycle(o);break}}let e,i;this._prevPosIsValid&&(e=this._prevEmitterPos.x,i=this._prevEmitterPos.y);const s=this.ownerPos.x+this.spawnPos.x,r=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}let o,l;if(this._prevPosIsValid&&this._posChanged){const f=1+this._spawnTimer/t;o=(s-e)*f+e,l=(r-i)*f+i}else o=s,l=r;let u=null,c=null;for(let f=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),d=0;d<f;++d){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let g;if(this.minLifetime===this.maxLifetime?g=this.minLifetime:g=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer>=g)continue;let p;this._poolFirst?(p=this._poolFirst,this._poolFirst=this._poolFirst.next,p.next=null):p=new bh(this),p.init(g),this.addAtBack?this._parent.addChildAt(p,0):this._parent.addChild(p),u?(c.next=p,p.prev=c,c=p):c=u=p,++this.particleCount}if(u){this._activeParticlesLast?(this._activeParticlesLast.next=u,u.prev=this._activeParticlesLast,this._activeParticlesLast=c):(this._activeParticlesFirst=u,this._activeParticlesLast=c);for(let f=0;f<this.initBehaviors.length;++f){const d=this.initBehaviors[f];if(d===sn)for(let g=u,p;g;g=p){p=g.next,this.rotation!==0&&(Ss(this.rotation,g.position),g.rotation+=this.rotation),g.position.x+=o,g.position.y+=l,g.age+=-this._spawnTimer;let x=g.age*g.oneOverLife;this.customEase&&(this.customEase.length===4?x=this.customEase(x,0,1,1):x=this.customEase(x)),g.agePercent=x}else d.initParticles(u)}for(let f=u,d;f;f=d){d=f.next;for(let g=0;g<this.updateBehaviors.length;++g)if(this.updateBehaviors[g].updateParticle(f,-this._spawnTimer)){this.recycle(f);break}}}this._spawnTimer+=this._frequency}if(this._posChanged&&(this._prevEmitterPos.x=s,this._prevEmitterPos.y=r,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){const o=this._completeCallback;this._completeCallback=null,o()}this._destroyWhenComplete&&this.destroy()}}emitNow(){const t=this.ownerPos.x+this.spawnPos.x,e=this.ownerPos.y+this.spawnPos.y;let i=null,s=null;for(let r=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),o=0;o<r;++o){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let l;this._poolFirst?(l=this._poolFirst,this._poolFirst=this._poolFirst.next,l.next=null):l=new bh(this);let u;this.minLifetime===this.maxLifetime?u=this.minLifetime:u=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,l.init(u),this.addAtBack?this._parent.addChildAt(l,0):this._parent.addChild(l),i?(s.next=l,l.prev=s,s=l):s=i=l,++this.particleCount}if(i){this._activeParticlesLast?(this._activeParticlesLast.next=i,i.prev=this._activeParticlesLast,this._activeParticlesLast=s):(this._activeParticlesFirst=i,this._activeParticlesLast=s);for(let r=0;r<this.initBehaviors.length;++r){const o=this.initBehaviors[r];if(o===sn)for(let l=i,u;l;l=u)u=l.next,this.rotation!==0&&(Ss(this.rotation,l.position),l.rotation+=this.rotation),l.position.x+=t,l.position.y+=e;else o.initParticles(i)}}}cleanup(){let t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t,!0);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0}get destroyed(){return!(this._parent&&this.initBehaviors.length)}destroy(){this.autoUpdate=!1,this.cleanup();let t;for(let e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.spawnPos=this.ownerPos=this.customEase=this._completeCallback=null,this.initBehaviors.length=this.updateBehaviors.length=this.recycleBehaviors.length=0}}Jt.knownBehaviors={};function WI(n,t){var i,s,r,o,l,u,c,f,d,g,p;if("behaviors"in n)return n;const e={lifetime:n.lifetime,ease:n.ease,particlesPerWave:n.particlesPerWave,frequency:n.frequency,spawnChance:n.spawnChance,emitterLifetime:n.emitterLifetime,maxParticles:n.maxParticles,addAtBack:n.addAtBack,pos:n.pos,emit:n.emit,autoUpdate:n.autoUpdate,behaviors:[]};if(n.alpha)if("start"in n.alpha)if(n.alpha.start===n.alpha.end)n.alpha.start!==1&&e.behaviors.push({type:"alphaStatic",config:{alpha:n.alpha.start}});else{const x={list:[{time:0,value:n.alpha.start},{time:1,value:n.alpha.end}]};e.behaviors.push({type:"alpha",config:{alpha:x}})}else n.alpha.list.length===1?n.alpha.list[0].value!==1&&e.behaviors.push({type:"alphaStatic",config:{alpha:n.alpha.list[0].value}}):e.behaviors.push({type:"alpha",config:{alpha:n.alpha}});if(n.acceleration&&(n.acceleration.x||n.acceleration.y)){let x,y;"start"in n.speed?(x=n.speed.start*(n.speed.minimumSpeedMultiplier??1),y=n.speed.start):(x=n.speed.list[0].value*(n.minimumSpeedMultiplier??1),y=n.speed.list[0].value),e.behaviors.push({type:"moveAcceleration",config:{accel:n.acceleration,minStart:x,maxStart:y,rotate:!n.noRotation,maxSpeed:n.maxSpeed}})}else if((i=n.extraData)!=null&&i.path){let x,y;"start"in n.speed?(y=n.speed.minimumSpeedMultiplier??1,n.speed.start===n.speed.end?x={list:[{time:0,value:n.speed.start}]}:x={list:[{time:0,value:n.speed.start},{time:1,value:n.speed.end}]}):(x=n.speed,y=n.minimumSpeedMultiplier??1),e.behaviors.push({type:"movePath",config:{path:n.extraData.path,speed:x,minMult:y}})}else if(n.speed)if("start"in n.speed)if(n.speed.start===n.speed.end)e.behaviors.push({type:"moveSpeedStatic",config:{min:n.speed.start*(n.speed.minimumSpeedMultiplier??1),max:n.speed.start}});else{const x={list:[{time:0,value:n.speed.start},{time:1,value:n.speed.end}]};e.behaviors.push({type:"moveSpeed",config:{speed:x,minMult:n.speed.minimumSpeedMultiplier}})}else n.speed.list.length===1?e.behaviors.push({type:"moveSpeedStatic",config:{min:n.speed.list[0].value*(n.minimumSpeedMultiplier??1),max:n.speed.list[0].value}}):e.behaviors.push({type:"moveSpeed",config:{speed:n.speed,minMult:n.minimumSpeedMultiplier??1}});if(n.scale)if("start"in n.scale){const x=n.scale.minimumScaleMultiplier??1;if(n.scale.start===n.scale.end)e.behaviors.push({type:"scaleStatic",config:{min:n.scale.start*x,max:n.scale.start}});else{const y={list:[{time:0,value:n.scale.start},{time:1,value:n.scale.end}]};e.behaviors.push({type:"scale",config:{scale:y,minMult:x}})}}else if(n.scale.list.length===1){const x=n.minimumScaleMultiplier??1,y=n.scale.list[0].value;e.behaviors.push({type:"scaleStatic",config:{min:y*x,max:y}})}else e.behaviors.push({type:"scale",config:{scale:n.scale,minMult:n.minimumScaleMultiplier??1}});if(n.color)if("start"in n.color)if(n.color.start===n.color.end)n.color.start!=="ffffff"&&e.behaviors.push({type:"colorStatic",config:{color:n.color.start}});else{const x={list:[{time:0,value:n.color.start},{time:1,value:n.color.end}]};e.behaviors.push({type:"color",config:{color:x}})}else n.color.list.length===1?n.color.list[0].value!=="ffffff"&&e.behaviors.push({type:"colorStatic",config:{color:n.color.list[0].value}}):e.behaviors.push({type:"color",config:{color:n.color}});if(n.rotationAcceleration||(s=n.rotationSpeed)!=null&&s.min||(r=n.rotationSpeed)!=null&&r.max?e.behaviors.push({type:"rotation",config:{accel:n.rotationAcceleration||0,minSpeed:((o=n.rotationSpeed)==null?void 0:o.min)||0,maxSpeed:((l=n.rotationSpeed)==null?void 0:l.max)||0,minStart:((u=n.startRotation)==null?void 0:u.min)||0,maxStart:((c=n.startRotation)==null?void 0:c.max)||0}}):((f=n.startRotation)!=null&&f.min||(d=n.startRotation)!=null&&d.max)&&e.behaviors.push({type:"rotationStatic",config:{min:((g=n.startRotation)==null?void 0:g.min)||0,max:((p=n.startRotation)==null?void 0:p.max)||0}}),n.noRotation&&e.behaviors.push({type:"noRotation",config:{}}),n.blendMode&&n.blendMode!=="normal"&&e.behaviors.push({type:"blendMode",config:{blendMode:n.blendMode}}),Array.isArray(t)&&typeof t[0]!="string"&&"framerate"in t[0]){for(let x=0;x<t.length;++x)t[x].framerate==="matchLife"&&(t[x].framerate=-1);e.behaviors.push({type:"animatedRandom",config:{anims:t}})}else typeof t!="string"&&"framerate"in t?(t.framerate==="matchLife"&&(t.framerate=-1),e.behaviors.push({type:"animatedSingle",config:{anim:t}})):n.orderedArt&&Array.isArray(t)?e.behaviors.push({type:"textureOrdered",config:{textures:t}}):Array.isArray(t)?e.behaviors.push({type:"textureRandom",config:{textures:t}}):e.behaviors.push({type:"textureSingle",config:{texture:t}});if(n.spawnType==="burst")e.behaviors.push({type:"spawnBurst",config:{start:n.angleStart||0,spacing:n.particleSpacing,distance:0}});else if(n.spawnType==="point")e.behaviors.push({type:"spawnPoint",config:{}});else{let x;n.spawnType==="ring"?x={type:"torus",data:{x:n.spawnCircle.x,y:n.spawnCircle.y,radius:n.spawnCircle.r,innerRadius:n.spawnCircle.minR,affectRotation:!0}}:n.spawnType==="circle"?x={type:"torus",data:{x:n.spawnCircle.x,y:n.spawnCircle.y,radius:n.spawnCircle.r,innerRadius:0,affectRotation:!1}}:n.spawnType==="rect"?x={type:"rect",data:n.spawnRect}:n.spawnType==="polygonalChain"&&(x={type:"polygonalChain",data:n.spawnPolygon}),x&&e.behaviors.push({type:"spawnShape",config:x})}return e}Jt.registerBehavior(_c);Jt.registerBehavior(wc);Jt.registerBehavior(vc);Jt.registerBehavior(Sc);Jt.registerBehavior(Ac);Jt.registerBehavior(Cc);Jt.registerBehavior(Tc);Jt.registerBehavior(Mc);Jt.registerBehavior(Pc);Jt.registerBehavior(Ic);Jt.registerBehavior(kc);Jt.registerBehavior(Ec);Jt.registerBehavior(Rc);Jt.registerBehavior(Fc);Jt.registerBehavior(Bc);Jt.registerBehavior(Lc);Jt.registerBehavior(Oc);Jt.registerBehavior(Dc);Jt.registerBehavior(Wi);Jt.registerBehavior(Yc);Jt.registerBehavior(Nc);Jt.registerBehavior(Xc);export{Qn as $,mA as A,Re as B,er as C,ve as D,_t as E,rg as F,og as G,hg as H,qm as I,yo as J,Ot as K,xo as L,TI as M,Wm as N,NA as O,fe as P,DC as Q,Lh as R,uC as S,bs as T,Rh as U,_s as V,bm as W,Xi as X,g2 as Y,$d as Z,OI as _,is as a,PI as a$,X2 as a0,Se as a1,Ve as a2,qd as a3,Kl as a4,Kd as a5,b2 as a6,Be as a7,vm as a8,jt as a9,vI as aA,FI as aB,cI as aC,bI as aD,wI as aE,SI as aF,DS as aG,Nl as aH,sc as aI,di as aJ,Er as aK,Fp as aL,Dp as aM,UI as aN,zn as aO,KM as aP,EP as aQ,VM as aR,eo as aS,qh as aT,Jt as aU,WI as aV,ZS as aW,kI as aX,Cd as aY,gI as aZ,EI as a_,le as aa,tg as ab,ng as ac,ag as ad,lg as ae,cg as af,ug as ag,KS as ah,QS as ai,Ad as aj,lI as ak,Pa as al,Ka as am,ys as an,US as ao,RI as ap,LS as aq,CI as ar,_A as as,LI as at,pI as au,BI as av,Us as aw,AI as ax,yI as ay,_I as az,sm as b,uI as b0,fI as b1,ka as b2,Td as b3,II as b4,RT as b5,mg as b6,lp as b7,op as b8,YA as b9,YT as ba,he as bb,XA as bc,Za as bd,Wh as be,Lp as bf,yg as bg,MI as c,dI as d,Fe as e,hI as f,Mi as g,mI as h,Jh as i,xI as j,Ah as k,lC as l,Dh as m,pn as n,qa as o,nc as p,Rm as q,JA as r,Ds as s,GS as t,Pi as u,$m as v,ge as w,Rp as x,Vt as y,sg as z};
