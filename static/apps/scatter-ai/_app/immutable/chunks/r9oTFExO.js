const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CV_dLftT.js","./Bp74PMhi.js","./DFC6otmp.js","./CAv8Xiel.js","./BnjIxzgJ.js","./VDcOS0l3.js","./CsWGTNPf.js","../assets/particle-emitter.BA2FXTRa.css","./C2GHuDhf.js","./DzlWSMYw.js","./OxPY8O7k.js","./Bxvr4F_B.js","./CHLuctl-.js","./CVVIbNoe.js"])))=>i.map(i=>d[i]);
var ho=n=>{throw TypeError(n)};var Ii=(n,e,t)=>e.has(n)||ho("Cannot "+t);var ue=(n,e,t)=>(Ii(n,e,"read from private field"),t?t.call(n):e.get(n)),Ne=(n,e,t)=>e.has(n)?ho("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Rn=(n,e,t,s)=>(Ii(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),ms=(n,e,t)=>(Ii(n,e,"access private method"),t);import{l as Bc,c as G,a as b,t as E,s as K,o as Pr,b as He,d as Lc}from"./DFC6otmp.js";import"./VDcOS0l3.js";import{R as va,Q as Rc,I as Oc,l as ot,m as ba,ar as xa,as as Dc,at as wa,n as Sa,q as Aa,o as kr,v as fn,U as Fc,W as Ci,ac as Gc,ae as Nc,i as m,$ as le,T as Uc,V as fo,X as Pi,al as Wc,Y as Ta,au as Ma,ap as Ea,D as $c,K as Ot,av as ki,y as Hc,O as mo,aw as Br,ax as zc,ay as Lr,az as po,aA as Yc,ao as Xc,aB as Vc,aC as jc,aD as Kc,aj as qc,w as Jc,g as Rr,x as fi,j as Zc,A as k,aE as Qc,H as eu,F as ge,p as I,aF as ns,a as C,aG as ln,aH as cn,f as M,c as D,r as R,t as X,k as w,aa as _o,a8 as yo,s as T,G as U,aI as je,d as fe,aJ as tu,aK as go}from"./CAv8Xiel.js";import{i as xe}from"./CcDsMEQf.js";import{p as xn,r as Ee,i as $,a as Y,_ as js,s as Ae}from"./BnjIxzgJ.js";import{ai as Nt,k as V,aj as nu,ak as su,al as $e,am as iu,an as ru,s as sn,j as me,ao as At,ap as Vt,aq as ou,g as F,l as au,h as Pt,ar as Ia,as as Ca,at as lu,au as vo,av as ps,aw as bo,ax as Re,b as ut,ay as xo,az as cu,aA as uu,aB as du,aC as ae,t as hu,aD as fu,aE as mu,aF as pu,aG as _u,aH as yu,aI as gu,e as Or,E as Yn,a as In,C as mi,aa as Ks,ab as qs,a8 as Bi,D as ar,aJ as vu,aK as bu,aL as Pa,aM as xu,aN as wu,w as Su,aO as Au,aP as ka,aQ as Tu,aR as Mu,aS as Eu,aT as Iu,a0 as Cu,L as wo,aU as Pu,aV as ku,aW as Bu,aX as Ba,aY as Lu,aZ as _e,d as Me,a_ as Ru,A as Ou,a$ as Du,b0 as Fu,b1 as ze,_ as rn,b2 as Gu,b3 as On,b4 as Li,b5 as Nu,b6 as Uu,b7 as Wu,b8 as $u,b9 as Hu}from"./Bp74PMhi.js";import{b as La,c as zu}from"./ByA_zPnz.js";const Yu=[];function pi(n,e=!1){return Hs(n,new Map,"",Yu)}function Hs(n,e,t,s,i=null){if(typeof n=="object"&&n!==null){var r=e.get(n);if(r!==void 0)return r;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(va(n)){var a=Array(n.length);e.set(n,a),i!==null&&e.set(i,a);for(var l=0;l<n.length;l+=1){var u=n[l];l in n&&(a[l]=Hs(u,e,t,s))}return a}if(Rc(n)===Oc){a={},e.set(n,a),i!==null&&e.set(i,a);for(var h in n)a[h]=Hs(n[h],e,t,s);return a}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function")return Hs(n.toJSON(),e,t,s,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}function Xu(n,e,t){ot&&ba();var s=n,i=Fc,r,a=xa()?Dc:wa;Sa(()=>{a(i,i=e())&&(r&&Aa(r),r=kr(()=>t(s)))}),ot&&(s=fn)}function bt(n,e){return e}function Vu(n,e,t,s){for(var i=[],r=e.length,a=0;a<r;a++)Yc(e[a].e,i,!0);var l=r>0&&i.length===0&&t!==null;if(l){var u=t.parentNode;Xc(u),u.append(t),s.clear(),Ct(n,e[0].prev,e[r-1].next)}Vc(i,()=>{for(var h=0;h<r;h++){var f=e[h];l||(s.delete(f.k),Ct(n,f.prev,f.next)),jc(f.e,!l)}})}function ht(n,e,t,s,i,r=null){var a=n,l={flags:e,items:new Map,first:null},u=(e&Ma)!==0;if(u){var h=n;a=ot?Ci(Gc(h)):h.appendChild(Nc())}ot&&ba();var f=null,o=!1,c=le(()=>{var d=t();return va(d)?d:d==null?[]:Ea(d)});Sa(()=>{var d=m(c),p=d.length;if(o&&p===0)return;o=p===0;let _=!1;if(ot){var y=a.data===Uc;y!==(p===0)&&(a=fo(),Ci(a),Pi(!1),_=!0)}if(ot){for(var g=null,v,x=0;x<p;x++){if(fn.nodeType===8&&fn.data===Wc){a=fn,_=!0,Pi(!1);break}var A=d[x],S=s(A,x);v=Ra(fn,l,g,null,A,S,x,i,e,t),l.items.set(S,v),g=v}p>0&&Ci(fo())}ot||ju(d,l,a,i,e,s,t),r!==null&&(p===0?f?Ta(f):f=kr(()=>r(a)):f!==null&&Aa(f,()=>{f=null})),_&&Pi(!0),m(c)}),ot&&(a=fn)}function ju(n,e,t,s,i,r,a){var oe,W,se,z;var l=(i&zc)!==0,u=(i&(Lr|Br))!==0,h=n.length,f=e.items,o=e.first,c=o,d,p=null,_,y=[],g=[],v,x,A,S;if(l)for(S=0;S<h;S+=1)v=n[S],x=r(v,S),A=f.get(x),A!==void 0&&((oe=A.a)==null||oe.measure(),(_??(_=new Set)).add(A));for(S=0;S<h;S+=1){if(v=n[S],x=r(v,S),A=f.get(x),A===void 0){var B=c?c.e.nodes_start:t;p=Ra(B,e,p,p===null?e.first:p.next,v,x,S,s,i,a),f.set(x,p),y=[],g=[],c=p.next;continue}if(u&&Ku(A,v,S,i),(A.e.f&ki)!==0&&(Ta(A.e),l&&((W=A.a)==null||W.unfix(),(_??(_=new Set)).delete(A))),A!==c){if(d!==void 0&&d.has(A)){if(y.length<g.length){var L=g[0],H;p=L.prev;var N=y[0],Z=y[y.length-1];for(H=0;H<y.length;H+=1)So(y[H],L,t);for(H=0;H<g.length;H+=1)d.delete(g[H]);Ct(e,N.prev,Z.next),Ct(e,p,N),Ct(e,Z,L),c=L,p=Z,S-=1,y=[],g=[]}else d.delete(A),So(A,c,t),Ct(e,A.prev,A.next),Ct(e,A,p===null?e.first:p.next),Ct(e,p,A),p=A;continue}for(y=[],g=[];c!==null&&c.k!==x;)(c.e.f&ki)===0&&(d??(d=new Set)).add(c),g.push(c),c=c.next;if(c===null)continue;A=c}y.push(A),p=A,c=A.next}if(c!==null||d!==void 0){for(var te=d===void 0?[]:Ea(d);c!==null;)(c.e.f&ki)===0&&te.push(c),c=c.next;var ie=te.length;if(ie>0){var ce=(i&Ma)!==0&&h===0?t:null;if(l){for(S=0;S<ie;S+=1)(se=te[S].a)==null||se.measure();for(S=0;S<ie;S+=1)(z=te[S].a)==null||z.fix()}Vu(e,te,ce,f)}}l&&Hc(()=>{var ee;if(_!==void 0)for(A of _)(ee=A.a)==null||ee.apply()}),mo.first=e.first&&e.first.e,mo.last=p&&p.e}function Ku(n,e,t,s){(s&Lr)!==0&&po(n.v,e),(s&Br)!==0?po(n.i,t):n.i=t}function Ra(n,e,t,s,i,r,a,l,u,h){var f=(u&Lr)!==0,o=(u&Kc)===0,c=f?o?$c(i):Ot(i):i,d=(u&Br)===0?a:Ot(a),p={i:d,v:c,k:r,a:null,e:null,prev:t,next:s};try{return p.e=kr(()=>l(n,c,d,h),ot),p.e.prev=t&&t.e,p.e.next=s&&s.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),s!==null&&(s.prev=p,s.e.prev=p.e),p}finally{}}function So(n,e,t){for(var s=n.next?n.next.e.nodes_start:t,i=e?e.e.nodes_start:t,r=n.e.nodes_start;r!==s;){var a=qc(r);i.before(r),r=a}}function Ct(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Oa(n,e,t){Jc(()=>{var s=Rr(()=>e(n,t==null?void 0:t())||{});if(t&&(s!=null&&s.update)){var i=!1,r={};fi(()=>{var a=t();Zc(a),i&&wa(r,a)&&(r=a,s.update(a))}),i=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function qu(n,e,t=e){var s=xa();Bc(n,"input",i=>{var r=i?n.defaultValue:n.value;if(r=Ri(n)?Oi(r):r,t(r),s&&r!==(r=e())){var a=n.selectionStart,l=n.selectionEnd;n.value=r??"",l!==null&&(n.selectionStart=a,n.selectionEnd=Math.min(l,n.value.length))}}),(ot&&n.defaultValue!==n.value||Rr(e)==null&&n.value)&&t(Ri(n)?Oi(n.value):n.value),fi(()=>{var i=e();Ri(n)&&i===Oi(n.value)||n.type==="date"&&!i&&!n.value||i!==n.value&&(n.value=i??"")})}function Ri(n){var e=n.type;return e==="number"||e==="range"}function Oi(n){return n===""?null:+n}function Oe(n){var e=Ot(0);return function(){return arguments.length===1?(k(e,m(e)+1),arguments[0]):(m(e),n())}}function Ju(n){k(n,n.v+1)}function Zu(n){let e=0,t=Ot(0),s;return()=>{Qc()&&(m(t),fi(()=>(e===0&&(s=Rr(()=>n(()=>Ju(t)))),e+=1,()=>{eu().then(()=>{e-=1,e===0&&(s==null||s(),s=void 0)})})))}}function Qu(){const n=new Set,e=l=>(n.add(l),()=>n.delete(l)),t=l=>e(u=>{const h=l==null?void 0:l[u.type];if(h)return h(u)});return{eventEmitter:{subscribeOnMount:l=>{ge(()=>t(l))},broadcast:l=>{n.forEach(u=>{u(l)})},broadcastAsync:l=>{const u=()=>Array.from(n).map(h=>h(l));return Promise.all(u())}}}}function ed(n,e){I(e,!1);const t=Nt(),s=["Space","ArrowUp","ArrowDown"],i=["input","textarea","select"],r=u=>{var h,f;return!i.includes((f=(h=u==null?void 0:u.target)==null?void 0:h.tagName)==null?void 0:f.toLowerCase())};function a(u){if(r(u)){const f=u.key===" "?"Space":u.key;s.includes(f)&&u.preventDefault(),f&&t.eventEmitter.broadcast({type:"hotKey",key:f,action:"keyDown"})}}function l(u){if(r(u)){const f=u.key===" "?"Space":u.key;s.includes(f)&&u.preventDefault(),f&&t.eventEmitter.broadcast({type:"hotKey",key:f,action:"keyUp"})}}ge(()=>{window.addEventListener("keydown",a),window.addEventListener("keyup",l)}),ns(()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",l)}),xe(),C()}function Dr(n,e){I(e,!0),ge(()=>e.onmount()),C()}const Da="@@board",td=n=>{ln(Da,n)},nd=()=>cn(Da);function Js(n,e){I(e,!0),td({animate:e.animate});var t=G(),s=M(t);V(s,()=>e.children),b(n,t),C()}var sd=E("<button><!></button>");function Dt(n,e){const t=xn(e,"disabled",3,!1),s=Ee(e,["$$slots","$$events","$$legacy","debug","disabled","onclick","children"]);var i=sd();let r;var a=D(i);V(a,()=>e.children),R(i),X(()=>r=nu(i,r,{class:"button",disabled:t(),onclick:e.onclick,...s,[su]:{debug:e.debug,disabled:t()}},"svelte-vbgtis")),b(n,i)}var id=E('<div class="wrap svelte-15ij6hr"><div class="content-wrap svelte-15ij6hr"><div></div></div></div>');function _i(n,e){I(e,!0);var t=id(),s=D(t),i=D(s);let r;ht(i,22,()=>e.options,a=>a,(a,l,u)=>{Dt(a,{onclick:()=>{e.onchange(l)},children:(h,f)=>{var o=G(),c=M(o);V(c,()=>e.option,()=>({option:l,index:m(u)})),b(h,o)},$$slots:{default:!0}})}),R(i),R(s),R(t),X(()=>r=$e(i,1,"grid svelte-15ij6hr",null,r,{miniSize:e.miniSize})),b(n,t),C()}function rd(n,e){I(e,!0);const t=w(()=>e.options.findIndex(h=>h===e.value)),s=w(()=>m(t)===0),i=w(()=>m(t)===e.options.length-1),r=()=>e.onchange(e.options[m(t)-1]),a=()=>e.onchange(e.options[m(t)+1]);var l=G(),u=M(l);V(u,()=>e.children,()=>({disabledDown:m(s),disabledUp:m(i),toggleDown:r,toggleUp:a})),b(n,l),C()}var Ao=!1,vn,qn,di,hi,Fa;const oo=class oo extends Date{constructor(...t){super(...t);Ne(this,hi);Ne(this,vn,Ot(super.getTime()));Ne(this,qn,new Map);Ne(this,di,_o);Ao||ms(this,hi,Fa).call(this)}};vn=new WeakMap,qn=new WeakMap,di=new WeakMap,hi=new WeakSet,Fa=function(){Ao=!0;var t=oo.prototype,s=Date.prototype,i=Object.getOwnPropertyNames(s);for(const r of i)(r.startsWith("get")||r.startsWith("to")||r==="valueOf")&&(t[r]=function(...a){if(a.length>0)return m(ue(this,vn)),s[r].apply(this,a);var l=ue(this,qn).get(r);if(l===void 0){const u=_o;yo(ue(this,di)),l=w(()=>(m(ue(this,vn)),s[r].apply(this,a))),ue(this,qn).set(r,l),yo(u)}return m(l)}),r.startsWith("set")&&(t[r]=function(...a){var l=s[r].apply(this,a);return k(ue(this,vn),s.getTime.call(this)),l})};let lr=oo;var Jn,Zn;class Ga{constructor(e,t){Ne(this,Jn);Ne(this,Zn);Rn(this,Jn,e),Rn(this,Zn,Zu(t))}get current(){return ue(this,Zn).call(this),ue(this,Jn).call(this)}}Jn=new WeakMap,Zn=new WeakMap;function To(n){return Object.prototype.toString.call(n)==="[object Date]"}function od(n){return n}function Na(n){return--n*n*((1.70158+1)*n+1.70158)+1}function ad(n){return n<.5?8*Math.pow(n,4):-8*Math.pow(n-1,4)+1}function cr(n,e){if(n===e||n!==n)return()=>n;const t=typeof n;if(t!==typeof e||Array.isArray(n)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const s=e.map((i,r)=>cr(n[r],i));return i=>s.map(r=>r(i))}if(t==="object"){if(!n||!e)throw new Error("Object cannot be null");if(To(n)&&To(e)){const r=n.getTime(),l=e.getTime()-r;return u=>new Date(r+u*l)}const s=Object.keys(e),i={};return s.forEach(r=>{i[r]=cr(n[r],e[r])}),r=>{const a={};return s.forEach(l=>{a[l]=i[l](r)}),a}}if(t==="number"){const s=e-n;return i=>n+i*s}return()=>e}var gt,bn,Qn,en;const ao=class ao{constructor(e,t={}){Ne(this,gt,Ot(void 0));Ne(this,bn,Ot(void 0));Ne(this,Qn);Ne(this,en,null);ue(this,gt).v=ue(this,bn).v=e,Rn(this,Qn,t)}static of(e,t){const s=new ao(e(),t);return fi(()=>{s.set(e())}),s}set(e,t){var o;k(ue(this,bn),e);let{delay:s=0,duration:i=400,easing:r=od,interpolate:a=cr}={...ue(this,Qn),...t};if(i===0)return(o=ue(this,en))==null||o.abort(),k(ue(this,gt),e),Promise.resolve();const l=iu.now()+s;let u,h=!1,f=ue(this,en);return Rn(this,en,ru(c=>{if(c<l)return!0;if(!h){h=!0;const p=ue(this,gt).v;u=a(p,e),typeof i=="function"&&(i=i(p,e)),f==null||f.abort()}const d=c-l;return d>i?(k(ue(this,gt),e),!1):(k(ue(this,gt),u(r(d/i))),!0)})),ue(this,en).promise}get current(){return m(ue(this,gt))}get target(){return m(ue(this,bn))}set target(e){this.set(e)}};gt=new WeakMap,bn=new WeakMap,Qn=new WeakMap,en=new WeakMap;let ke=ao;const Le=1e3,Tt={modal:50,dialog:100};var ld=E('<div class="ui-popup-standard-content-wrap svelte-1byxkez"><!></div>');function st(n,e){I(e,!0);var t=ld(),s=D(t);V(s,()=>e.children),R(t),X(()=>sn(t,"style",`--maxWidth: ${e.maxWidth??""}; --zIndex: 100`)),b(n,t),C()}var _s=Oe(()=>me),cd=E("<span> </span> <p> </p>",1),ud=E("<p> </p>"),dd=E("<span>unknown error</span>"),hd=E('<span>Sorry, something went wrong.</span> <div class="scrollY error-text svelte-fzvoja"><!></div>',1);function fd(n,e){I(e,!1),xe();var t=G(),s=M(t);{var i=r=>{At(r,{get zIndex(){return Tt.modal},persistent:!0,onclose:()=>_s(_s().modal=null),children:(a,l)=>{st(a,{maxWidth:"100%",children:(u,h)=>{var f=hd();const o=le(()=>{var y;return(y=_s().modal)==null?void 0:y.error});var c=T(M(f),2),d=D(c);{var p=y=>{var g=G(),v=M(g);{var x=S=>{var B=cd(),L=M(B),H=D(L,!0);R(L);var N=T(L,2),Z=D(N,!0);R(N),X((te,ie)=>{K(H,te),K(Z,ie)},[()=>JSON.stringify(m(o).error||"unknown"),()=>JSON.stringify(m(o).message||"unknown")],le),b(S,B)},A=S=>{var B=ud(),L=D(B,!0);R(B),X(()=>K(L,m(o))),b(S,B)};$(v,S=>{var B,L;(B=m(o))!=null&&B.error&&((L=m(o))!=null&&L.message)?S(x):S(A,!1)})}b(y,g)},_=y=>{var g=dd();b(y,g)};$(d,y=>{m(o)?y(p):y(_,!1)})}R(c),b(u,f)},$$slots:{default:!0}})},$$slots:{default:!0}})};$(s,r=>{var a;((a=_s().modal)==null?void 0:a.name)==="error"&&r(i)})}b(n,t),C()}var md=E('<div class="rectangle svelte-1xcebtp"></div>');function tt(n,e){const t=xn(e,"background",3,"black"),s=xn(e,"border",3,"none");var i=md();X(()=>sn(i,"style",`
	--width-value: ${e.width??""};
	--height-value: ${e.height??""};
	--background-value: ${t()??""};
	--border-value: ${s()??""};
`)),b(n,i)}var pd=E('<div class="ui-modal-title-wrap svelte-16q8wi8"><!></div>');function ss(n,e){I(e,!0);var t=pd(),s=D(t);V(s,()=>e.children),R(t),b(n,t),C()}var _d=E("<div><!></div>");function qe(n,e){I(e,!0);let t=U(null);var s=_d();let i;var r=D(s);V(r,()=>e.children,()=>({element:m(t)})),R(s),La(s,a=>k(t,a),()=>m(t)),X(()=>i=$e(s,1,`content ${e.type??""}`,"svelte-l3vzfy",i,{scrollX:!e.noScroll&&e.type==="row",scrollY:!e.noScroll&&e.type==="column"})),b(n,s),C()}var yd=E('<div class="ui-modal-button-wrap svelte-5vvei4"><div><!></div></div>');function Fr(n,e){I(e,!0);var t=yd(),s=D(t),i=D(s);V(i,()=>e.children),R(s),R(t),X(()=>$e(s,1,Vt(e.type),"svelte-5vvei4")),b(n,t),C()}var gd=E('<div class="base-button-content svelte-1gyd1e8"><!></div>');function nt(n,e){I(e,!0);var t=gd(),s=D(t);V(s,()=>e.children),R(t),b(n,t),C()}const Mo={XGC:"GC",XSC:"SC"},Ua=n=>n/ou,Wa=n=>{const e=Ua(n);return F.wageredBetAmount*e},vd=n=>Number.parseFloat(`${n}`),Xn=n=>F.currency in Mo?`${Mo[F.currency]} ${vd(n).toFixed(2)}`:au.number(n,{minimumFractionDigits:2,maximumFractionDigits:2,style:"currency",currency:F.currency}),on=n=>{const e=Wa(n);return Xn(e)};var ys=Oe(()=>F),bd=E('<span style="font-size: 2rem;">-</span>'),xd=E("<!> <!>",1),wd=E('<span style="font-size: 2rem;">+</span>'),Sd=E("<!> <!>",1),Ad=E('<div class="toggle-wrap svelte-vim83m"><!> <span class="amount"> </span> <!></div>');function $a(n,e){I(e,!1);const{eventEmitter:t}=Nt(),s="2.5rem";xe(),rd(n,{get value(){return ys().betAmount},get options(){return Pt.betAmountOptions},onchange:r=>{ys(ys().betAmount=r),t.broadcast({type:"soundPressGeneral"})},children:(r,a)=>{let l=()=>a==null?void 0:a().disabledDown,u=()=>a==null?void 0:a().disabledUp,h=()=>a==null?void 0:a().toggleDown,f=()=>a==null?void 0:a().toggleUp;var o=Ad(),c=D(o);Dt(c,{"data-test":"down-button",get disabled(){return l()},get onclick(){return h()},children:(y,g)=>{var v=xd(),x=M(v);tt(x,{width:s,height:s});var A=T(x,2);nt(A,{children:(S,B)=>{var L=bd();b(S,L)},$$slots:{default:!0}}),b(y,v)},$$slots:{default:!0}});var d=T(c,2),p=D(d,!0);R(d);var _=T(d,2);Dt(_,{"data-test":"up-button",get disabled(){return u()},get onclick(){return f()},children:(y,g)=>{var v=Sd(),x=M(v);tt(x,{width:s,height:s});var A=T(x,2);nt(A,{children:(S,B)=>{var L=wd();b(S,L)},$$slots:{default:!0}}),b(y,v)},$$slots:{default:!0}}),R(o),X(y=>K(p,y),[()=>Xn(ys().betAmount)],le),b(r,o)},$$slots:{default:!0}}),C()}const Td=new Ga(()=>window.innerWidth,n=>Pr(window,"resize",n)),Md=new Ga(()=>window.innerHeight,n=>Pr(window,"resize",n));var es,ts,ur,ga;const Ed=new(ga=class{constructor(){Ne(this,ts);Ne(this,es,Ot(window.devicePixelRatio));ms(this,ts,ur).call(this)}get current(){return m(ue(this,es)),window.devicePixelRatio}},es=new WeakMap,ts=new WeakSet,ur=function(){const e=Pr(window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),"change",()=>{k(ue(this,es),window.devicePixelRatio),e(),ms(this,ts,ur).call(this)})},ga),Eo={wideSquare:1.3,narrowSquare:.8},gs={smallMobile:375,mobile:480,tablet:820,largeTablet:1024},Io=n=>n.width/(n.height||1),Id={desktop:{width:1920,height:1080},tablet:{width:1920,height:1920},landscape:{width:1920,height:1080},portrait:{width:1080,height:1920}},Cd=n=>{const e=()=>({width:Td.current??1,height:Md.current??1}),t=()=>Io(e()),s=()=>t()>=Eo.wideSquare?"longWidth":t()<=Eo.narrowSquare?"longHeight":"almostSquare",i=()=>{const _=Math.min(e().width,e().height);return _<=gs.smallMobile?"smallMobile":_<=gs.mobile?"mobile":_<=gs.tablet?"tablet":_<=gs.largeTablet?"largeTablet":"desktop"},r=()=>s()==="almostSquare"?"tablet":s()==="longHeight"?"portrait":i()==="mobile"||i()==="smallMobile"?"landscape":"desktop",a=()=>["portrait","almostSquare"].includes(r()),l=_=>()=>{const y=e().width*.5,g=e().height*.5,v=_[r()],x=e().width/v.width,A=e().height/v.height,S=Math.min(x,A);return{x:y,y:g,scale:S,width:v.width,height:v.height,anchor:.5}},u=l(n.mainSizesMap),h=l(Id),f=({scale:_,ratio:y})=>Io(e())<y?{x:e().width/2,y:e().height/2,height:e().height*_}:{x:e().width/2,y:e().height/2,width:e().width*_},o=({scale:_})=>f({scale:_,ratio:n.backgroundRatio.normal}),c=({scale:_})=>f({scale:_,ratio:n.backgroundRatio.portrait});return{stateLayout:Y({showLoadingScreen:!0}),stateLayoutDerived:{canvasSizes:e,canvasRatio:t,canvasRatioType:s,canvasSizeType:i,layoutType:r,isStacked:a,mainLayout:u,mainLayoutStandard:h,normalBackgroundLayout:o,portraitBackgroundLayout:c}}},Ha="@@layout";function Pd(n){ln(Ha,n)}function Ut(){return cn(Ha)}const kt=n=>typeof n=="string",kd=n=>typeof n=="function",Co=new Map,za="en";function Gr(n){return[...Array.isArray(n)?n:[n],za]}function Nr(n,e,t){const s=Gr(n);t||(t="default");let i;if(typeof t=="string")switch(i={day:"numeric",month:"short",year:"numeric"},t){case"full":i.weekday="long";case"long":i.month="long";break;case"short":i.month="numeric";break}else i=t;return Zs(()=>Qs("date",s,t),()=>new Intl.DateTimeFormat(s,i)).format(kt(e)?new Date(e):e)}function Bd(n,e,t){let s;if(t||(t="default"),typeof t=="string")switch(s={second:"numeric",minute:"numeric",hour:"numeric"},t){case"full":case"long":s.timeZoneName="short";break;case"short":delete s.second}else s=t;return Nr(n,e,s)}function dr(n,e,t){const s=Gr(n);return Zs(()=>Qs("number",s,t),()=>new Intl.NumberFormat(s,t)).format(e)}function Po(n,e,t,{offset:s=0,...i}){const r=Gr(n),a=e?Zs(()=>Qs("plural-ordinal",r),()=>new Intl.PluralRules(r,{type:"ordinal"})):Zs(()=>Qs("plural-cardinal",r),()=>new Intl.PluralRules(r,{type:"cardinal"}));return i[t]??i[a.select(t-s)]??i.other}function Zs(n,e){const t=n();let s=Co.get(t);return s||(s=e(),Co.set(t,s)),s}function Qs(n,e,t){const s=e.join("-");return`${n}-${s}-${JSON.stringify(t)}`}const Ya=/\\u[a-fA-F0-9]{4}|\\x[a-fA-F0-9]{2}/,Xa="%__lingui_octothorpe__%",Ld=(n,e,t={})=>{const s=e||n,i=a=>typeof a=="object"?a:t[a],r=(a,l)=>{const u=Object.keys(t).length?i("number"):void 0,h=dr(s,a,u);return l.replace(new RegExp(Xa,"g"),h)};return{plural:(a,l)=>{const{offset:u=0}=l,h=Po(s,!1,a,l);return r(a-u,h)},selectordinal:(a,l)=>{const{offset:u=0}=l,h=Po(s,!0,a,l);return r(a-u,h)},select:Rd,number:(a,l)=>dr(s,a,i(l)||{style:l}),date:(a,l)=>Nr(s,a,i(l)||l),time:(a,l)=>Bd(s,a,i(l)||l)}},Rd=(n,e)=>e[n]??e.other;function Od(n,e,t){return(s={},i)=>{const r=Ld(e,t,i),a=(u,h=!1)=>Array.isArray(u)?u.reduce((f,o)=>{if(o==="#"&&h)return f+Xa;if(kt(o))return f+o;const[c,d,p]=o;let _={};d==="plural"||d==="selectordinal"||d==="select"?Object.entries(p).forEach(([g,v])=>{_[g]=a(v,d==="plural"||d==="selectordinal")}):_=p;let y;if(d){const g=r[d];y=g(s[c],_)}else y=s[c];return y==null?f:f+y},""):u,l=a(n);return kt(l)&&Ya.test(l)?Ia.unraw(l):kt(l)?l:l?String(l):""}}var Dd=Object.defineProperty,Fd=(n,e,t)=>e in n?Dd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Gd=(n,e,t)=>(Fd(n,e+"",t),t);let Nd=class{constructor(){Gd(this,"_events",{})}on(e,t){var s;return(s=this._events)[e]??(s[e]=[]),this._events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){const s=this._getListeners(e);if(!s)return;const i=s.indexOf(t);~i&&s.splice(i,1)}emit(e,...t){const s=this._getListeners(e);s&&s.map(i=>i.apply(this,t))}_getListeners(e){const t=this._events[e];return Array.isArray(t)?t:!1}};var Ud=Object.defineProperty,Wd=(n,e,t)=>e in n?Ud(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Yt=(n,e,t)=>(Wd(n,typeof e!="symbol"?e+"":e,t),t);let $d=class extends Nd{constructor(e){super(),Yt(this,"_locale",""),Yt(this,"_locales"),Yt(this,"_localeData",{}),Yt(this,"_messages",{}),Yt(this,"_missing"),Yt(this,"_messageCompiler"),Yt(this,"t",this._.bind(this)),e.missing!=null&&(this._missing=e.missing),e.messages!=null&&this.load(e.messages),e.localeData!=null&&this.loadLocaleData(e.localeData),(typeof e.locale=="string"||e.locales)&&this.activate(e.locale??za,e.locales)}get locale(){return this._locale}get locales(){return this._locales}get messages(){return this._messages[this._locale]??{}}get localeData(){return this._localeData[this._locale]??{}}_loadLocaleData(e,t){const s=this._localeData[e];s?Object.assign(s,t):this._localeData[e]=t}setMessagesCompiler(e){return this._messageCompiler=e,this}loadLocaleData(e,t){typeof e=="string"?this._loadLocaleData(e,t):Object.keys(e).forEach(s=>this._loadLocaleData(s,e[s])),this.emit("change")}_load(e,t){const s=this._messages[e];s?Object.assign(s,t):this._messages[e]=t}load(e,t){typeof e=="string"&&typeof t=="object"?this._load(e,t):Object.entries(e).forEach(([s,i])=>this._load(s,i)),this.emit("change")}loadAndActivate({locale:e,locales:t,messages:s}){this._locale=e,this._locales=t||void 0,this._messages[this._locale]=s,this.emit("change")}activate(e,t){this._locale=e,this._locales=t,this.emit("change")}_(e,t,s){if(!this.locale)throw new Error("Lingui: Attempted to call a translation function without setting a locale.\nMake sure to call `i18n.activate(locale)` before using Lingui functions.\nThis issue may also occur due to a race condition in your initialization logic.");let i=s==null?void 0:s.message;e||(e=""),kt(e)||(t=e.values||t,i=e.message,e=e.id);const r=this.messages[e],a=r===void 0,l=this._missing;if(l&&a)return kd(l)?l(this._locale,e):l;a&&this.emit("missing",{id:e,locale:this._locale});let u=r||i||e;return kt(u)&&(this._messageCompiler?u=this._messageCompiler(u):console.warn(`Uncompiled message detected! Message:

> ${u}

That means you use raw catalog or your catalog doesn't have a translation for the message and fallback was used.
ICU features such as interpolation and plurals will not work properly for that message. 

Please compile your catalog first. 
`)),kt(u)&&Ya.test(u)?JSON.parse(`"${u}"`):kt(u)?u:Od(u,this._locale,this._locales)(t,s==null?void 0:s.formats)}date(e,t){return Nr(this._locales||this._locale,e,t)}number(e,t){return dr(this._locales||this._locale,e,t)}};function Hd(n={}){return new $d(n)}const O=Hd(),ye={bet:()=>O._(O.t("BET")),max:()=>O._(O.t("MAX")),betMenu:()=>O._(O.t("BET MENU")),selectYourBet:()=>O._(O.t("SELECT YOUR BET")),confirm:()=>O._(O.t("CONFIRM")),masterVolume:()=>O._(O.t("MASTER VOLUME")),musicVolume:()=>O._(O.t("MUSIC VOLUME")),soundEffectVolume:()=>O._(O.t("SOUND EFFECT VOLUME")),autoSpins:()=>O._(O.t("AUTO SPINS")),numberOfRounds:()=>O._(O.t("NUMBER OF ROUNDS")),advanced:()=>O._(O.t("ADVANCED")),singleWinLimit:()=>O._(O.t("SINGLE WIN LIMIT")),lossLimit:()=>O._(O.t("LOSS LIMIT")),startAutoplay:()=>O._(O.t("START AUTOPLAY")),notification:()=>O._(O.t("NOTIFICATION")),autoSpinsStopInfo:()=>O._(O.t("AUTO PLAY HAS STOPPED DUE TO")),insufficientFunds:()=>O._(O.t("INSUFFICIENT FUNDS TO PLACE THIS BET. PLEASE ADD FUNDS TO YOUR ACCOUNT OR LOWER THE BET LEVEL.")),lossLimitReached:()=>O._(O.t("LOSS LIMIT REACHED")),singleWinLimitReached:()=>O._(O.t("SINGLE WIN LIMIT REACHED")),settings:()=>O._(O.t("SETTINGS"))};var zd=E('<span style="font-size: 1rem;"> </span>'),Yd=E("<!> <!>",1);function Xd(n,e){I(e,!0);const{stateLayoutDerived:t}=Ut(),s=w(()=>t.layoutType()==="landscape"?15:18),i=w(()=>[...Pt.betMenuOptions.slice(0,m(s)-1),...Pt.betMenuOptions.slice(-1)].filter((l,u,h)=>h.indexOf(l)===u)),r=l=>l===m(i)[m(i).length-1],a=l=>Math.abs(l)>999999?`${(Math.abs(l)/1e6).toFixed(2)}M`:Math.abs(l)>999?`${(Math.abs(l)/1e3).toFixed(2)}K`:Math.abs(l).toFixed(2);_i(n,{get value(){return F.betAmount},get options(){return m(i)},onchange:u=>F.betAmount=u,option:(u,h)=>{let f=()=>h==null?void 0:h().option;var o=Yd(),c=M(o);const d=w(()=>f()===F.betAmount?"2px white solid":"2px black solid");tt(c,{width:"100%",height:"2rem",get border(){return m(d)}});var p=T(c,2);nt(p,{children:(_,y)=>{var g=zd(),v=D(g,!0);R(g),X(x=>K(v,x),[()=>r(f())?ye.max():a(f())]),b(_,g)},$$slots:{default:!0}}),b(u,o)},$$slots:{option:!0}}),C()}var Dn=Oe(()=>me),Vd=E("<span> </span> <!> <!>",1),jd=E('<span style="font-size: 1rem;"> </span>'),Kd=E("<!> <!>",1),qd=E("<!> <!> <!>",1);function Jd(n,e){I(e,!1);const t=()=>{Dn(Dn().modal=null)};xe();var s=G(),i=M(s);{var r=a=>{At(a,{get zIndex(){return Tt.modal},onclose:()=>Dn(Dn().modal=null),children:(l,u)=>{st(l,{maxWidth:"100%",children:(h,f)=>{var o=qd(),c=M(o);ss(c,{children:(_,y)=>{je();var g=He();X(v=>K(g,v),[()=>ye.betMenu()],le),b(_,g)},$$slots:{default:!0}});var d=T(c,2);qe(d,{type:"column",children:(_,y)=>{var g=Vd(),v=M(g),x=D(v,!0);R(v);var A=T(v,2);$a(A,{});var S=T(A,2);Xd(S,{}),X(B=>K(x,B),[()=>ye.selectYourBet()],le),b(_,g)},$$slots:{default:!0}});var p=T(d,2);Fr(p,{type:"full-width",children:(_,y)=>{Dt(_,{"data-test":"confirm-button",onclick:t,children:(g,v)=>{var x=Kd(),A=M(x);tt(A,{width:"100%",height:"3rem"});var S=T(A,2);nt(S,{children:(B,L)=>{var H=jd(),N=D(H,!0);R(H),X(Z=>K(N,Z),[()=>ye.confirm()],le),b(B,H)},$$slots:{default:!0}}),b(g,x)},$$slots:{default:!0}})},$$slots:{default:!0}}),b(h,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};$(i,a=>{var l;((l=Dn().modal)==null?void 0:l.name)==="betAmountMenu"&&a(r)})}b(n,s),C()}var Zd=E('<div class="bonus-card-wrap svelte-2dvnuw"><div class="info svelte-2dvnuw"><!> <!> <!></div> <!></div>');function Qd(n,e){I(e,!0);var t=Zd(),s=D(t),i=D(s);V(i,()=>e.title);var r=T(i,2);V(r,()=>e.description);var a=T(r,2);V(a,()=>e.price),R(s);var l=T(s,2);V(l,()=>e.button),R(t),b(n,t),C()}var eh=E('<div class="title svelte-xtzxkt"> </div>'),th=E('<div class="description svelte-xtzxkt"> </div>'),nh=E('<div class="price svelte-xtzxkt"> </div>'),sh=E('<span style="font-size: 1rem;"> </span>'),ih=E("<!> <!>",1);function ko(n,e){I(e,!0);const{eventEmitter:t}=Nt();var s=G(),i=M(s);ht(i,17,()=>e.list,bt,(r,a)=>{var l=G(),u=M(l);{var h=f=>{Qd(f,{title:_=>{var y=eh(),g=D(y,!0);R(y),X(()=>K(g,m(a).text.title)),b(_,y)},description:_=>{var y=G(),g=M(y);{var v=x=>{var A=th(),S=D(A,!0);R(A),X(()=>K(S,m(a).text.description)),b(x,A)};$(g,x=>{var A,S;(S=(A=m(a))==null?void 0:A.text)!=null&&S.description&&x(v)})}b(_,y)},price:_=>{var y=nh(),g=D(y,!0);R(y),X(v=>K(g,v),[()=>`${Xn(F.betAmount*m(a).costMultiplier)}`]),b(_,y)},button:_=>{const y=w(()=>F.betAmount<=0||F.balanceAmount<F.betAmount*m(a).costMultiplier);Dt(_,{onclick:()=>{Ca.selectedBetModeKey=m(a).mode,t.broadcast({type:"buyBonusConfirm"}),t.broadcast({type:"soundPressGeneral"})},get disabled(){return m(y)},children:(g,v)=>{var x=ih(),A=M(x);tt(A,{width:"100%",height:"2rem",border:"2px solid white;"});var S=T(A,2);nt(S,{children:(B,L)=>{var H=sh(),N=D(H,!0);R(H),X(()=>K(N,m(a).text.button)),b(B,H)},$$slots:{default:!0}}),b(g,x)},$$slots:{default:!0}})},$$slots:{title:!0,description:!0,price:!0,button:!0}})};$(u,f=>{m(a).type!=="default"&&f(h)})}b(r,l)}),b(n,s),C()}var rh=E('<div class="bonuses-wrap svelte-8r195e"><!> <!></div>'),oh=E("<!> <!>",1);function Bo(n,e){I(e,!0),st(n,{maxWidth:"100%",children:(t,s)=>{var i=oh(),r=M(i);V(r,()=>e.betAmount);var a=T(r,2);qe(a,{type:"column",children:(l,u)=>{var h=rh(),f=D(h);V(f,()=>e.bonusCardsActivate);var o=T(f,2);V(o,()=>e.bonusCardsBuy),R(h),b(l,h)},$$slots:{default:!0}}),b(t,i)},$$slots:{default:!0}}),C()}function gn(n,e){const t=new lu.ResizeObserver(([s])=>{e(s.contentRect)});return t.observe(n),{destroy(){t.disconnect()}}}var ah=E("<div><!></div>"),lh=E('<div class="badge-amount-wrap-scaled svelte-rmrbdn"><!></div>'),ch=E('<div><div class="bonuses svelte-rmrbdn"><!> <!></div> <!></div> <!>',1);function uh(n,e){I(e,!0);const{stateLayoutDerived:t}=Ut();let s=U(Y({width:0,height:0,left:0,top:0}));const i=w(()=>t.canvasSizes().width/(240*(e.maxListLength||1))),r=w(()=>{var u;return(t.canvasSizes().height-250)/(((u=m(s))==null?void 0:u.height)||0)}),a=w(()=>Math.min(m(r),m(i))),l=w(()=>m(a)<1);st(n,{maxWidth:"100%",children:(u,h)=>{var f=ch(),o=M(f);let c;var d=D(o),p=D(d);qe(p,{type:"row",noScroll:!0,children:(A,S)=>{var B=G(),L=M(B);V(L,()=>e.bonusCardsActivate),b(A,B)},$$slots:{default:!0}});var _=T(p,2);qe(_,{type:"row",noScroll:!0,children:(A,S)=>{var B=G(),L=M(B);V(L,()=>e.bonusCardsBuy),b(A,B)},$$slots:{default:!0}}),R(d),Oa(d,(A,S)=>gn==null?void 0:gn(A,S),()=>A=>k(s,Y(A)));var y=T(d,2);{var g=A=>{var S=ah(),B=D(S);V(B,()=>e.betAmount),R(S),b(A,S)};$(y,A=>{m(l)||A(g)})}R(o);var v=T(o,2);{var x=A=>{var S=lh(),B=D(S);V(B,()=>e.betAmount),R(S),b(A,S)};$(v,A=>{m(l)&&A(x)})}X(A=>{c=$e(o,1,"wrap svelte-rmrbdn",null,c,{scaled:m(l)}),sn(d,"style",`transform: scale(${A??""});`)},[()=>Math.min(m(a),1)]),b(u,f)},$$slots:{default:!0}}),C()}var dh=E('<div class="bonuses-wrap svelte-8l82fa"><div class="bonuses svelte-8l82fa"><!> <!></div></div> <div class="badge-amount-wrap svelte-8l82fa"><!></div>',1);function hh(n,e){I(e,!0);const{stateLayoutDerived:t}=Ut();let s=U(Y({width:0,height:0,left:0,top:0}));const i=w(()=>t.canvasSizes().height/(270*2)),r=w(()=>{var l;return(t.canvasSizes().width-250)/(((l=m(s))==null?void 0:l.width)||0)}),a=w(()=>Math.min(m(i),m(r)));st(n,{maxWidth:"100%",children:(l,u)=>{var h=dh(),f=M(h),o=D(f),c=D(o);qe(c,{type:"row",noScroll:!0,children:(y,g)=>{var v=G(),x=M(v);V(x,()=>e.bonusCardsActivate),b(y,v)},$$slots:{default:!0}});var d=T(c,2);qe(d,{type:"row",noScroll:!0,children:(y,g)=>{var v=G(),x=M(v);V(x,()=>e.bonusCardsBuy),b(y,v)},$$slots:{default:!0}}),R(o),R(f),Oa(f,(y,g)=>gn==null?void 0:gn(y,g),()=>y=>k(s,Y(y)));var p=T(f,2),_=D(p);V(_,()=>e.betAmount),R(p),X(y=>sn(o,"style",`transform: scale(${y??""});`),[()=>Math.min(m(a),1)]),b(l,h)},$$slots:{default:!0}}),C()}function fh(n,e){I(e,!0);const{stateLayoutDerived:t}=Ut(),s=w(()=>vo.betModeMetaList().filter(f=>f.type==="activate")),i=w(()=>vo.betModeMetaList().filter(f=>f.type==="buy")),r={desktop:Bo,tablet:Bo,portrait:uh,landscape:hh},a=w(()=>r[t.layoutType()]);var l=G(),u=M(l);{var h=f=>{At(f,{get zIndex(){return Tt.modal},onclose:()=>me.modal=null,children:(o,c)=>{var d=G(),p=M(d);const _=w(()=>Math.max(m(s).length,m(i).length));zu(p,()=>m(a),(y,g)=>{g(y,{get maxListLength(){return m(_)},betAmount:S=>{$a(S,{})},bonusCardsActivate:S=>{ko(S,{get list(){return m(s)}})},bonusCardsBuy:S=>{ko(S,{get list(){return m(i)}})},$$slots:{betAmount:!0,bonusCardsActivate:!0,bonusCardsBuy:!0}})}),b(o,d)},$$slots:{default:!0}})};$(u,f=>{var o;((o=me.modal)==null?void 0:o.name)==="buyBonus"&&f(h)})}b(n,l),C()}var Lo=Oe(()=>F),Fn=Oe(()=>me),vs=Oe(()=>Re),mh=E('<span style="font-size: 1rem;"> </span>'),ph=E("<!> <!>",1),_h=E("<!> <!> <!>",1);function yh(n,e){I(e,!1);const{eventEmitter:t}=Nt(),s=()=>{Lo(Lo().activeBetModeKey=Ca.selectedBetModeKey),ps.selectedBetModeData().type==="buy"&&t.broadcast({type:"bet"}),ps.selectedBetModeData().type==="activate"&&(vs(vs().autoSpinsLossLimitText=bo),vs(vs().autoSpinsSingleWinLimitText=bo))};xe();var i=G(),r=M(i);{var a=l=>{At(l,{get zIndex(){return Tt.dialog},onclose:()=>Fn(Fn().modal={name:"buyBonus"}),children:(u,h)=>{st(u,{maxWidth:"500px",children:(f,o)=>{var c=_h(),d=M(c);ss(d,{children:(y,g)=>{je();var v=He();X(x=>K(v,x),[()=>ps.selectedBetModeData().text.title],le),b(y,v)},$$slots:{default:!0}});var p=T(d,2);qe(p,{type:"column",children:(y,g)=>{je();var v=He();X(x=>K(v,x),[()=>ps.selectedBetModeData().text.dialog],le),b(y,v)},$$slots:{default:!0}});var _=T(p,2);Fr(_,{type:"max-width",children:(y,g)=>{Dt(y,{"data-test":"confirm-button",onclick:()=>{s(),t.broadcast({type:"soundPressGeneral"}),Fn(Fn().modal=null)},children:(v,x)=>{var A=ph(),S=M(A);tt(S,{width:"100%",height:"3rem"});var B=T(S,2);nt(B,{children:(L,H)=>{var N=mh(),Z=D(N,!0);R(N),X(te=>K(Z,te),[()=>ye.confirm()],le),b(L,N)},$$slots:{default:!0}}),b(v,A)},$$slots:{default:!0}})},$$slots:{default:!0}}),b(f,c)},$$slots:{default:!0}})},$$slots:{default:!0}})};$(r,l=>{var u;((u=Fn().modal)==null?void 0:u.name)==="buyBonusConfirm"&&l(a)})}b(n,i),C()}const gh=async({element:n,duration:e})=>{n&&(await ut(e+20),n.scroll({top:n.scrollHeight,behavior:"smooth"}))};var vh=E('<span style="font-size: 1rem;" data-test="round-options"> </span>'),bh=E("<!> <!>",1);function xh(n,e){I(e,!0);const{stateLayoutDerived:t}=Ut(),s=xo.filter(r=>r!=="1000"),i=w(()=>t.layoutType()==="landscape"?s:xo);_i(n,{get value(){return Re.autoSpinsText},get options(){return m(i)},onchange:a=>Re.autoSpinsText=a,option:(a,l)=>{let u=()=>l==null?void 0:l().option;var h=bh(),f=M(h);const o=w(()=>u()===Re.autoSpinsText?"2px white solid":"2px black solid");tt(f,{width:"100%",height:"2rem",get border(){return m(o)}});var c=T(f,2);nt(c,{children:(d,p)=>{var _=vh();let y;var g=D(_,!0);R(_),X(()=>{y=$e(_,1,"svelte-eq8ntj",null,y,{infinity:u()==="∞"}),K(g,u())}),b(d,_)},$$slots:{default:!0}}),b(a,h)},$$slots:{option:!0}}),C()}var bs=Oe(()=>Re),wh=E('<span style="font-size: 1rem;"> </span>'),Sh=E("<!> <!>",1),Ah=E('<span class="title svelte-hzlrh9"> </span> <!>',1);function Th(n,e){I(e,!1),xe();var t=Ah(),s=M(t),i=D(s,!0);R(s);var r=T(s,2);_i(r,{miniSize:!0,get value(){return bs().autoSpinsLossLimitText},options:cu,onchange:l=>bs(bs().autoSpinsLossLimitText=l),option:(l,u)=>{let h=()=>u==null?void 0:u().option;var f=Sh(),o=M(f);const c=le(()=>h()===bs().autoSpinsLossLimitText?"2px white solid":"2px black solid");tt(o,{width:"100%",height:"2rem",get border(){return m(c)}});var d=T(o,2);nt(d,{children:(p,_)=>{var y=wh();let g;var v=D(y,!0);R(y),X(()=>{g=$e(y,1,"option-wrap svelte-hzlrh9",null,g,{infinity:h()==="∞"}),sn(y,"data-test",`loss-limit-${h()??""}`),K(v,h())}),b(p,y)},$$slots:{default:!0}}),b(l,f)},$$slots:{option:!0}}),X(a=>K(i,a),[()=>ye.lossLimit()],le),b(n,t),C()}var xs=Oe(()=>Re),Mh=E('<span style="font-size: 1rem;" data-test="single-win-limit-options"> </span>'),Eh=E("<!> <!>",1),Ih=E('<span class="title svelte-127mkoc"> </span> <!>',1);function Ch(n,e){I(e,!1),xe();var t=Ih(),s=M(t),i=D(s,!0);R(s);var r=T(s,2);_i(r,{miniSize:!0,get value(){return xs().autoSpinsSingleWinLimitText},options:uu,onchange:l=>xs(xs().autoSpinsSingleWinLimitText=l),option:(l,u)=>{let h=()=>u==null?void 0:u().option;var f=Eh(),o=M(f);const c=le(()=>h()===xs().autoSpinsSingleWinLimitText?"2px white solid":"2px black solid");tt(o,{width:"100%",height:"2rem",get border(){return m(c)}});var d=T(o,2);nt(d,{children:(p,_)=>{var y=Mh();let g;var v=D(y,!0);R(y),X(()=>{g=$e(y,1,"option-wrap svelte-127mkoc",null,g,{infinity:h()==="∞"}),K(v,h())}),b(p,y)},$$slots:{default:!0}}),b(l,f)},$$slots:{option:!0}}),X(a=>K(i,a),[()=>ye.singleWinLimit()],le),b(n,t),C()}var Ph=E("<span> </span>"),kh=E('<div style="border: 2px solid white; border-radius: 10px;"><!> <!></div>'),Bh=E("<!> <!>",1);function Lh(n,e){I(e,!0);const{eventEmitter:t}=Nt(),s=100;let i=U(!1);fe(()=>{m(i)&&e.ontoggle(s)});var r=Bh(),a=M(r);const l=w(()=>ae.activeBetMode().type==="activate");du(a,{get open(){return m(i)},get disabled(){return m(l)},onchange:f=>{k(i,Y(f)),t.broadcast({type:"soundPressGeneral"})},children:(f,o)=>{var c=Ph(),d=D(c,!0);R(c),X(p=>K(d,p),[()=>ye.advanced()]),b(f,c)},$$slots:{default:!0}});var u=T(a,2);{var h=f=>{var o=kh(),c=D(o);Th(c,{});var d=T(c,2);Ch(d,{}),R(o),hu(3,o,()=>fu,()=>({duration:s})),b(f,o)};$(u,f=>{m(i)&&f(h)})}b(n,r),C()}var rt=Oe(()=>F),Ro=Oe(()=>me),Rh=E('<span style="font-size: 1rem;"> </span>'),Oh=E("<!> <!>",1);function Dh(n,e){I(e,!1);const{eventEmitter:t}=Nt(),s=()=>{rt(rt().autoSpinsCounter=mu[Re.autoSpinsText]),rt(rt().autoSpinsLossLimitAmount=rt().betAmount*pu[Re.autoSpinsLossLimitText]),rt(rt().autoSpinsSingleWinLimitAmount=rt().betAmount*_u[Re.autoSpinsSingleWinLimitText]),ae.activeBetMode().type==="buy"&&rt(rt().activeBetModeKey="BASE"),t.broadcast({type:"soundPressGeneral"}),t.broadcast({type:"autoBet"}),Ro(Ro().modal=null)};xe();const i=le(()=>!ae.isBetCostAvailable());Dt(n,{get disabled(){return m(i)},onclick:s,children:(r,a)=>{var l=Oh(),u=M(l);tt(u,{width:"100%",height:"3rem"});var h=T(u,2);nt(h,{children:(f,o)=>{var c=Rh(),d=D(c,!0);R(c),X(p=>K(d,p),[()=>ye.startAutoplay()],le),b(f,c)},$$slots:{default:!0}}),b(r,l)},$$slots:{default:!0}}),C()}var Di=Oe(()=>me),Fh=E('<div class="subtitle" data-test="number-of-rounds"> </div> <!> <!>',1),Gh=E("<!> <!> <!>",1);function Nh(n,e){I(e,!1),xe();var t=G(),s=M(t);{var i=r=>{At(r,{get zIndex(){return Tt.modal},onclose:()=>Di(Di().modal=null),children:(a,l)=>{st(a,{maxWidth:"100%",children:(u,h)=>{var f=Gh(),o=M(f);ss(o,{children:(p,_)=>{je();var y=He();X(g=>K(y,g),[()=>ye.autoSpins()],le),b(p,y)},$$slots:{default:!0}});var c=T(o,2);qe(c,{type:"column",children:(_,y)=>{let g=()=>y==null?void 0:y().element;var v=Fh(),x=M(v),A=D(x,!0);R(x);var S=T(x,2);xh(S,{});var B=T(S,2);Lh(B,{ontoggle:L=>{g()&&gh({element:g(),duration:L})}}),X(L=>K(A,L),[()=>ye.numberOfRounds()],le),b(_,v)},$$slots:{default:!0}});var d=T(c,2);Fr(d,{type:"full-width",children:(p,_)=>{Dh(p,{})},$$slots:{default:!0}}),b(u,f)},$$slots:{default:!0}})},$$slots:{default:!0}})};$(s,r=>{var a;((a=Di().modal)==null?void 0:a.name)==="autoSpin"&&r(i)})}b(n,t),C()}var Uh=E('<span class="text svelte-1kl734d" data-test="auto-spin-stop-info"> </span> <div class="scrollY info-text svelte-1kl734d" data-test="auto-spin-stop-content"> </div>',1),Wh=E("<!> <!>",1);function $h(n,e){I(e,!0);const t=w(()=>({lossLimitReached:ye.lossLimitReached(),singleWinLimitReached:ye.singleWinLimitReached(),insufficientFunds:ye.insufficientFunds()}));var s=G(),i=M(s);{var r=a=>{At(a,{get zIndex(){return Tt.modal},onclose:()=>me.modal=null,children:(l,u)=>{st(l,{maxWidth:"100%",children:(h,f)=>{var o=Wh(),c=M(o);ss(c,{children:(p,_)=>{je();var y=He();X(g=>K(y,g),[()=>ye.notification()]),b(p,y)},$$slots:{default:!0}});var d=T(c,2);qe(d,{type:"column",children:(p,_)=>{var y=Uh(),g=M(y),v=D(g,!0);R(g);var x=T(g,2),A=D(x,!0);R(x),X(S=>{K(v,S),K(A,m(t)[me.modal.message])},[()=>ye.autoSpinsStopInfo()]),b(p,y)},$$slots:{default:!0}}),b(h,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};$(i,a=>{var l;((l=me.modal)==null?void 0:l.name)==="autoSpinMessage"&&a(r)})}b(n,s),C()}var Hh=E("<span>ADD YOUR PAY TABLE</span> <!>",1);function zh(n,e){I(e,!0);var t=G(),s=M(t);{var i=r=>{At(r,{get zIndex(){return Tt.modal},onclose:()=>me.modal=null,children:(a,l)=>{st(a,{maxWidth:"100%",children:(u,h)=>{qe(u,{type:"column",children:(f,o)=>{var c=Hh(),d=T(M(c),2);V(d,()=>e.children),b(f,c)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})};$(s,r=>{var a;((a=me.modal)==null?void 0:a.name)==="payTable"&&r(i)})}b(n,t),C()}var Yh=E("<span>ADD YOUR GAME RULES</span> <!>",1);function Xh(n,e){I(e,!0);var t=G(),s=M(t);{var i=r=>{At(r,{get zIndex(){return Tt.modal},onclose:()=>me.modal=null,children:(a,l)=>{st(a,{maxWidth:"100%",children:(u,h)=>{qe(u,{type:"column",children:(f,o)=>{var c=Yh(),d=T(M(c),2);V(d,()=>e.children),b(f,c)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})};$(s,r=>{var a;((a=me.modal)==null?void 0:a.name)==="gameRules"&&r(i)})}b(n,t),C()}var Vh=E("<span> </span>"),jh=E("<!> <!>",1),Kh=E('<div class="col svelte-99wdan"><span><!></span> <div class="row svelte-99wdan"><div class="button-wrap svelte-99wdan"><!></div> <input type="range" min="0" max="100" class="range svelte-99wdan"> <div class="value svelte-99wdan"><span> </span></div></div></div>');function Fi(n,e){I(e,!0);let t=xn(e,"value",15);const{eventEmitter:s}=Nt();var i=Kh(),r=D(i),a=D(r);V(a,()=>e.children),R(r);var l=T(r,2),u=D(l),h=D(u);Dt(h,{onclick:()=>{s.broadcast({type:"soundPressGeneral"}),t()===0?t(50):t(0)},children:(p,_)=>{var y=jh(),g=M(y);tt(g,{width:"3rem",height:"3rem"});var v=T(g,2);nt(v,{children:(x,A)=>{var S=Vh(),B=D(S,!0);R(S),X(()=>K(B,t()>0?"ON":"OFF")),b(x,S)},$$slots:{default:!0}}),b(p,y)},$$slots:{default:!0}}),R(u);var f=T(u,2);yu(f);var o=T(f,2),c=D(o),d=D(c,!0);R(c),R(o),R(l),R(i),X(()=>K(d,t())),qu(f,t),b(n,i),C()}var Gi=Oe(()=>me),_t=Oe(()=>gu),qh=E('<wrap class="wrap svelte-g8mexk"><!> <!> <!></wrap>'),Jh=E("<!> <!>",1);function Zh(n,e){I(e,!1),xe();var t=G(),s=M(t);{var i=r=>{At(r,{get zIndex(){return Tt.modal},onclose:()=>Gi(Gi().modal=null),children:(a,l)=>{st(a,{maxWidth:"100%",children:(u,h)=>{var f=Jh(),o=M(f);ss(o,{children:(d,p)=>{je();var _=He();X(y=>K(_,y),[()=>ye.settings()],le),b(d,_)},$$slots:{default:!0}});var c=T(o,2);qe(c,{type:"column",children:(d,p)=>{var _=qh(),y=D(_);Fi(y,{get value(){return _t().volumeValueMaster},set value(x){_t(_t().volumeValueMaster=x)},children:(x,A)=>{je();var S=He();X(B=>K(S,B),[()=>ye.masterVolume()],le),b(x,S)},$$slots:{default:!0},$$legacy:!0});var g=T(y,2);Fi(g,{get value(){return _t().volumeValueMusic},set value(x){_t(_t().volumeValueMusic=x)},children:(x,A)=>{je();var S=He();X(B=>K(S,B),[()=>ye.musicVolume()],le),b(x,S)},$$slots:{default:!0},$$legacy:!0});var v=T(g,2);Fi(v,{get value(){return _t().volumeValueSoundEffect},set value(x){_t(_t().volumeValueSoundEffect=x)},children:(x,A)=>{je();var S=He();X(B=>K(S,B),[()=>ye.soundEffectVolume()],le),b(x,S)},$$slots:{default:!0},$$legacy:!0}),R(_),b(d,_)},$$slots:{default:!0}}),b(u,f)},$$slots:{default:!0}})},$$slots:{default:!0}})};$(s,r=>{var a;((a=Gi().modal)==null?void 0:a.name)==="settings"&&r(i)})}b(n,t),C()}var Qh=E("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1);function ef(n,e){I(e,!0);var t=Qh(),s=M(t);fd(s,{});var i=T(s,2);Jd(i,{});var r=T(i,2);fh(r,{});var a=T(r,2);yh(a,{});var l=T(a,2);Nh(l,{});var u=T(l,2);$h(u,{});var h=T(u,2);zh(h,{children:(c,d)=>{var p=G(),_=M(p);V(_,()=>e.version),b(c,p)},$$slots:{default:!0}});var f=T(h,2);Xh(f,{children:(c,d)=>{var p=G(),_=M(p);V(_,()=>e.version),b(c,p)},$$slots:{default:!0}});var o=T(f,2);Zh(o,{}),b(n,t),C()}let tf=!1;function nf(n,e){I(e,!0),je();var t=He();X(()=>K(t,`
${e.version??""}`)),b(n,t),C()}const hr=[];Or.handleByNamedList(Yn.Environment,hr);async function sf(n){if(!n)for(let e=0;e<hr.length;e++){const t=hr[e];if(t.value.test()){await t.value.load();return}}}let Gn;function rf(){if(typeof Gn=="boolean")return Gn;try{Gn=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Gn=!1}return Gn}var Va=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(Va||{});class of{constructor(e){this.items=[],this._name=e}emit(e,t,s,i,r,a,l,u){const{name:h,items:f}=this;for(let o=0,c=f.length;o<c;o++)f[o][h](e,t,s,i,r,a,l,u);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const af=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],ja=class Ka extends In{constructor(e){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...af,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await sf(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)e={...this._systemsHash[s].constructor.defaultOptions,...e};e={...Ka.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(e);this._initOptions=e}render(e,t){let s=e;if(s instanceof mi&&(s={container:s},t&&(Ks(qs,"passing a second argument is deprecated, please use render options instead"),s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const i=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=i?s.clearColor:Bi.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s)}resize(e,t,s){const i=this.view.resolution;this.view.resize(e,t,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==i&&this.runners.resolutionChange.emit(s)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=Va.ALL);const{clear:s,clearColor:i,target:r}=e;Bi.shared.setValue(i??this.background.colorRgba),t.renderTarget.clear(r,s,Bi.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new of(t)})}_addSystems(e){let t;for(t in e){const s=e[t];this._addSystem(s.value,s.name)}}_addSystem(e,t){const s=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=s,this._systemsHash[t]=s;for(const i in this.runners)this.runners[i].add(s);return this}_addPipes(e,t){const s=t.reduce((i,r)=>(i[r.name]=r.value,i),{});e.forEach(i=>{const r=i.value,a=i.name,l=s[a];this.renderPipes[a]=new r(this,l?new l:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!rf())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};ja.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let qa=ja,ws;function lf(n){return ws!==void 0||(ws=(()=>{var t;const e={stencil:!0,failIfMajorPerformanceCaveat:n??qa.defaultOptions.failIfMajorPerformanceCaveat};try{if(!ar.get().getWebGLRenderingContext())return!1;let i=ar.get().createCanvas().getContext("webgl",e);const r=!!((t=i==null?void 0:i.getContextAttributes())!=null&&t.stencil);if(i){const a=i.getExtension("WEBGL_lose_context");a&&a.loseContext()}return i=null,r}catch{return!1}})()),ws}let Ss;async function cf(n={}){return Ss!==void 0||(Ss=await(async()=>{const e=ar.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),Ss}const Oo=["webgl","webgpu","canvas"];async function uf(n){let e=[];n.preference?(e.push(n.preference),Oo.forEach(r=>{r!==n.preference&&e.push(r)})):e=Oo.slice();let t,s={};for(let r=0;r<e.length;r++){const a=e[r];if(a==="webgpu"&&await cf()){const{WebGPURenderer:l}=await js(async()=>{const{WebGPURenderer:u}=await import("./CV_dLftT.js");return{WebGPURenderer:u}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url);t=l,s={...n,...n.webgpu};break}else if(a==="webgl"&&lf(n.failIfMajorPerformanceCaveat??qa.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:l}=await js(async()=>{const{WebGLRenderer:u}=await import("./OxPY8O7k.js");return{WebGLRenderer:u}},__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]),import.meta.url);t=l,s={...n,...n.webgl};break}else if(a==="canvas")throw s={...n},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!t)throw new Error("No available renderer for the current environment");const i=new t;return await i.init(s),i}const Ja="8.8.1";class Za{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,Ja)}static destroy(){}}Za.extension=Yn.Application;class df{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,Ja)}destroy(){this._renderer=null}}df.extension={type:[Yn.WebGLSystem,Yn.WebGPUSystem],name:"initHook",priority:-10};const Qa=class fr{constructor(...e){this.stage=new mi,e[0]!==void 0&&Ks(qs,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await uf(e),fr._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Ks(qs,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const s=fr._plugins.slice(0);s.reverse(),s.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Qa._plugins=[];let el=Qa;Or.handleByList(Yn.Application,el._plugins);Or.add(Za);class tl extends vu{constructor(e,t){const{text:s,resolution:i,style:r,anchor:a,width:l,height:u,roundPixels:h,...f}=e;super({...f}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=s??"",this.style=r,this.resolution=i??null,this.allowChildren=!1,this._anchor=new bu({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=h??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,s=this.bounds.height,i=-t*this.anchor.x;let r=0;return e.x>=i&&e.x<=i+t&&(r=-s*this.anchor.y,e.y>=r&&e.y<=r+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}}function nl(n,e){let t=n[0]??{};return(typeof t=="string"||n[1])&&(Ks(qs,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:n[1]}),t}let hf=class extends tl{constructor(...e){const t=nl(e,"Text");super(t,Pa),this.renderPipeId="text"}updateBounds(){const e=this._bounds,t=this._anchor,s=xu.measureText(this._text,this._style),{width:i,height:r}=s;e.minX=-t._x*i,e.maxX=e.minX+i,e.minY=-t._y*r,e.maxY=e.minY+r}},ff=class extends tl{constructor(...e){var t;const s=nl(e,"BitmapText");s.style??(s.style=s.style||{}),(t=s.style).fill??(t.fill=16777215),super(s,Pa),this.renderPipeId="bitmapText"}updateBounds(){const e=this._bounds,t=this._anchor,s=wu.measureText(this.text,this._style),i=s.scale,r=s.offsetY*i;let a=s.width*i,l=s.height*i;const u=this._style._stroke;u&&(a+=u.width,l+=u.width),e.minX=-t._x*a,e.maxX=e.minX+a,e.minY=-t._y*(l+r),e.maxY=e.minY+l}set resolution(e){e!==null&&Su("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}};const sl="@@pixi_svelte";function mf(n){ln(sl,n)}function mt(){return cn(sl)}const il="@@pixi_parent";function Ur(n){const t={parent:n,addToParent:s=>{ge(()=>(t.parent.addChild(s),t.parent.sortChildren(),()=>{s&&s.destroy()}))}};return ln(il,t),t}function un(){return cn(il)}const rl="@@pixi_spine";function pf(n){ln(rl,n)}function Wr(){return cn(rl)}const ol="@@pixi_spine_event_emitter";function _f(n){ln(ol,n)}function yf(){return cn(ol)}const gf=({point:n,defaultValue:e})=>{const t=e;return typeof n=="number"?[n,n]:[(n==null?void 0:n.x)||t,(n==null?void 0:n.y)||t]},is=({anchor:n,sizes:e})=>{const{width:t,height:s}=e,[i,r]=gf({point:n,defaultValue:0});return{x:t*i,y:s*r}},vf=()=>new Promise(n=>{try{Au.load({typekit:{id:"aba0ebl"},active:()=>{n()},inactive:()=>{console.error("Web font load inactive"),n()}})}catch(e){console.error(e),n()}});function Wt({props:n,target:e,ignore:t}){fe(()=>{let s=e instanceof Function?e():e;s&&Object.keys(n).filter(i=>t?!t.includes(i):!0).forEach(i=>{n[i]!==void 0&&(s[i]=n[i])})})}var bf=E("<div><!></div>");function xf(n,e){I(e,!0);const t=mt();let s,i=U(!1);const r=async()=>{ka.reset(),await vf(),t.stateApp.pixiApplication=new el,await t.stateApp.pixiApplication.init({autoDensity:!0,backgroundAlpha:0,hello:!0,multiView:!1,antialias:!0,clearBeforeRender:!0,preference:"webgpu",powerPreference:"high-performance",resolution:Ed.current,resizeTo:window}),s.appendChild(t.stateApp.pixiApplication.canvas),t.stateApp.pixiApplication.renderer.events.autoPreventDefault=!1,t.stateApp.pixiApplication.renderer.canvas.style.touchAction="auto"};ge(async()=>{try{m(i)||await r(),k(i,!0)}catch(h){console.error(h)}}),ns(()=>{t.stateApp.pixiApplication&&t.stateApp.pixiApplication.destroy()});var a=bf(),l=D(a);{var u=h=>{var f=G(),o=M(f);V(o,()=>e.children),b(h,f)};$(l,h=>{m(i)&&h(u)})}R(a),La(a,h=>s=h,()=>s),b(n,a),C()}function wf(n,e){var l;I(e,!0);const t=mt();let s=Ur(((l=t.stateApp.pixiApplication)==null?void 0:l.stage)??new PIXI.Container);var i=G(),r=M(i);{var a=u=>{var h=G(),f=M(h);V(f,()=>e.children),b(u,h)};$(r,u=>{s.parent&&u(a)})}b(n,i),C()}const Sf={spine:({key:n,rawAsset:e,src:t})=>{var s;const i=e[t.atlas],r=e[t.skeleton],a=new Eu(i),l=r instanceof Uint8Array?new Tu(a):new Mu(a),u=(s=t==null?void 0:t.scale)!==null&&s!==void 0?s:1;l.scale=u;const h=l.readSkeletonData(r);return{[n]:h}},sprite:({key:n,rawAsset:e})=>({[n]:e}),sprites:({rawAsset:n})=>n.textures,spriteSheet:({key:n,rawAsset:e})=>({[n]:Object.values(e.textures)}),audio:({key:n,rawAsset:e})=>({[n]:e})},Af=({key:n,type:e,rawAsset:t,src:s})=>{if(e==="font")return;const i=Sf[e];if(!i)throw Error("No asset process method found, please check the type of the asset.");return i({key:n,rawAsset:t,src:s})};function Tf(n,e){I(e,!0);const t=mt();let s=U(!1);const i=w(()=>t.stateApp.assets?Object.keys(t.stateApp.assets).filter(c=>{var d;return!((d=t.stateApp.assets)!=null&&d[c].preload)}):[]),r=w(()=>t.stateApp.assets?Object.keys(t.stateApp.assets).filter(c=>{var d;return((d=t.stateApp.assets)==null?void 0:d[c].preload)===!0}):[]);let a=0;const l=c=>{if(m(s)&&c===1){a=a+1;const d=a/m(i).length;t.stateApp.loadingProgress=d*100}},u=async c=>(await Promise.all(c.map(async p=>{try{const{type:_,src:y}=t.stateApp.assets[p],g=_==="spine"?Object.values(y).filter(A=>typeof A=="string"):y,v=await ka.load(g,l);return Af({key:p,rawAsset:v,type:_,src:y})}catch(_){console.error(_)}}))).reduce((p,_)=>({...p,..._}),{});fe(()=>{m(s)||(async()=>{if(m(r).length>0){const c=await u(m(r));c&&(t.stateApp.loadedAssets=c)}k(s,!0)})()}),fe(()=>{!t.stateApp.loaded&&m(s)&&(async()=>{if(m(i).length>0){const c=await u(m(i));c&&(t.stateApp.loadedAssets={...t.stateApp.loadedAssets,...c})}t.stateApp.loaded=!0})()});var h=G(),f=M(h);{var o=c=>{var d=G(),p=M(d);V(p,()=>e.children),b(c,d)};$(f,c=>{m(s)&&c(o)})}b(n,h),C()}function Mf(n,e){I(e,!0);const t=mt();ge(()=>t.stateApp.reset()),ns(()=>t.stateApp.reset()),xf(n,{children:(s,i)=>{wf(s,{children:(r,a)=>{Tf(r,{children:(l,u)=>{var h=G(),f=M(h);V(f,()=>e.children),b(l,h)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),C()}function al(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy"]),s=un(),i=new hf({text:e.text,style:e.style});Wt({props:t,target:i,ignore:["onresize"]}),fe(()=>{var r;e==null||e.text,e==null||e.style,(r=e.onresize)==null||r.call(e,{width:i.width,height:i.height})}),ge(()=>{var r;(r=e.onresize)==null||r.call(e,{width:i.width,height:i.height})}),s.addToParent(i),C()}function we(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy"]),s=un(),i=new mi;Wt({props:t,target:i,ignore:["children"]}),s.addToParent(i),Ur(i);var r=G(),a=M(r);V(a,()=>e.children),b(n,r),C()}function Ef(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy"]),s=un(),i=new Iu;Wt({props:t,target:i,ignore:["isMask","draw"]}),fe(()=>{e.isMask!==void 0&&(s.parent.mask=e.isMask?i:null)}),fe(()=>{e.draw&&(i.clear(),e.draw(i))}),s.addToParent(i),C()}function wn(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy","anchor","width","height","borderRadius","backgroundColor","backgroundAlpha","borderColor","borderWidth","borderAlpha"]),s=w(()=>is({anchor:e.anchor,sizes:{width:e.width,height:e.height}}));Ef(n,Ae(()=>t,{get pivot(){return m(s)},draw:i=>{i.roundRect(0,0,e.width,e.height,e.borderRadius??0),i.fill({color:e.backgroundColor??0,alpha:e.backgroundAlpha??1}),i.stroke({color:e.borderColor??0,width:e.borderWidth??0,alpha:e.borderAlpha??1})}})),C()}function If(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy"]),s=un(),i=new Cu(e.texture);Wt({props:t,target:i,ignore:["isMask"]}),fe(()=>{e.isMask!==void 0&&(s.parent.mask=e.isMask?i:null)}),s.addToParent(i),C()}var Cf=E("<!> <!>",1);function Se(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy","debug","key"]),s=mt(),i=w(()=>{var h;return((h=s.stateApp.loadedAssets)==null?void 0:h[e.key])||wo.EMPTY});var r=Cf(),a=M(r);{var l=h=>{var f=He();X((o,c)=>K(f,`${o??""}
	${c??""}`),[()=>console.error(`Sprite: key "${e.key}" is not found in the loadedAssets`),()=>console.log("loadedAssets",pi(s.stateApp).loadedAssets)]),b(h,f)};$(a,h=>{(m(i)===wo.EMPTY||e.debug)&&h(l)})}var u=T(a,2);If(u,Ae(()=>t,{get texture(){return m(i)}})),b(n,r),C()}function Pf(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy"]),s=un(),i=new Pu(e.spineData);Wt({props:t,target:i,ignore:["children"]}),s.addToParent(i),pf(i);var r=G(),a=M(r);V(a,()=>e.children),b(n,r),C()}var kf=E("<!> <!> <!>",1);function Je(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy","debug","key","anchor","children","scale"]),s=mt(),i=w(()=>{var _;return(_=s.stateApp.loadedAssets)==null?void 0:_[e.key]}),r={x:1,y:1},a=w(()=>{var _,y;if(!m(i)||!((_=m(i))!=null&&_.width)||!((y=m(i))!=null&&y.height)||!e.width&&!e.height)return r;if(!e.width&&e.height){const g=e.height/m(i).height;return{x:g,y:g}}if(e.width&&!e.height){const g=e.width/m(i).width;return{x:g,y:g}}return e.width&&e.height?{x:e.width/m(i).width,y:e.height/m(i).height}:r}),l=w(()=>{var _,y;return typeof e.scale=="number"?{x:m(a).x*e.scale,y:m(a).y*e.scale}:{x:m(a).x*(((_=e.scale)==null?void 0:_.x)||1),y:m(a).y*(((y=e.scale)==null?void 0:y.y)||1)}}),u=w(()=>{var g,v;if(!m(i)||!((g=m(i))!=null&&g.width)||!((v=m(i))!=null&&v.height))return 0;const _=e.width||m(i).width,y=e.height||m(i).height;return is({anchor:e.anchor,sizes:{width:_,height:y}})});var h=kf(),f=M(h);{var o=_=>{var y=He();X(g=>K(y,g),[()=>console.error(`Spine: key "${e.key}" is not found in loadedAssets`)]),b(_,y)};$(f,_=>{m(i)||_(o)})}var c=T(f,2);{var d=_=>{var y=He();X(g=>K(y,g),[()=>console.log("loadedAssets",pi(s.stateApp).loadedAssets)]),b(_,y)};$(c,_=>{(!m(i)||e.debug)&&_(d)})}var p=T(c,2);Xu(p,()=>m(i),_=>{Pf(_,Ae(()=>t,{get scale(){return m(l)},get pivot(){return m(u)},get spineData(){return m(i)},children:(y,g)=>{var v=G(),x=M(v);V(x,()=>e.children),b(y,v)},$$slots:{default:!0}}))}),b(n,h),C()}function Bf(n,e){I(e,!0);const t=Wr(),s=new In;t.beforeUpdateWorldTransforms=()=>s.emit("beforeUpdateWorldTransforms"),t.afterUpdateWorldTransforms=()=>s.emit("afterUpdateWorldTransforms"),_f(s);var i=G(),r=M(i);V(r,()=>e.children),b(n,i),C()}function Ze(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy"]),s=Wr();let i=U(Y(s.state.tracks[e.trackIndex]));fe(()=>{var r,a,l,u,h,f;if(e.trackIndex!==((r=m(i))==null?void 0:r.trackIndex)||e.animationName!==((l=(a=m(i))==null?void 0:a.animation)==null?void 0:l.name)){m(i)&&s.state.setEmptyAnimation(m(i).trackIndex,0);try{k(i,Y(s.state.setAnimation(e.trackIndex,e.animationName,e.loop)))}catch(o){console.error(o);const c=(f=(h=(u=s==null?void 0:s.state)==null?void 0:u.data)==null?void 0:h.skeletonData)==null?void 0:f.animations;c&&console.log("Available animation names:",c.map(d=>d.name))}}}),Wt({props:t,target:()=>m(i),ignore:["trackIndex","animationName"]}),ns(()=>{s.state.setEmptyAnimation(e.trackIndex,0)}),C()}function xt(n,e){I(e,!0);const t=Wr(),s=new mi,i=yf();let r=U(!i);ge(()=>{i&&i.on("beforeUpdateWorldTransforms",()=>{const h=t.skeleton.findSlot(e.slotName);h&&k(r,Y(!!(h!=null&&h.attachment)))}),t.addSlotObject(e.slotName,s)}),Ur(s);var a=G(),l=M(a);{var u=h=>{var f=G(),o=M(f);V(o,()=>e.children),b(h,f)};$(l,h=>{m(r)&&h(u)})}b(n,a),C()}function ft(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy"]),s=un(),i=new ff({text:e.text,style:e.style});Wt({props:t,target:i,ignore:["onresize"]}),fe(()=>{var r;e==null||e.text,e==null||e.style,(r=e.onresize)==null||r.call(e,{width:i.width,height:i.height})}),ge(()=>{var r;(r=e.onresize)==null||r.call(e,{width:i.width,height:i.height})}),s.addToParent(i),C()}function Lf(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy"]),s=mt(),i=un(),r=w(()=>{var u;return(u=s.stateApp.loadedAssets)==null?void 0:u[e.key]}),a=w(()=>Bu(e.config,m(r))),l=new ku(i.parent,m(a));Wt({props:t,target:l,ignore:["emit"]}),fe(()=>{e.emit&&l.init(m(a))}),s.stateApp.pixiApplication&&s.stateApp.pixiApplication.ticker.add(()=>{if(s.stateApp.pixiApplication){const u=s.stateApp.pixiApplication.ticker.deltaMS*(e.emitSpeed||.00234);l.update(u)}}),ns(()=>{l.emit=!1,l.destroy()}),C()}function Rf({assets:n}){const t=Y({reset:()=>{t.loaded=!1,t.loadingProgress=0,t.loadedAssets={},t.pixiApplication=void 0},assets:n,loaded:!1,loadingProgress:0,loadedAssets:{},pixiApplication:void 0});return{stateApp:t}}function Of(n,e){I(e,!1);const t=mt();globalThis.__PIXI_APP__=t.stateApp.pixiApplication,xe(),C()}function dt(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy","show","persistent","duration","oncomplete","children"]),s=new ke(e.show?1:0,{duration:e.duration});fe(()=>{s.set(e.show?1:0,{duration:e.duration}).then(()=>{var l;return(l=e.oncomplete)==null?void 0:l.call(e)})}),ge(async()=>{var l;e.show&&(await s.set(0,{duration:0}),await s.set(1),(l=e.oncomplete)==null||l.call(e))});var i=G(),r=M(i);{var a=l=>{we(l,Ae(()=>t,{get alpha(){return s.current},children:(u,h)=>{var f=G(),o=M(f);V(o,()=>e.children),b(u,f)},$$slots:{default:!0}}))};$(r,l=>{(s.current>0||e.persistent)&&l(a)})}b(n,i),C()}function ll(n,e){I(e,!0);const t=new ke(0),s=Ba();let i=U(!1);const r=()=>t.set(e.amount,{duration:e.duration}),a=()=>t.set(e.amount,{duration:0}),l=()=>s.interrupt(),u=async()=>{await s.add(r),a(),k(i,!0),e.oncomplete(),s.clear()};var h=G(),f=M(h);V(f,()=>e.children,()=>({countUpAmount:t.current,startCountUp:u,finishCountUp:l,countUpCompleted:m(i)})),b(n,h),C()}var Df=E("<!> <!>",1);function ei(n,e){const t=Ee(e,["$$slots","$$events","$$legacy","maxWidth"]);let s=U(Y({width:0,height:0}));const i=w(()=>e.maxWidth/(m(s).width||1));var r=Df(),a=M(r);we(a,{visible:!1,children:(u,h)=>{ft(u,Ae(()=>t,{onresize:f=>k(s,Y(f))}))},$$slots:{default:!0}});var l=T(a,2);we(l,{children:(u,h)=>{const f=w(()=>Math.min(m(i),1));ft(u,Ae(()=>t,{get scale(){return m(f)}}))},$$slots:{default:!0}}),b(n,r)}function Ff(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Gf(){const n=Ff();if(n.__xstate__)return n.__xstate__}const Nf=n=>{if(typeof window>"u")return;const e=Gf();e&&e.register(n)};class Do{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const cl=".",Uf="",ul="",Wf="#",$f="*",dl="xstate.init",ti="xstate.stop";function Hf(n,e){return{type:`xstate.after.${n}.${e}`}}function mr(n,e){return{type:`xstate.done.state.${n}`,output:e}}function zf(n,e){return{type:`xstate.done.actor.${n}`,output:e,actorId:n}}function Yf(n,e){return{type:`xstate.error.actor.${n}`,error:e,actorId:n}}function hl(n){return{type:dl,input:n}}function yt(n){setTimeout(()=>{throw n})}const Xf=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $r(n,e){const t=Fo(n),s=Fo(e);return typeof s=="string"?typeof t=="string"?s===t:!1:typeof t=="string"?t in s:Object.keys(t).every(i=>i in s?$r(t[i],s[i]):!1)}function Hr(n){if(ml(n))return n;const e=[];let t="";for(let s=0;s<n.length;s++){switch(n.charCodeAt(s)){case 92:t+=n[s+1],s++;continue;case 46:e.push(t),t="";continue}t+=n[s]}return e.push(t),e}function Fo(n){if(Mm(n))return n.value;if(typeof n!="string")return n;const e=Hr(n);return Vf(e)}function Vf(n){if(n.length===1)return n[0];const e={};let t=e;for(let s=0;s<n.length-1;s++)if(s===n.length-2)t[n[s]]=n[s+1];else{const i=t;t={},i[n[s]]=t}return e}function Go(n,e){const t={},s=Object.keys(n);for(let i=0;i<s.length;i++){const r=s[i];t[r]=e(n[r],r,n,i)}return t}function fl(n){return ml(n)?n:[n]}function Bt(n){return n===void 0?[]:fl(n)}function pr(n,e,t,s){return typeof n=="function"?n({context:e,event:t,self:s}):n}function ml(n){return Array.isArray(n)}function jf(n){return n.type.startsWith("xstate.error.actor")}function mn(n){return fl(n).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function pl(n){if(!(n===void 0||n===Uf))return Bt(n)}function _r(n,e,t){var r,a,l;const s=typeof n=="object",i=s?n:void 0;return{next:(r=s?n.next:n)==null?void 0:r.bind(i),error:(a=s?n.error:e)==null?void 0:a.bind(i),complete:(l=s?n.complete:t)==null?void 0:l.bind(i)}}function No(n,e){return`${e}.${n}`}function zr(n,e){const t=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!t)return n.implementations.actors[e];const[,s,i]=t,a=n.getStateNodeById(i).config.invoke;return(Array.isArray(a)?a[s]:a).src}function Uo(n,e){return`${n.sessionId}.${e}`}let Kf=0;function qf(n,e){const t=new Map,s=new Map,i=new WeakMap,r=new Set,a={},{clock:l,logger:u}=e,h={schedule:(c,d,p,_,y=Math.random().toString(36).slice(2))=>{const g={source:c,target:d,event:p,delay:_,id:y,startedAt:Date.now()},v=Uo(c,y);o._snapshot._scheduledEvents[v]=g;const x=l.setTimeout(()=>{delete a[v],delete o._snapshot._scheduledEvents[v],o._relay(c,d,p)},_);a[v]=x},cancel:(c,d)=>{const p=Uo(c,d),_=a[p];delete a[p],delete o._snapshot._scheduledEvents[p],_!==void 0&&l.clearTimeout(_)},cancelAll:c=>{for(const d in o._snapshot._scheduledEvents){const p=o._snapshot._scheduledEvents[d];p.source===c&&h.cancel(c,p.id)}}},f=c=>{if(!r.size)return;const d={...c,rootId:n.sessionId};r.forEach(p=>{var _;return(_=p.next)==null?void 0:_.call(p,d)})},o={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${Kf++}`,_register:(c,d)=>(t.set(c,d),c),_unregister:c=>{t.delete(c.sessionId);const d=i.get(c);d!==void 0&&(s.delete(d),i.delete(c))},get:c=>s.get(c),_set:(c,d)=>{const p=s.get(c);if(p&&p!==d)throw new Error(`Actor with system ID '${c}' already exists.`);s.set(c,d),i.set(d,c)},inspect:c=>{const d=_r(c);return r.add(d),{unsubscribe(){r.delete(d)}}},_sendInspectionEvent:f,_relay:(c,d,p)=>{o._sendInspectionEvent({type:"@xstate.event",sourceRef:c,actorRef:d,event:p}),d._send(p)},scheduler:h,getSnapshot:()=>({_scheduledEvents:{...o._snapshot._scheduledEvents}}),start:()=>{const c=o._snapshot._scheduledEvents;o._snapshot._scheduledEvents={};for(const d in c){const{source:p,target:_,event:y,delay:g,id:v}=c[d];h.schedule(p,_,y,g,v)}},_clock:l,_logger:u};return o}let Ni=!1;const Yr=1;let Be=function(n){return n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped",n}({});const Jf={clock:{setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n)},logger:console.log.bind(console),devTools:!1};class Zf{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Do(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Be.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const s={...Jf,...t},{clock:i,logger:r,parent:a,syncSnapshot:l,id:u,systemId:h,inspect:f}=s;this.system=a?a.system:qf(this,{clock:i,logger:r}),f&&!a&&this.system.inspect(_r(f)),this.sessionId=this.system._bookId(),this.id=u??this.sessionId,this.logger=(t==null?void 0:t.logger)??this.system._logger,this.clock=(t==null?void 0:t.clock)??this.system._clock,this._parent=a,this._syncSnapshot=l,this.options=s,this.src=s.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:o=>{this._deferred.push(o)},system:this.system,stopChild:o=>{if(o._parent!==this)throw new Error(`Cannot stop child actor ${o.id} of ${this.id} because it is not a child`);o._stop()},emit:o=>{const c=this.eventListeners.get(o.type),d=this.eventListeners.get("*");if(!c&&!d)return;const p=[...c?c.values():[],...d?d.values():[]];for(const _ of p)_(o)},actionExecutor:o=>{const c=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:o.type,params:o.params}}),!o.exec)return;const d=Ni;try{Ni=!0,o.exec(o.info,o.params)}finally{Ni=d}};this._processingStatus===Be.Running?c():this._deferred.push(c)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),h&&(this._systemId=h,this.system._set(h,this)),this._initState((t==null?void 0:t.snapshot)??(t==null?void 0:t.state)),h&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var t;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(t=this.options)==null?void 0:t.input)}catch(s){this._snapshot={status:"error",output:void 0,error:s}}}update(e,t){var i,r;this._snapshot=e;let s;for(;s=this._deferred.shift();)try{s()}catch(a){this._deferred.length=0,this._snapshot={...e,status:"error",error:a}}switch(this._snapshot.status){case"active":for(const a of this.observers)try{(i=a.next)==null||i.call(a,e)}catch(l){yt(l)}break;case"done":for(const a of this.observers)try{(r=a.next)==null||r.call(a,e)}catch(l){yt(l)}this._stopProcedure(),this._complete(),this._doneEvent=zf(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,s){var r;const i=_r(e,t,s);if(this._processingStatus!==Be.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{(r=i.complete)==null||r.call(i)}catch(a){yt(a)}break;case"error":{const a=this._snapshot.error;if(!i.error)yt(a);else try{i.error(a)}catch(l){yt(l)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,t){let s=this.eventListeners.get(e);s||(s=new Set,this.eventListeners.set(e,s));const i=t.bind(void 0);return s.add(i),{unsubscribe:()=>{s.delete(i)}}}start(){if(this._processingStatus===Be.Running)return this;this._syncSnapshot&&this.subscribe({next:s=>{s.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:s})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Be.Running;const e=hl(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(s){return this._snapshot={...this._snapshot,status:"error",error:s},this._error(s),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,s;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){s={err:i}}if(s){const{err:i}=s;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(t,e),e.type===ti&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Be.Stopped?this:(this.mailbox.clear(),this._processingStatus===Be.NotStarted?(this._processingStatus=Be.Stopped,this):(this.mailbox.enqueue({type:ti}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const t of this.observers)try{(e=t.complete)==null||e.call(t)}catch(s){yt(s)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||yt(e);return}let t=!1;for(const s of this.observers){const i=s.error;t||(t=!i);try{i==null||i(e)}catch(r){yt(r)}}this.observers.clear(),t&&yt(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,Yf(this.id,e))}_stopProcedure(){return this._processingStatus!==Be.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Do(this._process.bind(this)),this._processingStatus=Be.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Be.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:Nf)(this)}toJSON(){return{xstate$$type:Yr,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[Xf](){return this}getSnapshot(){return this._snapshot}}function Vn(n,...[e]){return new Zf(n,e)}function Qf(n,e,t,s,{sendId:i}){const r=typeof i=="function"?i(t,s):i;return[e,{sendId:r},void 0]}function em(n,e){n.defer(()=>{n.system.scheduler.cancel(n.self,e.sendId)})}function tm(n){function e(t,s){}return e.type="xstate.cancel",e.sendId=n,e.resolve=Qf,e.execute=em,e}function nm(n,e,t,s,{id:i,systemId:r,src:a,input:l,syncSnapshot:u}){const h=typeof a=="string"?zr(e.machine,a):a,f=typeof i=="function"?i(t):i;let o,c;return h&&(c=typeof l=="function"?l({context:e.context,event:t.event,self:n.self}):l,o=Vn(h,{id:f,src:a,parent:n.self,syncSnapshot:u,systemId:r,input:c})),[an(e,{children:{...e.children,[f]:o}}),{id:i,systemId:r,actorRef:o,src:a,input:c},void 0]}function sm(n,{actorRef:e}){e&&n.defer(()=>{e._processingStatus!==Be.Stopped&&e.start()})}function im(...[n,{id:e,systemId:t,input:s,syncSnapshot:i=!1}={}]){function r(a,l){}return r.type="xstate.spawnChild",r.id=e,r.systemId=t,r.src=n,r.input=s,r.syncSnapshot=i,r.resolve=nm,r.execute=sm,r}function rm(n,e,t,s,{actorRef:i}){const r=typeof i=="function"?i(t,s):i,a=typeof r=="string"?e.children[r]:r;let l=e.children;return a&&(l={...l},delete l[a.id]),[an(e,{children:l}),a,void 0]}function om(n,e){if(e){if(n.system._unregister(e),e._processingStatus!==Be.Running){n.stopChild(e);return}n.defer(()=>{n.stopChild(e)})}}function _l(n){function e(t,s){}return e.type="xstate.stopChild",e.actorRef=n,e.resolve=rm,e.execute=om,e}function Xr(n,e,t,s){const{machine:i}=s,r=typeof n=="function",a=r?n:i.implementations.guards[typeof n=="string"?n:n.type];if(!r&&!a)throw new Error(`Guard '${typeof n=="string"?n:n.type}' is not implemented.'.`);if(typeof a!="function")return Xr(a,e,t,s);const l={context:e,event:t},u=r||typeof n=="string"?void 0:"params"in n?typeof n.params=="function"?n.params({context:e,event:t}):n.params:void 0;return"check"in a?a.check(s,l,a):a(l,u)}const Vr=n=>n.type==="atomic"||n.type==="final";function Sn(n){return Object.values(n.states).filter(e=>e.type!=="history")}function rs(n,e){const t=[];if(e===n)return t;let s=n.parent;for(;s&&s!==e;)t.push(s),s=s.parent;return t}function ni(n){const e=new Set(n),t=gl(e);for(const s of e)if(s.type==="compound"&&(!t.get(s)||!t.get(s).length))Wo(s).forEach(i=>e.add(i));else if(s.type==="parallel"){for(const i of Sn(s))if(i.type!=="history"&&!e.has(i)){const r=Wo(i);for(const a of r)e.add(a)}}for(const s of e){let i=s.parent;for(;i;)e.add(i),i=i.parent}return e}function yl(n,e){const t=e.get(n);if(!t)return{};if(n.type==="compound"){const i=t[0];if(i){if(Vr(i))return i.key}else return{}}const s={};for(const i of t)s[i.key]=yl(i,e);return s}function gl(n){const e=new Map;for(const t of n)e.has(t)||e.set(t,[]),t.parent&&(e.has(t.parent)||e.set(t.parent,[]),e.get(t.parent).push(t));return e}function vl(n,e){const t=ni(e);return yl(n,gl(t))}function jr(n,e){return e.type==="compound"?Sn(e).some(t=>t.type==="final"&&n.has(t)):e.type==="parallel"?Sn(e).every(t=>jr(n,t)):e.type==="final"}const yi=n=>n[0]===Wf;function am(n,e){return n.transitions.get(e)||[...n.transitions.keys()].filter(s=>{if(s===$f)return!0;if(!s.endsWith(".*"))return!1;const i=s.split("."),r=e.split(".");for(let a=0;a<i.length;a++){const l=i[a],u=r[a];if(l==="*")return a===i.length-1;if(l!==u)return!1}return!0}).sort((s,i)=>i.length-s.length).flatMap(s=>n.transitions.get(s))}function lm(n){const e=n.config.after;if(!e)return[];const t=i=>{const r=Hf(i,n.id),a=r.type;return n.entry.push(Om(r,{id:a,delay:i})),n.exit.push(tm(a)),a};return Object.keys(e).flatMap(i=>{const r=e[i],a=typeof r=="string"?{target:r}:r,l=Number.isNaN(+i)?i:+i,u=t(l);return Bt(a).map(h=>({...h,event:u,delay:l}))}).map(i=>{const{delay:r}=i;return{...Zt(n,i.event,i),delay:r}})}function Zt(n,e,t){const s=pl(t.target),i=t.reenter??!1,r=dm(n,s),a={...t,actions:Bt(t.actions),guard:t.guard,target:r,source:n,reenter:i,eventType:e,toJSON:()=>({...a,source:`#${n.id}`,target:r?r.map(l=>`#${l.id}`):void 0})};return a}function cm(n){const e=new Map;if(n.config.on)for(const t of Object.keys(n.config.on)){if(t===ul)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const s=n.config.on[t];e.set(t,mn(s).map(i=>Zt(n,t,i)))}if(n.config.onDone){const t=`xstate.done.state.${n.id}`;e.set(t,mn(n.config.onDone).map(s=>Zt(n,t,s)))}for(const t of n.invoke){if(t.onDone){const s=`xstate.done.actor.${t.id}`;e.set(s,mn(t.onDone).map(i=>Zt(n,s,i)))}if(t.onError){const s=`xstate.error.actor.${t.id}`;e.set(s,mn(t.onError).map(i=>Zt(n,s,i)))}if(t.onSnapshot){const s=`xstate.snapshot.${t.id}`;e.set(s,mn(t.onSnapshot).map(i=>Zt(n,s,i)))}}for(const t of n.after){let s=e.get(t.eventType);s||(s=[],e.set(t.eventType,s)),s.push(t)}return e}function um(n,e){const t=typeof e=="string"?n.states[e]:e?n.states[e.target]:void 0;if(!t&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${n.id}`);const s={source:n,actions:!e||typeof e=="string"?[]:Bt(e.actions),eventType:null,reenter:!1,target:t?[t]:[],toJSON:()=>({...s,source:`#${n.id}`,target:t?[`#${t.id}`]:[]})};return s}function dm(n,e){if(e!==void 0)return e.map(t=>{if(typeof t!="string")return t;if(yi(t))return n.machine.getStateNodeById(t);const s=t[0]===cl;if(s&&!n.parent)return si(n,t.slice(1));const i=s?n.key+t:t;if(n.parent)try{return si(n.parent,i)}catch(r){throw new Error(`Invalid transition definition for state node '${n.id}':
${r.message}`)}else throw new Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}function bl(n){const e=pl(n.config.target);return e?{target:e.map(t=>typeof t=="string"?si(n.parent,t):t)}:n.parent.initial}function Qt(n){return n.type==="history"}function Wo(n){const e=xl(n);for(const t of e)for(const s of rs(t,n))e.add(s);return e}function xl(n){const e=new Set;function t(s){if(!e.has(s)){if(e.add(s),s.type==="compound")t(s.initial.target[0]);else if(s.type==="parallel")for(const i of Sn(s))t(i)}}return t(n),e}function An(n,e){if(yi(e))return n.machine.getStateNodeById(e);if(!n.states)throw new Error(`Unable to retrieve child state '${e}' from '${n.id}'; no child states exist.`);const t=n.states[e];if(!t)throw new Error(`Child state '${e}' does not exist on '${n.id}'`);return t}function si(n,e){if(typeof e=="string"&&yi(e))try{return n.machine.getStateNodeById(e)}catch{}const t=Hr(e).slice();let s=n;for(;t.length;){const i=t.shift();if(!i.length)break;s=An(s,i)}return s}function ii(n,e){if(typeof e=="string"){const i=n.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${n.id}'`);return[n,i]}const t=Object.keys(e),s=t.map(i=>An(n,i)).filter(Boolean);return[n.machine.root,n].concat(s,t.reduce((i,r)=>{const a=An(n,r);if(!a)return i;const l=ii(a,e[r]);return i.concat(l)},[]))}function hm(n,e,t,s){const r=An(n,e).next(t,s);return!r||!r.length?n.next(t,s):r}function fm(n,e,t,s){const i=Object.keys(e),r=An(n,i[0]),a=Kr(r,e[i[0]],t,s);return!a||!a.length?n.next(t,s):a}function mm(n,e,t,s){const i=[];for(const r of Object.keys(e)){const a=e[r];if(!a)continue;const l=An(n,r),u=Kr(l,a,t,s);u&&i.push(...u)}return i.length?i:n.next(t,s)}function Kr(n,e,t,s){return typeof e=="string"?hm(n,e,t,s):Object.keys(e).length===1?fm(n,e,t,s):mm(n,e,t,s)}function pm(n){return Object.keys(n.states).map(e=>n.states[e]).filter(e=>e.type==="history")}function Ft(n,e){let t=n;for(;t.parent&&t.parent!==e;)t=t.parent;return t.parent===e}function _m(n,e){const t=new Set(n),s=new Set(e);for(const i of t)if(s.has(i))return!0;for(const i of s)if(t.has(i))return!0;return!1}function wl(n,e,t){const s=new Set;for(const i of n){let r=!1;const a=new Set;for(const l of s)if(_m(yr([i],e,t),yr([l],e,t)))if(Ft(i.source,l.source))a.add(l);else{r=!0;break}if(!r){for(const l of a)s.delete(l);s.add(i)}}return Array.from(s)}function ym(n){const[e,...t]=n;for(const s of rs(e,void 0))if(t.every(i=>Ft(i,s)))return s}function qr(n,e){if(!n.target)return[];const t=new Set;for(const s of n.target)if(Qt(s))if(e[s.id])for(const i of e[s.id])t.add(i);else for(const i of qr(bl(s),e))t.add(i);else t.add(s);return[...t]}function Sl(n,e){const t=qr(n,e);if(!t)return;if(!n.reenter&&t.every(i=>i===n.source||Ft(i,n.source)))return n.source;const s=ym(t.concat(n.source));if(s)return s;if(!n.reenter)return n.source.machine.root}function yr(n,e,t){var i;const s=new Set;for(const r of n)if((i=r.target)!=null&&i.length){const a=Sl(r,t);r.reenter&&r.source===a&&s.add(a);for(const l of e)Ft(l,a)&&s.add(l)}return[...s]}function gm(n,e){if(n.length!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}function gr(n,e,t,s,i,r){if(!n.length)return e;const a=new Set(e._nodes);let l=e.historyValue;const u=wl(n,a,l);let h=e;i||([h,l]=wm(h,s,t,u,a,l,r,t.actionExecutor)),h=Tn(h,s,t,u.flatMap(o=>o.actions),r,void 0),h=bm(h,s,t,u,a,r,l,i);const f=[...a];h.status==="done"&&(h=Tn(h,s,t,f.sort((o,c)=>c.order-o.order).flatMap(o=>o.exit),r,void 0));try{return l===e.historyValue&&gm(e._nodes,a)?h:an(h,{_nodes:f,historyValue:l})}catch(o){throw o}}function vm(n,e,t,s,i){if(s.output===void 0)return;const r=mr(i.id,i.output!==void 0&&i.parent?pr(i.output,n.context,e,t.self):void 0);return pr(s.output,n.context,r,t.self)}function bm(n,e,t,s,i,r,a,l){let u=n;const h=new Set,f=new Set;xm(s,a,f,h),l&&f.add(n.machine.root);const o=new Set;for(const c of[...h].sort((d,p)=>d.order-p.order)){i.add(c);const d=[];d.push(...c.entry);for(const p of c.invoke)d.push(im(p.src,{...p,syncSnapshot:!!p.onSnapshot}));if(f.has(c)){const p=c.initial.actions;d.push(...p)}if(u=Tn(u,e,t,d,r,c.invoke.map(p=>p.id)),c.type==="final"){const p=c.parent;let _=(p==null?void 0:p.type)==="parallel"?p:p==null?void 0:p.parent,y=_||c;for((p==null?void 0:p.type)==="compound"&&r.push(mr(p.id,c.output!==void 0?pr(c.output,u.context,e,t.self):void 0));(_==null?void 0:_.type)==="parallel"&&!o.has(_)&&jr(i,_);)o.add(_),r.push(mr(_.id)),y=_,_=_.parent;if(_)continue;u=an(u,{status:"done",output:vm(u,e,t,u.machine.root,y)})}}return u}function xm(n,e,t,s){for(const i of n){const r=Sl(i,e);for(const l of i.target||[])!Qt(l)&&(i.source!==l||i.source!==r||i.reenter)&&(s.add(l),t.add(l)),yn(l,e,t,s);const a=qr(i,e);for(const l of a){const u=rs(l,r);(r==null?void 0:r.type)==="parallel"&&u.push(r),Al(s,e,t,u,!i.source.parent&&i.reenter?void 0:r)}}}function yn(n,e,t,s){var i;if(Qt(n))if(e[n.id]){const r=e[n.id];for(const a of r)s.add(a),yn(a,e,t,s);for(const a of r)Ui(a,n.parent,s,e,t)}else{const r=bl(n);for(const a of r.target)s.add(a),r===((i=n.parent)==null?void 0:i.initial)&&t.add(n.parent),yn(a,e,t,s);for(const a of r.target)Ui(a,n.parent,s,e,t)}else if(n.type==="compound"){const[r]=n.initial.target;Qt(r)||(s.add(r),t.add(r)),yn(r,e,t,s),Ui(r,n,s,e,t)}else if(n.type==="parallel")for(const r of Sn(n).filter(a=>!Qt(a)))[...s].some(a=>Ft(a,r))||(Qt(r)||(s.add(r),t.add(r)),yn(r,e,t,s))}function Al(n,e,t,s,i){for(const r of s)if((!i||Ft(r,i))&&n.add(r),r.type==="parallel")for(const a of Sn(r).filter(l=>!Qt(l)))[...n].some(l=>Ft(l,a))||(n.add(a),yn(a,e,t,n))}function Ui(n,e,t,s,i){Al(t,s,i,rs(n,e))}function wm(n,e,t,s,i,r,a,l){let u=n;const h=yr(s,i,r);h.sort((o,c)=>c.order-o.order);let f;for(const o of h)for(const c of pm(o)){let d;c.history==="deep"?d=p=>Vr(p)&&Ft(p,o):d=p=>p.parent===o,f??(f={...r}),f[c.id]=Array.from(i).filter(d)}for(const o of h)u=Tn(u,e,t,[...o.exit,...o.invoke.map(c=>_l(c.id))],a,void 0),i.delete(o);return[u,f||r]}function Sm(n,e){return n.implementations.actions[e]}function Tl(n,e,t,s,i,r){const{machine:a}=n;let l=n;for(const u of s){const h=typeof u=="function",f=h?u:Sm(a,typeof u=="string"?u:u.type),o={context:l.context,event:e,self:t.self,system:t.system},c=h||typeof u=="string"?void 0:"params"in u?typeof u.params=="function"?u.params({context:l.context,event:e}):u.params:void 0;if(!f||!("resolve"in f)){t.actionExecutor({type:typeof u=="string"?u:typeof u=="object"?u.type:u.name||"(anonymous)",info:o,params:c,exec:f});continue}const d=f,[p,_,y]=d.resolve(t,l,o,c,f,i);l=p,"retryResolve"in d&&(r==null||r.push([d,_])),"execute"in d&&t.actionExecutor({type:d.type,info:o,params:_,exec:d.execute.bind(null,t,_)}),y&&(l=Tl(l,e,t,y,i,r))}return l}function Tn(n,e,t,s,i,r){const a=r?[]:void 0,l=Tl(n,e,t,s,{internalQueue:i,deferredActorIds:r},a);return a==null||a.forEach(([u,h])=>{u.retryResolve(t,l,h)}),l}function Wi(n,e,t,s){let i=n;const r=[];function a(h,f,o){t.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:t.self,event:f,snapshot:h,_transitions:o}),r.push(h)}if(e.type===ti)return i=an($o(i,e,t),{status:"stopped"}),a(i,e,[]),{snapshot:i,microstates:r};let l=e;if(l.type!==dl){const h=l,f=jf(h),o=Ho(h,i);if(f&&!o.length)return i=an(n,{status:"error",error:h.error}),a(i,h,[]),{snapshot:i,microstates:r};i=gr(o,n,t,l,!1,s),a(i,h,o)}let u=!0;for(;i.status==="active";){let h=u?Am(i,l):[];const f=h.length?i:void 0;if(!h.length){if(!s.length)break;l=s.shift(),h=Ho(l,i)}i=gr(h,i,t,l,!1,s),u=i!==f,a(i,l,h)}return i.status!=="active"&&$o(i,l,t),{snapshot:i,microstates:r}}function $o(n,e,t){return Tn(n,e,t,Object.values(n.children).map(s=>_l(s)),[],void 0)}function Ho(n,e){return e.machine.getTransitionData(e,n)}function Am(n,e){const t=new Set,s=n._nodes.filter(Vr);for(const i of s)e:for(const r of[i].concat(rs(i,void 0)))if(r.always){for(const a of r.always)if(a.guard===void 0||Xr(a.guard,n.context,e,n)){t.add(a);break e}}return wl(Array.from(t),new Set(n._nodes),n.historyValue)}function Tm(n,e){const t=ni(ii(n,e));return vl(n,[...t])}function Mm(n){return!!n&&typeof n=="object"&&"machine"in n&&"value"in n}const Em=function(e){return $r(e,this.value)},Im=function(e){return this.tags.has(e)},Cm=function(e){const t=this.machine.getTransitionData(this,e);return!!(t!=null&&t.length)&&t.some(s=>s.target!==void 0||s.actions.length)},Pm=function(){const{_nodes:e,tags:t,machine:s,getMeta:i,toJSON:r,can:a,hasTag:l,matches:u,...h}=this;return{...h,tags:Array.from(t)}},km=function(){return this._nodes.reduce((e,t)=>(t.meta!==void 0&&(e[t.id]=t.meta),e),{})};function zs(n,e){return{status:n.status,output:n.output,error:n.error,machine:e,context:n.context,_nodes:n._nodes,value:vl(e.root,n._nodes),tags:new Set(n._nodes.flatMap(t=>t.tags)),children:n.children,historyValue:n.historyValue||{},matches:Em,hasTag:Im,can:Cm,getMeta:km,toJSON:Pm}}function an(n,e={}){return zs({...n,...e},n.machine)}function Bm(n,e){const{_nodes:t,tags:s,machine:i,children:r,context:a,can:l,hasTag:u,matches:h,getMeta:f,toJSON:o,...c}=n,d={};for(const _ in r){const y=r[_];d[_]={snapshot:y.getPersistedSnapshot(e),src:y.src,systemId:y._systemId,syncSnapshot:y._syncSnapshot}}return{...c,context:Ml(a),children:d}}function Ml(n){let e;for(const t in n){const s=n[t];if(s&&typeof s=="object")if("sessionId"in s&&"send"in s&&"ref"in s)e??(e=Array.isArray(n)?n.slice():{...n}),e[t]={xstate$$type:Yr,id:s.id};else{const i=Ml(s);i!==s&&(e??(e=Array.isArray(n)?n.slice():{...n}),e[t]=i)}}return e??n}function Lm(n,e,t,s,{event:i,id:r,delay:a},{internalQueue:l}){const u=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const h=typeof i=="function"?i(t,s):i;let f;if(typeof a=="string"){const o=u&&u[a];f=typeof o=="function"?o(t,s):o}else f=typeof a=="function"?a(t,s):a;return typeof f!="number"&&l.push(h),[e,{event:h,id:r,delay:f},void 0]}function Rm(n,e){const{event:t,delay:s,id:i}=e;if(typeof s=="number"){n.defer(()=>{const r=n.self;n.system.scheduler.schedule(r,r,t,s,i)});return}}function Om(n,e){function t(s,i){}return t.type="xstate.raise",t.event=n,t.id=e==null?void 0:e.id,t.delay=e==null?void 0:e.delay,t.resolve=Lm,t.execute=Rm,t}const zo="xstate.promise.resolve",Yo="xstate.promise.reject",As=new WeakMap;function Ve(n){return{config:n,transition:(t,s,i)=>{var r;if(t.status!=="active")return t;switch(s.type){case zo:{const a=s.data;return{...t,status:"done",output:a,input:void 0}}case Yo:return{...t,status:"error",error:s.data,input:void 0};case ti:return(r=As.get(i.self))==null||r.abort(),{...t,status:"stopped",input:void 0};default:return t}},start:(t,{self:s,system:i,emit:r})=>{if(t.status!=="active")return;const a=new AbortController;As.set(s,a),Promise.resolve(n({input:t.input,system:i,self:s,signal:a.signal,emit:r})).then(u=>{s.getSnapshot().status==="active"&&(As.delete(s),i._relay(s,s,{type:zo,data:u}))},u=>{s.getSnapshot().status==="active"&&(As.delete(s),i._relay(s,s,{type:Yo,data:u}))})},getInitialSnapshot:(t,s)=>({status:"active",output:void 0,error:void 0,input:s}),getPersistedSnapshot:t=>t,restoreSnapshot:t=>t}}function Dm(n,{machine:e,context:t},s,i){const r=(a,l)=>{if(typeof a=="string"){const u=zr(e,a);if(!u)throw new Error(`Actor logic '${a}' not implemented in machine '${e.id}'`);const h=Vn(u,{id:l==null?void 0:l.id,parent:n.self,syncSnapshot:l==null?void 0:l.syncSnapshot,input:typeof(l==null?void 0:l.input)=="function"?l.input({context:t,event:s,self:n.self}):l==null?void 0:l.input,src:a,systemId:l==null?void 0:l.systemId});return i[h.id]=h,h}else return Vn(a,{id:l==null?void 0:l.id,parent:n.self,syncSnapshot:l==null?void 0:l.syncSnapshot,input:l==null?void 0:l.input,src:a,systemId:l==null?void 0:l.systemId})};return(a,l)=>{const u=r(a,l);return i[u.id]=u,n.defer(()=>{u._processingStatus!==Be.Stopped&&u.start()}),u}}function Fm(n,e,t,s,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const r={},a={context:e.context,event:t.event,spawn:Dm(n,e,t.event,r),self:n.self,system:n.system};let l={};if(typeof i=="function")l=i(a,s);else for(const h of Object.keys(i)){const f=i[h];l[h]=typeof f=="function"?f(a,s):f}const u=Object.assign({},e.context,l);return[an(e,{context:u,children:Object.keys(r).length?{...e.children,...r}:e.children}),void 0,void 0]}function gi(n){function e(t,s){}return e.type="xstate.assign",e.assignment=n,e.resolve=Fm,e}const Xo=new WeakMap;function hn(n,e,t){let s=Xo.get(n);return s?e in s||(s[e]=t()):(s={[e]:t()},Xo.set(n,s)),s[e]}const Gm={},Nn=n=>typeof n=="string"?{type:n}:typeof n=="function"?"resolve"in n?{type:n.type}:{type:n.name}:n;class Jr{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(cl),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Go(this.config.states,(s,i)=>new Jr(s,{_parent:this,_key:i,_machine:this.machine})):Gm,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Bt(this.config.entry).slice(),this.exit=Bt(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Bt(e.tags).slice()}_initialize(){this.transitions=cm(this),this.config.always&&(this.always=mn(this.config.always).map(e=>Zt(this,ul,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Nn),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Nn),eventType:null})}:void 0,history:this.history,states:Go(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(Nn)})),entry:this.entry.map(Nn),exit:this.exit.map(Nn),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return hn(this,"invoke",()=>Bt(this.config.invoke).map((e,t)=>{const{src:s,systemId:i}=e,r=e.id??No(this.id,t),a=typeof s=="string"?s:`xstate.invoke.${No(this.id,t)}`;return{...e,src:a,id:r,systemId:i,toJSON(){const{onDone:l,onError:u,...h}=e;return{...h,type:"xstate.invoke",src:a,id:r}}}}))}get on(){return hn(this,"on",()=>[...this.transitions].flatMap(([t,s])=>s.map(i=>[t,i])).reduce((t,[s,i])=>(t[s]=t[s]||[],t[s].push(i),t),{}))}get after(){return hn(this,"delayedTransitions",()=>lm(this))}get initial(){return hn(this,"initial",()=>um(this,this.config.initial))}next(e,t){const s=t.type,i=[];let r;const a=hn(this,`candidates-${s}`,()=>am(this,s));for(const l of a){const{guard:u}=l,h=e.context;let f=!1;try{f=!u||Xr(u,h,t,e)}catch(o){const c=typeof u=="string"?u:typeof u=="object"?u.type:void 0;throw new Error(`Unable to evaluate guard ${c?`'${c}' `:""}in transition for event '${s}' in state node '${this.id}':
${o.message}`)}if(f){i.push(...l.actions),r=l;break}}return r?[r]:void 0}get events(){return hn(this,"events",()=>{const{states:e}=this,t=new Set(this.ownEvents);if(e)for(const s of Object.keys(e)){const i=e[s];if(i.states)for(const r of i.events)t.add(`${r}`)}return Array.from(t)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(s=>!(!s.target&&!s.actions.length&&!s.reenter))));return Array.from(e)}}const Nm="#";class Zr{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(t==null?void 0:t.actors)??{},actions:(t==null?void 0:t.actions)??{},delays:(t==null?void 0:t.delays)??{},guards:(t==null?void 0:t.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Jr(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:t,guards:s,actors:i,delays:r}=this.implementations;return new Zr(this.config,{actions:{...t,...e.actions},guards:{...s,...e.guards},actors:{...i,...e.actors},delays:{...r,...e.delays}})}resolveState(e){const t=Tm(this.root,e.value),s=ni(ii(this.root,t));return zs({_nodes:[...s],context:e.context||{},children:{},status:jr(s,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,s){return Wi(e,t,s,[]).snapshot}microstep(e,t,s){return Wi(e,t,s,[]).microstates}getTransitionData(e,t){return Kr(this.root,e.value,e,t)||[]}getPreInitialState(e,t,s){const{context:i}=this.config,r=zs({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?Tn(r,t,e,[gi(({spawn:l,event:u,self:h})=>i({spawn:l,input:u.input,self:h}))],s,void 0):r}getInitialSnapshot(e,t){const s=hl(t),i=[],r=this.getPreInitialState(e,s,i),a=gr([{target:[...xl(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],r,e,s,!0,i),{snapshot:l}=Wi(a,s,e,i);return l}start(e){Object.values(e.children).forEach(t=>{t.getSnapshot().status==="active"&&t.start()})}getStateNodeById(e){const t=Hr(e),s=t.slice(1),i=yi(t[0])?t[0].slice(Nm.length):t[0],r=this.idMap.get(i);if(!r)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return si(r,s)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){return Bm(e,t)}restoreSnapshot(e,t){const s={},i=e.children;Object.keys(i).forEach(u=>{const h=i[u],f=h.snapshot,o=h.src,c=typeof o=="string"?zr(this,o):o;if(!c)return;const d=Vn(c,{id:u,parent:t.self,syncSnapshot:h.syncSnapshot,snapshot:f,src:o,systemId:h.systemId});s[u]=d});const r=zs({...e,children:s,_nodes:Array.from(ni(ii(this.root,e.value)))},this),a=new Set;function l(u,h){if(!a.has(u)){a.add(u);for(const f in u){const o=u[f];if(o&&typeof o=="object"){if("xstate$$type"in o&&o.xstate$$type===Yr){u[f]=h[o.id];continue}l(o,h)}}}}return l(r.context,s),r}}function Um(n,e){return new Zr(n,e)}function os({schemas:n,actors:e,actions:t,guards:s,delays:i}){return{createMachine:r=>Um({...r,schemas:n},{actors:e,actions:t,guards:s,delays:i})}}const as={bet:null,rawBet:null},vr="rendering",br="idle",El="bet",Il="autoBet",Cl="resumeBet",Pl="forceResult",Wm={on:{RENDERED:{target:"idle"}}},$m={on:{FORCE_RESULT:{target:"forceResult"},RESUME_BET:{target:"resumeBet"},BET:{target:"bet"},AUTO_BET:{target:"autoBet"}}},Hm={invoke:{id:"forceResult",src:"forceResult",onDone:"idle"}},zm={invoke:{id:"resumeBet",src:"resumeBet",onDone:"idle"}},Ym={invoke:{id:"bet",src:"bet",onDone:"idle"}},Xm={invoke:{id:"autoBet",src:"autoBet",onDone:"idle"}},Vm=n=>{const e=os({actors:{bet:n.bet,autoBet:n.autoBet,resumeBet:n.resumeBet,forceResult:n.forceResult}}).createMachine({context:as,initial:"rendering",states:{[vr]:Wm,[br]:$m,[El]:Ym,[Il]:Xm,[Cl]:zm,[Pl]:Hm}});return Vn(e)},jm=async({onError:n})=>{var e,t,s;try{const i=await Du({rgsUrl:Me.rgsUrl(),gameID:Me.gameID(),sessionID:Me.sessionID(),currency:F.currency,mode:F.activeBetModeKey,amount:F.betAmount});if(i!=null&&i.error)throw i;if((e=i==null?void 0:i.round)!=null&&e.state&&((s=(t=i==null?void 0:i.round)==null?void 0:t.state)==null?void 0:s.length)>0)return F.wageredBetAmount=F.betAmount,i;throw{error:"Empty state in data.round",message:JSON.stringify({data:i})}}catch(i){throw n(),F.autoSpinsCounter=0,me.modal={name:"error",error:i},console.error(i),i}},Vo=async()=>{var n;try{const e=await Fu({gameID:Me.gameID(),sessionID:Me.sessionID(),rgsUrl:Me.rgsUrl()});if(e!=null&&e.error)throw e;if(((n=e==null?void 0:e.balance)==null?void 0:n.amount)!==void 0)return e;throw{error:"Empty amount in data.balance",message:JSON.stringify({data:e})}}catch(e){_e.force||(me.modal={name:"error",error:e}),console.error(e)}},Ts=({balanceAmountFromApi:n})=>{F.balanceAmount=n/Ou};function Km(n){const{onResumeGameActive:e,onResumeGameInactive:t,onNewGameStart:s,onNewGameError:i,onPlayGame:r,checkIsBonusGame:a}=n;let l=null;const u={noWin:{newGame:async()=>{},endGame:async()=>{}},singleRoundWin:{newGame:async()=>{const _=await Vo();_!=null&&_.balance&&(l=_.balance.amount)},endGame:async()=>{l!==null&&(Ts({balanceAmountFromApi:l}),l=null)}},bonusWin:{newGame:async()=>{},endGame:async()=>{const _=await Vo();_!=null&&_.balance&&(Ts({balanceAmountFromApi:_.balance.amount}),l=null)}}},h=({bet:_})=>{const y=a(_);return _.active===!0&&y?"bonusWin":_.payoutMultiplier&&_.payoutMultiplier>0?y?"bonusWin":"singleRoundWin":"noWin"},f=Ve(async()=>{await s();const _=await jm({onError:i});if(_){_.balance&&Ts({balanceAmountFromApi:_.balance.amount});const y=_.round,g=h({bet:y});return await u[g].newGame(),{bet:y}}return{bet:null}}),o=Ve(async()=>{const _=F.lastBet;if(_&&_.active){F.lastBet=null;const g=h({bet:_});return await u[g].newGame(),{bet:e(_),rawBet:_}}throw _&&_.state&&_.state.length>0&&t(_),new Error("inactive Bet")}),c=Ve(async({input:_})=>{_e.force&&_e.forceType!=="pastBets"&&_.bet&&(_e.pastBets=[..._e.pastBets,_.bet]),_.bet&&await r(_.bet)}),d=Ve(async({input:_})=>{const y=_.rawBet||_.bet;if(y){const g=h({bet:y});await u[g].endGame()}}),p=Ve(async()=>{var _,y,g,v;await s();try{const L=await{api:async()=>await Lu({rgsUrl:Me.rgsUrl(),gameID:Me.gameID(),mode:_e.forceBetModeKey.toUpperCase(),search:{bookID:_e.forceSearch.bookID===void 0?void 0:Number(_e.forceSearch.bookID),kind:_e.forceSearch.kind==="Any"?void 0:Number(_e.forceSearch.kind),symbol:_e.forceSearch.symbol==="Any"?void 0:_e.forceSearch.symbol,hasWild:_e.forceSearch.hasWild==="Any"?void 0:_e.forceSearch.hasWild==="True",wildMult:_e.forceSearch.wildMult==="Any"?void 0:Number(_e.forceSearch.wildMult),gameType:_e.forceSearch.gameType==="Any"?void 0:_e.forceSearch.gameType}}),json:()=>{const H=JSON.parse(_e.forceJson);return{round:{mode:_e.forceBetModeKey.toUpperCase(),payoutMultiplier:2,state:H.events},error:null,balance:null}},pastBets:()=>({round:Ru.selectedPastBet(),error:null,balance:null})}[_e.forceType]();if(L!=null&&L.error)throw L;if((_=L==null?void 0:L.round)!=null&&_.state&&((g=(y=L==null?void 0:L.round)==null?void 0:y.state)==null?void 0:g.length)>0)return((v=L==null?void 0:L.balance)==null?void 0:v.amount)!==void 0&&Ts({balanceAmountFromApi:L.balance.amount}),F.wageredBetAmount=F.betAmount,L.round.mode&&(F.activeBetModeKey=L.round.mode),{bet:L.round,rawBet:null};throw{error:"Empty state in data.round",message:JSON.stringify({data:L})}}catch(x){throw i(),F.autoSpinsCounter=0,me.modal={name:"error",error:x},console.error(x),x}});return{newGame:f,playGame:c,endGame:d,resumeGame:o,forceGame:p}}const qm=Ve(async()=>{var n;if(F.isSpaceHold){if(((n=ae.activeBetMode())==null?void 0:n.type)==="buy"){F.activeBetModeKey="BASE";return}return}throw Error("end bet")}),Jm=({newGame:n,playGame:e,endGame:t})=>os({actors:{newGame:n,playGame:e,endGame:t,checkSpaceHold:qm}}).createMachine({context:as,id:"bet",initial:"fetching",states:{fetching:{invoke:{id:"newGame",src:"newGame",onDone:[{actions:gi(({context:i,event:r})=>r.output),target:"play"}],onError:[{target:"end"}]}},play:{invoke:{id:"playGame",src:"playGame",input:({context:i})=>({bet:i.bet}),onDone:[{target:"ending"}]}},ending:{invoke:{id:"endGame",src:"endGame",input:({context:i})=>({bet:i.bet,rawBet:i.rawBet}),onDone:[{target:"checkSpaceHold"}]}},checkSpaceHold:{invoke:{id:"checkSpaceHold",src:"checkSpaceHold",onDone:"fetching",onError:"end"}},end:{type:"final"}}});let kl=0;const Zm=Ve(async()=>{F.winBookEventAmount=0,F.autoSpinsLoss=0,kl=F.balanceAmount}),Qm=Ve(async()=>{if(ae.isBetCostAvailable())return"continue";throw F.autoSpinsCounter=0,me.modal={name:"autoSpinMessage",message:"insufficientFunds"},Error("End auto bet with insufficientFunds")}),ep=Ve(async()=>{if(F.autoSpinsLossLimitAmount===1/0)return"continue";const n=F.balanceAmount,e=Math.round((kl-n)*100)/100;if(F.autoSpinsLoss=e,F.autoSpinsLossLimitAmount>e)return"continue";throw F.autoSpinsCounter=0,me.modal={name:"autoSpinMessage",message:"lossLimitReached"},Error("End auto bet with lossLimitReached")}),tp=Ve(async()=>{if(F.autoSpinsSingleWinLimitAmount===1/0||F.autoSpinsSingleWinLimitAmount>Wa(F.winBookEventAmount))return"continue";throw F.autoSpinsCounter=0,me.modal={name:"autoSpinMessage",message:"singleWinLimitReached"},Error("End auto bet with singleWinLimitReached")}),np=Ve(async()=>{if(F.autoSpinsCounter>0)return"continue";throw Error("End auto bet with autoSpinsCounter being 0")}),sp=Ve(async()=>{const n=F.autoSpinsCounter-1;F.autoSpinsCounter=n>0?n:0}),ip=({bet:n})=>os({actors:{init:Zm,checkInsufficientFunds:Qm,checkLossLimit:ep,checkIfSingleWinLimit:tp,checkAutoSpinsCounter:np,bet:n,updateAutoSpinsCounter:sp}}).createMachine({context:as,id:"autoBet",initial:"init",states:{init:{invoke:{id:"init",src:"init",onDone:"checkInsufficientFunds",onError:"end"}},checkInsufficientFunds:{invoke:{id:"checkInsufficientFunds",src:"checkInsufficientFunds",onDone:"checkLossLimit",onError:"end"}},checkLossLimit:{invoke:{id:"checkLossLimit",src:"checkLossLimit",onDone:"checkIfSingleWinLimit",onError:"end"}},checkIfSingleWinLimit:{invoke:{id:"checkIfSingleWinLimit",src:"checkIfSingleWinLimit",onDone:"checkAutoSpinsCounter",onError:"end"}},checkAutoSpinsCounter:{invoke:{id:"checkAutoSpinsCounter",src:"checkAutoSpinsCounter",onDone:"playing",onError:"end"}},playing:{invoke:{id:"bet",src:"bet",onDone:"updateAutoSpinsCounter"}},updateAutoSpinsCounter:{invoke:{id:"updateAutoSpinsCounter",src:"updateAutoSpinsCounter",onDone:"checkInsufficientFunds"}},end:{type:"final"}}}),rp=n=>os({actors:n}).createMachine({context:as,id:"resumeBet",initial:"resumeGame",states:{resumeGame:{invoke:{id:"resumeGame",src:"resumeGame",onDone:[{actions:gi(({context:t,event:s})=>s.output),target:"play"}],onError:[{target:"end"}]}},play:{invoke:{id:"playGame",src:"playGame",input:({context:t})=>({bet:t.bet}),onDone:[{target:"ending"}]}},ending:{invoke:{id:"endGame",src:"endGame",input:({context:t})=>({bet:t.bet,rawBet:t.rawBet}),onDone:[{target:"end"}]}},end:{type:"final"}}}),op=n=>os({actors:n}).createMachine({context:as,id:"bet",initial:"fetching",states:{fetching:{invoke:{id:"forceGame",src:"forceGame",onDone:[{actions:gi(({context:t,event:s})=>s.output),target:"play"}],onError:[{target:"end"}]}},play:{invoke:{id:"playGame",src:"playGame",input:({context:t})=>({bet:t.bet}),onDone:[{target:"ending"}]}},ending:{invoke:{id:"endGame",src:"endGame",input:({context:t})=>({bet:t.bet,rawBet:t.rawBet}),onDone:[{target:"end"}]}},end:{type:"final"}}}),ap=({forceGame:n,resumeGame:e,newGame:t,playGame:s,endGame:i})=>{const r=Jm({newGame:t,playGame:s,endGame:i}),a=ip({bet:r}),l=rp({resumeGame:e,playGame:s,endGame:i}),u=op({forceGame:n,playGame:s,endGame:i});return{bet:r,autoBet:a,resumeBet:l,forceResult:u}},lp=()=>{const n=s=>$r(s,e.value),e=Y({value:""});return{stateXstate:e,stateXstateDerived:{matchesXstate:n,isRendering:()=>n(vr),isIdle:()=>n(br),isBetting:()=>n(El),isAutoBetting:()=>n(Il),isResumingBet:()=>n(Cl),isForcingResult:()=>n(Pl),isPlaying:()=>!n(vr)&&!n(br)}}},Bl="@@xstate";function cp(n){ln(Bl,n)}function up(){return cn(Bl)}var dp=E("<!> <!> <!>",1);function at(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy","debug","alignVertical","alignHorizontal","children","standard"]),s=Ut(),i=w(e.standard?s.stateLayoutDerived.mainLayoutStandard:s.stateLayoutDerived.mainLayout),r=w(s.stateLayoutDerived.canvasSizes),a=()=>{const f=m(r).height*.5-m(i).height*m(i).scale*.5;return e.alignVertical==="bottom"?f:0},l=()=>e.alignHorizontal==="left"?-m(r).width*.5+m(i).width*m(i).scale*.5:e.alignHorizontal==="right"?m(r).width*.5-m(i).width*m(i).scale*.5:0,u=w(a),h=w(l);we(n,{get x(){return m(h)},get y(){return m(u)},children:(f,o)=>{const c=w(()=>is({anchor:m(i).anchor,sizes:{width:m(i).width,height:m(i).height}}));we(f,Ae(()=>t,{get x(){return m(i).x},get y(){return m(i).y},get scale(){return m(i).scale},get pivot(){return m(c)},children:(d,p)=>{var _=dp(),y=M(_);{var g=S=>{wn(S,{get width(){return m(i).width},get height(){return m(i).height},alpha:.5,borderWidth:2,borderColor:16777215})};$(y,S=>{e.debug&&S(g)})}var v=T(y,2);V(v,()=>e.children);var x=T(v,2);{var A=S=>{const B=w(()=>`
layoutType: ${s.stateLayoutDerived.layoutType()}

type: ${e.standard?"standard":"game"}

scale: ${m(i).scale}

mainSizes: {
		width: ${m(i).width},
		height: ${m(i).height}
}

canvasSizes: {
		width: ${s.stateLayoutDerived.canvasSizes().width},
		height: ${s.stateLayoutDerived.canvasSizes().height}
}`);al(S,{get text(){return m(B)},style:{fill:16777215}})};$(x,S=>{e.debug&&S(A)})}b(d,_)},$$slots:{default:!0}}))},$$slots:{default:!0}}),C()}function vi(n,e){I(e,!0);const t=Ee(e,["$$slots","$$events","$$legacy"]),s=Ut();wn(n,Ae(()=>t,{get width(){return s.stateLayoutDerived.canvasSizes().width},get height(){return s.stateLayoutDerived.canvasSizes().height}})),C()}function hp(n,e){I(e,!0),vi(n,{get onpointerup(){return e.onpress},cursor:"pointer",eventMode:"static",backgroundColor:16777215,backgroundAlpha:.001}),C()}const fp={audio:()=>O._(O.t("AUDIO")),balance:()=>O._(O.t("BALANCE")),win:()=>O._(O.t("WIN")),bet:()=>O._(O.t("BET")),stop:()=>O._(O.t("STOP")),buyBonus:()=>O._(O.t("BUY BONUS")),disable:()=>O._(O.t("DISABLE")),freeSpins:()=>O._(O.t("FREE SPINS")),decrease:()=>O._(O.t("-")),increase:()=>O._(O.t("+")),menu:()=>O._(O.t("MENU")),turbo:()=>O._(O.t("TURBO")),autoSpin:()=>O._(O.t("AUTO SPIN")),payTable:()=>O._(O.t("PAYTABLE")),info:()=>O._(O.t("INFO")),settings:()=>O._(O.t("SETTINGS")),soundOn:()=>O._(O.t("SOUND ON")),soundOff:()=>O._(O.t("SOUND OFF")),menuExit:()=>O._(O.t("EXIT"))},{eventEmitter:P}=Qu(),{stateXstate:mp,stateXstateDerived:Ll}=lp(),{stateLayout:pp,stateLayoutDerived:xr}=Cd({backgroundRatio:{normal:1,portrait:1},mainSizesMap:{desktop:{width:1500,height:1500},tablet:{width:1500,height:1500},landscape:{width:1500,height:1500},portrait:{width:1500,height:1500}}}),J="https://test-twist-front-2.s3.ap-southeast-2.amazonaws.com/1-2-mining-game",$i="/api/games/scatter-ai/assets/game";console.log("lang : ",Me.lang());const _p=new URLSearchParams(document.location.search);let Ys=_p.get("gameCode")??"default";console.log("uniqueCode : ",Ys);const yp={pressToContinueText:{type:"sprites",src:`${J}/sprites/pressToContinueText/MM_pressanywhere.json`,preload:!0},M:{type:"spine",src:{atlas:`${J}/spines/symbols2/symbols2.atlas`,skeleton:`${J}/spines/symbols2/M.json`,scale:2}},explosion:{type:"spine",src:{atlas:`${J}/spines/symbols3/symbols3.atlas`,skeleton:`${J}/spines/symbols3/explosion.json`,scale:2}},reelsFrame:{type:"sprites",src:`${J}/sprites/reelsFrame/reels_frame.json`},payFrame:{type:"sprite",src:`${J}/sprites/payFrame/payFrame.png`},anticipation:{type:"spine",src:{atlas:`${J}/spines/anticipation/anticipation.atlas`,skeleton:`${J}/spines/anticipation/anticipation.json`,scale:2}},goldFont:{type:"font",src:`${J}/fonts/goldFont/mm_gold.xml`},goldBlur:{type:"font",src:`${J}/fonts/goldBlur/miningfont_gold_blur.xml`},silverFont:{type:"font",src:`${J}/fonts/silverFont/mm_silver.xml`},purpleFont:{type:"font",src:`${J}/fonts/purpleFont/mm_purple.xml`},loader:{type:"spine",src:{atlas:`${J}/spines/loader/loader.atlas`,skeleton:`${J}/spines/loader/loader.json`,scale:2},preload:!0},bigwin:{type:"spine",src:{atlas:`${J}/spines/bigwin/big_wins.atlas`,skeleton:`${J}/spines/bigwin/mm_bigwin.json`,scale:2}},fsIntro:{type:"spine",src:{atlas:`${J}/spines/fsIntro/fs_screen.atlas`,skeleton:`${J}/spines/fsIntro/fs_screen.json`,scale:2}},fsIntroNumber:{type:"spine",src:{atlas:`${J}/spines/fsIntro/fs_screen.atlas`,skeleton:`${J}/spines/fsIntro/fs_screen_number.json`,scale:2}},fsOutroNumber:{type:"spine",src:{atlas:`${J}/spines/fsIntro/fs_screen.atlas`,skeleton:`${J}/spines/fsIntro/fs_total_number.json`,scale:2}},foregroundAnimation:{type:"spine",src:{atlas:`${J}/spines/foregroundAnimation/mm_bg.atlas`,skeleton:`${J}/spines/foregroundAnimation/mm_bg.json`,scale:2},preload:!0},foregroundFeatureAnimation:{type:"spine",src:{atlas:`${J}/spines/foregroundFeatureAnimation/mm_bg_feature.atlas`,skeleton:`${J}/spines/foregroundFeatureAnimation/mm_bg_feature.json`,scale:2},preload:!0},tumble_multiplier:{type:"spine",src:{atlas:`${J}/spines/tumbleWin/tumble_win.atlas`,skeleton:`${J}/spines/tumbleWin/tumble_multiplier.json`,scale:2}},tumble_win:{type:"spine",src:{atlas:`${J}/spines/tumbleWin/tumble_win.atlas`,skeleton:`${J}/spines/tumbleWin/tumble_win.json`,scale:2}},reelhouse:{type:"spine",src:{atlas:`${J}/spines/reelhouse/reelhouse_glow.atlas`,skeleton:`${J}/spines/reelhouse/reelhouse_glow.json`,scale:2}},freeSpins:{type:"sprites",src:`${J}/sprites/freeSpins/freeSpins.json`},winSmall:{type:"sprites",src:`${J}/sprites/winSmall/MM_Localisation_winsmall.json`},clusterWin:{type:"spine",src:{atlas:`${J}/spines/clusterWin/clusterpay.atlas`,skeleton:`${J}/spines/clusterWin/clusterpay.json`,scale:2}},transition:{type:"spine",src:{atlas:`${J}/spines/transition/transition.atlas`,skeleton:`${J}/spines/transition/transition.json`,scale:2}},symbolsStatic:{type:"sprites",src:`${J}/sprites/symbolsStatic/symbolsStatic.json`},coins:{type:"spriteSheet",src:"https://test-twist-front-2.s3.ap-southeast-2.amazonaws.com/1-7-samurai-dogs-2/sprites/coin/SD2_Coin.json"},sound:{type:"audio",src:`${J}/audio/sounds.json`,preload:!0},bg:{type:"sprite",src:`${$i+"/"+Ys}/main_bg.png`,preload:!0},symbols:{type:"sprites",src:`${$i+"/"+Ys}/symbols.json`},frame_bg:{type:"sprite",src:`${$i+"/"+Ys}/frame_bg.png`},frame_tumble:{type:"sprite",src:"/assets/default/game-screen/frame_tumble.png"},title:{type:"sprite",src:"/assets/default/game-screen/title.png",preload:!0},frame_tumbleWin:{type:"sprite",src:"/assets/default/game-screen/frame_tumbleWin.png"},frame_FSCounter:{type:"sprite",src:"/assets/default/game-screen/frame_FSCounter.png"},loadBarAssets:{type:"sprites",src:"/assets/default/game-screen/loading.json",preload:!0},globalMultiplier:{type:"spine",src:{atlas:"/assets/default/game-screen/multiframe.atlas",skeleton:"/assets/default/game-screen/multiframe.json",scale:2}}},{stateApp:gp}=Rf({assets:yp});function vp(n){const e=W=>(W+.5)*n.symbolHeight,t=W=>{const se=W.symbolIndex-1,z=W.rawSymbol,ee=n.initialSymbolState,ne=e(se),re=new ke(ne);return Y({rawSymbol:z,symbolIndexOfBoard:se,symbolY:re,symbolState:ee,oncomplete:()=>{}})},s=W=>W.map((z,ee)=>t({rawSymbol:z,symbolIndex:ee})),i=W=>u.symbols.map((se,z)=>{se.rawSymbol=W[z],se.symbolState="static"}),r=n.initialSymbols.length,a=r-2,l=Ba(),u=Y({symbols:s(n.initialSymbols),motion:"stopped",spinType:"normal",anticipating:!1,readyToSpin:()=>{},spinOptions:()=>({})}),h=()=>r*u.spinOptions().reelPaddingMultiplierNormal,f=()=>r*u.spinOptions().reelPaddingMultiplierAnticipated;let o=n.initialSymbols,c=()=>{},d=!1,p=0;const _=async()=>{await ut(u.spinOptions().reelFallOutDelay*n.reelIndex)},y=async({isTurboBeforeAll:W})=>{u.spinType=W?"fast":"normal",W||await _(),await v()},g=async W=>{await Promise.all(u.symbols.map(W))},v=async()=>{u.motion="fallingOut",await g(async W=>{const se=W.symbolY.current,z=e(W.symbolIndexOfBoard+r),ne=(z-se)/u.spinOptions().symbolFallOutSpeed,re=u.spinOptions().symbolFallOutInterval*(a-W.symbolIndexOfBoard);await ut(re),W.symbolState="spin",await W.symbolY.set(z,{duration:ne})}),u.motion="hanging"},x=async()=>{i(o),await g(async W=>{const se=e(W.symbolIndexOfBoard-r+.5);await W.symbolY.set(se,{duration:0})})},A=async()=>{const W=p/r-1,se=async()=>await ut(u.spinOptions().reelFallInDelay*W);d?await se():F.isTurbo||await l.add(se),u.motion="fallingIn",await g(async z=>{const ee=z.symbolY.current,ne=e(z.symbolIndexOfBoard),re=ne-ee,pe=u.spinOptions().symbolFallInInterval*(a-z.symbolIndexOfBoard),Te=n.symbolHeight*u.spinOptions().symbolFallInBounceSizeMulti,De=Te/u.spinOptions().symbolFallInBounceSpeed,Ye=(re-Te)/u.spinOptions().symbolFallInSpeed;await z.symbolY.set(ne-Te,{duration:Ye,delay:pe}),z.symbolState="land",n.onSymbolLand({rawSymbol:z.rawSymbol}),z.symbolIndexOfBoard===a-1&&c(),await z.symbolY.set(ne,{duration:De,easing:Na})}),u.motion="stopped"},S=async()=>{u.motion==="hanging"||await v(),await x(),await A()},N={fast:()=>S(),normal:()=>S(),anticipated:()=>S()},Z=W=>(u.spinType=W.spinType,d=W.noStop,o=W.symbols,c=W.onSpinFinishing,p={fast:0,normal:W.previousPaddingSize+h(),anticipated:W.previousPaddingSize+f()}[W.spinType],p),te=async()=>{await N[u.spinType]()},ie=W=>{u.motion="stopped",W&&i(W)},ce=()=>{l.interrupt()},oe=()=>{fe(()=>{u.motion==="hanging"&&u.readyToSpin()})};return{reelIndex:n.reelIndex,symbolHeight:n.symbolHeight,onReelStopping:n.onReelStopping,reelLength:r,reelState:u,preSpin:y,prepareToSpin:Z,spin:te,stop:ce,setSymbolsWithRawSymbols:ie,readyToSpinEffect:oe}}const wr=Y({isPreSpinning:!1});function bp({board:n}){return{preSpin:async({paddingBoard:t})=>{wr.isPreSpinning=!0;const s=F.isTurbo;await Promise.all(n.map((i,r)=>i.preSpin({isTurboBeforeAll:s,preSpinPaddingReel:t==null?void 0:t[r]})))}}}function xp({board:n}){async function e({revealEvent:t,paddingBoard:s}){wr.isPreSpinning&&await Promise.all(n.map(async u=>{await ze(h=>u.reelState.readyToSpin=h)})),wr.isPreSpinning=!1;const i=F.isTurbo?"fast":"normal",r=t.anticipation.some(Boolean),a=t.anticipation.findIndex(Boolean),l=({noStop:u,isAnticipated:h})=>h?"anticipated":u?"normal":i;n.reduce((u,h,f)=>{var v,x;const o=r&&f>=a,c=(((v=t.anticipation)==null?void 0:v[f])||0)>0,d=l({noStop:o,isAnticipated:c}),p=t.board[f],_=s==null?void 0:s[f],y=(x=t==null?void 0:t.paddingPositions)==null?void 0:x[f];return h.prepareToSpin({noStop:o,spinType:d,symbols:p,paddingReel:_,paddingPosition:y,previousPaddingSize:u,onSpinFinishing:()=>{var B;h.onReelStopping();const A=f+1;(((B=t.anticipation)==null?void 0:B[A])||0)>0&&(n[A].reelState.anticipating=!0)}})},0),await Promise.all(n.map(async u=>{await u.spin()}))}return{spin:e}}function wp(){function n({board:e}){const{preSpin:t}=bp({board:e}),{spin:s}=xp({board:e});return{board:e,preSpin:t,spin:s,settle:l=>e.forEach((u,h)=>{const f=(l==null?void 0:l[h])||[];u.setSymbolsWithRawSymbols(f)}),stop:()=>e.forEach(l=>l.stop()),readyToSpinEffect:()=>{e.forEach(l=>l.readyToSpinEffect())}}}return{enhanceBoard:n}}function Sp({gameType:n,winLevelMap:e,winLevelToBetAmountMultiplierThresholdMaps:t}){return{getWinLevelDataByBookEventAmount:i=>{const r=Ua(i),a=t[n],l=rn.entries(a).sort((f,o)=>o[1]-f[1]).find(([f,o])=>r>=o),u=l==null?void 0:l[0];return u?e[u]:void 0}}}const Ap={1:{level:1,alias:"zero",type:"small",text:null,presentDuration:0,sound:{sfx:void 0,bgm:void 0},animation:void 0},2:{level:2,alias:"standard",type:"small",text:null,presentDuration:.6*Le,sound:{sfx:void 0,bgm:void 0},animation:void 0},3:{level:3,alias:"small",type:"small",text:null,presentDuration:1*Le,sound:{sfx:void 0,bgm:void 0},animation:void 0},4:{level:4,alias:"nice",type:"medium",text:null,presentDuration:1.5*Le,sound:{sfx:void 0,bgm:void 0},animation:void 0},5:{level:5,alias:"substantial",type:"medium",text:null,presentDuration:2*Le,sound:{sfx:void 0,bgm:void 0},animation:void 0},6:{level:6,alias:"big",type:"big",text:"BIG WIN",presentDuration:6*Le,sound:{sfx:void 0,bgm:"bgm_winlevel_big"},animation:{intro:"big_win_intro",idle:"big_win_idle",outro:"big_win_exit"}},7:{level:7,alias:"superwin",type:"big",text:"SUPER WIN",presentDuration:18*Le,sound:{sfx:void 0,bgm:"bgm_winlevel_superwin"},animation:{intro:"super_win_intro",idle:"super_win_idle",outro:"super_win_exit"}},8:{level:8,alias:"mega",type:"big",text:"MEGA WIN",presentDuration:20*Le,sound:{sfx:void 0,bgm:"bgm_winlevel_mega"},animation:{intro:"mega_win_intro",idle:"mega_win_idle",outro:"mega_win_exit"}},9:{level:9,alias:"epic",type:"big",text:"EPIC WIN!",presentDuration:26*Le,sound:{sfx:void 0,bgm:"bgm_winlevel_epic"},animation:{intro:"epic_win_intro",idle:"epic_win_idle",outro:"epic_win_exit"}},10:{level:10,alias:"max",type:"big",text:"MAX WIN",presentDuration:32*Le,sound:{sfx:void 0,bgm:"bgm_winlevel_max"},animation:{intro:"max_win_intro",idle:"max_win_idle",outro:"max_win_exit"}}},Tp={winLevelMaps:{baseGame:{1:0,2:.01,3:1,4:2,5:5,6:15,7:50,8:100,9:250,10:5e3},freeGame:{1:0,2:.01,3:1,4:2,5:5,6:15,7:50,8:100,9:250,10:5e3},superSpinGame:{1:0,2:.01,3:1,4:2,5:5,6:15,7:50,8:100,9:250,10:5e3}}},q=200,Rl=.5,Sr=[[{name:"M",subtype:"10"},{name:"H1"},{name:"M",subtype:"2"},{name:"L1"},{name:"H1"},{name:"H4"},{name:"H1"}],[{name:"L3"},{name:"H2"},{name:"M",subtype:"4"},{name:"L2"},{name:"S"},{name:"S"},{name:"L2"}],[{name:"L2"},{name:"H3"},{name:"M",subtype:"5"},{name:"L3"},{name:"W"},{name:"L2"},{name:"L2"}],[{name:"L3"},{name:"H4"},{name:"M",subtype:"7"},{name:"L4"},{name:"W"},{name:"H1"},{name:"H1"}],[{name:"H3"},{name:"H5"},{name:"M",subtype:"10"},{name:"H2"},{name:"S"},{name:"L2"},{name:"M",subtype:"7"}],[{name:"H2"},{name:"H2"},{name:"S"},{name:"L3"},{name:"H1"},{name:"S"},{name:"L2"}]],ri={x:Sr.length,y:Sr[0].length-2},Hi={width:q*ri.x,height:q*ri.y},Mp="static",j=.3,Ol={reelFallInDelay:80,reelPaddingMultiplierNormal:1.25,reelPaddingMultiplierAnticipated:18,reelFallOutDelay:145},Ep={...Ol,symbolFallInSpeed:3.5,symbolFallInInterval:30,symbolFallInBounceSpeed:.15,symbolFallInBounceSizeMulti:.5,symbolFallOutSpeed:3.5,symbolFallOutInterval:20},Ip={...Ol,symbolFallInSpeed:7,symbolFallInInterval:0,symbolFallInBounceSpeed:.3,symbolFallInBounceSizeMulti:.25,symbolFallOutSpeed:7,symbolFallOutInterval:0},ve={type:"spine",assetKey:"explosion",animationName:"explosion",sizeRatios:{width:1,height:1}},Ms={type:"sprite",assetKey:"sym_1",sizeRatios:{width:1,height:1}},Es={type:"sprite",assetKey:"sym_2",sizeRatios:{width:1,height:1}},Is={type:"sprite",assetKey:"sym_3",sizeRatios:{width:1,height:1}},Cs={type:"sprite",assetKey:"sym_4",sizeRatios:{width:1,height:1}},Ps={type:"sprite",assetKey:"sym_5",sizeRatios:{width:1,height:1}},ks={type:"sprite",assetKey:"sym_6",sizeRatios:{width:1,height:1}},Bs={type:"sprite",assetKey:"sym_7",sizeRatios:{width:1,height:1}},Ls={type:"sprite",assetKey:"sym_8",sizeRatios:{width:1,height:1}},Rs={type:"sprite",assetKey:"sym_9",sizeRatios:{width:1,height:1}},Os={type:"sprite",assetKey:"scatter",sizeRatios:{width:1,height:1}},Ds={type:"sprite",assetKey:"wild",sizeRatios:{width:1,height:1}},zi={type:"sprite",assetKey:"m1_2x.png",sizeRatios:{width:1,height:1}},Yi={type:"sprite",assetKey:"m1_4x.png",sizeRatios:{width:1,height:1}},Xi={type:"sprite",assetKey:"m2_5x.png",sizeRatios:{width:1,height:1}},Vi={type:"sprite",assetKey:"m2_7x.png",sizeRatios:{width:1,height:1}},ji={type:"sprite",assetKey:"m3_10x.png",sizeRatios:{width:1,height:1}},jo={type:"spine",assetKey:"M",animationName:"low_multiplier_static",sizeRatios:{width:j,height:j}},Ko={type:"spine",assetKey:"M",animationName:"mid_multiplier_static",sizeRatios:{width:j,height:j}},qo={type:"spine",assetKey:"M",animationName:"high_multiplier_static",sizeRatios:{width:j,height:j}},oi={explosion:ve,win:{type:"spine",assetKey:"M",animationName:"low_multiplier_pay",sizeRatios:{width:j,height:j}},postWinStatic:jo,static:jo,spin:{type:"spine",assetKey:"M",animationName:"low_multiplier_static",sizeRatios:{width:j,height:j}},land:{type:"spine",assetKey:"M",animationName:"low_multiplier_land",sizeRatios:{width:j,height:j}}},ai={explosion:ve,win:{type:"spine",assetKey:"M",animationName:"mid_multiplier_pay",sizeRatios:{width:j,height:j}},postWinStatic:Ko,static:Ko,spin:{type:"spine",assetKey:"M",animationName:"mid_multiplier_static",sizeRatios:{width:j,height:j}},land:{type:"spine",assetKey:"M",animationName:"mid_multiplier_land",sizeRatios:{width:j,height:j}}},Dl={explosion:ve,win:{type:"spine",assetKey:"M",animationName:"high_multiplier_pay",sizeRatios:{width:j,height:j}},postWinStatic:qo,static:qo,spin:{type:"spine",assetKey:"M",animationName:"high_multiplier_static",sizeRatios:{width:j,height:j}},land:{type:"spine",assetKey:"M",animationName:"high_multiplier_land",sizeRatios:{width:j,height:j}}},Cp={H1:{explosion:ve,win:{type:"winAnime",assetKey:"sym_1",sizeRatios:{width:1,height:1}},postWinStatic:Ms,static:Ms,spin:Ms,land:Ms},H2:{explosion:ve,win:{type:"winAnime",assetKey:"sym_2",sizeRatios:{width:1,height:1}},postWinStatic:Es,static:Es,spin:Es,land:Es},H3:{explosion:ve,win:{type:"winAnime",assetKey:"sym_3",sizeRatios:{width:1,height:1}},postWinStatic:Is,static:Is,spin:Is,land:Is},H4:{explosion:ve,win:{type:"winAnime",assetKey:"sym_4",sizeRatios:{width:1,height:1}},postWinStatic:Cs,static:Cs,spin:Cs,land:Cs},H5:{explosion:ve,win:{type:"winAnime",assetKey:"sym_5",sizeRatios:{width:1,height:1}},postWinStatic:Ps,static:Ps,spin:Ps,land:Ps},L1:{explosion:ve,win:{type:"winAnime",assetKey:"sym_6",sizeRatios:{width:1,height:1}},postWinStatic:ks,static:ks,spin:ks,land:ks},L2:{explosion:ve,win:{type:"winAnime",assetKey:"sym_7",sizeRatios:{width:1,height:1}},postWinStatic:Bs,static:Bs,spin:Bs,land:Bs},L3:{explosion:ve,win:{type:"winAnime",assetKey:"sym_8",sizeRatios:{width:1,height:1}},postWinStatic:Ls,static:Ls,spin:Ls,land:Ls},L4:{explosion:ve,win:{type:"winAnime",assetKey:"sym_9",sizeRatios:{width:1,height:1}},postWinStatic:Rs,static:Rs,spin:Rs,land:Rs},W:{explosion:ve,postWinStatic:Ds,static:Ds,spin:Ds,win:{type:"winAnime",assetKey:"wild",sizeRatios:{width:1,height:1}},land:Ds},S:{explosion:ve,postWinStatic:Os,static:Os,spin:Os,win:{type:"winAnime",assetKey:"scatter",sizeRatios:{width:1,height:1}},land:Os},M_2:{explosion:ve,postWinStatic:zi,static:zi,spin:zi,win:{type:"spine",assetKey:"M",animationName:"2x",sizeRatios:{width:j,height:j}},land:{type:"spine",assetKey:"M",animationName:"2x_land",sizeRatios:{width:j,height:j}}},M_4:{explosion:ve,postWinStatic:Yi,static:Yi,spin:Yi,win:{type:"spine",assetKey:"M",animationName:"4x",sizeRatios:{width:j,height:j}},land:{type:"spine",assetKey:"M",animationName:"4x_land",sizeRatios:{width:j,height:j}}},M_5:{explosion:ve,postWinStatic:Xi,static:Xi,spin:Xi,win:{type:"spine",assetKey:"M",animationName:"5x",sizeRatios:{width:j,height:j}},land:{type:"spine",assetKey:"M",animationName:"5x_land",sizeRatios:{width:j,height:j}}},M_7:{explosion:ve,postWinStatic:Vi,static:Vi,spin:Vi,win:{type:"spine",assetKey:"M",animationName:"7x",sizeRatios:{width:j,height:j}},land:{type:"spine",assetKey:"M",animationName:"7x_land",sizeRatios:{width:j,height:j}}},M_10:{explosion:ve,postWinStatic:ji,static:ji,spin:ji,win:{type:"spine",assetKey:"M",animationName:"10x",sizeRatios:{width:j,height:j}},land:{type:"spine",assetKey:"M",animationName:"10x_land",sizeRatios:{width:j,height:j}}},M_TAKEN_2:oi,M_TAKEN_4:oi,M_TAKEN_5:ai,M_TAKEN_7:ai,M_TAKEN_10:Dl},Pp={M_2:oi,M_4:oi,M_5:ai,M_7:ai,M_10:Dl},kp={1:"sfx_scatter_stop_1",2:"sfx_scatter_stop_2",3:"sfx_scatter_stop_3",4:"sfx_scatter_stop_4",5:"sfx_scatter_stop_5"},Fl=({rawSymbol:n})=>{n.name==="S"&&(P.broadcast({type:"soundScatterCounterIncrease"}),P.broadcast({type:"soundOnce",name:kp[Nl()]})),n.name==="M"&&P.broadcast({type:"soundOnce",name:"sfx_multiplier_landing"})},Gl=rn.range(ri.x).map(n=>{const e=vp({reelIndex:n,symbolHeight:q,initialSymbols:Sr[n],initialSymbolState:Mp,onReelStopping:()=>{P.broadcast({type:"soundOnce",name:"sfx_reel_stop_1",forcePlay:!F.isTurbo})},onSymbolLand:Fl});return e.reelState.spinOptions=()=>e.reelState.spinType==="fast"?Ip:Ep,e}),Ke=Y({board:Gl,gameType:"baseGame",tumbleBoardAdding:[],tumbleBoardBase:[],multiplierBoard:[],scatterCounter:0}),Bp=()=>({x:xr.mainLayout().width*.5,y:xr.mainLayout().height*.5,anchor:{x:.5,y:.5},pivot:{x:Hi.width/2,y:Hi.height/2},...Hi}),Lp=()=>Gl.map(n=>n.reelState.symbols.map(e=>e.rawSymbol)),Rp=()=>Ke.tumbleBoardBase.map((e,t)=>[...Ke.tumbleBoardAdding[t]??[],...e]),Nl=()=>Ke.scatterCounter>5?5:Ke.scatterCounter<1?1:Ke.scatterCounter,{enhanceBoard:Op}=wp(),Dp=Op({board:Ke.board}),{getWinLevelDataByBookEventAmount:Fp}=Sp({gameType:Ke.gameType,winLevelMap:Ap,winLevelToBetAmountMultiplierThresholdMaps:Tp.winLevelMaps}),tn={onSymbolLand:Fl,boardLayout:Bp,boardRaw:Lp,tumbleBoardCombined:Rp,scatterLandIndex:Nl,enhancedBoard:Dp,getWinLevelDataByBookEventAmount:Fp},Lt=n=>typeof n=="string",Gp=n=>typeof n=="function",Jo=new Map,Ul="en";function Qr(n){return[...Array.isArray(n)?n:[n],Ul]}function eo(n,e,t){const s=Qr(n);t||(t="default");let i;if(typeof t=="string")switch(i={day:"numeric",month:"short",year:"numeric"},t){case"full":i.weekday="long";case"long":i.month="long";break;case"short":i.month="numeric";break}else i=t;return li(()=>ci("date",s,t),()=>new Intl.DateTimeFormat(s,i)).format(Lt(e)?new Date(e):e)}function Np(n,e,t){let s;if(t||(t="default"),typeof t=="string")switch(s={second:"numeric",minute:"numeric",hour:"numeric"},t){case"full":case"long":s.timeZoneName="short";break;case"short":delete s.second}else s=t;return eo(n,e,s)}function Ar(n,e,t){const s=Qr(n);return li(()=>ci("number",s,t),()=>new Intl.NumberFormat(s,t)).format(e)}function Zo(n,e,t,{offset:s=0,...i}){const r=Qr(n),a=e?li(()=>ci("plural-ordinal",r),()=>new Intl.PluralRules(r,{type:"ordinal"})):li(()=>ci("plural-cardinal",r),()=>new Intl.PluralRules(r,{type:"cardinal"}));return i[t]??i[a.select(t-s)]??i.other}function li(n,e){const t=n();let s=Jo.get(t);return s||(s=e(),Jo.set(t,s)),s}function ci(n,e,t){const s=e.join("-");return`${n}-${s}-${JSON.stringify(t)}`}const Wl=/\\u[a-fA-F0-9]{4}|\\x[a-fA-F0-9]{2}/,$l="%__lingui_octothorpe__%",Up=(n,e,t={})=>{const s=e||n,i=a=>typeof a=="object"?a:t[a],r=(a,l)=>{const u=Object.keys(t).length?i("number"):void 0,h=Ar(s,a,u);return l.replace(new RegExp($l,"g"),h)};return{plural:(a,l)=>{const{offset:u=0}=l,h=Zo(s,!1,a,l);return r(a-u,h)},selectordinal:(a,l)=>{const{offset:u=0}=l,h=Zo(s,!0,a,l);return r(a-u,h)},select:Wp,number:(a,l)=>Ar(s,a,i(l)||{style:l}),date:(a,l)=>eo(s,a,i(l)||l),time:(a,l)=>Np(s,a,i(l)||l)}},Wp=(n,e)=>e[n]??e.other;function $p(n,e,t){return(s={},i)=>{const r=Up(e,t,i),a=(u,h=!1)=>Array.isArray(u)?u.reduce((f,o)=>{if(o==="#"&&h)return f+$l;if(Lt(o))return f+o;const[c,d,p]=o;let _={};d==="plural"||d==="selectordinal"||d==="select"?Object.entries(p).forEach(([g,v])=>{_[g]=a(v,d==="plural"||d==="selectordinal")}):_=p;let y;if(d){const g=r[d];y=g(s[c],_)}else y=s[c];return y==null?f:f+y},""):u,l=a(n);return Lt(l)&&Wl.test(l)?Ia.unraw(l):Lt(l)?l:l?String(l):""}}var Hp=Object.defineProperty,zp=(n,e,t)=>e in n?Hp(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Yp=(n,e,t)=>(zp(n,e+"",t),t);class Xp{constructor(){Yp(this,"_events",{})}on(e,t){var s;return(s=this._events)[e]??(s[e]=[]),this._events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){const s=this._getListeners(e);if(!s)return;const i=s.indexOf(t);~i&&s.splice(i,1)}emit(e,...t){const s=this._getListeners(e);s&&s.map(i=>i.apply(this,t))}_getListeners(e){const t=this._events[e];return Array.isArray(t)?t:!1}}var Vp=Object.defineProperty,jp=(n,e,t)=>e in n?Vp(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Xt=(n,e,t)=>(jp(n,typeof e!="symbol"?e+"":e,t),t);class Kp extends Xp{constructor(e){super(),Xt(this,"_locale",""),Xt(this,"_locales"),Xt(this,"_localeData",{}),Xt(this,"_messages",{}),Xt(this,"_missing"),Xt(this,"_messageCompiler"),Xt(this,"t",this._.bind(this)),e.missing!=null&&(this._missing=e.missing),e.messages!=null&&this.load(e.messages),e.localeData!=null&&this.loadLocaleData(e.localeData),(typeof e.locale=="string"||e.locales)&&this.activate(e.locale??Ul,e.locales)}get locale(){return this._locale}get locales(){return this._locales}get messages(){return this._messages[this._locale]??{}}get localeData(){return this._localeData[this._locale]??{}}_loadLocaleData(e,t){const s=this._localeData[e];s?Object.assign(s,t):this._localeData[e]=t}setMessagesCompiler(e){return this._messageCompiler=e,this}loadLocaleData(e,t){typeof e=="string"?this._loadLocaleData(e,t):Object.keys(e).forEach(s=>this._loadLocaleData(s,e[s])),this.emit("change")}_load(e,t){const s=this._messages[e];s?Object.assign(s,t):this._messages[e]=t}load(e,t){typeof e=="string"&&typeof t=="object"?this._load(e,t):Object.entries(e).forEach(([s,i])=>this._load(s,i)),this.emit("change")}loadAndActivate({locale:e,locales:t,messages:s}){this._locale=e,this._locales=t||void 0,this._messages[this._locale]=s,this.emit("change")}activate(e,t){this._locale=e,this._locales=t,this.emit("change")}_(e,t,s){if(!this.locale)throw new Error("Lingui: Attempted to call a translation function without setting a locale.\nMake sure to call `i18n.activate(locale)` before using Lingui functions.\nThis issue may also occur due to a race condition in your initialization logic.");let i=s==null?void 0:s.message;e||(e=""),Lt(e)||(t=e.values||t,i=e.message,e=e.id);const r=this.messages[e],a=r===void 0,l=this._missing;if(l&&a)return Gp(l)?l(this._locale,e):l;a&&this.emit("missing",{id:e,locale:this._locale});let u=r||i||e;return Lt(u)&&(this._messageCompiler?u=this._messageCompiler(u):console.warn(`Uncompiled message detected! Message:

> ${u}

That means you use raw catalog or your catalog doesn't have a translation for the message and fallback was used.
ICU features such as interpolation and plurals will not work properly for that message. 

Please compile your catalog first. 
`)),Lt(u)&&Wl.test(u)?JSON.parse(`"${u}"`):Lt(u)?u:$p(u,this._locale,this._locales)(t,s==null?void 0:s.formats)}date(e,t){return eo(this._locales||this._locale,e,t)}number(e,t){return Ar(this._locales||this._locale,e,t)}}function qp(n={}){return new Kp(n)}const Fs=qp(),Jp={...fp,...ye,home:()=>Fs._(Fs.t("HOME")),notTranslated:()=>Fs._(Fs.t("NOT TRANSLATED"))},Zp=()=>{Gu({eventEmitter:P}),cp({stateXstate:mp,stateXstateDerived:Ll}),Pd({stateLayout:pp,stateLayoutDerived:xr}),mf({stateApp:gp})},Q=()=>({...Nt(),...Ut(),...up(),...mt(),stateGame:Ke,stateGameDerived:tn,i18nDerived:Jp});var Ki={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var Qo;function Qp(){return Qo||(Qo=1,function(n){(function(){var e=function(){this.init()};e.prototype={init:function(){var o=this||t;return o._counter=1e3,o._html5AudioPool=[],o.html5PoolSize=10,o._codecs={},o._howls=[],o._muted=!1,o._volume=1,o._canPlayEvent="canplaythrough",o._navigator=typeof window<"u"&&window.navigator?window.navigator:null,o.masterGain=null,o.noAudio=!1,o.usingWebAudio=!0,o.autoSuspend=!0,o.ctx=null,o.autoUnlock=!0,o._setup(),o},volume:function(o){var c=this||t;if(o=parseFloat(o),c.ctx||f(),typeof o<"u"&&o>=0&&o<=1){if(c._volume=o,c._muted)return c;c.usingWebAudio&&c.masterGain.gain.setValueAtTime(o,t.ctx.currentTime);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var p=c._howls[d]._getSoundIds(),_=0;_<p.length;_++){var y=c._howls[d]._soundById(p[_]);y&&y._node&&(y._node.volume=y._volume*o)}return c}return c._volume},mute:function(o){var c=this||t;c.ctx||f(),c._muted=o,c.usingWebAudio&&c.masterGain.gain.setValueAtTime(o?0:c._volume,t.ctx.currentTime);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var p=c._howls[d]._getSoundIds(),_=0;_<p.length;_++){var y=c._howls[d]._soundById(p[_]);y&&y._node&&(y._node.muted=o?!0:y._muted)}return c},stop:function(){for(var o=this||t,c=0;c<o._howls.length;c++)o._howls[c].stop();return o},unload:function(){for(var o=this||t,c=o._howls.length-1;c>=0;c--)o._howls[c].unload();return o.usingWebAudio&&o.ctx&&typeof o.ctx.close<"u"&&(o.ctx.close(),o.ctx=null,f()),o},codecs:function(o){return(this||t)._codecs[o.replace(/^x-/,"")]},_setup:function(){var o=this||t;if(o.state=o.ctx&&o.ctx.state||"suspended",o._autoSuspend(),!o.usingWebAudio)if(typeof Audio<"u")try{var c=new Audio;typeof c.oncanplaythrough>"u"&&(o._canPlayEvent="canplay")}catch{o.noAudio=!0}else o.noAudio=!0;try{var c=new Audio;c.muted&&(o.noAudio=!0)}catch{}return o.noAudio||o._setupCodecs(),o},_setupCodecs:function(){var o=this||t,c=null;try{c=typeof Audio<"u"?new Audio:null}catch{return o}if(!c||typeof c.canPlayType!="function")return o;var d=c.canPlayType("audio/mpeg;").replace(/^no$/,""),p=o._navigator?o._navigator.userAgent:"",_=p.match(/OPR\/(\d+)/g),y=_&&parseInt(_[0].split("/")[1],10)<33,g=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,v=p.match(/Version\/(.*?) /),x=g&&v&&parseInt(v[1],10)<15;return o._codecs={mp3:!!(!y&&(d||c.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!d,opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(c.canPlayType('audio/wav; codecs="1"')||c.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!c.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(c.canPlayType("audio/x-m4b;")||c.canPlayType("audio/m4b;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!c.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(c.canPlayType("audio/x-flac;")||c.canPlayType("audio/flac;")).replace(/^no$/,"")},o},_unlockAudio:function(){var o=this||t;if(!(o._audioUnlocked||!o.ctx)){o._audioUnlocked=!1,o.autoUnlock=!1,!o._mobileUnloaded&&o.ctx.sampleRate!==44100&&(o._mobileUnloaded=!0,o.unload()),o._scratchBuffer=o.ctx.createBuffer(1,1,22050);var c=function(d){for(;o._html5AudioPool.length<o.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,o._releaseHtml5Audio(p)}catch{o.noAudio=!0;break}for(var _=0;_<o._howls.length;_++)if(!o._howls[_]._webAudio)for(var y=o._howls[_]._getSoundIds(),g=0;g<y.length;g++){var v=o._howls[_]._soundById(y[g]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}o._autoResume();var x=o.ctx.createBufferSource();x.buffer=o._scratchBuffer,x.connect(o.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof o.ctx.resume=="function"&&o.ctx.resume(),x.onended=function(){x.disconnect(0),o._audioUnlocked=!0,document.removeEventListener("touchstart",c,!0),document.removeEventListener("touchend",c,!0),document.removeEventListener("click",c,!0),document.removeEventListener("keydown",c,!0);for(var A=0;A<o._howls.length;A++)o._howls[A]._emit("unlock")}};return document.addEventListener("touchstart",c,!0),document.addEventListener("touchend",c,!0),document.addEventListener("click",c,!0),document.addEventListener("keydown",c,!0),o}},_obtainHtml5Audio:function(){var o=this||t;if(o._html5AudioPool.length)return o._html5AudioPool.pop();var c=new Audio().play();return c&&typeof Promise<"u"&&(c instanceof Promise||typeof c.then=="function")&&c.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(o){var c=this||t;return o._unlocked&&c._html5AudioPool.push(o),c},_autoSuspend:function(){var o=this;if(!(!o.autoSuspend||!o.ctx||typeof o.ctx.suspend>"u"||!t.usingWebAudio)){for(var c=0;c<o._howls.length;c++)if(o._howls[c]._webAudio){for(var d=0;d<o._howls[c]._sounds.length;d++)if(!o._howls[c]._sounds[d]._paused)return o}return o._suspendTimer&&clearTimeout(o._suspendTimer),o._suspendTimer=setTimeout(function(){if(o.autoSuspend){o._suspendTimer=null,o.state="suspending";var p=function(){o.state="suspended",o._resumeAfterSuspend&&(delete o._resumeAfterSuspend,o._autoResume())};o.ctx.suspend().then(p,p)}},3e4),o}},_autoResume:function(){var o=this;if(!(!o.ctx||typeof o.ctx.resume>"u"||!t.usingWebAudio))return o.state==="running"&&o.ctx.state!=="interrupted"&&o._suspendTimer?(clearTimeout(o._suspendTimer),o._suspendTimer=null):o.state==="suspended"||o.state==="running"&&o.ctx.state==="interrupted"?(o.ctx.resume().then(function(){o.state="running";for(var c=0;c<o._howls.length;c++)o._howls[c]._emit("resume")}),o._suspendTimer&&(clearTimeout(o._suspendTimer),o._suspendTimer=null)):o.state==="suspending"&&(o._resumeAfterSuspend=!0),o}};var t=new e,s=function(o){var c=this;if(!o.src||o.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}c.init(o)};s.prototype={init:function(o){var c=this;return t.ctx||f(),c._autoplay=o.autoplay||!1,c._format=typeof o.format!="string"?o.format:[o.format],c._html5=o.html5||!1,c._muted=o.mute||!1,c._loop=o.loop||!1,c._pool=o.pool||5,c._preload=typeof o.preload=="boolean"||o.preload==="metadata"?o.preload:!0,c._rate=o.rate||1,c._sprite=o.sprite||{},c._src=typeof o.src!="string"?o.src:[o.src],c._volume=o.volume!==void 0?o.volume:1,c._xhr={method:o.xhr&&o.xhr.method?o.xhr.method:"GET",headers:o.xhr&&o.xhr.headers?o.xhr.headers:null,withCredentials:o.xhr&&o.xhr.withCredentials?o.xhr.withCredentials:!1},c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],c._playLock=!1,c._onend=o.onend?[{fn:o.onend}]:[],c._onfade=o.onfade?[{fn:o.onfade}]:[],c._onload=o.onload?[{fn:o.onload}]:[],c._onloaderror=o.onloaderror?[{fn:o.onloaderror}]:[],c._onplayerror=o.onplayerror?[{fn:o.onplayerror}]:[],c._onpause=o.onpause?[{fn:o.onpause}]:[],c._onplay=o.onplay?[{fn:o.onplay}]:[],c._onstop=o.onstop?[{fn:o.onstop}]:[],c._onmute=o.onmute?[{fn:o.onmute}]:[],c._onvolume=o.onvolume?[{fn:o.onvolume}]:[],c._onrate=o.onrate?[{fn:o.onrate}]:[],c._onseek=o.onseek?[{fn:o.onseek}]:[],c._onunlock=o.onunlock?[{fn:o.onunlock}]:[],c._onresume=[],c._webAudio=t.usingWebAudio&&!c._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(c),c._autoplay&&c._queue.push({event:"play",action:function(){c.play()}}),c._preload&&c._preload!=="none"&&c.load(),c},load:function(){var o=this,c=null;if(t.noAudio){o._emit("loaderror",null,"No audio support.");return}typeof o._src=="string"&&(o._src=[o._src]);for(var d=0;d<o._src.length;d++){var p,_;if(o._format&&o._format[d])p=o._format[d];else{if(_=o._src[d],typeof _!="string"){o._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(_),p||(p=/\.([^.]+)$/.exec(_.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&t.codecs(p)){c=o._src[d];break}}if(!c){o._emit("loaderror",null,"No codec support for selected audio sources.");return}return o._src=c,o._state="loading",window.location.protocol==="https:"&&c.slice(0,5)==="http:"&&(o._html5=!0,o._webAudio=!1),new i(o),o._webAudio&&a(o),o},play:function(o,c){var d=this,p=null;if(typeof o=="number")p=o,o=null;else{if(typeof o=="string"&&d._state==="loaded"&&!d._sprite[o])return null;if(typeof o>"u"&&(o="__default",!d._playLock)){for(var _=0,y=0;y<d._sounds.length;y++)d._sounds[y]._paused&&!d._sounds[y]._ended&&(_++,p=d._sounds[y]._id);_===1?o=null:p=null}}var g=p?d._soundById(p):d._inactiveSound();if(!g)return null;if(p&&!o&&(o=g._sprite||"__default"),d._state!=="loaded"){g._sprite=o,g._ended=!1;var v=g._id;return d._queue.push({event:"play",action:function(){d.play(v)}}),v}if(p&&!g._paused)return c||d._loadQueue("play"),g._id;d._webAudio&&t._autoResume();var x=Math.max(0,g._seek>0?g._seek:d._sprite[o][0]/1e3),A=Math.max(0,(d._sprite[o][0]+d._sprite[o][1])/1e3-x),S=A*1e3/Math.abs(g._rate),B=d._sprite[o][0]/1e3,L=(d._sprite[o][0]+d._sprite[o][1])/1e3;g._sprite=o,g._ended=!1;var H=function(){g._paused=!1,g._seek=x,g._start=B,g._stop=L,g._loop=!!(g._loop||d._sprite[o][2])};if(x>=L){d._ended(g);return}var N=g._node;if(d._webAudio){var Z=function(){d._playLock=!1,H(),d._refreshBuffer(g);var oe=g._muted||d._muted?0:g._volume;N.gain.setValueAtTime(oe,t.ctx.currentTime),g._playStart=t.ctx.currentTime,typeof N.bufferSource.start>"u"?g._loop?N.bufferSource.noteGrainOn(0,x,86400):N.bufferSource.noteGrainOn(0,x,A):g._loop?N.bufferSource.start(0,x,86400):N.bufferSource.start(0,x,A),S!==1/0&&(d._endTimers[g._id]=setTimeout(d._ended.bind(d,g),S)),c||setTimeout(function(){d._emit("play",g._id),d._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?Z():(d._playLock=!0,d.once("resume",Z),d._clearTimer(g._id))}else{var te=function(){N.currentTime=x,N.muted=g._muted||d._muted||t._muted||N.muted,N.volume=g._volume*t.volume(),N.playbackRate=g._rate;try{var oe=N.play();if(oe&&typeof Promise<"u"&&(oe instanceof Promise||typeof oe.then=="function")?(d._playLock=!0,H(),oe.then(function(){d._playLock=!1,N._unlocked=!0,c?d._loadQueue():d._emit("play",g._id)}).catch(function(){d._playLock=!1,d._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),g._ended=!0,g._paused=!0})):c||(d._playLock=!1,H(),d._emit("play",g._id)),N.playbackRate=g._rate,N.paused){d._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}o!=="__default"||g._loop?d._endTimers[g._id]=setTimeout(d._ended.bind(d,g),S):(d._endTimers[g._id]=function(){d._ended(g),N.removeEventListener("ended",d._endTimers[g._id],!1)},N.addEventListener("ended",d._endTimers[g._id],!1))}catch(W){d._emit("playerror",g._id,W)}};N.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(N.src=d._src,N.load());var ie=window&&window.ejecta||!N.readyState&&t._navigator.isCocoonJS;if(N.readyState>=3||ie)te();else{d._playLock=!0,d._state="loading";var ce=function(){d._state="loaded",te(),N.removeEventListener(t._canPlayEvent,ce,!1)};N.addEventListener(t._canPlayEvent,ce,!1),d._clearTimer(g._id)}}return g._id},pause:function(o){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"pause",action:function(){c.pause(o)}}),c;for(var d=c._getSoundIds(o),p=0;p<d.length;p++){c._clearTimer(d[p]);var _=c._soundById(d[p]);if(_&&!_._paused&&(_._seek=c.seek(d[p]),_._rateSeek=0,_._paused=!0,c._stopFade(d[p]),_._node))if(c._webAudio){if(!_._node.bufferSource)continue;typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),c._cleanBuffer(_._node)}else(!isNaN(_._node.duration)||_._node.duration===1/0)&&_._node.pause();arguments[1]||c._emit("pause",_?_._id:null)}return c},stop:function(o,c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"stop",action:function(){d.stop(o)}}),d;for(var p=d._getSoundIds(o),_=0;_<p.length;_++){d._clearTimer(p[_]);var y=d._soundById(p[_]);y&&(y._seek=y._start||0,y._rateSeek=0,y._paused=!0,y._ended=!0,d._stopFade(p[_]),y._node&&(d._webAudio?y._node.bufferSource&&(typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),d._cleanBuffer(y._node)):(!isNaN(y._node.duration)||y._node.duration===1/0)&&(y._node.currentTime=y._start||0,y._node.pause(),y._node.duration===1/0&&d._clearSound(y._node))),c||d._emit("stop",y._id))}return d},mute:function(o,c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"mute",action:function(){d.mute(o,c)}}),d;if(typeof c>"u")if(typeof o=="boolean")d._muted=o;else return d._muted;for(var p=d._getSoundIds(c),_=0;_<p.length;_++){var y=d._soundById(p[_]);y&&(y._muted=o,y._interval&&d._stopFade(y._id),d._webAudio&&y._node?y._node.gain.setValueAtTime(o?0:y._volume,t.ctx.currentTime):y._node&&(y._node.muted=t._muted?!0:o),d._emit("mute",y._id))}return d},volume:function(){var o=this,c=arguments,d,p;if(c.length===0)return o._volume;if(c.length===1||c.length===2&&typeof c[1]>"u"){var _=o._getSoundIds(),y=_.indexOf(c[0]);y>=0?p=parseInt(c[0],10):d=parseFloat(c[0])}else c.length>=2&&(d=parseFloat(c[0]),p=parseInt(c[1],10));var g;if(typeof d<"u"&&d>=0&&d<=1){if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,c)}}),o;typeof p>"u"&&(o._volume=d),p=o._getSoundIds(p);for(var v=0;v<p.length;v++)g=o._soundById(p[v]),g&&(g._volume=d,c[2]||o._stopFade(p[v]),o._webAudio&&g._node&&!g._muted?g._node.gain.setValueAtTime(d,t.ctx.currentTime):g._node&&!g._muted&&(g._node.volume=d*t.volume()),o._emit("volume",g._id))}else return g=p?o._soundById(p):o._sounds[0],g?g._volume:0;return o},fade:function(o,c,d,p){var _=this;if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"fade",action:function(){_.fade(o,c,d,p)}}),_;o=Math.min(Math.max(0,parseFloat(o)),1),c=Math.min(Math.max(0,parseFloat(c)),1),d=parseFloat(d),_.volume(o,p);for(var y=_._getSoundIds(p),g=0;g<y.length;g++){var v=_._soundById(y[g]);if(v){if(p||_._stopFade(y[g]),_._webAudio&&!v._muted){var x=t.ctx.currentTime,A=x+d/1e3;v._volume=o,v._node.gain.setValueAtTime(o,x),v._node.gain.linearRampToValueAtTime(c,A)}_._startFadeInterval(v,o,c,d,y[g],typeof p>"u")}}return _},_startFadeInterval:function(o,c,d,p,_,y){var g=this,v=c,x=d-c,A=Math.abs(x/.01),S=Math.max(4,A>0?p/A:p),B=Date.now();o._fadeTo=d,o._interval=setInterval(function(){var L=(Date.now()-B)/p;B=Date.now(),v+=x*L,v=Math.round(v*100)/100,x<0?v=Math.max(d,v):v=Math.min(d,v),g._webAudio?o._volume=v:g.volume(v,o._id,!0),y&&(g._volume=v),(d<c&&v<=d||d>c&&v>=d)&&(clearInterval(o._interval),o._interval=null,o._fadeTo=null,g.volume(d,o._id),g._emit("fade",o._id))},S)},_stopFade:function(o){var c=this,d=c._soundById(o);return d&&d._interval&&(c._webAudio&&d._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(d._interval),d._interval=null,c.volume(d._fadeTo,o),d._fadeTo=null,c._emit("fade",o)),c},loop:function(){var o=this,c=arguments,d,p,_;if(c.length===0)return o._loop;if(c.length===1)if(typeof c[0]=="boolean")d=c[0],o._loop=d;else return _=o._soundById(parseInt(c[0],10)),_?_._loop:!1;else c.length===2&&(d=c[0],p=parseInt(c[1],10));for(var y=o._getSoundIds(p),g=0;g<y.length;g++)_=o._soundById(y[g]),_&&(_._loop=d,o._webAudio&&_._node&&_._node.bufferSource&&(_._node.bufferSource.loop=d,d&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop,o.playing(y[g])&&(o.pause(y[g],!0),o.play(y[g],!0)))));return o},rate:function(){var o=this,c=arguments,d,p;if(c.length===0)p=o._sounds[0]._id;else if(c.length===1){var _=o._getSoundIds(),y=_.indexOf(c[0]);y>=0?p=parseInt(c[0],10):d=parseFloat(c[0])}else c.length===2&&(d=parseFloat(c[0]),p=parseInt(c[1],10));var g;if(typeof d=="number"){if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,c)}}),o;typeof p>"u"&&(o._rate=d),p=o._getSoundIds(p);for(var v=0;v<p.length;v++)if(g=o._soundById(p[v]),g){o.playing(p[v])&&(g._rateSeek=o.seek(p[v]),g._playStart=o._webAudio?t.ctx.currentTime:g._playStart),g._rate=d,o._webAudio&&g._node&&g._node.bufferSource?g._node.bufferSource.playbackRate.setValueAtTime(d,t.ctx.currentTime):g._node&&(g._node.playbackRate=d);var x=o.seek(p[v]),A=(o._sprite[g._sprite][0]+o._sprite[g._sprite][1])/1e3-x,S=A*1e3/Math.abs(g._rate);(o._endTimers[p[v]]||!g._paused)&&(o._clearTimer(p[v]),o._endTimers[p[v]]=setTimeout(o._ended.bind(o,g),S)),o._emit("rate",g._id)}}else return g=o._soundById(p),g?g._rate:o._rate;return o},seek:function(){var o=this,c=arguments,d,p;if(c.length===0)o._sounds.length&&(p=o._sounds[0]._id);else if(c.length===1){var _=o._getSoundIds(),y=_.indexOf(c[0]);y>=0?p=parseInt(c[0],10):o._sounds.length&&(p=o._sounds[0]._id,d=parseFloat(c[0]))}else c.length===2&&(d=parseFloat(c[0]),p=parseInt(c[1],10));if(typeof p>"u")return 0;if(typeof d=="number"&&(o._state!=="loaded"||o._playLock))return o._queue.push({event:"seek",action:function(){o.seek.apply(o,c)}}),o;var g=o._soundById(p);if(g)if(typeof d=="number"&&d>=0){var v=o.playing(p);v&&o.pause(p,!0),g._seek=d,g._ended=!1,o._clearTimer(p),!o._webAudio&&g._node&&!isNaN(g._node.duration)&&(g._node.currentTime=d);var x=function(){v&&o.play(p,!0),o._emit("seek",p)};if(v&&!o._webAudio){var A=function(){o._playLock?setTimeout(A,0):x()};setTimeout(A,0)}else x()}else if(o._webAudio){var S=o.playing(p)?t.ctx.currentTime-g._playStart:0,B=g._rateSeek?g._rateSeek-g._seek:0;return g._seek+(B+S*Math.abs(g._rate))}else return g._node.currentTime;return o},playing:function(o){var c=this;if(typeof o=="number"){var d=c._soundById(o);return d?!d._paused:!1}for(var p=0;p<c._sounds.length;p++)if(!c._sounds[p]._paused)return!0;return!1},duration:function(o){var c=this,d=c._duration,p=c._soundById(o);return p&&(d=c._sprite[p._sprite][1]/1e3),d},state:function(){return this._state},unload:function(){for(var o=this,c=o._sounds,d=0;d<c.length;d++)c[d]._paused||o.stop(c[d]._id),o._webAudio||(o._clearSound(c[d]._node),c[d]._node.removeEventListener("error",c[d]._errorFn,!1),c[d]._node.removeEventListener(t._canPlayEvent,c[d]._loadFn,!1),c[d]._node.removeEventListener("ended",c[d]._endFn,!1),t._releaseHtml5Audio(c[d]._node)),delete c[d]._node,o._clearTimer(c[d]._id);var p=t._howls.indexOf(o);p>=0&&t._howls.splice(p,1);var _=!0;for(d=0;d<t._howls.length;d++)if(t._howls[d]._src===o._src||o._src.indexOf(t._howls[d]._src)>=0){_=!1;break}return r&&_&&delete r[o._src],t.noAudio=!1,o._state="unloaded",o._sounds=[],o=null,null},on:function(o,c,d,p){var _=this,y=_["_on"+o];return typeof c=="function"&&y.push(p?{id:d,fn:c,once:p}:{id:d,fn:c}),_},off:function(o,c,d){var p=this,_=p["_on"+o],y=0;if(typeof c=="number"&&(d=c,c=null),c||d)for(y=0;y<_.length;y++){var g=d===_[y].id;if(c===_[y].fn&&g||!c&&g){_.splice(y,1);break}}else if(o)p["_on"+o]=[];else{var v=Object.keys(p);for(y=0;y<v.length;y++)v[y].indexOf("_on")===0&&Array.isArray(p[v[y]])&&(p[v[y]]=[])}return p},once:function(o,c,d){var p=this;return p.on(o,c,d,1),p},_emit:function(o,c,d){for(var p=this,_=p["_on"+o],y=_.length-1;y>=0;y--)(!_[y].id||_[y].id===c||o==="load")&&(setTimeout((function(g){g.call(this,c,d)}).bind(p,_[y].fn),0),_[y].once&&p.off(o,_[y].fn,_[y].id));return p._loadQueue(o),p},_loadQueue:function(o){var c=this;if(c._queue.length>0){var d=c._queue[0];d.event===o&&(c._queue.shift(),c._loadQueue()),o||d.action()}return c},_ended:function(o){var c=this,d=o._sprite;if(!c._webAudio&&o._node&&!o._node.paused&&!o._node.ended&&o._node.currentTime<o._stop)return setTimeout(c._ended.bind(c,o),100),c;var p=!!(o._loop||c._sprite[d][2]);if(c._emit("end",o._id),!c._webAudio&&p&&c.stop(o._id,!0).play(o._id),c._webAudio&&p){c._emit("play",o._id),o._seek=o._start||0,o._rateSeek=0,o._playStart=t.ctx.currentTime;var _=(o._stop-o._start)*1e3/Math.abs(o._rate);c._endTimers[o._id]=setTimeout(c._ended.bind(c,o),_)}return c._webAudio&&!p&&(o._paused=!0,o._ended=!0,o._seek=o._start||0,o._rateSeek=0,c._clearTimer(o._id),c._cleanBuffer(o._node),t._autoSuspend()),!c._webAudio&&!p&&c.stop(o._id,!0),c},_clearTimer:function(o){var c=this;if(c._endTimers[o]){if(typeof c._endTimers[o]!="function")clearTimeout(c._endTimers[o]);else{var d=c._soundById(o);d&&d._node&&d._node.removeEventListener("ended",c._endTimers[o],!1)}delete c._endTimers[o]}return c},_soundById:function(o){for(var c=this,d=0;d<c._sounds.length;d++)if(o===c._sounds[d]._id)return c._sounds[d];return null},_inactiveSound:function(){var o=this;o._drain();for(var c=0;c<o._sounds.length;c++)if(o._sounds[c]._ended)return o._sounds[c].reset();return new i(o)},_drain:function(){var o=this,c=o._pool,d=0,p=0;if(!(o._sounds.length<c)){for(p=0;p<o._sounds.length;p++)o._sounds[p]._ended&&d++;for(p=o._sounds.length-1;p>=0;p--){if(d<=c)return;o._sounds[p]._ended&&(o._webAudio&&o._sounds[p]._node&&o._sounds[p]._node.disconnect(0),o._sounds.splice(p,1),d--)}}},_getSoundIds:function(o){var c=this;if(typeof o>"u"){for(var d=[],p=0;p<c._sounds.length;p++)d.push(c._sounds[p]._id);return d}else return[o]},_refreshBuffer:function(o){var c=this;return o._node.bufferSource=t.ctx.createBufferSource(),o._node.bufferSource.buffer=r[c._src],o._panner?o._node.bufferSource.connect(o._panner):o._node.bufferSource.connect(o._node),o._node.bufferSource.loop=o._loop,o._loop&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop||0),o._node.bufferSource.playbackRate.setValueAtTime(o._rate,t.ctx.currentTime),c},_cleanBuffer:function(o){var c=this,d=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!o.bufferSource)return c;if(t._scratchBuffer&&o.bufferSource&&(o.bufferSource.onended=null,o.bufferSource.disconnect(0),d))try{o.bufferSource.buffer=t._scratchBuffer}catch{}return o.bufferSource=null,c},_clearSound:function(o){var c=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);c||(o.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(o){this._parent=o,this.init()};i.prototype={init:function(){var o=this,c=o._parent;return o._muted=c._muted,o._loop=c._loop,o._volume=c._volume,o._rate=c._rate,o._seek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++t._counter,c._sounds.push(o),o.create(),o},create:function(){var o=this,c=o._parent,d=t._muted||o._muted||o._parent._muted?0:o._volume;return c._webAudio?(o._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),o._node.gain.setValueAtTime(d,t.ctx.currentTime),o._node.paused=!0,o._node.connect(t.masterGain)):t.noAudio||(o._node=t._obtainHtml5Audio(),o._errorFn=o._errorListener.bind(o),o._node.addEventListener("error",o._errorFn,!1),o._loadFn=o._loadListener.bind(o),o._node.addEventListener(t._canPlayEvent,o._loadFn,!1),o._endFn=o._endListener.bind(o),o._node.addEventListener("ended",o._endFn,!1),o._node.src=c._src,o._node.preload=c._preload===!0?"auto":c._preload,o._node.volume=d*t.volume(),o._node.load()),o},reset:function(){var o=this,c=o._parent;return o._muted=c._muted,o._loop=c._loop,o._volume=c._volume,o._rate=c._rate,o._seek=0,o._rateSeek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++t._counter,o},_errorListener:function(){var o=this;o._parent._emit("loaderror",o._id,o._node.error?o._node.error.code:0),o._node.removeEventListener("error",o._errorFn,!1)},_loadListener:function(){var o=this,c=o._parent;c._duration=Math.ceil(o._node.duration*10)/10,Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue()),o._node.removeEventListener(t._canPlayEvent,o._loadFn,!1)},_endListener:function(){var o=this,c=o._parent;c._duration===1/0&&(c._duration=Math.ceil(o._node.duration*10)/10,c._sprite.__default[1]===1/0&&(c._sprite.__default[1]=c._duration*1e3),c._ended(o)),o._node.removeEventListener("ended",o._endFn,!1)}};var r={},a=function(o){var c=o._src;if(r[c]){o._duration=r[c].duration,h(o);return}if(/^data:[^;]+;base64,/.test(c)){for(var d=atob(c.split(",")[1]),p=new Uint8Array(d.length),_=0;_<d.length;++_)p[_]=d.charCodeAt(_);u(p.buffer,o)}else{var y=new XMLHttpRequest;y.open(o._xhr.method,c,!0),y.withCredentials=o._xhr.withCredentials,y.responseType="arraybuffer",o._xhr.headers&&Object.keys(o._xhr.headers).forEach(function(g){y.setRequestHeader(g,o._xhr.headers[g])}),y.onload=function(){var g=(y.status+"")[0];if(g!=="0"&&g!=="2"&&g!=="3"){o._emit("loaderror",null,"Failed loading audio file with status: "+y.status+".");return}u(y.response,o)},y.onerror=function(){o._webAudio&&(o._html5=!0,o._webAudio=!1,o._sounds=[],delete r[c],o.load())},l(y)}},l=function(o){try{o.send()}catch{o.onerror()}},u=function(o,c){var d=function(){c._emit("loaderror",null,"Decoding audio data failed.")},p=function(_){_&&c._sounds.length>0?(r[c._src]=_,h(c,_)):d()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(o).then(p).catch(d):t.ctx.decodeAudioData(o,p,d)},h=function(o,c){c&&!o._duration&&(o._duration=c.duration),Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue())},f=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var o=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),c=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),d=c?parseInt(c[1],10):null;if(o&&d&&d<9){var p=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!p&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};n.Howler=t,n.Howl=s,typeof On<"u"?(On.HowlerGlobal=e,On.Howler=t,On.Howl=s,On.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=s,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var s=this;if(!s.ctx||!s.ctx.listener)return s;for(var i=s._howls.length-1;i>=0;i--)s._howls[i].stereo(t);return s},HowlerGlobal.prototype.pos=function(t,s,i){var r=this;if(!r.ctx||!r.ctx.listener)return r;if(s=typeof s!="number"?r._pos[1]:s,i=typeof i!="number"?r._pos[2]:i,typeof t=="number")r._pos=[t,s,i],typeof r.ctx.listener.positionX<"u"?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]);else return r._pos;return r},HowlerGlobal.prototype.orientation=function(t,s,i,r,a,l){var u=this;if(!u.ctx||!u.ctx.listener)return u;var h=u._orientation;if(s=typeof s!="number"?h[1]:s,i=typeof i!="number"?h[2]:i,r=typeof r!="number"?h[3]:r,a=typeof a!="number"?h[4]:a,l=typeof l!="number"?h[5]:l,typeof t=="number")u._orientation=[t,s,i,r,a,l],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(t,s,i,r,a,l);else return h;return u},Howl.prototype.init=function(t){return function(s){var i=this;return i._orientation=s.orientation||[1,0,0],i._stereo=s.stereo||null,i._pos=s.pos||null,i._pannerAttr={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:360,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:360,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:0,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:"inverse",maxDistance:typeof s.maxDistance<"u"?s.maxDistance:1e4,panningModel:typeof s.panningModel<"u"?s.panningModel:"HRTF",refDistance:typeof s.refDistance<"u"?s.refDistance:1,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:1},i._onstereo=s.onstereo?[{fn:s.onstereo}]:[],i._onpos=s.onpos?[{fn:s.onpos}]:[],i._onorientation=s.onorientation?[{fn:s.onorientation}]:[],t.call(this,s)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,s){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,s)}}),i;var r=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof s>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var a=i._getSoundIds(s),l=0;l<a.length;l++){var u=i._soundById(a[l]);if(u)if(typeof t=="number")u._stereo=t,u._pos=[t,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,r),r==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(t,0,0):u._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",u._id);else return u._stereo}return i},Howl.prototype.pos=function(t,s,i,r){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"pos",action:function(){a.pos(t,s,i,r)}}),a;if(s=typeof s!="number"?0:s,i=typeof i!="number"?-.5:i,typeof r>"u")if(typeof t=="number")a._pos=[t,s,i];else return a._pos;for(var l=a._getSoundIds(r),u=0;u<l.length;u++){var h=a._soundById(l[u]);if(h)if(typeof t=="number")h._pos=[t,s,i],h._node&&((!h._panner||h._panner.pan)&&e(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(s,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setPosition(t,s,i)),a._emit("pos",h._id);else return h._pos}return a},Howl.prototype.orientation=function(t,s,i,r){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"orientation",action:function(){a.orientation(t,s,i,r)}}),a;if(s=typeof s!="number"?a._orientation[1]:s,i=typeof i!="number"?a._orientation[2]:i,typeof r>"u")if(typeof t=="number")a._orientation=[t,s,i];else return a._orientation;for(var l=a._getSoundIds(r),u=0;u<l.length;u++){var h=a._soundById(l[u]);if(h)if(typeof t=="number")h._orientation=[t,s,i],h._node&&(h._panner||(h._pos||(h._pos=a._pos||[0,0,-.5]),e(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(s,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setOrientation(t,s,i)),a._emit("orientation",h._id);else return h._orientation}return a},Howl.prototype.pannerAttr=function(){var t=this,s=arguments,i,r,a;if(!t._webAudio)return t;if(s.length===0)return t._pannerAttr;if(s.length===1)if(typeof s[0]=="object")i=s[0],typeof r>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return a=t._soundById(parseInt(s[0],10)),a?a._pannerAttr:t._pannerAttr;else s.length===2&&(i=s[0],r=parseInt(s[1],10));for(var l=t._getSoundIds(r),u=0;u<l.length;u++)if(a=t._soundById(l[u]),a){var h=a._pannerAttr;h={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:h.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:h.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:h.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:h.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:h.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:h.panningModel};var f=a._panner;f||(a._pos||(a._pos=t._pos||[0,0,-.5]),e(a,"spatial"),f=a._panner),f.coneInnerAngle=h.coneInnerAngle,f.coneOuterAngle=h.coneOuterAngle,f.coneOuterGain=h.coneOuterGain,f.distanceModel=h.distanceModel,f.maxDistance=h.maxDistance,f.refDistance=h.refDistance,f.rolloffFactor=h.rolloffFactor,f.panningModel=h.panningModel}return t},Sound.prototype.init=function(t){return function(){var s=this,i=s._parent;s._orientation=i._orientation,s._stereo=i._stereo,s._pos=i._pos,s._pannerAttr=i._pannerAttr,t.call(this),s._stereo?i.stereo(s._stereo):s._pos&&i.pos(s._pos[0],s._pos[1],s._pos[2],s._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var s=this,i=s._parent;return s._orientation=i._orientation,s._stereo=i._stereo,s._pos=i._pos,s._pannerAttr=i._pannerAttr,s._stereo?i.stereo(s._stereo):s._pos?i.pos(s._pos[0],s._pos[1],s._pos[2],s._id):s._panner&&(s._panner.disconnect(0),s._panner=void 0,i._refreshBuffer(s)),t.call(this)}}(Sound.prototype.reset);var e=function(t,s){s=s||"spatial",s==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()}(Ki)),Ki}var It=Qp();function qi(n){let e=Y({});const t=new It.Howl({src:n.loadedAudio.src,sprite:n.loadedAudio.sprite,loop:n.loop}),s=f=>({soundName:f,soundId:0,soundState:"new",soundConfig:n.loadedAudio.config[f]??{volume:1}}),{play:i}=n.createPlay({howl:t,newSound:s,getSoundMap:()=>e});return{play:i,stop:f=>{const o=e[f.name];o&&(t.stop(o.soundId),delete e[o.soundName])},fade:async f=>{const o=e[f.name];o&&(t.fade(f.from,f.to,f.duration,o.soundId),await ut(f.duration))},volume:f=>{Object.values(e).forEach(o=>{t.volume(f*o.soundConfig.volume,o.soundId)})},rate:f=>{const o=e[f.name];o&&t.rate(f.rate,o.soundId)},howl:t,debug:()=>{console.log(pi(e))}}}function e_(n){const e=()=>{Object.values(n.getSoundMap()).forEach(a=>{n.howl.pause(a.soundId),n.getSoundMap()[a.soundName]={...a,soundState:"paused"}})},t=a=>{e();const l=n.howl.play(a.soundName);n.getSoundMap()[a.soundName]={...a,soundId:l,soundState:"playing"}},s=a=>{e(),n.howl.play(a.soundId),n.getSoundMap()[a.soundName]={...a,soundState:"playing"}},i={new:a=>t(a),paused:a=>s(a),playing:a=>{}};return{play:a=>{const u=n.getSoundMap()[a.name]??n.newSound(a.name);i[u.soundState](u)}}}function t_(n){const e=i=>{const r=n.howl.play(i.soundName);n.getSoundMap()[i.soundName]={...i,soundId:r,soundState:"playing"}},t={new:i=>e(i),paused:i=>e(i),playing:i=>{}};return{play:i=>{const a=n.getSoundMap()[i.name]??n.newSound(i.name);t[a.soundState](a)}}}function n_(n){const e=i=>{const r=n.howl.play(i.soundName);n.getSoundMap()[i.soundName]={...i,soundId:r,soundState:"playing"},n.howl.on("end",a=>{a===r&&(n.howl.stop(r),delete n.getSoundMap()[i.soundName])})},t={new:i=>e(i),paused:i=>e(i),playing:(i,r)=>{r.forcePlay&&e(i)}};return{play:i=>{const a=n.getSoundMap()[i.name]??n.newSound(i.name);t[a.soundState](a,{forcePlay:i.forcePlay})}}}function s_(){let n,e=U("running"),t=U("visible"),s;const i=c=>{n=c,s={music:qi({loadedAudio:n,loop:!0,createPlay:e_}),loop:qi({loadedAudio:n,loop:!0,createPlay:t_}),once:qi({loadedAudio:n,loop:!1,createPlay:n_})};const d=()=>k(e,Y(It.Howler.ctx.state)),p=()=>k(t,Y(document.visibilityState));return It.Howler.ctx.addEventListener("statechange",d),document.addEventListener("visibilitychange",p),{destroy:()=>{It.Howler.ctx.removeEventListener("statechange",d),document.removeEventListener("visibilitychange",p),s&&(s.music.howl.unload(),s.loop.howl.unload(),s.once.howl.unload())}}},r=c=>{s&&(s.music.stop(c),s.loop.stop(c),s.once.stop(c))},a=async c=>{if(s){const d=()=>[s.music.fade(c),s.loop.fade(c),s.once.fade(c)];await Promise.all(d())}},l=c=>{s&&(s.music.rate(c),s.loop.rate(c),s.once.rate(c))},u=()=>{It.Howler.volume(0),It.Howler.mute(!0)},h=()=>{It.Howler.volume(1),It.Howler.mute(!1)};return{load:i,stop:r,fade:a,rate:l,volumeEffect:()=>{fe(()=>{s&&(s.music.volume(Li.volumeMusic()),s.loop.volume(Li.volumeSoundEffect()),s.once.volume(Li.volumeSoundEffect()))})},enableEffect:()=>{fe(()=>{m(e)==="running"&&m(t)==="visible"?h():u()})},get players(){return s}}}const Ie=s_();function i_(n,e){I(e,!0);const t=Q();ge(()=>{const s=pi(t.stateApp.loadedAssets.sound),{destroy:i}=Ie.load(s);return()=>{i()}}),Ie.enableEffect(),Ie.volumeEffect(),C()}function r_({bookEvent:n}){try{Nu({eventIndex:n.index,rgsUrl:Me.rgsUrl(),sessionID:Me.sessionID(),gameID:Me.gameID()})}catch(e){console.error(e)}}function Hl({bookEvents:n}){return n.filter(s=>s.type==="reveal").length>1}async function o_(n,e){const t=[];for(const[s,i]of n.entries()){const r=await e(i,s,n);t.push(r)}return t}function a_({bookEventHandlerMap:n,debug:e}){const t=async(i,r)=>{const a=n==null?void 0:n[i.type];a?await a(i,r):console.error('Missing bookEventHandler in "bookEventHandlerMap" for: ',i)};return{playBookEvent:t,playBookEvents:async(i,r)=>{const a=r||{};await o_(i,async l=>{await t(l,{...a,bookEvents:i})})}}}const Un={clusterWinAmounts:null},Ji=({bookEventAmount:n})=>{var t,s;const e=tn.getWinLevelDataByBookEventAmount(n);(e==null?void 0:e.alias)==="max"&&P.broadcastAsync({type:"uiHide"}),(t=e==null?void 0:e.sound)!=null&&t.sfx&&P.broadcast({type:"soundOnce",name:e.sound.sfx}),(s=e==null?void 0:e.sound)!=null&&s.bgm&&P.broadcast({type:"soundMusic",name:e.sound.bgm}),(e==null?void 0:e.type)==="big"&&P.broadcast({type:"soundLoop",name:"sfx_bigwin_coinloop"})},ea=()=>{P.broadcast({type:"soundStop",name:"sfx_bigwin_coinloop"}),F.activeBetModeKey==="SUPERSPIN"||Ke.gameType==="freeGame"?P.broadcast({type:"soundMusic",name:"bgm_freespin"}):P.broadcast({type:"soundMusic",name:"bgm_main"}),P.broadcastAsync({type:"uiShow"})},l_={reveal:async(n,{bookEvents:e})=>{Hl({bookEvents:e})&&(P.broadcast({type:"stopButtonEnable"}),r_({bookEvent:n})),Ke.gameType=n.gameType,await tn.enhancedBoard.spin({revealEvent:n}),P.broadcast({type:"soundScatterCounterClear"})},animateSymbols:async n=>{var t;const e=async()=>{P.broadcast({type:"boardShow"}),n.reason==="trigger_freeSpin"?P.broadcast({type:"soundOnce",name:"sfx_scatter_win_v2"}):P.broadcast({type:"soundOnce",name:"sfx_winlevel_small"}),await P.broadcastAsync({type:"boardWithAnimateSymbols",symbolPositions:n.symbolPositions})};await Promise.all([e(),(t=Un.clusterWinAmounts)==null?void 0:t.call(Un)]),Un.clusterWinAmounts=null},clusterWin:async n=>{const e=async()=>{await P.broadcastAsync({type:"showClusterWinAmounts",wins:n.winInfo})};Un.clusterWinAmounts=e},setTumbleWin:async n=>{n.amount>0&&(P.broadcast({type:"tumbleWinAmountShow"}),P.broadcast({type:"tumbleWinAmountUpdate",amount:n.amount,animate:!1}))},setTotalWin:async n=>{F.winBookEventAmount=n.amount},freeSpinTrigger:async n=>{P.broadcast({type:"soundOnce",name:"sfx_superfreespin"}),await P.broadcastAsync({type:"uiHide"}),await P.broadcastAsync({type:"transition"}),P.broadcast({type:"freeSpinIntroShow"}),P.broadcast({type:"soundOnce",name:"jng_intro_fs"}),P.broadcast({type:"soundMusic",name:"bgm_freespin"}),await P.broadcastAsync({type:"freeSpinIntroUpdate",totFS:n.totFS,extraSpins:n.extraSpins}),Ke.gameType="freeGame",P.broadcast({type:"freeSpinIntroHide"}),P.broadcast({type:"boardFrameGlowShow"}),P.broadcast({type:"globalMultiplierShow"}),await P.broadcastAsync({type:"globalMultiplierUpdate",multiplier:1}),P.broadcast({type:"freeSpinCounterShow"}),Re.freeSpinCounterShow=!0,P.broadcast({type:"freeSpinCounterUpdate",current:void 0,total:n.totFS}),Re.freeSpinCounterTotal=n.totFS,await P.broadcastAsync({type:"uiShow"}),await P.broadcastAsync({type:"drawerButtonShow"}),P.broadcast({type:"drawerFold"})},updateFreeSpin:async n=>{P.broadcast({type:"freeSpinCounterShow"}),Re.freeSpinCounterShow=!0,P.broadcast({type:"freeSpinCounterUpdate",current:n.amount,total:void 0}),Re.freeSpinCounterCurrent=n.amount},updateGlobalMult:async n=>{P.broadcast({type:"globalMultiplierShow"}),n.globalMult===1&&(P.broadcast({type:"tumbleWinAmountHide"}),P.broadcast({type:"tumbleWinAmountReset"})),await P.broadcastAsync({type:"globalMultiplierUpdate",multiplier:n.globalMult})},freeSpinEnd:async n=>{await P.broadcastAsync({type:"uiHide"}),Ke.gameType="baseGame",P.broadcast({type:"boardFrameGlowHide"}),P.broadcast({type:"globalMultiplierHide"}),P.broadcast({type:"freeSpinOutroShow"}),P.broadcast({type:"soundOnce",name:"sfx_youwon_panel"}),Ji({bookEventAmount:n.amount}),await P.broadcastAsync({type:"freeSpinOutroCountUp",amount:n.amount}),ea(),P.broadcast({type:"freeSpinOutroHide"}),P.broadcast({type:"freeSpinCounterHide"}),Re.freeSpinCounterShow=!1,await P.broadcastAsync({type:"transition"}),await P.broadcastAsync({type:"uiShow"}),await P.broadcastAsync({type:"drawerUnfold"}),P.broadcast({type:"drawerButtonHide"})},multiplierSplashScreen:async n=>{P.broadcast({type:"tumbleWinAmountShow"}),await P.broadcastAsync({type:"tumbleWinAmountUpdate",amount:n.actingOn,animate:!1}),P.broadcast({type:"multiplierBoardShow"}),P.broadcast({type:"multiplierBoardInit"}),P.broadcast({type:"soundOnce",name:"tumble_win_4"}),await P.broadcastAsync({type:"multiplierBoardAnimate"}),P.broadcast({type:"boardWithMovingMultiplierTexts"}),await P.broadcastAsync({type:"multiplierBoardMove"}),P.broadcast({type:"multiplierBoardReset"}),P.broadcast({type:"multiplierBoardHide"}),P.broadcast({type:"multiplierTotalShow"}),P.broadcast({type:"multiplierTotalUpdate",totalMultiplier:n.multiplier}),P.broadcast({type:"soundOnce",name:"sfx_multiplier_win"}),await P.broadcastAsync({type:"multiplierTotalAnimate"}),P.broadcast({type:"soundOnce",name:"sfx_multiplier_explosion_a"}),P.broadcast({type:"multiplierTotalHide"}),await P.broadcastAsync({type:"tumbleWinAmountUpdate",amount:n.result,animate:!0})},tumbleBoard:async n=>{P.broadcast({type:"boardHide"}),P.broadcast({type:"tumbleBoardShow"}),P.broadcast({type:"tumbleBoardInit",addingBoard:n.newSymbols}),P.broadcast({type:"soundOnce",name:"sfx_multiplier_explosion_b"}),await P.broadcastAsync({type:"tumbleBoardExplode",explodingPositions:n.explodingSymbols}),P.broadcast({type:"tumbleBoardRemoveExploded"}),await P.broadcastAsync({type:"tumbleBoardSlideDown"}),P.broadcast({type:"boardSettle",board:tn.tumbleBoardCombined().map(e=>e.map(t=>t.rawSymbol))}),P.broadcast({type:"tumbleBoardReset"}),P.broadcast({type:"tumbleBoardHide"}),P.broadcast({type:"boardShow"})},cumulativeTumble:async n=>{P.broadcast({type:"winShow"}),Ji({bookEventAmount:n.amount}),await P.broadcastAsync({type:"winUpdate",amount:n.amount}),P.broadcast({type:"soundStop",name:"sfx_bigwin_coinloop"}),P.broadcast({type:"winHide"})},winCap:async n=>{P.broadcast({type:"winShow"}),Ji({bookEventAmount:n.amount}),await P.broadcastAsync({type:"winUpdate",amount:n.amount}),ea(),P.broadcast({type:"winHide"})},finalWin:async n=>{P.broadcast({type:"globalMultiplierHide"}),P.broadcast({type:"tumbleWinAmountHide"})},bigWinAnimation:async n=>{},setWin:async n=>{},createBonusSnapshot:async n=>{const{bookEvents:e}=n;function t(l){return rn.findLast(e,u=>u.type===l)}const s=t("freeSpinTrigger"),i=t("updateFreeSpin"),r=t("setTotalWin"),a=t("updateGlobalMult");s&&await Gs(s,{bookEvents:e}),i&&Gs(i,{bookEvents:e}),r&&Gs(r,{bookEvents:e}),a&&Gs(a,{bookEvents:e})}},{playBookEvent:Gs,playBookEvents:c_}=a_({bookEventHandlerMap:l_,debug:!1}),u_=async n=>{F.winBookEventAmount=0,await c_(n.state),P.broadcast({type:"stopButtonEnable"})},d_=["updateGlobalMult","freeSpinTrigger","updateFreeSpin","setTotalWin"],h_=n=>{const e=Number(n.event),t=n.state.filter((a,l)=>l<e),s=n.state.filter((a,l)=>l>=e),r=[{index:0,type:"createBonusSnapshot",bookEvents:t.filter(a=>d_.includes(a.type))},...s];return{...n,state:r}},to=n=>q*(n+Rl),Xs=n=>(n+.5)*q,zl=({rawSymbol:n})=>n.subtype!==void 0?`${n.name}_${n.subtype}`:n.name,bi=({rawSymbol:n,state:e})=>{const t=zl({rawSymbol:n});return Cp[t][e]},Yl=({rawSymbol:n,state:e})=>{if(n.name==="M"){const t=zl({rawSymbol:n});return Pp[t][e]}return null},f_=Km({onResumeGameActive:n=>h_(n),onResumeGameInactive:n=>{const e=rn.findLast(n.state,t=>(t==null?void 0:t.type)==="reveal");e&&tn.enhancedBoard.settle(e.board)},onNewGameStart:async()=>{F.isTurbo&&Ll.isAutoBetting()||F.isSpaceHold||(F.winBookEventAmount=0,await tn.enhancedBoard.preSpin({}))},onNewGameError:()=>tn.enhancedBoard.settle(),onPlayGame:async n=>await u_(n),checkIsBonusGame:n=>Hl({bookEvents:n.state})}),m_=ap(f_),Et=Vm(m_);function p_(n,e){I(e,!0);const t=Q();ge(()=>{const{unsubscribe:a}=Et.subscribe(l=>{t.stateXstate.value=l.value});return Et.start(),Et.send({type:"RENDERED"}),()=>{a(),Et.stop()}}),t.eventEmitter.subscribeOnMount({bet:()=>Et.send({type:"BET"}),autoBet:()=>Et.send({type:"AUTO_BET"}),resumeBet:()=>Et.send({type:"RESUME_BET"}),forceResult:()=>Et.send({type:"FORCE_RESULT"})});var s=G(),i=M(s);{var r=a=>{const l=w(()=>JSON.stringify(t.stateXstate.value,void 0,2));al(a,{get x(){return t.stateLayoutDerived.canvasSizes().width},anchor:{x:1,y:0},style:{fill:16777215},get text(){return m(l)}})};$(i,a=>{e.debug&&a(r)})}b(n,s),C()}var Wn=Oe(()=>F);function __(n,e){I(e,!1);const t=Q();ge(()=>{var s;(s=Wn().lastBet)!=null&&s.active&&Wn().lastBet.mode&&Wn(Wn().activeBetModeKey=Wn().lastBet.mode),t.eventEmitter.broadcast({type:"resumeBet"})}),xe(),C()}function y_(n,e){I(e,!1);const t=Q();t.eventEmitter.subscribeOnMount({soundBetMode:async({betModeKey:s})=>{s==="SUPERSPIN"?(Ie.players.once.play({name:"sfx_winlevel_end"}),await ut(Le),Ie.players.music.play({name:"bgm_freespin"})):Ie.players.music.play({name:"bgm_main"})},soundPressGeneral:()=>Ie.players.once.play({name:"sfx_btn_general"}),soundPressBet:()=>Ie.players.once.play({name:"sfx_btn_spin"}),soundScatterCounterIncrease:()=>t.stateGame.scatterCounter=t.stateGame.scatterCounter+1,soundScatterCounterClear:()=>t.stateGame.scatterCounter=0,soundMusic:({name:s})=>Ie.players.music.play({name:s}),soundLoop:({name:s})=>Ie.players.loop.play({name:s}),soundOnce:({name:s,forcePlay:i})=>Ie.players.once.play({name:s,forcePlay:i}),soundStop:({name:s})=>Ie.stop({name:s}),soundFade:async({name:s,duration:i,from:r,to:a})=>await Ie.fade({name:s,duration:i,from:r,to:a})}),ge(()=>{F.activeBetModeKey==="SUPERSPIN"?Ie.players.music.play({name:"bgm_freespin"}):Ie.players.music.play({name:"bgm_main"})}),xe(),C()}var g_=E("<!> <!>",1);function v_(n,e){I(e,!0);const t=Q(),s={x:1,y:1},i=w(()=>{var o;return(o=t.stateApp.loadedAssets)==null?void 0:o.bg}),r=w(()=>t.stateLayoutDerived.normalBackgroundLayout({scale:1}));console.log(m(r));const a=w(()=>{var o,c,d;if((o=t.stateApp.pixiApplication)==null||o.renderer.resize(document.getElementsByTagName("body")[0].clientWidth,document.getElementsByTagName("body")[0].clientHeight),!m(i)||!((c=m(i))!=null&&c.width)||!((d=m(i))!=null&&d.height)||!m(r).width&&!m(r).height)return s;if(!m(r).width&&m(r).height){console.log("height case "+m(r).height," : ",m(i).height);const p=m(r).height/m(i).height;return{x:p,y:p}}if(m(r).width&&!m(r).height){console.log("width case "+m(r).width," : ",m(i).width);const p=m(r).width/m(i).width;return{x:p,y:p}}return m(r).width&&m(r).height?{x:m(r).width/m(i).width,y:m(r).height/m(i).height}:s});console.log(m(a));var l=g_(),u=M(l),h=w(()=>t.stateLayoutDerived.canvasSizes());wn(u,Ae(()=>m(h),{backgroundColor:0,zIndex:-3}));var f=T(u,2);Se(f,Ae({zIndex:-2,key:"bg",anchor:.5},()=>m(r),{get scale(){return m(a)}})),b(n,l),C()}function Xl(n,e){I(e,!0);const t=Q(),s=w(()=>t.stateLayoutDerived.canvasSizes().width*.5),i=w(()=>t.stateLayoutDerived.canvasSizes().height*.5),r=w(()=>t.stateLayoutDerived.canvasSizes().height*1.7);Je(n,{key:"transition",get x(){return m(s)},get y(){return m(i)},get height(){return m(r)},children:(a,l)=>{const u=w(()=>({complete:e.oncomplete}));Ze(a,{trackIndex:0,animationName:"animation",get listener(){return m(u)}})},$$slots:{default:!0}}),C()}var b_=E("<!> <!> <!>",1);function xi(n,e){I(e,!0);const t=Q();var s=b_(),i=M(s);at(i,{alignVertical:"bottom",children:(l,u)=>{const h=w(()=>Me.lang()),f=w(()=>t.stateLayoutDerived.mainLayout().width*.5);Se(l,{get key(){return`pressToContinueText_${m(h)??""}.png`},width:1194,height:200,anchor:{x:.5,y:1},get x(){return m(f)},get y(){return t.stateLayoutDerived.mainLayout().height}})},$$slots:{default:!0}});var r=T(i,2);Uu(r,{hotkey:"Space",onpress:()=>e.onpress()});var a=T(r,2);hp(a,{onpress:()=>e.onpress()}),b(n,s),C()}var x_=E("<!> <!>",1),w_=E("<!> <!>",1),S_=E("<!> <!> <!>",1);function A_(n,e){I(e,!0);const t=xn(e,"x",3,0),s=xn(e,"y",3,0),i=mt();we(n,{get x(){return t()},get y(){return s()},children:(r,a)=>{var l=S_(),u=M(l);Se(u,{key:"loading_base",anchor:.5,scale:.5});var h=T(u,2);we(h,{children:(o,c)=>{var d=w_(),p=M(d);const _=w(()=>-338+650*(i.stateApp.loadingProgress/100));we(p,{get x(){return m(_)},children:(g,v)=>{var x=x_(),A=M(x);Se(A,{key:"loading_fill",anchor:{x:1,y:.5},scale:.5});var S=T(A,2);Se(S,{key:"loading_marker",anchor:.5,scale:.5,x:-10}),b(g,x)},$$slots:{default:!0}});var y=T(p,2);wn(y,{isMask:!0,backgroundColor:"red",backgroundAlpha:.5,x:-1,anchor:.5,borderRadius:17,height:29,width:638}),b(o,d)},$$slots:{default:!0}});var f=T(h,2);Se(f,{key:"loading_border",anchor:.5,scale:.5}),b(r,l)},$$slots:{default:!0}}),C()}var T_=E("<!> <!> <!>",1);function M_(n,e){I(e,!0);const t=Q();let s=U("start");var i=T_(),r=M(i);const a=w(()=>m(s)==="start");dt(r,{get show(){return m(a)},children:(o,c)=>{at(o,{children:(d,p)=>{const _=w(()=>t.stateLayoutDerived.mainLayout().width*.5),y=w(()=>t.stateLayoutDerived.mainLayout().height*.5);we(d,{get x(){return m(_)},get y(){return m(y)},children:(g,v)=>{var x=G(),A=M(x);{var S=B=>{A_(B,{y:270})};$(A,B=>{t.stateApp.loaded||B(S)})}b(g,x)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var l=T(r,2);const u=w(()=>m(s)==="start"&&t.stateApp.loaded);dt(l,{get show(){return m(u)},children:(o,c)=>{xi(o,{onpress:()=>k(s,"transition")})},$$slots:{default:!0}});var h=T(l,2);const f=w(()=>m(s)==="transition");dt(h,{get show(){return m(f)},children:(o,c)=>{Xl(o,{get oncomplete(){return e.onloaded}})},$$slots:{default:!0}}),b(n,i),C()}var E_=E("<!> ",1);function I_(n,e){I(e,!1);const t=Q();xe();var s=E_(),i=M(s);const r=le(()=>t.stateGameDerived.boardLayout().width+150),a=le(()=>t.stateGameDerived.boardLayout().height+150);Se(i,{key:"frame_bg",anchor:.5,get x(){return t.stateGameDerived.boardLayout().x},get y(){return t.stateGameDerived.boardLayout().y},get width(){return m(r)},get height(){return m(a)}});var l=T(i);X((u,h,f)=>K(l,` ${u??""}
${h??""}
${f??""}`),[()=>console.log(t.stateGameDerived.boardLayout().x),()=>console.log(t.stateGameDerived.boardLayout().width+" width"),()=>console.log(t.stateGameDerived.boardLayout().height+" height")],le),b(n,s),C()}function wt(n,e){I(e,!0);const t=Q();we(n,{get x(){return t.stateGameDerived.boardLayout().x},get y(){return t.stateGameDerived.boardLayout().y},get pivot(){return t.stateGameDerived.boardLayout().pivot},children:(s,i)=>{var r=G(),a=M(r);V(a,()=>e.children),b(s,r)},$$slots:{default:!0}}),C()}var C_=E("<!> <!>",1);function Vl(n,e){I(e,!0);const t=Q();var s=C_(),i=M(s);{var r=u=>{wn(u,{alpha:.5,backgroundColor:16777215,get width(){return t.stateGameDerived.boardLayout().width},get height(){return t.stateGameDerived.boardLayout().height}})};$(i,u=>{e.debug&&u(r)})}var a=T(i,2);const l=w(()=>t.stateGameDerived.boardLayout().width+q*2);wn(a,{isMask:!0,x:-200,get width(){return m(l)},get height(){return t.stateGameDerived.boardLayout().height}}),b(n,s),C()}function jl(n,e){I(e,!0);const t=w(()=>q*e.symbolInfo.sizeRatios.height);Je(n,{get x(){return e.x},get y(){return e.y},get key(){return e.symbolInfo.assetKey},get height(){return m(t)},children:(s,i)=>{const r=w(()=>ae.timeScale());Ze(s,{get loop(){return e.loop},trackIndex:0,get animationName(){return e.symbolInfo.animationName},get timeScale(){return m(r)},get listener(){return e.listener}})},$$slots:{default:!0}}),C()}function Kl(n,e){I(e,!0);var t=G(),s=M(t);{var i=r=>{const a=w(()=>q*e.symbolBackgroundInfo.sizeRatios.height);Je(r,{get x(){return e.x},get y(){return e.y},get key(){return e.symbolBackgroundInfo.assetKey},get height(){return m(a)},children:(l,u)=>{const h=w(()=>ae.timeScale());Ze(l,{get loop(){return e.loop},trackIndex:0,get animationName(){return e.symbolBackgroundInfo.animationName},get timeScale(){return m(h)}})},$$slots:{default:!0}})};$(s,r=>{e.symbolBackgroundInfo&&r(i)})}b(n,t),C()}var P_=E("<!> <!> <!>",1);function k_(n,e){I(e,!0);var t=P_(),s=M(t);Kl(s,{get x(){return e.x},get y(){return e.y},get symbolBackgroundInfo(){return e.symbolBackgroundInfo},get loop(){return e.loop}});var i=T(s,2);jl(i,{get x(){return e.x},get y(){return e.y},get symbolInfo(){return e.symbolInfo},get listener(){return e.listener},get loop(){return e.loop}});var r=T(i,2);{var a=l=>{Je(l,{get x(){return e.x},get y(){return e.y},key:"anticipation",width:q*.19,children:(u,h)=>{Ze(u,{trackIndex:0,animationName:"payframe",loop:!0})},$$slots:{default:!0}})};$(r,l=>{e.showWinFrame&&l(a)})}b(n,t),C()}function B_(n,e){I(e,!0),ge(()=>{var i;(i=e.oncomplete)==null||i.call(e)}),fe(()=>{var i;e.symbolInfo,(i=e.oncomplete)==null||i.call(e)});const t=w(()=>q*e.symbolInfo.sizeRatios.width),s=w(()=>q*e.symbolInfo.sizeRatios.height);Se(n,{get x(){return e.x},get y(){return e.y},anchor:.5,get key(){return e.symbolInfo.assetKey},get width(){return m(t)},get height(){return m(s)}}),C()}var Pe=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(Pe||{});const Tr=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},Ns=(n,e)=>Tr(n).priority??e,dn={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(Tr).forEach(e=>{e.type.forEach(t=>{var s,i;return(i=(s=this._removeHandlers)[t])==null?void 0:i.call(s,e)})}),this},add(...n){return n.map(Tr).forEach(e=>{e.type.forEach(t=>{var r,a;const s=this._addHandlers,i=this._queue;s[t]?(a=s[t])==null||a.call(s,e):(i[t]=i[t]||[],(r=i[t])==null||r.push(e))})}),this},handle(n,e,t){var a;const s=this._addHandlers,i=this._removeHandlers;if(s[n]||i[n])throw new Error(`Extension type ${n} already has a handler`);s[n]=e,i[n]=t;const r=this._queue;return r[n]&&((a=r[n])==null||a.forEach(l=>e(l)),delete r[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(n,e,t=-1){return this.handle(n,s=>{e.findIndex(r=>r.name===s.name)>=0||(e.push({name:s.name,value:s.ref}),e.sort((r,a)=>Ns(a.value,t)-Ns(r.value,t)))},s=>{const i=e.findIndex(r=>r.name===s.name);i!==-1&&e.splice(i,1)})},handleByList(n,e,t=-1){return this.handle(n,s=>{e.includes(s.ref)||(e.push(s.ref),e.sort((i,r)=>Ns(r,t)-Ns(i,t)))},s=>{const i=e.indexOf(s.ref);i!==-1&&e.splice(i,1)})},mixin(n,...e){for(const t of e)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(t))}},L_={extension:{type:Pe.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await js(()=>import("./Bxvr4F_B.js"),__vite__mapDeps([11,12,13,1,2,3,4,5,6,7]),import.meta.url)}},R_={extension:{type:Pe.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await js(()=>import("./CVVIbNoe.js"),__vite__mapDeps([13,1,2,3,4,5,6,7]),import.meta.url)}};class We{constructor(e,t,s){this._x=t||0,this._y=s||0,this._observer=e}clone(e){return new We(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}const O_=Math.PI*2,D_=180/Math.PI,F_=Math.PI/180;class lt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new lt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Zi.x=0,Zi.y=0,Zi}}const Zi=new lt;class he{constructor(e=1,t=0,s=0,i=1,r=0,a=0){this.array=null,this.a=e,this.b=t,this.c=s,this.d=i,this.tx=r,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,s,i,r,a){return this.a=e,this.b=t,this.c=s,this.d=i,this.tx=r,this.ty=a,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const s=t||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,t){t=t||new lt;const s=e.x,i=e.y;return t.x=this.a*s+this.c*i+this.tx,t.y=this.b*s+this.d*i+this.ty,t}applyInverse(e,t){t=t||new lt;const s=this.a,i=this.b,r=this.c,a=this.d,l=this.tx,u=this.ty,h=1/(s*a+r*-i),f=e.x,o=e.y;return t.x=a*h*f+-r*h*o+(u*r-l*a)*h,t.y=s*h*o+-i*h*f+(-u*s+l*i)*h,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),s=Math.sin(e),i=this.a,r=this.c,a=this.tx;return this.a=i*t-this.b*s,this.b=i*s+this.b*t,this.c=r*t-this.d*s,this.d=r*s+this.d*t,this.tx=a*t-this.ty*s,this.ty=a*s+this.ty*t,this}append(e){const t=this.a,s=this.b,i=this.c,r=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*s+e.b*r,this.c=e.c*t+e.d*i,this.d=e.c*s+e.d*r,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*s+e.ty*r+this.ty,this}appendFrom(e,t){const s=e.a,i=e.b,r=e.c,a=e.d,l=e.tx,u=e.ty,h=t.a,f=t.b,o=t.c,c=t.d;return this.a=s*h+i*o,this.b=s*f+i*c,this.c=r*h+a*o,this.d=r*f+a*c,this.tx=l*h+u*o+t.tx,this.ty=l*f+u*c+t.ty,this}setTransform(e,t,s,i,r,a,l,u,h){return this.a=Math.cos(l+h)*r,this.b=Math.sin(l+h)*r,this.c=-Math.sin(l-u)*a,this.d=Math.cos(l-u)*a,this.tx=e-(s*this.a+i*this.c),this.ty=t-(s*this.b+i*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,i=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,s=this.b,i=this.c,r=this.d,a=e.pivot,l=-Math.atan2(-i,r),u=Math.atan2(s,t),h=Math.abs(l+u);return h<1e-5||Math.abs(O_-h)<1e-5?(e.rotation=u,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=l,e.skew.y=u),e.scale.x=Math.sqrt(t*t+s*s),e.scale.y=Math.sqrt(i*i+r*r),e.position.x=this.tx+(a.x*t+a.y*i),e.position.y=this.ty+(a.x*s+a.y*r),e}invert(){const e=this.a,t=this.b,s=this.c,i=this.d,r=this.tx,a=e*i-t*s;return this.a=i/a,this.b=-t/a,this.c=-s/a,this.d=e/a,this.tx=(s*this.ty-i*r)/a,this.ty=-(e*this.ty-t*r)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new he;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return N_.identity()}static get shared(){return G_.identity()}}const G_=new he,N_=new he,jt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Kt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],qt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Jt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Mr=[],ql=[],Us=Math.sign;function U_(){for(let n=0;n<16;n++){const e=[];Mr.push(e);for(let t=0;t<16;t++){const s=Us(jt[n]*jt[t]+qt[n]*Kt[t]),i=Us(Kt[n]*jt[t]+Jt[n]*Kt[t]),r=Us(jt[n]*qt[t]+qt[n]*Jt[t]),a=Us(Kt[n]*qt[t]+Jt[n]*Jt[t]);for(let l=0;l<16;l++)if(jt[l]===s&&Kt[l]===i&&qt[l]===r&&Jt[l]===a){e.push(l);break}}}for(let n=0;n<16;n++){const e=new he;e.set(jt[n],Kt[n],qt[n],Jt[n],0,0),ql.push(e)}}U_();const de={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>jt[n],uY:n=>Kt[n],vX:n=>qt[n],vY:n=>Jt[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>Mr[n][e],sub:(n,e)=>Mr[n][de.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?de.S:de.N:Math.abs(e)*2<=Math.abs(n)?n>0?de.E:de.W:e>0?n>0?de.SE:de.SW:n>0?de.NE:de.NW,matrixAppendRotationInv:(n,e,t=0,s=0)=>{const i=ql[de.inv(e)];i.tx=t,i.ty=s,n.append(i)}},Ws=[new lt,new lt,new lt,new lt];class ct{constructor(e=0,t=0,s=0,i=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(s),this.height=Number(i)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new ct(0,0,0,0)}clone(){return new ct(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,s,i=.5){const{width:r,height:a}=this;if(r<=0||a<=0)return!1;const l=this.x,u=this.y,h=s*(1-i),f=s-h,o=l-h,c=l+r+h,d=u-h,p=u+a+h,_=l+f,y=l+r-f,g=u+f,v=u+a-f;return e>=o&&e<=c&&t>=d&&t<=p&&!(e>_&&e<y&&t>g&&t<v)}intersects(e,t){if(!t){const H=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=H)return!1;const Z=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>Z}const s=this.left,i=this.right,r=this.top,a=this.bottom;if(i<=s||a<=r)return!1;const l=Ws[0].set(e.left,e.top),u=Ws[1].set(e.left,e.bottom),h=Ws[2].set(e.right,e.top),f=Ws[3].set(e.right,e.bottom);if(h.x<=l.x||u.y<=l.y)return!1;const o=Math.sign(t.a*t.d-t.b*t.c);if(o===0||(t.apply(l,l),t.apply(u,u),t.apply(h,h),t.apply(f,f),Math.max(l.x,u.x,h.x,f.x)<=s||Math.min(l.x,u.x,h.x,f.x)>=i||Math.max(l.y,u.y,h.y,f.y)<=r||Math.min(l.y,u.y,h.y,f.y)>=a))return!1;const c=o*(u.y-l.y),d=o*(l.x-u.x),p=c*s+d*r,_=c*i+d*r,y=c*s+d*a,g=c*i+d*a;if(Math.max(p,_,y,g)<=c*l.x+d*l.y||Math.min(p,_,y,g)>=c*f.x+d*f.y)return!1;const v=o*(l.y-h.y),x=o*(h.x-l.x),A=v*s+x*r,S=v*i+x*r,B=v*s+x*a,L=v*i+x*a;return!(Math.max(A,S,B,L)<=v*l.x+x*l.y||Math.min(A,S,B,L)>=v*f.x+x*f.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),r=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(s-t,0),this.y=i,this.height=Math.max(r-i,0),this}ceil(e=1,t=.001){const s=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=s-this.x,this.height=i-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),r=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=s-t,this.y=i,this.height=r-i,this}getBounds(e){return e||(e=new ct),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,s=e.y,i=e.x+e.width,r=e.y+e.height;return t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height&&i>=this.x&&i<this.x+this.width&&r>=this.y&&r<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Qi={default:-1};function Rt(n="default"){return Qi[n]===void 0&&(Qi[n]=-1),++Qi[n]}const ta={},Mn="8.0.0",nv="8.3.4";function St(n,e,t=3){if(ta[e])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`):(s=s.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${n}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`),console.warn(s))),ta[e]=!0}const Jl=()=>{};function na(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function sa(n){return!(n&n-1)&&!!n}function W_(n){const e={};for(const t in n)n[t]!==void 0&&(e[t]=n[t]);return e}const ia=Object.create(null);function $_(n){const e=ia[n];return e===void 0&&(ia[n]=Rt("resource")),e}const Zl=class Ql extends In{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...Ql.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){St(Mn,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=$_(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Zl.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let H_=Zl;const ec=class tc extends In{constructor(e={}){super(),this.options=e,this.uid=Rt("textureSource"),this._resourceType="textureSource",this._resourceId=Rt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...tc.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new H_(W_(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,s;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Rt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,s){s||(s=this._resolution),e||(e=this.width),t||(t=this.height);const i=Math.round(e*s),r=Math.round(t*s);return this.width=i/s,this.height=r/s,this._resolution=s,this.pixelWidth===i&&this.pixelHeight===r?!1:(this._refreshPOT(),this.pixelWidth=i,this.pixelHeight=r,this.emit("resize",this),this._resourceId=Rt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=sa(this.pixelWidth)&&sa(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};ec.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let pt=ec;class no extends pt{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let s=e.format;s||(t instanceof Float32Array?s="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?s="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?s="rgba16uint":(t instanceof Int8Array,s="bgra8unorm")),super({...e,resource:t,format:s}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}no.extension=Pe.TextureSource;const ra=new he;class z_{constructor(e,t){this.mapCoord=new he,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const s=this.mapCoord;for(let i=0;i<e.length;i+=2){const r=e[i],a=e[i+1];t[i]=r*s.a+a*s.c+s.tx,t[i+1]=r*s.b+a*s.d+s.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const s=e.orig,i=e.trim;i&&(ra.set(s.width/i.width,0,0,s.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(ra));const r=e.source,a=this.uClampFrame,l=this.clampMargin/r._resolution,u=this.clampOffset/r._resolution;return a[0]=(e.frame.x+l+u)/r.width,a[1]=(e.frame.y+l+u)/r.height,a[2]=(e.frame.x+e.frame.width-l+u)/r.width,a[3]=(e.frame.y+e.frame.height-l+u)/r.height,this.uClampOffset[0]=this.clampOffset/r.pixelWidth,this.uClampOffset[1]=this.clampOffset/r.pixelHeight,this.isSimple=e.frame.width===r.width&&e.frame.height===r.height&&e.rotate===0,!0}}class be extends In{constructor({source:e,label:t,frame:s,orig:i,trim:r,defaultAnchor:a,defaultBorders:l,rotate:u,dynamic:h}={}){if(super(),this.uid=Rt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new ct,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(e==null?void 0:e.source)??new pt,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:f,height:o}=this._source;this.frame.width=f,this.frame.height=o}this.orig=i||this.frame,this.trim=r,this.rotate=u??0,this.defaultAnchor=a,this.defaultBorders=l,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new z_(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:s,height:i}=this._source,r=t.x/s,a=t.y/i,l=t.width/s,u=t.height/i;let h=this.rotate;if(h){const f=l/2,o=u/2,c=r+f,d=a+o;h=de.add(h,de.NW),e.x0=c+f*de.uX(h),e.y0=d+o*de.uY(h),h=de.add(h,2),e.x1=c+f*de.uX(h),e.y1=d+o*de.uY(h),h=de.add(h,2),e.x2=c+f*de.uX(h),e.y2=d+o*de.uY(h),h=de.add(h,2),e.x3=c+f*de.uX(h),e.y3=d+o*de.uY(h)}else e.x0=r,e.y0=a,e.x1=r+l,e.y1=a,e.x2=r+l,e.y2=a+u,e.x3=r,e.y3=a+u}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return St(Mn,"Texture.baseTexture is now Texture.source"),this._source}}be.EMPTY=new be({label:"EMPTY",source:new pt({label:"EMPTY"})});be.EMPTY.destroy=Jl;be.WHITE=new be({source:new no({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});be.WHITE.destroy=Jl;function Y_(n,e,t){const{width:s,height:i}=t.orig,r=t.trim;if(r){const a=r.width,l=r.height;n.minX=r.x-e._x*s,n.maxX=n.minX+a,n.minY=r.y-e._y*i,n.maxY=n.minY+l}else n.minX=-e._x*s,n.maxX=n.minX+s,n.minY=-e._y*i,n.maxY=n.minY+i}const oa=new he;class Gt{constructor(e=1/0,t=1/0,s=-1/0,i=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=oa,this.minX=e,this.minY=t,this.maxX=s,this.maxY=i}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new ct);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=oa,this}set(e,t,s,i){this.minX=e,this.minY=t,this.maxX=s,this.maxY=i}addFrame(e,t,s,i,r){r||(r=this.matrix);const a=r.a,l=r.b,u=r.c,h=r.d,f=r.tx,o=r.ty;let c=this.minX,d=this.minY,p=this.maxX,_=this.maxY,y=a*e+u*t+f,g=l*e+h*t+o;y<c&&(c=y),g<d&&(d=g),y>p&&(p=y),g>_&&(_=g),y=a*s+u*t+f,g=l*s+h*t+o,y<c&&(c=y),g<d&&(d=g),y>p&&(p=y),g>_&&(_=g),y=a*e+u*i+f,g=l*e+h*i+o,y<c&&(c=y),g<d&&(d=g),y>p&&(p=y),g>_&&(_=g),y=a*s+u*i+f,g=l*s+h*i+o,y<c&&(c=y),g<d&&(d=g),y>p&&(p=y),g>_&&(_=g),this.minX=c,this.minY=d,this.maxX=p,this.maxY=_}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,s=this.minY,i=this.maxX,r=this.maxY,{a,b:l,c:u,d:h,tx:f,ty:o}=e;let c=a*t+u*s+f,d=l*t+h*s+o;this.minX=c,this.minY=d,this.maxX=c,this.maxY=d,c=a*i+u*s+f,d=l*i+h*s+o,this.minX=c<this.minX?c:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=d>this.maxY?d:this.maxY,c=a*t+u*r+f,d=l*t+h*r+o,this.minX=c<this.minX?c:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=d>this.maxY?d:this.maxY,c=a*i+u*r+f,d=l*i+h*r+o,this.minX=c<this.minX?c:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=d>this.maxY?d:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,s,i){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<s&&(this.minY=s),this.maxY>i&&(this.maxY=i),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Gt(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,s,i){let r=this.minX,a=this.minY,l=this.maxX,u=this.maxY;i||(i=this.matrix);const h=i.a,f=i.b,o=i.c,c=i.d,d=i.tx,p=i.ty;for(let _=t;_<s;_+=2){const y=e[_],g=e[_+1],v=h*y+o*g+d,x=f*y+c*g+p;r=v<r?v:r,a=x<a?x:a,l=v>l?v:l,u=x>u?x:u}this.minX=r,this.minY=a,this.maxX=l,this.maxY=u}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}$u([Hu]);const En=class Hn{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Hn)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const s=typeof e;if(s!==typeof t)return!1;if(s==="number"||s==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((r,a)=>r===t[a]);if(e!==null&&t!==null){const r=Object.keys(e),a=Object.keys(t);return r.length!==a.length?!1:r.every(l=>e[l]===t[l])}return e===t}toRgba(){const[e,t,s,i]=this._components;return{r:e,g:t,b:s,a:i}}toRgb(){const[e,t,s]=this._components;return{r:e,g:t,b:s}}toRgbaString(){const[e,t,s]=this.toUint8RgbArray();return`rgba(${e},${t},${s},${this.alpha})`}toUint8RgbArray(e){const[t,s,i]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(s*255),e[2]=Math.round(i*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,s,i,r]=this._components;return e[0]=t,e[1]=s,e[2]=i,e[3]=r,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,s,i]=this._components;return e[0]=t,e[1]=s,e[2]=i,e}toNumber(){return this._int}toBgrNumber(){const[e,t,s]=this.toUint8RgbArray();return(s<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,s,i,r]=Hn._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=s,this._components[2]*=i,this._components[3]*=r,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let s=this._int>>16&255,i=this._int>>8&255,r=this._int&255;return t&&(s=s*e+.5|0,i=i*e+.5|0,r=r*e+.5|0),(e*255<<24)+(s<<16)+(i<<8)+r}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,s,i,r;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const a=e;t=(a>>16&255)/255,s=(a>>8&255)/255,i=(a&255)/255,r=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,s,i,r=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,s,i,r=255]=e,t/=255,s/=255,i/=255,r/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const l=Hn.HEX_PATTERN.exec(e);l&&(e=`#${l[2]}`)}const a=Wu(e);a.isValid()&&({r:t,g:s,b:i,a:r}=a.rgba,t/=255,s/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=s,this._components[2]=i,this._components[3]=r,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,s]=this._components;this._int=(e*255<<16)+(t*255<<8)+(s*255|0)}_clamp(e,t=0,s=1){return typeof e=="number"?Math.min(Math.max(e,t),s):(e.forEach((i,r)=>{e[r]=Math.min(Math.max(i,t),s)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Hn||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};En.shared=new En;En._temp=new En;En.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let X_=En;const V_={cullArea:null,cullable:!1,cullableChildren:!0};class so{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var s;let t;return this._index>0?t=this._pool[--this._index]:t=new this._classType,(s=t.init)==null||s.call(t,e),t}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class j_{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new so(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const s=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[s]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}}const ui=new j_,K_={get isCachedAsTexture(){var n;return!!((n=this.renderGroup)!=null&&n.isCachedAsTexture)},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){var n;(n=this.renderGroup)==null||n.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){St("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function q_(n,e,t){const s=n.length;let i;if(e>=s||t===0)return;t=e+t>s?s-e:t;const r=s-t;for(i=e;i<r;++i)n[i]=n[i+t];n.length=r}const J_={allowChildren:!0,removeChildren(n=0,e){var r;const t=e??this.children.length,s=t-n,i=[];if(s>0&&s<=t){for(let l=t-1;l>=n;l--){const u=this.children[l];u&&(i.push(u),u.parent=null)}q_(this.children,n,t);const a=this.renderGroup||this.parentRenderGroup;a&&a.removeChildren(i);for(let l=0;l<i.length;++l){const u=i[l];(r=u.parentRenderLayer)==null||r.detach(u),this.emit("childRemoved",u,this,l),i[l].emit("removed",this)}return i.length>0&&this._didViewChangeTick++,i}else if(s===0&&this.children.length===0)return i;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const e=this.getChildAt(n);return this.removeChild(e)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,e)},getChildIndex(n){const e=this.children.indexOf(n);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(n,e){this.allowChildren||St(Mn,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${n}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(n.parent){const i=n.parent.children.indexOf(n);if(n.parent===this&&i===e)return n;i!==-1&&n.parent.children.splice(i,1)}e===t.length?t.push(n):t.splice(e,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,e),n.emit("added",this),n},swapChildren(n,e){if(n===e)return;const t=this.getChildIndex(n),s=this.getChildIndex(e);this.children[t]=e,this.children[s]=n;const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var n;(n=this.parent)==null||n.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(e=>this.reparentChildAt(e,this.children.length)),n[0])},reparentChildAt(n,e){if(n.parent===this)return this.setChildIndex(n,e),n;const t=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,e);const s=this.worldTransform.clone();return s.invert(),t.prepend(s),n.setFromMatrix(t),n}},Z_={collectRenderables(n,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,e,t))},collectRenderablesSimple(n,e,t){const s=this.children,i=s.length;for(let r=0;r<i;r++)s[r].collectRenderables(n,e,t)},collectRenderablesWithEffects(n,e,t){const{renderPipes:s}=e;for(let i=0;i<this.effects.length;i++){const r=this.effects[i];s[r.pipe].push(r,this,n)}this.collectRenderablesSimple(n,e,t);for(let i=this.effects.length-1;i>=0;i--){const r=this.effects[i];s[r.pipe].pop(r,this,n)}}};class aa{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class Q_{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const s=this._tests[t];if(s.test(e))return ui.get(s.maskClass,e)}return e}returnMaskEffect(e){ui.return(e)}}const Er=new Q_;dn.handleByList(Pe.MaskEffect,Er._effectClasses);const ey={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((t,s)=>t.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const e=this.effects.indexOf(n);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const e=this._maskEffect;(e==null?void 0:e.mask)!==n&&(e&&(this.removeEffect(e),Er.returnMaskEffect(e),this._maskEffect=null),n!=null&&(this._maskEffect=Er.getMaskEffect(n),this.addEffect(this._maskEffect)))},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},get mask(){var n;return(n=this._maskEffect)==null?void 0:n.mask},set filters(n){var r;!Array.isArray(n)&&n&&(n=[n]);const e=this._filterEffect||(this._filterEffect=new aa);n=n;const t=(n==null?void 0:n.length)>0,s=((r=e.filters)==null?void 0:r.length)>0,i=t!==s;n=Array.isArray(n)?n.slice(0):n,e.filters=Object.freeze(n),i&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=n??null))},get filters(){var n;return(n=this._filterEffect)==null?void 0:n.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new aa),this._filterEffect.filterArea=n},get filterArea(){var n;return(n=this._filterEffect)==null?void 0:n.filterArea}},ty={label:null,get name(){return St(Mn,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){St(Mn,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,e=!1){return this.getChildByLabel(n,e)},getChildByLabel(n,e=!1){const t=this.children;for(let s=0;s<t.length;s++){const i=t[s];if(i.label===n||n instanceof RegExp&&n.test(i.label))return i}if(e)for(let s=0;s<t.length;s++){const r=t[s].getChildByLabel(n,!0);if(r)return r}return null},getChildrenByLabel(n,e=!1,t=[]){const s=this.children;for(let i=0;i<s.length;i++){const r=s[i];(r.label===n||n instanceof RegExp&&n.test(r.label))&&t.push(r)}if(e)for(let i=0;i<s.length;i++)s[i].getChildrenByLabel(n,!0,t);return t}},Ce=new so(he),vt=new so(Gt),ny=new he,sy={getFastGlobalBounds(n,e){e||(e=new Gt),e.clear(),this._getGlobalBoundsRecursive(!!n,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(n,e,t){let s=e;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const i=!!this.effects.length;if((this.renderGroup||i)&&(s=vt.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const a=this.bounds;s.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}const r=this.children;for(let a=0;a<r.length;a++)r[a]._getGlobalBoundsRecursive(n,s,t)}if(i){let r=!1;const a=this.renderGroup||this.parentRenderGroup;for(let l=0;l<this.effects.length;l++)this.effects[l].addBounds&&(r||(r=!0,s.applyMatrix(a.worldTransform)),this.effects[l].addBounds(s,!0));r&&(s.applyMatrix(a.worldTransform.copyTo(ny).invert()),e.addBounds(s,this.relativeGroupTransform)),e.addBounds(s),vt.return(s)}else this.renderGroup&&(e.addBounds(s,this.relativeGroupTransform),vt.return(s))}};function nc(n,e,t){t.clear();let s,i;return n.parent?e?s=n.parent.worldTransform:(i=Ce.get().identity(),s=io(n,i)):s=he.IDENTITY,sc(n,t,s,e),i&&Ce.return(i),t.isValid||t.set(0,0,0,0),t}function sc(n,e,t,s){var l,u;if(!n.visible||!n.measurable)return;let i;s?i=n.worldTransform:(n.updateLocalTransform(),i=Ce.get(),i.appendFrom(n.localTransform,t));const r=e,a=!!n.effects.length;if(a&&(e=vt.get().clear()),n.boundsArea)e.addRect(n.boundsArea,i);else{n.bounds&&(e.matrix=i,e.addBounds(n.bounds));for(let h=0;h<n.children.length;h++)sc(n.children[h],e,i,s)}if(a){for(let h=0;h<n.effects.length;h++)(u=(l=n.effects[h]).addBounds)==null||u.call(l,e);r.addBounds(e,he.IDENTITY),vt.return(e)}s||Ce.return(i)}function io(n,e){const t=n.parent;return t&&(io(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function iy(n,e){if(n===16777215||!e)return e;if(e===16777215||!n)return n;const t=n>>16&255,s=n>>8&255,i=n&255,r=e>>16&255,a=e>>8&255,l=e&255,u=t*r/255|0,h=s*a/255|0,f=i*l/255|0;return(u<<16)+(h<<8)+f}const la=16777215;function ca(n,e){return n===la?e:e===la?n:iy(n,e)}function Vs(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const ry={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(n,e){if(e)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const t=io(this,Ce.get().identity());return n.appendFrom(this.localTransform,t),Ce.return(t),n},getGlobalTint(n){if(n)return this.renderGroup?Vs(this.renderGroup.worldColor):this.parentRenderGroup?Vs(ca(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=ca(e,t.localColor),t=t.parent;return Vs(e)}};let er=0;const ua=500;function nn(...n){er!==ua&&(er++,er===ua?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}function ic(n,e,t){return e.clear(),t||(t=he.IDENTITY),rc(n,e,t,n,!0),e.isValid||e.set(0,0,0,0),e}function rc(n,e,t,s,i){var u,h;let r;if(i)r=Ce.get(),r=t.copyTo(r);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const f=n.localTransform;r=Ce.get(),r.appendFrom(f,t)}const a=e,l=!!n.effects.length;if(l&&(e=vt.get().clear()),n.boundsArea)e.addRect(n.boundsArea,r);else{n.renderPipeId&&(e.matrix=r,e.addBounds(n.bounds));const f=n.children;for(let o=0;o<f.length;o++)rc(f[o],e,r,s,!1)}if(l){for(let f=0;f<n.effects.length;f++)(h=(u=n.effects[f]).addLocalBounds)==null||h.call(u,e,s);a.addBounds(e,he.IDENTITY),vt.return(e)}Ce.return(r)}function oc(n,e){const t=n.children;for(let s=0;s<t.length;s++){const i=t[s],r=i.uid,a=(i._didViewChangeTick&65535)<<16|i._didContainerChangeTick&65535,l=e.index;(e.data[l]!==r||e.data[l+1]!==a)&&(e.data[e.index]=r,e.data[e.index+1]=a,e.didChange=!0),e.index=l+2,i.children.length&&oc(i,e)}return e.didChange}const oy=new he,ay={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=n/e*t:this.scale.x=t},_setHeight(n,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=n/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Gt});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),oc(this,n),n.didChange&&ic(this,n.localBounds,oy),n.localBounds},getBounds(n,e){return nc(this,n,e||new Gt)}},ly={_onRender:null,set onRender(n){const e=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},cy={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(uy))}};function uy(n,e){return n._zIndex-e._zIndex}const dy={getGlobalPosition(n=new lt,e=!1){return this.parent?this.parent.toGlobal(this._position,n,e):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,e,t=!1){const s=this.getGlobalTransform(Ce.get(),t);return e=s.apply(n,e),Ce.return(s),e},toLocal(n,e,t,s){e&&(n=e.toGlobal(n,t,s));const i=this.getGlobalTransform(Ce.get(),s);return t=i.applyInverse(n,t),Ce.return(i),t}};class hy{constructor(){this.uid=Rt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let fy=0;class my{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1}createTexture(e,t,s){const i=new pt({...this.textureOptions,width:e,height:t,resolution:1,antialias:s,autoGarbageCollect:!1});return new be({source:i,label:`texturePool_${fy++}`})}getOptimalTexture(e,t,s=1,i){let r=Math.ceil(e*s-1e-6),a=Math.ceil(t*s-1e-6);r=na(r),a=na(a);const l=(r<<17)+(a<<1)+(i?1:0);this._texturePool[l]||(this._texturePool[l]=[]);let u=this._texturePool[l].pop();return u||(u=this.createTexture(r,a,i)),u.source._resolution=s,u.source.width=r/s,u.source.height=a/s,u.source.pixelWidth=r,u.source.pixelHeight=a,u.frame.x=0,u.frame.y=0,u.frame.width=e,u.frame.height=t,u.updateUvs(),this._poolKeyHash[u.uid]=l,u}getSameSizeTexture(e,t=!1){const s=e.source;return this.getOptimalTexture(e.width,e.height,s._resolution,t)}returnTexture(e){const t=this._poolKeyHash[e.uid];this._texturePool[t].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const s=this._texturePool[t];if(s)for(let i=0;i<s.length;i++)s[i].destroy(!0)}this._texturePool={}}}const py=new my;class _y{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new he,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new hy,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let s=0;s<t.length;s++){const i=t[s];i._updateFlags=15,this.addChild(i)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(py.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let s=0;s<t.length;s++)this.addChild(t[s])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let s=0;s<t.length;s++)this.removeChild(t[s])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let s=0;s<t.length;s++)this._getChildren(t[s],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const s=e.children;for(let i=0;i<s.length;i++)this._getChildren(s[i],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new he),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new he),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new he),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function yy(n,e,t={}){for(const s in e)!t[s]&&e[s]!==void 0&&(n[s]=e[s])}const tr=new We(null),nr=new We(null),sr=new We(null,1,1),da=1,gy=2,ir=4;class ls extends In{constructor(e={}){var t,s;super(),this.uid=Rt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new he,this.relativeGroupTransform=new he,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new We(this,0,0),this._scale=sr,this._pivot=nr,this._skew=tr,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],yy(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(i=>this.addChild(i)),(s=e.parent)==null||s.addChild(this)}static mixin(e){St("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),dn.mixin(ls,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||St(Mn,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let i=0;i<e.length;i++)this.addChild(e[i]);return e[0]}const t=e[0],s=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),s&&(s.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,s&&s.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let i=0;i<e.length;i++)this.removeChild(e[i]);return e[0]}const t=e[0],s=this.children.indexOf(t);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,s),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=ui.get(_y,this),this.groupTransform=he.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),ui.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new he),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*D_}set angle(e){this.rotation=e*F_}get pivot(){return this._pivot===nr&&(this._pivot=new We(this,0,0)),this._pivot}set pivot(e){this._pivot===nr&&(this._pivot=new We(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===tr&&(this._skew=new We(this,0,0)),this._skew}set skew(e){this._skew===tr&&(this._skew=new We(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===sr&&(this._scale=new We(this,1,1)),this._scale}set scale(e){this._scale===sr&&(this._scale=new We(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const s=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,s=this._scale,i=this._pivot,r=this._position,a=s._x,l=s._y,u=i._x,h=i._y;t.a=this._cx*a,t.b=this._sx*a,t.c=this._cy*l,t.d=this._sy*l,t.tx=r._x-(u*t.a+h*t.c),t.ty=r._y-(u*t.b+h*t.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=da,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const s=X_.shared.setValue(e??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=da,this._onUpdate())}get tint(){return Vs(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=gy,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ir,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=ir,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=ir,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var i;if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&t)for(let r=0;r<t.length;++r)t[r].destroy(e);(i=this.renderGroup)==null||i.destroy(),this.renderGroup=null}}dn.mixin(ls,J_,sy,dy,ly,ay,ey,ty,cy,V_,K_,ry,Z_);class vy extends ls{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new Gt(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:s,y:i}=e;return s>=t.minX&&s<=t.maxX&&i>=t.minY&&i<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,s){const{renderPipes:i,renderableGC:r}=t;i.blendMode.setBlendMode(this,this.groupBlendMode,e),i[this.renderPipeId].addRenderable(this,e),r.addRenderable(this),this.didViewUpdate=!1;const l=this.children,u=l.length;for(let h=0;h<u;h++)l[h].collectRenderables(e,t,s)}}class jn extends vy{constructor(e=be.EMPTY){e instanceof be&&(e={texture:e});const{texture:t=be.EMPTY,anchor:s,roundPixels:i,width:r,height:a,...l}=e;super({label:"Sprite",...l}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new We({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=i??!1,r!==void 0&&(this.width=r),a!==void 0&&(this.height=a)}static from(e,t=!1){return e instanceof be?new jn(e):new jn(be.from(e,t))}set texture(e){e||(e=be.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Y_(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return St("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,s=this._bounds,{width:i,height:r}=t.orig;s.minX=-e._x*i,s.maxX=s.minX+i,s.minY=-e._y*r,s.maxY=s.minY+r}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const by=new Gt;function ac(n,e,t){const s=by;n.measurable=!0,nc(n,t,s),e.addBoundsMask(s),n.measurable=!1}function lc(n,e,t){const s=vt.get();n.measurable=!0;const i=Ce.get().identity(),r=cc(n,t,i);ic(n,s,r),n.measurable=!1,e.addBoundsMask(s),Ce.return(i),vt.return(s)}function cc(n,e,t){return n?(n!==e&&(cc(n.parent,e,t),n.updateLocalTransform(),t.append(n.localTransform)),t):(nn("Mask bounds, renderable is not inside the root container"),t)}class uc{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof jn),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,t){this.inverse||ac(this.mask,e,t)}addLocalBounds(e,t){lc(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof jn}}uc.extension=Pe.MaskEffect;class dc{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}dc.extension=Pe.MaskEffect;class hc{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,t){ac(this.mask,e,t)}addLocalBounds(e,t){lc(this.mask,e,t)}containsPoint(e,t){const s=this.mask;return t(s,e)}destroy(){this.reset()}static test(e){return e instanceof ls}}hc.extension=Pe.MaskEffect;const xy={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let ha=xy;const ro={get(){return ha},set(n){ha=n}};class fc extends pt{constructor(e){e.resource||(e.resource=ro.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,s=this._resolution){const i=super.resize(e,t,s);return i&&this.resizeCanvas(),i}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}fc.extension=Pe.TextureSource;class mc extends pt{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){const t=ro.get().createCanvas(e.resource.width,e.resource.height);t.getContext("2d").drawImage(e.resource,0,0,e.resource.width,e.resource.height),e.resource=t,nn("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}mc.extension=Pe.TextureSource;var Ir=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Ir||{});class rr{constructor(e,t=null,s=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=s,this._once=i}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const pc=class Ue{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new rr(null,null,1/0),this.deltaMS=1/Ue.targetFPMS,this.elapsedMS=1/Ue.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,s=Ir.NORMAL){return this._addListener(new rr(e,t,s))}addOnce(e,t,s=Ir.NORMAL){return this._addListener(new rr(e,t,s,!0))}_addListener(e){let t=this._head.next,s=this._head;if(!t)e.connect(s);else{for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,t){let s=this._head.next;for(;s;)s.match(e,t)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Ue.targetFPMS;const s=this._head;let i=s.next;for(;i;)i=i.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,t)/1e3,Ue.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Ue._shared){const e=Ue._shared=new Ue;e.autoStart=!0,e._protected=!0}return Ue._shared}static get system(){if(!Ue._system){const e=Ue._system=new Ue;e.autoStart=!0,e._protected=!0}return Ue._system}};pc.targetFPMS=.06;let $s=pc,or;async function wy(){return or??(or=(async()=>{var a;const e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(l=>{const u=document.createElement("video");u.onloadeddata=()=>l(u),u.onerror=()=>l(null),u.autoplay=!1,u.crossOrigin="anonymous",u.preload="auto",u.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",u.load()});if(!t)return"premultiply-alpha-on-upload";const s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const r=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,r),e.deleteFramebuffer(i),e.deleteTexture(s),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),r[0]<=r[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),or}const wi=class _c extends pt{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={..._c.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=$s.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await wy(),this._load=new Promise((s,i)=>{this.isValid?s(this):(this._resolve=s,this._reject=i,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&($s.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||($s.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&($s.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};wi.extension=Pe.TextureSource;wi.defaultOptions={...pt.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};wi.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Sy=wi;const pn=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(s=>typeof s=="string"||t?e(s):s):n);class Ay{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||nn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const s=pn(e);let i;for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];if(h.test(t)){i=h.getCacheableAssets(s,t);break}}const r=new Map(Object.entries(i||{}));i||s.forEach(u=>{r.set(u,t)});const a=[...r.keys()],l={cacheKeys:a,keys:s};s.forEach(u=>{this._cacheMap.set(u,l)}),a.forEach(u=>{const h=i?i[u]:t;this._cache.has(u)&&this._cache.get(u)!==h&&nn("[Cache] already has key:",u),this._cache.set(u,r.get(u))})}remove(e){if(!this._cacheMap.has(e)){nn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(i=>{this._cache.delete(i)}),t.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const _n=new Ay,Cr=[];dn.handleByList(Pe.TextureSource,Cr);function yc(n={}){const e=n&&n.resource,t=e?n.resource:n,s=e?n:{resource:n};for(let i=0;i<Cr.length;i++){const r=Cr[i];if(r.test(t))return new r(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function Ty(n={},e=!1){const t=n&&n.resource,s=t?n.resource:n,i=t?n:{resource:n};if(!e&&_n.has(s))return _n.get(s);const r=new be({source:yc(i)});return r.on("destroy",()=>{_n.has(s)&&_n.remove(s)}),e||_n.set(s,r),r}function My(n,e=!1){return typeof n=="string"?_n.get(n):n instanceof pt?new be({source:n}):Ty(n,e)}be.from=My;pt.from=yc;dn.add(uc,dc,hc,Sy,mc,fc,no);var gc=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(gc||{});function et(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function $n(n){return n.split("?")[0].split("#")[0]}function Ey(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Iy(n,e,t){return n.replace(new RegExp(Ey(e),"g"),t)}function Cy(n,e){let t="",s=0,i=-1,r=0,a=-1;for(let l=0;l<=n.length;++l){if(l<n.length)a=n.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(i===l-1||r===1))if(i!==l-1&&r===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const u=t.lastIndexOf("/");if(u!==t.length-1){u===-1?(t="",s=0):(t=t.slice(0,u),s=t.length-1-t.lastIndexOf("/")),i=l,r=0;continue}}else if(t.length===2||t.length===1){t="",s=0,i=l,r=0;continue}}}else t.length>0?t+=`/${n.slice(i+1,l)}`:t=n.slice(i+1,l),s=l-i-1;i=l,r=0}else a===46&&r!==-1?++r:r=-1}return t}const Kn={toPosix(n){return Iy(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){et(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(et(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const s=$n(this.toPosix(e??ro.get().getBaseUrl())),i=$n(this.toPosix(t??this.rootname(s)));return n=this.toPosix(n),n.startsWith("/")?Kn.join(i,n.slice(1)):this.isAbsolute(n)?n:this.join(s,n)},normalize(n){if(et(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const s=n.endsWith("/");return n=Cy(n),n.length>0&&s&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return et(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const s=n[t];if(et(s),s.length>0)if(e===void 0)e=s;else{const i=n[t-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${s}`:e+=`/${s}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(et(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const t=e===47;let s=-1,i=!0;const r=this.getProtocol(n),a=n;n=n.slice(r.length);for(let l=n.length-1;l>=1;--l)if(e=n.charCodeAt(l),e===47){if(!i){s=l;break}}else i=!1;return s===-1?t?"/":this.isUrl(a)?r+n:r:t&&s===1?"//":r+n.slice(0,s)},rootname(n){et(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){et(n),e&&et(e),n=$n(this.toPosix(n));let t=0,s=-1,i=!0,r;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let a=e.length-1,l=-1;for(r=n.length-1;r>=0;--r){const u=n.charCodeAt(r);if(u===47){if(!i){t=r+1;break}}else l===-1&&(i=!1,l=r+1),a>=0&&(u===e.charCodeAt(a)?--a===-1&&(s=r):(a=-1,s=l))}return t===s?s=l:s===-1&&(s=n.length),n.slice(t,s)}for(r=n.length-1;r>=0;--r)if(n.charCodeAt(r)===47){if(!i){t=r+1;break}}else s===-1&&(i=!1,s=r+1);return s===-1?"":n.slice(t,s)},extname(n){et(n),n=$n(this.toPosix(n));let e=-1,t=0,s=-1,i=!0,r=0;for(let a=n.length-1;a>=0;--a){const l=n.charCodeAt(a);if(l===47){if(!i){t=a+1;break}continue}s===-1&&(i=!1,s=a+1),l===46?e===-1?e=a:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||s===-1||r===0||r===1&&e===s-1&&e===t+1?"":n.slice(e,s)},parse(n){et(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=$n(this.toPosix(n));let t=n.charCodeAt(0);const s=this.isAbsolute(n);let i;e.root=this.rootname(n),s||this.hasProtocol(n)?i=1:i=0;let r=-1,a=0,l=-1,u=!0,h=n.length-1,f=0;for(;h>=i;--h){if(t=n.charCodeAt(h),t===47){if(!u){a=h+1;break}continue}l===-1&&(u=!1,l=h+1),t===46?r===-1?r=h:f!==1&&(f=1):r!==-1&&(f=-1)}return r===-1||l===-1||f===0||f===1&&r===l-1&&r===a+1?l!==-1&&(a===0&&s?e.base=e.name=n.slice(1,l):e.base=e.name=n.slice(a,l)):(a===0&&s?(e.name=n.slice(1,r),e.base=n.slice(1,l)):(e.name=n.slice(a,r),e.base=n.slice(a,l)),e.ext=n.slice(r,l)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function vc(n,e,t,s,i){const r=e[t];for(let a=0;a<r.length;a++){const l=r[a];t<e.length-1?vc(n.replace(s[t],l),e,t+1,s,i):i.push(n.replace(s[t],l))}}function Py(n){const e=/\{(.*?)\}/g,t=n.match(e),s=[];if(t){const i=[];t.forEach(r=>{const a=r.substring(1,r.length-1).split(",");i.push(a)}),vc(n,i,0,t,s)}else s.push(n);return s}const fa=n=>!Array.isArray(n);class bc{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`).join("&")}}getAlias(e){const{alias:t,src:s}=e;return pn(t||s,r=>typeof r=="string"?r:Array.isArray(r)?r.map(a=>(a==null?void 0:a.src)??a):r!=null&&r.src?r.src:r,!0)}addManifest(e){this._manifest&&nn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const s=[];let i=t;Array.isArray(t)||(i=Object.entries(t).map(([r,a])=>typeof a=="string"||Array.isArray(a)?{alias:r,src:a}:{alias:r,...a})),i.forEach(r=>{const a=r.src,l=r.alias;let u;if(typeof l=="string"){const h=this._createBundleAssetId(e,l);s.push(h),u=[l,h]}else{const h=l.map(f=>this._createBundleAssetId(e,f));s.push(...h),u=[...l,...h]}this.add({...r,alias:u,src:a})}),this._bundles[e]=s}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let s;s=r=>{this.hasKey(r)&&nn(`[Resolver] already has key: ${r} overwriting`)},pn(t).forEach(r=>{const{src:a}=r;let{data:l,format:u,loadParser:h}=r;const f=pn(a).map(d=>typeof d=="string"?Py(d):Array.isArray(d)?d:[d]),o=this.getAlias(r);Array.isArray(o)?o.forEach(s):s(o);const c=[];f.forEach(d=>{d.forEach(p=>{let _={};if(typeof p!="object"){_.src=p;for(let y=0;y<this._parsers.length;y++){const g=this._parsers[y];if(g.test(p)){_=g.parse(p);break}}}else l=p.data??l,u=p.format??u,h=p.loadParser??h,_={..._,...p};if(!o)throw new Error(`[Resolver] alias is undefined for this asset: ${_.src}`);_=this._buildResolvedAsset(_,{aliases:o,data:l,format:u,loadParser:h}),c.push(_)})}),o.forEach(d=>{this._assetMap[d]=c})})}resolveBundle(e){const t=fa(e);e=pn(e);const s={};return e.forEach(i=>{const r=this._bundles[i];if(r){const a=this.resolve(r),l={};for(const u in a){const h=a[u];l[this._extractAssetIdFromBundle(i,u)]=h}s[i]=l}}),t?s[e[0]]:s}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const s={};for(const i in t)s[i]=t[i].src;return s}return t.src}resolve(e){const t=fa(e);e=pn(e);const s={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let r=this._assetMap[i];const a=this._getPreferredOrder(r);a==null||a.priority.forEach(l=>{a.params[l].forEach(u=>{const h=r.filter(f=>f[l]?f[l]===u:!1);h.length&&(r=h)})}),this._resolverHash[i]=r[0]}else this._resolverHash[i]=this._buildResolvedAsset({alias:[i],src:i},{});s[i]=this._resolverHash[i]}),t?s[e[0]]:s}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const s=e[t],i=this._preferredOrder.find(r=>r.params.format.includes(s.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:s,data:i,loadParser:r,format:a}=t;return(this._basePath||this._rootPath)&&(e.src=Kn.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=s??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=r??e.loadParser,e.format=a??e.format??ky(e.src),e}}bc.RETINA_PREFIX=/@([0-9\.]+)x/;function ky(n){return n.split(".").pop().split("?").shift().split("#").shift()}const ma=(n,e)=>{const t=e.split("?")[1];return t&&(n+=`?${t}`),n},xc=class zn{constructor(e,t){this.linkedSheets=[],this._texture=e instanceof be?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=t;const s=parseFloat(t.meta.scale);s?(this.resolution=s,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=zn.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const s=zn.BATCH_SIZE;for(;t-e<s&&t<this._frameKeys.length;){const i=this._frameKeys[t],r=this._frames[i],a=r.frame;if(a){let l=null,u=null;const h=r.trimmed!==!1&&r.sourceSize?r.sourceSize:r.frame,f=new ct(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);r.rotated?l=new ct(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):l=new ct(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),r.trimmed!==!1&&r.spriteSourceSize&&(u=new ct(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new be({source:this.textureSource,frame:l,orig:f,trim:u,rotate:r.rotated?2:0,defaultAnchor:r.anchor,defaultBorders:r.borders,label:i.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let s=0;s<e[t].length;s++){const i=e[t][s];this.animations[t].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*zn.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*zn.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};xc.BATCH_SIZE=1e3;let pa=xc;const By=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function wc(n,e,t){const s={};if(n.forEach(i=>{s[i]=e}),Object.keys(e.textures).forEach(i=>{s[i]=e.textures[i]}),!t){const i=Kn.dirname(n[0]);e.linkedSheets.forEach((r,a)=>{const l=wc([`${i}/${e.data.meta.related_multi_packs[a]}`],r,!0);Object.assign(s,l)})}return s}const Ly={extension:Pe.Asset,cache:{test:n=>n instanceof pa,getCacheableAssets:(n,e)=>wc(n,e,!1)},resolver:{extension:{type:Pe.ResolveParser,name:"resolveSpritesheet"},test:n=>{const t=n.split("?")[0].split("."),s=t.pop(),i=t.pop();return s==="json"&&By.includes(i)},parse:n=>{var t;const e=n.split(".");return{resolution:parseFloat(((t=bc.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:Pe.LoadParser,priority:gc.Normal,name:"spritesheetLoader"},async testParse(n,e){return Kn.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,t){var f,o;const{texture:s,imageFilename:i,textureOptions:r}=(e==null?void 0:e.data)??{};let a=Kn.dirname(e.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");let l;if(s instanceof be)l=s;else{const c=ma(a+(i??n.meta.image),e.src);l=(await t.load([{src:c,data:r}]))[c]}const u=new pa(l.source,n);await u.parse();const h=(f=n==null?void 0:n.meta)==null?void 0:f.related_multi_packs;if(Array.isArray(h)){const c=[];for(const p of h){if(typeof p!="string")continue;let _=a+p;(o=e.data)!=null&&o.ignoreMultiPack||(_=ma(_,e.src),c.push(t.load({src:_,data:{textureOptions:r,ignoreMultiPack:!0}})))}const d=await Promise.all(c);u.linkedSheets=d,d.forEach(p=>{p.linkedSheets=[u].concat(u.linkedSheets.filter(_=>_!==p))})}return u},async unload(n,e,t){await t.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};dn.add(Ly);dn.add(L_,R_);function Ry(n,e){I(e,!0);let t,s=U(q*e.symbolInfo.sizeRatios.width),i=U(!1),r=0,a;fe(()=>{var l;m(i)&&k(s,Y(t.current)),m(i)&&t.target===t.current&&(t.target===150&&(t.target=a),t.current===a&&(r+=1,r===e.controls.loopTimes?(k(i,!1),r=0,console.log("complted enitre animation"),(l=e.oncomplete)==null||l.call(e)):t.target=150))}),ge(()=>{t=new ke(q*e.symbolInfo.sizeRatios.width,{duration:e.controls.duration}),a=q*e.symbolInfo.sizeRatios.width,t.target=150,k(i,!0)}),fe(()=>{}),Se(n,{get key(){return e.symbolInfo.assetKey},get x(){return e.x},get y(){return e.y},anchor:.5,get width(){return m(s)},get height(){return m(s)}}),C()}function Sc(n,e){I(e,!0);const t=Q(),s=w(()=>bi({rawSymbol:e.rawSymbol,state:e.state})),i=w(()=>m(s).type==="sprite"),r=w(()=>m(s).type==="winAnime");var a=G(),l=M(a);{var u=f=>{B_(f,{get symbolInfo(){return m(s)},get x(){return e.x},get y(){return e.y},get oncomplete(){return e.oncomplete}})},h=f=>{var o=G(),c=M(o);{var d=_=>{Ry(_,{get symbolInfo(){return m(s)},get x(){return e.x},get y(){return e.y},get oncomplete(){return e.oncomplete},controls:{duration:250,loopTimes:4}})},p=_=>{const y=w(()=>Yl({rawSymbol:e.rawSymbol,state:e.state})),g=w(()=>e.state==="win"&&!["S","M"].includes(e.rawSymbol.name)),v=w(()=>({complete:e.oncomplete,event:(x,A)=>{var S,B;((S=A.data)==null?void 0:S.name)==="wildExplode"&&((B=t.eventEmitter)==null||B.broadcast({type:"soundOnce",name:"sfx_wild_explode"}))}}));k_(_,{get loop(){return e.loop},get symbolInfo(){return m(s)},get symbolBackgroundInfo(){return m(y)},get x(){return e.x},get y(){return e.y},get showWinFrame(){return m(g)},get listener(){return m(v)}})};$(c,_=>{m(r)?_(d):_(p,!1)},!0)}b(f,o)};$(l,f=>{m(i)?f(u):f(h,!1)})}b(n,a),C()}function Ac(n,e){I(e,!0);const t=nd(),s=w(()=>t.animate&&e.animating||!t.animate&&!e.animating),i=0,r=q*ri.y,a=w(()=>e.y>=i&&e.y<=r);var l=G(),u=M(l);{var h=f=>{we(f,{get x(){return e.x},get y(){return e.y},children:(o,c)=>{var d=G(),p=M(d);V(p,()=>e.children),b(o,d)},$$slots:{default:!0}})};$(u,f=>{m(s)&&m(a)&&f(h)})}b(n,l),C()}function Oy(n,e){I(e,!0);const t=w(()=>bi({rawSymbol:e.reelSymbol.rawSymbol,state:e.reelSymbol.symbolState})),s=w(()=>to(e.reelIndex)),i=w(()=>m(t).type==="spine"&&(e.reelSymbol.symbolState==="land"||e.reelSymbol.symbolState==="win"));Ac(n,{get x(){return m(s)},get y(){return e.reelSymbol.symbolY.current},get animating(){return m(i)},children:(r,a)=>{Sc(r,{get state(){return e.reelSymbol.symbolState},get rawSymbol(){return e.reelSymbol.rawSymbol},oncomplete:()=>{e.reelSymbol.symbolState==="win"&&e.reelSymbol.oncomplete(),e.reelSymbol.symbolState==="land"&&(e.reelSymbol.symbolState="static")}})},$$slots:{default:!0}}),C()}function _a(n,e){I(e,!1);const t=Q();xe();var s=G(),i=M(s);ht(i,1,()=>t.stateGame.board,bt,(r,a,l)=>{var u=G(),h=M(u);ht(h,1,()=>m(a).reelState.symbols,bt,(f,o)=>{Oy(f,{reelIndex:l,get reelSymbol(){return m(o)}})}),b(r,u)}),b(n,s),C()}var Dy=E("<!> <!>",1),Fy=E("<!> <!>",1);function Gy(n,e){I(e,!0);const t=Q();let s=U(!0);t.eventEmitter.subscribeOnMount({stopButtonClick:()=>t.stateGameDerived.enhancedBoard.stop(),boardSettle:({board:l})=>t.stateGameDerived.enhancedBoard.settle(l),boardShow:()=>k(s,!0),boardHide:()=>k(s,!1),boardWithAnimateSymbols:async({symbolPositions:l})=>{const u=()=>l.map(async h=>{const f=t.stateGame.board[h.reel].reelState.symbols[h.row];f.symbolState="win",await ze(o=>f.oncomplete=o),f.symbolState="postWinStatic"});await Promise.all(u())},boardWithMovingMultiplierTexts:()=>{t.stateGame.board.forEach(l=>{l.reelState.symbols.forEach(u=>{u.rawSymbol.name==="M"&&(u.rawSymbol={...u.rawSymbol,name:"M_TAKEN"})})})}}),t.stateGameDerived.enhancedBoard.readyToSpinEffect();var i=G(),r=M(i);{var a=l=>{var u=Fy(),h=M(u);Js(h,{animate:!1,children:(o,c)=>{wt(o,{children:(d,p)=>{var _=Dy(),y=M(_);Vl(y,{});var g=T(y,2);_a(g,{}),b(d,_)},$$slots:{default:!0}})},$$slots:{default:!0}});var f=T(h,2);Js(f,{animate:!0,children:(o,c)=>{wt(o,{children:(d,p)=>{_a(d,{})},$$slots:{default:!0}})},$$slots:{default:!0}}),b(l,u)};$(r,l=>{m(s)&&l(a)})}b(n,i),C()}function Ny(n,e){I(e,!0);const t=Q();let s=U("anticipation_intro");fe(()=>{e.reel.reelState.motion==="stopped"&&k(s,"anticipation_out")});const i=w(()=>t.stateGameDerived.boardLayout().x-t.stateGameDerived.boardLayout().width*.5+(e.reel.reelIndex+Rl)*q),r=w(()=>t.stateGameDerived.boardLayout().y-q*.06);Je(n,{key:"anticipation",width:q*.56,get x(){return m(i)},get y(){return m(r)},children:(a,l)=>{const u=w(()=>m(s)==="anticipation_loop"),h=w(()=>ae.timeScale());Ze(a,{trackIndex:0,get animationName(){return m(s)},get loop(){return m(u)},get timeScale(){return m(h)},listener:{complete:()=>{m(s)==="anticipation_intro"&&k(s,"anticipation_loop"),m(s)==="anticipation_out"&&e.oncomplete()}}})},$$slots:{default:!0}}),C()}var Uy=E("<!> <!>",1);function Wy(n,e){I(e,!0);const t=Q(),s=w(()=>t.stateGame.board.some(u=>u.reelState.anticipating));var i=Uy(),r=M(i);{var a=u=>{Dr(u,{onmount:()=>(t.eventEmitter.broadcast({type:"soundLoop",name:"sfx_anticipation"}),t.eventEmitter.broadcast({type:"soundFade",name:"sfx_anticipation",from:0,to:1,duration:Le}),()=>{t.eventEmitter.broadcast({type:"soundStop",name:"sfx_anticipation"})})})};$(r,u=>{m(s)&&u(a)})}var l=T(r,2);ht(l,17,()=>t.stateGame.board,bt,(u,h,f)=>{var o=G(),c=M(o);{var d=p=>{Ny(p,{get reel(){return m(h)},oncomplete:()=>m(h).reelState.anticipating=!1})};$(c,p=>{m(h).reelState.anticipating&&p(d)})}b(u,o)}),b(n,i),C()}function $y(n,e){I(e,!0);const t=Q(),s=new ke(0),i=new ke(1);let r=U(!0),a=U(e.win.mult>1);ge(async()=>{await ut(Le/ae.timeScale()),k(a,!1)}),ge(async()=>{m(a)&&(await ut(Le),t.eventEmitter.broadcast({type:"soundOnce",name:"sfx_multiplier_combine_a"}),await i.set(.1,{duration:200/ae.timeScale()}),await i.set(1,{duration:200/ae.timeScale()}))}),ge(async()=>{await s.set(-200,{duration:Le*2/ae.timeScale()}),k(r,!1)}),dt(n,{get show(){return m(r)},oncomplete:()=>{m(r)||e.win.oncomplete()},children:(l,u)=>{const h=w(()=>q*(e.win.reel+.5)),f=w(()=>q*(e.win.row-.5)+s.current),o=w(()=>m(a)?`${on(e.win.win)} X ${e.win.mult}`:on(e.win.result));ft(l,{get x(){return m(h)},get y(){return m(f)},get scale(){return i.current},get text(){return m(o)},anchor:.5,style:{fontFamily:"gold",fontSize:q*.5}})},$$slots:{default:!0}}),C()}function Hy(n,e){I(e,!0);const t=Q();let s=U(Y([]));t.eventEmitter.subscribeOnMount({showClusterWinAmounts:async i=>{k(s,Y(i.wins.map(a=>({...a,oncomplete:()=>{}}))));const r=()=>m(s).map(async a=>{await ze(l=>a.oncomplete=l)});await Promise.all(r()),k(s,Y([]))}}),wt(n,{children:(i,r)=>{var a=G(),l=M(a);ht(l,17,()=>m(s),bt,(u,h)=>{$y(u,{get win(){return m(h)}})}),b(i,a)},$$slots:{default:!0}}),C()}function zy(n,e){I(e,!0);const t=w(()=>bi({rawSymbol:e.tumbleSymbol.rawSymbol,state:e.tumbleSymbol.symbolState})),s=w(()=>to(e.reelIndex)),i=w(()=>m(t).type==="spine");Ac(n,{get x(){return m(s)},get y(){return e.tumbleSymbol.symbolY.current},get animating(){return m(i)},children:(r,a)=>{Sc(r,{get state(){return e.tumbleSymbol.symbolState},get rawSymbol(){return e.tumbleSymbol.rawSymbol},get oncomplete(){return e.tumbleSymbol.oncomplete}})},$$slots:{default:!0}}),C()}function ya(n,e){I(e,!1);const t=Q();xe();var s=G(),i=M(s);ht(i,1,()=>t.stateGameDerived.tumbleBoardCombined(),bt,(r,a,l)=>{var u=G(),h=M(u);ht(h,1,()=>m(a),bt,(f,o)=>{zy(f,{reelIndex:l,get tumbleSymbol(){return m(o)}})}),b(r,u)}),b(n,s),C()}var Yy=E("<!> <!>",1),Xy=E("<!> <!>",1);function Vy(n,e){I(e,!0);const t=Q();let s=U(!1);const i=({initY:f,rawSymbol:o})=>{const c=new ke(f);return Y({symbolY:c,rawSymbol:o,symbolState:"static",oncomplete:()=>{}})},r=({addingBoard:f})=>t.stateGameDerived.boardRaw().map((o,c)=>{const d=f[c]??[];return d.map((_,y)=>{const g=Xs(y-1-d.length);return i({initY:g,rawSymbol:_})})}),a=()=>t.stateGameDerived.boardRaw().map(f=>f.map((c,d)=>{const p=Xs(d-1);return i({initY:p,rawSymbol:c})}));t.eventEmitter.subscribeOnMount({tumbleBoardShow:()=>k(s,!0),tumbleBoardHide:()=>k(s,!1),tumbleBoardInit:({addingBoard:f})=>{t.stateGame.tumbleBoardAdding=r({addingBoard:f}),t.stateGame.tumbleBoardBase=a()},tumbleBoardReset:()=>{t.stateGame.tumbleBoardAdding=[],t.stateGame.tumbleBoardBase=[]},tumbleBoardExplode:async({explodingPositions:f})=>{const o=()=>f.map(async c=>{const d=t.stateGame.tumbleBoardBase[c.reel][c.row];d.symbolState="explosion",await ze(p=>d.oncomplete=p)});await Promise.all(o())},tumbleBoardRemoveExploded:()=>{t.stateGame.tumbleBoardBase.forEach((f,o)=>{t.stateGame.tumbleBoardBase[o]=f.filter(c=>c.symbolState!=="explosion")})},tumbleBoardSlideDown:async()=>{const f=()=>rn.flatten(t.stateGameDerived.tumbleBoardCombined().map(o=>o.map(async(c,d)=>{const p=Xs(d-1);p!==c.symbolY.current&&(await c.symbolY.set(p,{duration:200,easing:Na}),d>0&&d<o.length-1&&(c.symbolState="land",t.stateGameDerived.onSymbolLand({rawSymbol:c.rawSymbol}),await ze(y=>{c.oncomplete=()=>{c.symbolState="static",y()}})))})));await Promise.all(f())}});var l=G(),u=M(l);{var h=f=>{var o=Xy(),c=M(o);Js(c,{animate:!1,children:(p,_)=>{wt(p,{children:(y,g)=>{var v=Yy(),x=M(v);Vl(x,{});var A=T(x,2);ya(A,{}),b(y,v)},$$slots:{default:!0}})},$$slots:{default:!0}});var d=T(c,2);Js(d,{animate:!0,children:(p,_)=>{wt(p,{children:(y,g)=>{ya(y,{})},$$slots:{default:!0}})},$$slots:{default:!0}}),b(f,o)};$(u,f=>{m(s)&&f(h)})}b(n,l),C()}function jy(n,e){I(e,!0);const t=Q(),s=w(()=>({x:t.stateGameDerived.boardLayout().width*.5,y:-200*.8*.58})),i=w(()=>({x:t.stateGameDerived.boardLayout().width*(t.stateGame.gameType==="baseGame"?.5:.37),y:-200*.8*.68})),r=w(()=>t.stateLayoutDerived.isStacked()?m(i):m(s)),a=w(()=>t.stateLayoutDerived.isStacked()?1.28:1);dt(n,{get show(){return e.show},children:(l,u)=>{wt(l,{children:(h,f)=>{we(h,Ae(()=>m(r),{get scale(){return m(a)},children:(o,c)=>{var d=G(),p=M(d);V(p,()=>e.children),b(o,d)},$$slots:{default:!0}}))},$$slots:{default:!0}})},$$slots:{default:!0}}),C()}var Ky=E("<!> <!>",1),qy=E("<!> <!> <!>",1);function Jy(n,e){I(e,!0);const t="frame_tumbleWin",s=q*.28,i={width:270,height:180};console.log(i);const r="frame_tumble",a={width:357,height:120};var l=qy(),u=M(l);Se(u,Ae({anchor:.5,key:r},a));var h=T(u,2);we(h,{y:-56.00000000000001*1.4,children:(o,c)=>{var d=Ky(),p=M(d);Se(p,Ae({anchor:.5,key:t},i));var _=T(p,2);ft(_,{anchor:.5,y:-56.00000000000001*.025,text:"TUMBLE WIN",style:{fontFamily:"gold",fontSize:s*.45}}),b(o,d)},$$slots:{default:!0}});var f=T(h,2);V(f,()=>e.children,()=>({frameSizes:a})),b(n,l),C()}var Zy=E("<!> <!>",1);function Qy(n,e){I(e,!0);const t=new ke(0),s=w(()=>e.animate?"explosion":"idle"),i=async()=>{await t.set(e.amount),e.oncomplete()};fe(()=>{m(s)==="idle"&&i()}),Je(n,{key:"tumble_win",get width(){return e.width},children:(r,a)=>{var l=Zy(),u=M(l);Ze(u,{trackIndex:0,get animationName(){return m(s)},listener:{complete:()=>{m(s)==="explosion"&&e.oncomplete()},event:(f,o)=>{var c;((c=o.data)==null?void 0:c.name)==="update_text"&&t.set(e.amount)}}});var h=T(u,2);xt(h,{slotName:"slot_win",children:(f,o)=>{const c=w(()=>on(t.current));ei(f,{anchor:.5,style:{fontFamily:"gold",fontSize:.5*q},get text(){return m(c)},get maxWidth(){return e.width}})},$$slots:{default:!0}}),b(r,l)},$$slots:{default:!0}}),C()}function eg(n,e){I(e,!0);const t=Q();let s=U(!1),i=U(0),r=U(!1),a=U(()=>{});t.eventEmitter.subscribeOnMount({tumbleWinAmountShow:()=>k(s,!0),tumbleWinAmountHide:()=>k(s,!1),tumbleWinAmountReset:()=>{k(i,0),k(r,!1),k(a,()=>{})},tumbleWinAmountUpdate:async l=>{m(i)!==l.amount&&(k(i,Y(l.amount)),k(r,Y(l.animate)),await ze(u=>k(a,Y(u))))}}),jy(n,{get show(){return m(s)},children:(l,u)=>{Jy(l,{children:(f,o)=>{let c=()=>o==null?void 0:o().frameSizes;Qy(f,{get amount(){return m(i)},get animate(){return m(r)},get oncomplete(){return m(a)},get width(){return c().width}})},$$slots:{default:!0}})},$$slots:{default:!0}}),C()}var tg=E("<!> <!>",1),ng=E("<!> <!>",1);function sg(n,e){I(e,!0);const t=q*.641,s=Q(),i=w(()=>s.stateLayoutDerived.isStacked()?1.28:1),r=w(()=>({x:s.stateGameDerived.boardLayout().width-t*1.3,y:-200*.47})),a=w(()=>({x:s.stateGameDerived.boardLayout().width-t*1.5,y:-200*.55})),l=w(()=>s.stateLayoutDerived.isStacked()?m(a):m(r));let u=U(!1),h=U("static"),f=U(1),o=new ke(1),c=U(()=>{});s.eventEmitter.subscribeOnMount({globalMultiplierShow:()=>k(u,!0),globalMultiplierHide:()=>k(u,!1),globalMultiplierUpdate:async d=>{d.multiplier===1&&m(f)!==1&&(k(h,"reset"),await ut(300),s.eventEmitter.broadcast({type:"soundOnce",name:"sfx_multiplier_reset"}),o.set(d.multiplier)),d.multiplier>m(f)&&(s.eventEmitter.broadcast({type:"soundOnce",name:"sfx_multiplier_update"}),k(h,"increment")),m(h)!=="static"&&(k(f,Y(d.multiplier)),await ze(p=>k(c,Y(p))),k(h,"static"),o.set(m(f),{duration:0}))}}),dt(n,{get show(){return m(u)},children:(d,p)=>{wt(d,{children:(_,y)=>{we(_,Ae(()=>m(l),{get scale(){return m(i)},children:(g,v)=>{Je(g,{key:"globalMultiplier",width:t,children:(x,A)=>{var S=ng(),B=M(S);const L=w(()=>ae.timeScale());Ze(B,{trackIndex:0,get animationName(){return m(h)},get timeScale(){return m(L)},listener:{complete:()=>{m(c)()}}});var H=T(B,2);Bf(H,{children:(N,Z)=>{var te=tg(),ie=M(te);xt(ie,{slotName:"slot_multi",children:(oe,W)=>{const se=w(()=>`${Math.round(o.current)}×`);ft(oe,{anchor:.5,get text(){return m(se)},style:{fontFamily:"gold",fontSize:q*2.5}})},$$slots:{default:!0}});var ce=T(ie,2);xt(ce,{slotName:"slot_multi_next",children:(oe,W)=>{const se=w(()=>`${m(f)}×`);ft(oe,{anchor:.5,get text(){return m(se)},style:{fontFamily:"gold",fontSize:q*2.5}})},$$slots:{default:!0}}),b(N,te)},$$slots:{default:!0}}),b(x,S)},$$slots:{default:!0}})},$$slots:{default:!0}}))},$$slots:{default:!0}})},$$slots:{default:!0}}),C()}var ig=E("<!> <!>",1);function rg(n,e){I(e,!0);const t=w(()=>bi({rawSymbol:e.multiplierSymbol.rawSymbol,state:e.multiplierSymbol.symbolState})),s=w(()=>Yl({rawSymbol:e.multiplierSymbol.rawSymbol,state:e.multiplierSymbol.symbolState}));var i=ig(),r=M(i);Kl(r,{get symbolBackgroundInfo(){return m(s)},get x(){return e.multiplierSymbol.initX},get y(){return e.multiplierSymbol.initY}});var a=T(r,2);const l=w(()=>({complete:e.multiplierSymbol.oncomplete}));jl(a,{get symbolInfo(){return m(t)},get x(){return e.multiplierSymbol.symbolX.current},get y(){return e.multiplierSymbol.symbolY.current},get listener(){return m(l)}}),b(n,i),C()}function og(n,e){I(e,!1);const t=Q();xe();var s=G(),i=M(s);ht(i,1,()=>t.stateGame.multiplierBoard,bt,(r,a,l)=>{var u=G(),h=M(u);ht(h,1,()=>m(a),bt,(f,o)=>{var c=G(),d=M(c);{var p=_=>{rg(_,{reelIndex:l,get multiplierSymbol(){return m(o)}})};$(d,_=>{m(o)&&_(p)})}b(f,c)}),b(r,u)}),b(n,s),C()}function ag(n,e){I(e,!0);const t=Q();let s=U(!1);const i=({rawSymbol:h,reelIndex:f,symbolIndex:o,reelLength:c})=>{if(h.name==="M"&&o>0&&o<c-1){const d=to(f),p=Xs(o-1),_=new ke(d),y=new ke(p);return Y({initX:d,initY:p,symbolX:_,symbolY:y,rawSymbol:h,symbolState:"win",oncomplete:()=>{}})}},r=()=>t.stateGameDerived.boardRaw().map((h,f)=>h.map((o,c)=>i({rawSymbol:o,reelIndex:f,symbolIndex:c,reelLength:h.length})));t.eventEmitter.subscribeOnMount({multiplierBoardShow:()=>k(s,!0),multiplierBoardHide:()=>k(s,!1),multiplierBoardInit:()=>{t.stateGame.multiplierBoard=r()},multiplierBoardReset:()=>{t.stateGame.multiplierBoard=[]},multiplierBoardAnimate:async()=>{const h=()=>rn.flatten(t.stateGame.multiplierBoard.map(f=>f.filter(Boolean).map(async o=>{await ze(c=>o.oncomplete=c)})));await Promise.all(h())},multiplierBoardMove:async()=>{const h=()=>rn.flatten(t.stateGame.multiplierBoard.map(f=>f.filter(Boolean).map(async o=>{const c={x:t.stateGameDerived.boardLayout().width*.5,y:t.stateGameDerived.boardLayout().height*.5},d={duration:500,easing:ad},p=()=>o.symbolX.set(c.x,d),_=()=>o.symbolY.set(c.y,d);await Promise.all([p(),_()])})));await Promise.all(h())}});var a=G(),l=M(a);{var u=h=>{wt(h,{children:(f,o)=>{og(f,{})},$$slots:{default:!0}})};$(l,h=>{m(s)&&h(u)})}b(n,a),C()}var lg=E("<!> <!> <!>",1);function cg(n,e){I(e,!0);const t=o=>{const c=w(()=>`${m(a)} X`);ft(o,{scale:3,anchor:.5,get text(){return m(c)},style:{fontFamily:"gold",fontSize:q,letterSpacing:-5}})},s=Q();let i=U(!1),r=U("static"),a=U(0),l=U(()=>{});s.eventEmitter.subscribeOnMount({multiplierTotalShow:()=>k(i,!0),multiplierTotalHide:()=>k(i,!1),multiplierTotalUpdate:o=>k(a,Y(o.totalMultiplier)),multiplierTotalAnimate:async()=>{k(r,"explosion"),await ze(o=>k(l,Y(o)))}});var u=G(),h=M(u);{var f=o=>{wt(o,{children:(c,d)=>{const p=w(()=>s.stateGameDerived.boardLayout().width*.5),_=w(()=>s.stateGameDerived.boardLayout().height*.5),y=w(()=>s.stateGameDerived.boardLayout().width*4);Je(c,{get x(){return m(p)},get y(){return m(_)},key:"tumble_multiplier",get width(){return m(y)},children:(g,v)=>{var x=lg(),A=M(x);const S=w(()=>ae.timeScale()),B=w(()=>({complete:m(l)}));Ze(A,{trackIndex:0,get animationName(){return m(r)},get timeScale(){return m(S)},get listener(){return m(B)}});var L=T(A,2);xt(L,{slotName:"tumblemultiplier",children:(N,Z)=>{t(N)},$$slots:{default:!0}});var H=T(L,2);xt(H,{slotName:"tumblemultiplier_add",children:(N,Z)=>{t(N)},$$slots:{default:!0}}),b(g,x)},$$slots:{default:!0}})},$$slots:{default:!0}})};$(h,o=>{m(i)&&o(f)})}b(n,u),C()}const ug={alpha:{start:1,end:1},scale:{start:.3,end:.4,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:700,end:800,minimumSpeedMultiplier:1},acceleration:{x:0,y:600},maxSpeed:0,startRotation:{min:255,max:285},noRotation:!1,rotationSpeed:{min:-90,max:90},lifetime:{min:6,max:6},blendMode:"normal",frequency:.4,emitterLifetime:-1,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-100,y:0,w:200,h:0}},dg={zero:null,standard:null,small:null,nice:null,substantial:{speedOption:{list:[{value:300,time:0},{value:400,time:0}]},frequency:.2,emitterLifetime:-1,spawnOption:{type:"rect",spawnRect:{x:-150,y:0,w:300,h:0}}},big:{speedOption:{list:[{value:650,time:0},{value:700,time:0}]},frequency:.18,emitterLifetime:-1,spawnOption:{type:"rect",spawnRect:{x:-150,y:0,w:300,h:0}}},superwin:{speedOption:{list:[{value:750,time:0},{value:800,time:0}]},frequency:.15,emitterLifetime:-1,spawnOption:{type:"rect",spawnRect:{x:-200,y:0,w:400,h:0}}},mega:{speedOption:{list:[{value:850,time:0},{value:900,time:0}]},frequency:.12,emitterLifetime:-1,spawnOption:{type:"rect",spawnRect:{x:-200,y:0,w:400,h:0}}},epic:{speedOption:{list:[{value:950,time:0},{value:1050,time:0}]},frequency:.11,emitterLifetime:-1,spawnOption:{type:"rect",spawnRect:{x:-250,y:0,w:500,h:0}}},max:{speedOption:{list:[{value:1100,time:0},{value:1200,time:0}]},frequency:.1,emitterLifetime:-1,spawnOption:{type:"rect",spawnRect:{x:-250,y:0,w:500,h:0}}}};function Tc(n,e){I(e,!0);const t=Q(),s=w(()=>e!=null&&e.levelAlias?dg[e.levelAlias]:null),i=w(()=>({...ug,...m(s)}));var r=G(),a=M(r);{var l=u=>{at(u,{children:(h,f)=>{we(h,{get x(){return t.stateGameDerived.boardLayout().x},get y(){return t.stateGameDerived.boardLayout().y},children:(o,c)=>{Lf(o,{get config(){return m(i)},key:"coins",get emit(){return e.emit}})},$$slots:{default:!0}})},$$slots:{default:!0}})};$(a,u=>{m(i)&&u(l)})}b(n,r),C()}var hg=E("<!> <!>",1);function fg(n,e){I(e,!0);const t=Q();let s=U("intro");Je(n,{get width(){return t.stateGameDerived.boardLayout().width},key:"bigwin",children:(i,r)=>{var a=hg(),l=M(a);const u=w(()=>m(s)==="idle");Ze(l,{trackIndex:0,get animationName(){return e.animationMap[m(s)]},get loop(){return m(u)},listener:{complete:()=>{m(s)==="intro"&&k(s,"idle"),m(s)}}});var h=T(l,2);xt(h,{slotName:"slot_win_count",children:(f,o)=>{var c=G(),d=M(c);V(d,()=>e.children),b(f,c)},$$slots:{default:!0}}),b(i,a)},$$slots:{default:!0}}),C()}var mg=E("<!> <!> <!> <!> <!>",1);function pg(n,e){I(e,!0);const t=Q();let s=U(!1),i=U(0),r=U(()=>{}),a=()=>{};t.eventEmitter.subscribeOnMount({winShow:()=>k(s,!0),winHide:()=>k(s,!1),winUpdate:async u=>{k(i,Y(u.amount)),await ze(h=>k(r,Y(h)))}});const l=w(()=>t.stateGameDerived.getWinLevelDataByBookEventAmount(m(i)));dt(n,{get show(){return m(s)},children:(u,h)=>{var f=G(),o=M(f);{var c=d=>{const p=w(()=>m(l).type==="big"),_=w(()=>m(l).presentDuration);ll(d,{get amount(){return m(i)},get duration(){return m(_)},oncomplete:()=>a(),children:(g,v)=>{let x=()=>v==null?void 0:v().countUpAmount,A=()=>v==null?void 0:v().startCountUp,S=()=>v==null?void 0:v().finishCountUp,B=()=>v==null?void 0:v().countUpCompleted;var L=mg(),H=M(L);{var N=z=>{vi(z,{backgroundColor:0,backgroundAlpha:.5})};$(H,z=>{m(p)&&z(N)})}var Z=T(H,2);Dr(Z,{onmount:async()=>{await A()(),await ut(300),m(r)()}});var te=T(Z,2);at(te,{children:(z,ee)=>{we(z,{get x(){return t.stateGameDerived.boardLayout().x},get y(){return t.stateGameDerived.boardLayout().y},children:(ne,re)=>{var pe=G(),Te=M(pe);{var De=Xe=>{fg(Xe,{get animationMap(){return m(l).animation},children:(it,$t)=>{const Cn=w(()=>on(x()));ei(it,{anchor:.5,maxWidth:2130,get text(){return m(Cn)},style:{fontFamily:"gold",fontSize:q*1.7,align:"center",fontWeight:"bold",letterSpacing:0}})},$$slots:{default:!0}})},Ye=Xe=>{const it=w(()=>t.stateLayoutDerived.canvasSizes().width/t.stateLayoutDerived.mainLayout().scale),$t=w(()=>on(x()));ei(Xe,{anchor:.5,get maxWidth(){return m(it)},get text(){return m($t)},style:{fontFamily:"gold",fontSize:q,align:"center",fontWeight:"bold",letterSpacing:0}})};$(Te,Xe=>{m(l).animation?Xe(De):Xe(Ye,!1)})}b(ne,pe)},$$slots:{default:!0}})},$$slots:{default:!0}});var ie=T(te,2);const ce=w(()=>!B()),oe=w(()=>{var z;return(z=m(l))==null?void 0:z.alias});Tc(ie,{get emit(){return m(ce)},get levelAlias(){return m(oe)}});var W=T(ie,2);{var se=z=>{xi(z,{onpress:()=>B()?m(r)():S()()})};$(W,z=>{m(p)&&z(se)})}b(g,L)},$$slots:{default:!0}})};$(o,d=>{m(l)&&d(c)})}b(u,f)},$$slots:{default:!0}}),C()}var _g=E("<!> <!>",1);function Mc(n,e){I(e,!0);const t=Q(),s=920/720,i=q*5,r={width:i,height:i/s},a={width:q*5,height:q*5};let l=U("intro");at(n,{children:(u,h)=>{const f=w(()=>is({anchor:.5,sizes:r}));we(u,{get x(){return t.stateGameDerived.boardLayout().x},get y(){return t.stateGameDerived.boardLayout().y},get pivot(){return m(f)},children:(o,c)=>{const d=w(()=>a.width*.5),p=w(()=>a.height*.4);Je(o,{key:"fsIntro",get width(){return a.width},get x(){return m(d)},get y(){return m(p)},children:(_,y)=>{var g=_g(),v=M(g);const x=w(()=>m(l)==="idle");Ze(v,{trackIndex:0,get animationName(){return m(l)},get loop(){return m(x)},listener:{complete:()=>k(l,"idle")}});var A=T(v,2);xt(A,{slotName:"slot_text_placeholder",children:(S,B)=>{var L=G(),H=M(L);V(H,()=>e.children,()=>({sizes:r})),b(S,L)},$$slots:{default:!0}}),b(_,g)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),C()}var yg=E("<!> <!>",1),gg=E("<!> <!> <!>",1),vg=E("<!> <!> <!>",1);function bg(n,e){I(e,!0);const t=Q(),s={width:q*1};let i=U(!1),r=U("intro"),a=U(0),l=U(()=>{});t.eventEmitter.subscribeOnMount({freeSpinIntroShow:()=>k(i,!0),freeSpinIntroHide:()=>k(i,!1),freeSpinIntroUpdate:async u=>{u.extraSpins&&t.eventEmitter.broadcast({type:"soundOnce",name:"sfx_fs_respins"}),k(a,Y(u.extraSpins??u.totFS)),await ze(h=>k(l,Y(h)))}}),dt(n,{get show(){return m(i)},children:(u,h)=>{var f=vg(),o=M(f);vi(o,{backgroundColor:0,backgroundAlpha:.5});var c=T(o,2);Mc(c,{children:(_,y)=>{let g=()=>y==null?void 0:y().sizes;var v=gg(),x=M(v);const A=w(()=>Me.lang());Se(x,{y:-220.00000000000003,anchor:.5,width:950,height:296.4,get key(){return`freespins_${m(A)??""}.png`}});var S=T(x,2);const B=w(()=>g().height*.05);Je(S,{key:"fsIntroNumber",get width(){return s.width},get y(){return m(B)},children:(H,N)=>{var Z=yg(),te=M(Z);const ie=w(()=>m(r)==="idle");Ze(te,{trackIndex:0,get animationName(){return m(r)},get loop(){return m(ie)},listener:{complete:()=>k(r,"idle")}});var ce=T(te,2);xt(ce,{slotName:"slot_number",children:(oe,W)=>{ft(oe,{anchor:{x:.5,y:.5},get text(){return m(a)},style:{fontFamily:"gold",fontSize:q*.5,fontWeight:"bold"}})},$$slots:{default:!0}}),b(H,Z)},$$slots:{default:!0}});var L=T(S,2);Se(L,{y:q*1.7,anchor:.5,width:402.6,height:92.4,key:"freespins.png"}),b(_,v)},$$slots:{default:!0}});var d=T(c,2);xi(d,{onpress:()=>m(l)()}),b(u,f)},$$slots:{default:!0}}),C()}var xg=E("<!> <!>",1),wg=E("<!> <!>",1);function Sg(n,e){I(e,!0);const t=Q(),s="frame_FSCounter",i="Frame_Tumble.png",r=824/622,a=1442/374,l=t.stateLayoutDerived.isStacked()?i:s,u=w(()=>q*(t.stateLayoutDerived.isStacked()?5.3:2)),h=w(()=>({width:m(u),height:m(u)/(t.stateLayoutDerived.isStacked()?a:r)}));console.log(m(h));const f=w(()=>t.stateLayoutDerived.layoutType()==="tablet"?.7:1),o=w(()=>({x:t.stateGameDerived.boardLayout().x-t.stateGameDerived.boardLayout().width*.5-m(h).width-q*.2,y:t.stateGameDerived.boardLayout().y-t.stateGameDerived.boardLayout().height*.5})),c=w(()=>({x:t.stateGameDerived.boardLayout().x-m(h).width*.5*m(f),y:t.stateGameDerived.boardLayout().y+t.stateGameDerived.boardLayout().height*.5+m(h).height*.75})),d=w(()=>({x:t.stateGameDerived.boardLayout().x-m(h).width*.5,y:t.stateGameDerived.boardLayout().y+t.stateGameDerived.boardLayout().height*.5+m(h).height*1.5})),p=w(()=>t.stateLayoutDerived.isStacked()?t.stateLayoutDerived.layoutType()==="tablet"?m(c):m(d):m(o)),_=q*(t.stateLayoutDerived.isStacked()?.4:.275),y=.25*q;let g=U(!1),v=U(0),x=U(0),A=U(Y({width:0,height:0})),S=U(Y({width:0,height:0}));const B=w(()=>t.stateLayoutDerived.isStacked()?{width:m(A).width+m(S).width+y,height:m(A).height}:{width:m(A).width,height:m(A).height+m(S).height}),L=w(()=>t.stateLayoutDerived.isStacked()?{x:m(A).width+y+m(S).width/2,y:0}:{x:m(A).width/2,y:m(A).height});t.eventEmitter.subscribeOnMount({freeSpinCounterShow:()=>k(g,!0),freeSpinCounterHide:()=>k(g,!1),freeSpinCounterUpdate:H=>{H.current!==void 0&&k(v,Y(H.current)),H.total!==void 0&&k(x,Y(H.total))}}),at(n,{children:(H,N)=>{dt(H,Ae({get show(){return m(g)}},()=>m(p),{get scale(){return m(f)},children:(Z,te)=>{var ie=wg(),ce=M(ie);Se(ce,Ae({key:l},()=>m(h)));var oe=T(ce,2);const W=w(()=>m(h).width*.5),se=w(()=>m(h).height*(t.stateLayoutDerived.isStacked()?.46:.48)),z=w(()=>is({sizes:m(B),anchor:{x:.5,y:.5}}));we(oe,{get x(){return m(W)},get y(){return m(se)},get pivot(){return m(z)},children:(ee,ne)=>{var re=xg(),pe=M(re);ft(pe,{text:"FREE SPIN",style:{fontFamily:"gold",fontSize:_,wordWrap:!1},onresize:Ye=>k(A,Y(Ye))});var Te=T(pe,2);const De=w(()=>`${m(v)} OF ${m(x)}`);ft(Te,Ae({get text(){return m(De)}},()=>m(L),{anchor:{x:.5,y:0},style:{fontFamily:"gold",fontSize:_},onresize:Ye=>k(S,Y(Ye))})),b(ee,re)},$$slots:{default:!0}}),b(Z,ie)},$$slots:{default:!0}}))},$$slots:{default:!0}}),C()}var Ag=E("<!> <!>",1),Tg=E("<!> <!> <!>",1),Mg=E("<!> <!> <!> <!> <!>",1);function Eg(n,e){I(e,!0);const t=Q(),s={width:q*1.7};let i=U(!1),r=U("intro"),a=U(0),l=U(()=>{}),u=()=>{};t.eventEmitter.subscribeOnMount({freeSpinOutroShow:()=>k(i,!0),freeSpinOutroHide:async()=>k(i,!1),freeSpinOutroCountUp:async f=>{k(a,Y(f.amount)),await ze(o=>k(l,Y(o)))}});const h=w(()=>t.stateGameDerived.getWinLevelDataByBookEventAmount(m(a)));dt(n,{get show(){return m(i)},children:(f,o)=>{var c=G(),d=M(c);{var p=_=>{const y=w(()=>m(h).presentDuration),g=w(()=>m(h).type==="big"),v=w(()=>m(g)?.1:-.08);ll(_,{get amount(){return m(a)},get duration(){return m(y)},oncomplete:()=>u(),children:(A,S)=>{let B=()=>S==null?void 0:S().countUpAmount,L=()=>S==null?void 0:S().startCountUp,H=()=>S==null?void 0:S().finishCountUp,N=()=>S==null?void 0:S().countUpCompleted;var Z=Mg(),te=M(Z);Dr(te,{onmount:()=>L()()});var ie=T(te,2);vi(ie,{backgroundColor:0,backgroundAlpha:.5});var ce=T(ie,2);Mc(ce,{children:(ne,re)=>{let pe=()=>re==null?void 0:re().sizes;var Te=Tg(),De=M(Te);{var Ye=Qe=>{const Mt=w(()=>Me.lang());Se(Qe,{y:-300,anchor:.5,width:950,height:296.4,get key(){return`freespins_${m(Mt)??""}.png`}})},Xe=Qe=>{const Mt=w(()=>Me.lang());Se(Qe,{y:-300,anchor:.5,width:2250,height:360,get key(){return`winsmall_${m(Mt)??""}.png`}})};$(De,Qe=>{m(g)?Qe(Ye):Qe(Xe,!1)})}var it=T(De,2);const $t=w(()=>q*(m(g),1.6)),Cn=w(()=>177*(m(g)?2.2:3)),cs=w(()=>42*(m(g)?2.2:3));Se(it,{get y(){return m($t)},anchor:.5,get width(){return m(Cn)},get height(){return m(cs)},key:"totalwin.png"});var Pn=T(it,2);const us=w(()=>s.width*.5),Si=w(()=>pe().height*m(v)*.5);Je(Pn,{key:"fsOutroNumber",get width(){return m(us)},get y(){return m(Si)},children:(Qe,Mt)=>{var kn=Ag(),Bn=M(kn);const ds=w(()=>m(r)==="idle");Ze(Bn,{trackIndex:0,get animationName(){return m(r)},get loop(){return m(ds)},listener:{complete:()=>k(r,"idle")}});var Ln=T(Bn,2);xt(Ln,{slotName:"slot_number",children:(hs,Ht)=>{const Ai=w(()=>on(B()));ei(hs,{anchor:.5,style:{fontFamily:"gold",fontSize:.7*q},get text(){return m(Ai)},get maxWidth(){return pe().width}})},$$slots:{default:!0}}),b(Qe,kn)},$$slots:{default:!0}}),b(ne,Te)},$$slots:{default:!0}});var oe=T(ce,2);const W=w(()=>!N()),se=w(()=>{var ee;return(ee=m(h))==null?void 0:ee.alias});Tc(oe,{get emit(){return m(W)},get levelAlias(){return m(se)}});var z=T(oe,2);xi(z,{onpress:()=>N()?m(l)():H()()}),b(A,Z)},$$slots:{default:!0}})};$(d,_=>{m(h)&&_(p)})}b(f,c)},$$slots:{default:!0}}),C()}function Ig(n,e){I(e,!0);const t=Q();let s=U(!1),i=U(()=>{});t.eventEmitter.subscribeOnMount({transition:async()=>{k(s,!0),await ze(u=>k(i,Y(u)))}});var r=G(),a=M(r);{var l=u=>{Xl(u,{oncomplete:()=>{m(i)(),k(s,!1)}})};$(a,u=>{m(s)&&u(l)})}b(n,r),C()}const Cg=(n,e,t,s)=>{e.eventEmitter.broadcast({type:"soundPressBet"}),e.stateXstateDerived.isIdle()?t():s()},Pg=(n,e,t,s)=>{e.eventEmitter.broadcast({type:"soundPressGeneral"}),ae.hasAutoBetCounter()?t():s()};var kg=E("<span> </span>"),Bg=E('<div class="win-amount svelte-11yganm"><span style="font-size: small;">Free Spins</span> <span style="font-size: large;font-weight:800"> </span></div>'),Lg=E('<div class="win-amount svelte-11yganm"><span style="font-size: small;">Win</span> <span style="font-size: large;font-weight:800"> </span></div>'),Rg=E('<div class="top-bar svelte-11yganm"><div style="font-weight:700"> </div> <div>Logo</div></div>  <div class="bottom-bar svelte-11yganm"><div class="bottom-bar-container svelte-11yganm"><div class="menu-btn svelte-11yganm"><div class="menu-icon svelte-11yganm"></div></div> <div class="menu-btn svelte-11yganm">Buy</div> <div class="amounts svelte-11yganm"><div class="balance-amount svelte-11yganm"><span style="font-size: small;">Balance</span> <span style="font-size: large;font-weight:800"> </span></div> <div class="bet-controls svelte-11yganm"><div class="bet-amount svelte-11yganm"><span style="font-size: small;">Bet</span> <span style="font-size: large;font-weight:800"> </span></div> <div class="bet-btns svelte-11yganm"><div class="bet-btn svelte-11yganm"><div></div></div> <div class="bet-btn svelte-11yganm"><div></div></div></div></div></div> <div class="play-controls svelte-11yganm"><div class="p-menu-btn svelte-11yganm"><div class="menu-icon svelte-11yganm"></div></div> <div class="play-controls-container svelte-11yganm"><div><div></div></div> <div class="spin-btn-container svelte-11yganm"><div><!></div></div> <div><div class="auto-icon svelte-11yganm"></div></div></div> <div class="p-menu-btn svelte-11yganm">Buy</div></div> <div class="win-fs-wrapper svelte-11yganm"><div class="win-container svelte-11yganm"><!> <!></div></div></div></div>',1);function Og(n,e){I(e,!0);const t=Q(),s=new lr,i=w(()=>s.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!1}));fe(()=>{const ee=setInterval(()=>{s.setTime(Date.now())},1e3);return()=>{clearInterval(ee)}});const r=new ke(F.balanceAmount);fe(()=>{r.set(F.balanceAmount),console.log(r.target+" balance")});const a=w(()=>Xn(r.current)),l=w(()=>F.isTurbo),u=w(()=>F.isSpaceHold),h=()=>{t.eventEmitter.broadcast({type:"soundPressGeneral"}),ae.updateIsTurbo(!F.isTurbo,{persistent:!0})};t.eventEmitter.subscribeOnMount({stopButtonClick:()=>ae.updateIsTurbo(!0,{persistent:!1}),stopButtonEnable:()=>ae.updateIsTurbo(!1,{persistent:!1})});let f=U(!1);const o=()=>t.eventEmitter.broadcast({type:"bet"}),c=()=>{m(f)||(ae.hasAutoBetCounter()&&(F.autoSpinsCounter=0),t.eventEmitter.broadcast({type:"stopButtonClick"}))},p=w(()=>t.stateXstateDerived.isIdle()?ae.isBetCostAvailable()?"spin_default":"spin_disabled":t.stateXstateDerived.isIdle()?"spin_default":m(f)?"stop_disabled":ae.hasAutoBetCounter()?"stop_default":F.isTurbo?"stop_disabled":"stop_default");t.eventEmitter.subscribeOnMount({stopButtonClick:()=>k(f,!0),stopButtonEnable:()=>k(f,!1)});const _=w(()=>Xn(ae.betCost())),y=w(()=>Pt.betAmountOptions[Pt.betAmountOptions.length-1]),g=w(()=>!t.stateXstateDerived.isIdle()||F.betAmount===m(y)),v=()=>{t.eventEmitter.broadcast({type:"soundPressGeneral"});const ee=[...Pt.betAmountOptions].sort((ne,re)=>ne-re).find(ne=>ne>F.betAmount);ae.setBetAmount(ee||m(y))},x=w(()=>Pt.betAmountOptions[0]),A=w(()=>!t.stateXstateDerived.isIdle()||F.betAmount===m(x)),S=()=>{t.eventEmitter.broadcast({type:"soundPressGeneral"});const ee=[...Pt.betAmountOptions].sort((ne,re)=>re-ne).find(ne=>ne<F.betAmount);ae.setBetAmount(ee||m(x))},B=()=>F.autoSpinsCounter=0,L=()=>me.modal={name:"autoSpin"},H=w(()=>!!(F.isSpaceHold||!t.stateXstateDerived.isIdle()&&!ae.hasAutoBetCounter()||!ae.isBetCostAvailable()));let N=U(!0);t.eventEmitter.subscribeOnMount({uiShow:async()=>{console.log(m(N)," show"),m(N)===!1&&k(N,!0)},uiHide:async()=>{console.log(m(N)," show"),m(N)===!0&&k(N,!1)}});const Z=new ke(F.winBookEventAmount),te=w(()=>on(Z.current));fe(()=>{Z.set(F.winBookEventAmount),console.log("winAmount : "+Z.target)});let ie=U(!1),ce=U(0),oe=U(0);t.eventEmitter.subscribeOnMount({freeSpinCounterShow:()=>k(ie,!0),freeSpinCounterHide:()=>k(ie,!1),freeSpinCounterUpdate:ee=>{ee.current!==void 0&&k(ce,Y(ee.current)),ee.total!==void 0&&k(oe,Y(ee.total))}});var W=G(),se=M(W);{var z=ee=>{var ne=Rg(),re=M(ne),pe=D(re),Te=D(pe,!0);R(pe),je(2),R(re);var De=T(re,2),Ye=D(De),Xe=T(D(Ye),4),it=D(Xe),$t=T(D(it),2),Cn=D($t,!0);R($t),R(it);var cs=T(it,2),Pn=D(cs),us=T(D(Pn),2),Si=D(us,!0);R(us),R(Pn);var Qe=T(Pn,2),Mt=D(Qe),kn=D(Mt);kn.__click=v,R(Mt);var Bn=T(Mt,2),ds=D(Bn);ds.__click=S,R(Bn),R(Qe),R(cs),R(Xe);var Ln=T(Xe,2),hs=T(D(Ln),2),Ht=D(hs);Ht.__click=h;var Ai=D(Ht);R(Ht);var fs=T(Ht,2);fs.__click=[Cg,t,o,c];var Ti=D(fs),Ec=D(Ti);{var Ic=Fe=>{var Ge=kg(),zt=D(Ge,!0);R(Ge),X(()=>K(zt,F.autoSpinsCounter===1/0?"∞":F.autoSpinsCounter)),b(Fe,Ge)};$(Ec,Fe=>{!["spin_default","spin_disabled"].includes(m(p))&&F.autoSpinsCounter>0&&Fe(Ic)})}R(Ti),R(fs);var Mi=T(fs,2);Mi.__click=[Pg,t,B,L],R(hs),je(2),R(Ln);var lo=T(Ln,2),co=D(lo),uo=D(co);{var Cc=Fe=>{var Ge=Bg(),zt=T(D(Ge),2),Ei=D(zt,!0);R(zt),R(Ge),X(()=>K(Ei,m(ce)+" / "+m(oe))),b(Fe,Ge)};$(uo,Fe=>{m(ie)&&["portrait","tablet"].includes(t.stateLayoutDerived.layoutType())&&Fe(Cc)})}var Pc=T(uo,2);{var kc=Fe=>{var Ge=Lg(),zt=T(D(Ge),2),Ei=D(zt,!0);R(zt),R(Ge),X(()=>K(Ei,m(te))),b(Fe,Ge)};$(Pc,Fe=>{Z.target>0&&Fe(kc)})}R(co),R(lo),R(Ye),R(De),X((Fe,Ge)=>{K(Te,m(i)+" Scatter AI"),K(Cn,m(a)),K(Si,m(_)),$e(kn,1,Vt(["bet-icon-plus",m(g)?"btn-disable":""]),"svelte-11yganm"),$e(ds,1,Vt(["bet-icon-minus",m(A)?"btn-disable":""]),"svelte-11yganm"),$e(Ht,1,Vt(["turbo-btn",m(u)?"btn-disable":""]),"svelte-11yganm"),sn(Ht,"style",m(l)?"border: 2px solid white":""),$e(Ai,1,Vt(m(l)?"turbo-on":"turbo-off"),"svelte-11yganm"),$e(Ti,1,Vt(Fe),"svelte-11yganm"),$e(Mi,1,Vt(["turbo-btn",m(H)?"btn-disable":""]),"svelte-11yganm"),sn(Mi,"style",Ge)},[()=>[["spin_default","spin_disabled"].includes(m(p))?"spin-btn":"stop-btn",["spin_disabled","stop_disabled"].includes(m(p))?"btn-disable":""],()=>ae.hasAutoBetCounter()?"border: 2px solid white":""]),b(ee,ne)};$(se,ee=>{m(N)&&ee(z)})}b(n,W),C()}Lc(["click"]);var Dg=E("<!> <!> <!> <!>",1),Fg=E("<!> <!>",1),Gg=E("<!> <!>",1),Ng=E("<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>",1),Ug=E("<!> <!> <!> <!> <!> <!>",1),Wg=E("<!> <!> <!>",1);function $g(n,e){I(e,!1);const t=tu(Q());ge(()=>go(t,m(t).stateLayout.showLoadingScreen=!0)),xe();var s=Wg(),i=M(s);Mf(i,{children:(u,h)=>{var f=Ug(),o=M(f);i_(o,{});var c=T(o,2);ed(c,{});var d=T(c,2);p_(d,{});var p=T(d,2);Of(p,{});var _=T(p,2);v_(_,{});var y=T(_,2);{var g=x=>{M_(x,{onloaded:()=>go(t,m(t).stateLayout.showLoadingScreen=!1)})},v=x=>{var A=Ng(),S=M(A);__(S,{});var B=T(S,2);y_(B,{});var L=T(B,2);at(L,{children:(z,ee)=>{I_(z,{})},$$slots:{default:!0}});var H=T(L,2);at(H,{children:(z,ee)=>{var ne=Dg(),re=M(ne);Gy(re,{});var pe=T(re,2);Wy(pe,{});var Te=T(pe,2);eg(Te,{});var De=T(Te,2);sg(De,{}),b(z,ne)},$$slots:{default:!0}});var N=T(H,2);at(N,{children:(z,ee)=>{var ne=Fg(),re=M(ne);Vy(re,{});var pe=T(re,2);Hy(pe,{}),b(z,ne)},$$slots:{default:!0}});var Z=T(N,2);at(Z,{children:(z,ee)=>{var ne=Gg(),re=M(ne);ag(re,{});var pe=T(re,2);cg(pe,{}),b(z,ne)},$$slots:{default:!0}});var te=T(Z,2);pg(te,{});var ie=T(te,2);bg(ie,{});var ce=T(ie,2);{var oe=z=>{Sg(z,{})};$(ce,z=>{["desktop","landscape"].includes(m(t).stateLayoutDerived.layoutType())&&z(oe)})}var W=T(ce,2);Eg(W,{});var se=T(W,2);Ig(se,{}),b(x,A)};$(y,x=>{m(t).stateLayout.showLoadingScreen?x(g):x(v,!1)})}b(u,f)},$$slots:{default:!0}});var r=T(i,2);ef(r,{version:h=>{nf(h,{version:"2.0.5"})},$$slots:{version:!0}});var a=T(r,2);{var l=u=>{Og(u,{})};$(a,u=>{m(t).stateLayout.showLoadingScreen||u(l)})}b(n,s),C()}function sv(n,e){I(e,!1),Zp(),xe(),$g(n,{}),C()}export{qa as A,Gt as B,ls as C,ro as D,Pe as E,mc as I,he as M,lt as P,df as R,of as S,$s as T,Ir as U,Ja as V,sv as _,Va as a,Rt as b,W_ as c,St as d,dn as e,X_ as f,be as g,ct as h,ui as i,hy as j,nv as k,_n as l,iy as m,na as n,py as o,vy as p,H_ as q,q_ as r,Y_ as s,rf as u,Mn as v,nn as w};
